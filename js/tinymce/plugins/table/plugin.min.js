/**
 * Copyright (c) Tiny Technologies, Inc. All rights reserved.
 * Licensed under the LGPL or a commercial license.
 * For LGPL see License.txt in the project root for license information.
 * For commercial licenses see https://www.tiny.cloud/
 *
 * Version: 5.8.1 (2021-05-20)
 */
!function(){"use strict";var e,n=function(t){return function(n){return n=typeof(e=n),(null===e?"null":"object"==n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n)===t;var e}},t=function(e){return function(n){return typeof n===e}},g=n("string"),p=n("object"),l=n("array"),r=t("boolean"),u=(e=undefined,function(n){return e===n}),c=function(n){return!(null===(n=n)||n===undefined)},a=t("function"),i=t("number"),y=function(){},f=function(n){return function(){return n}},s=function(n){return n};function w(r){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=o.concat(n);return r.apply(null,t)}}var h=function(e){return function(n){return!e(n)}},d=f(!1),C=f(!0),o=function(){return m},m=(Mc=function(n){return n.isNone()},{fold:function(n,e){return n()},is:d,isSome:d,isNone:C,getOr:sr=function(n){return n},getOrThunk:Sr=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:f(null),getOrUndefined:f(undefined),or:sr,orThunk:Sr,map:o,each:y,bind:o,exists:d,forall:C,filter:o,equals:Mc,equals_:Mc,toArray:function(){return[]},toString:f("none()")}),b=function(t){var n=f(t),e=function(){return o},r=function(n){return n(t)},o={fold:function(n,e){return e(t)},is:function(n){return t===n},isSome:C,isNone:d,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(n){return b(n(t))},each:function(n){n(t)},bind:r,exists:r,forall:r,filter:function(n){return n(t)?o:m},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(n){return n.is(t)},equals_:function(n,e){return n.fold(d,function(n){return e(t,n)})}};return o},x={some:b,none:o,from:function(n){return null===n||n===undefined?m:b(n)}},v=Array.prototype.slice,S=Array.prototype.indexOf,T=Array.prototype.push,R=function(n,e){return-1<S.call(n,e)},D=function(n,e){for(var t=0,r=n.length;t<r;t++)if(e(n[t],t))return!0;return!1},O=function(n,e){for(var t=[],r=0;r<n;r++)t.push(e(r));return t},A=function(n,e){for(var t=n.length,r=new Array(t),o=0;o<t;o++){var u=n[o];r[o]=e(u,o)}return r},k=function(n,e){for(var t=0,r=n.length;t<r;t++)e(n[t],t)},I=function(n,e){for(var t=[],r=0,o=n.length;r<o;r++){var u=n[r];e(u,r)&&t.push(u)}return t},B=function(n,e,t){return function(n,e){for(var t=n.length-1;0<=t;t--)e(n[t],t)}(n,function(n){t=e(t,n)}),t},E=function(n,e,t){return k(n,function(n){t=e(t,n)}),t},P=function(n,e){return function(n,e,t){for(var r=0,o=n.length;r<o;r++){var u=n[r];if(e(u,r))return x.some(u);if(t(u,r))break}return x.none()}(n,e,d)},M=function(n,e){for(var t=0,r=n.length;t<r;t++)if(e(n[t],t))return x.some(t);return x.none()},N=function(n){for(var e=[],t=0,r=n.length;t<r;++t){if(!l(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);T.apply(e,n[t])}return e},j=function(n,e){return N(A(n,e))},W=function(n,e){for(var t=0,r=n.length;t<r;++t)if(!0!==e(n[t],t))return!1;return!0},L=function(n,e){for(var t={},r=0,o=n.length;r<o;r++){var u=n[r];t[String(u)]=e(u,r)}return t},z=function(n){return[n]},_=function(n,e){return 0<=e&&e<n.length?x.some(n[e]):x.none()},F=function(n){return _(n,0)},H=function(n){return _(n,n.length-1)},q=function(n,e){for(var t=0;t<n.length;t++){var r=e(n[t],t);if(r.isSome())return r}return x.none()},V=function(){return(V=Object.assign||function V(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}).apply(this,arguments)};function U(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),o=0,e=0;e<t;e++)for(var u=arguments[e],i=0,c=u.length;i<c;i++,o++)r[o]=u[i];return r}var K,$=function(t){var r,o=!1;return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return o||(o=!0,r=t.apply(null,n)),r}},G=function(n,e){var t=function(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(r.test(e))return r}return undefined}(n,e);if(!t)return{major:0,minor:0};n=function(n){return Number(e.replace(t,"$"+n))};return Y(n(1),n(2))},X=function(){return Y(0,0)},Y=function(n,e){return{major:n,minor:e}},J={nu:Y,detect:function(n,e){e=String(e).toLowerCase();return 0===n.length?X():G(n,e)},unknown:X},Q=function(n,e){var t=String(e).toLowerCase();return P(n,function(n){return n.search(t)})},Z=function(n,t){return Q(n,t).map(function(n){var e=J.detect(n.versionRegexes,t);return{current:n.name,version:e}})},nn=function(n,t){return Q(n,t).map(function(n){var e=J.detect(n.versionRegexes,t);return{current:n.name,version:e}})},en=function(n,e,t){return""===e||n.length>=e.length&&n.substr(t,t+e.length)===e},tn=function(n,e){return-1!==n.indexOf(e)},rn=function(n,e){return en(n,e,0)},on=function(n,e){return en(n,e,n.length-e.length)},un=(K=/^\s+|\s+$/g,function(n){return n.replace(K,"")}),cn=function(n){return 0<n.length},ln=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,an=function(e){return function(n){return tn(n,e)}},fn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return tn(n,"edge/")&&tn(n,"chrome")&&tn(n,"safari")&&tn(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ln],search:function(n){return tn(n,"chrome")&&!tn(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return tn(n,"msie")||tn(n,"trident")}},{name:"Opera",versionRegexes:[ln,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:an("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:an("firefox")},{name:"Safari",versionRegexes:[ln,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(tn(n,"safari")||tn(n,"mobile/"))&&tn(n,"applewebkit")}}],sn=[{name:"Windows",search:an("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return tn(n,"iphone")||tn(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:an("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:an("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:an("linux"),versionRegexes:[]},{name:"Solaris",search:an("sunos"),versionRegexes:[]},{name:"FreeBSD",search:an("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:an("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],dn={browsers:f(fn),oses:f(sn)},mn="Firefox",gn=function(n){var e=n.current,t=n.version,n=function(n){return function(){return e===n}};return{current:e,version:t,isEdge:n("Edge"),isChrome:n("Chrome"),isIE:n("IE"),isOpera:n("Opera"),isFirefox:n(mn),isSafari:n("Safari")}},pn={unknown:function(){return gn({current:undefined,version:J.unknown()})},nu:gn,edge:f("Edge"),chrome:f("Chrome"),ie:f("IE"),opera:f("Opera"),firefox:f(mn),safari:f("Safari")},hn="Windows",bn="Android",vn="Solaris",wn="FreeBSD",yn="ChromeOS",Cn=function(n){var e=n.current,t=n.version,n=function(n){return function(){return e===n}};return{current:e,version:t,isWindows:n(hn),isiOS:n("iOS"),isAndroid:n(bn),isOSX:n("OSX"),isLinux:n("Linux"),isSolaris:n(vn),isFreeBSD:n(wn),isChromeOS:n(yn)}},xn={unknown:function(){return Cn({current:undefined,version:J.unknown()})},nu:Cn,windows:f(hn),ios:f("iOS"),android:f(bn),linux:f("Linux"),osx:f("OSX"),solaris:f(vn),freebsd:f(wn),chromeos:f(yn)},Sn=function(n,e){var t,r,o=dn.browsers(),u=dn.oses(),i=Z(o,n).fold(pn.unknown,pn.nu),c=nn(u,n).fold(xn.unknown,xn.nu);return{browser:i,os:c,deviceType:(t=i,r=n,o=e,i=(u=c).isiOS()&&!0===/ipad/i.test(r),n=u.isiOS()&&!i,e=u.isiOS()||u.isAndroid(),c=e||o("(pointer:coarse)"),o=i||!n&&e&&o("(min-device-width:768px)"),e=n||e&&!o,r=t.isSafari()&&u.isiOS()&&!1===/safari/i.test(r),{isiPad:f(i),isiPhone:f(n),isTablet:f(o),isPhone:f(e),isTouch:f(c),isAndroid:u.isAndroid,isiOS:u.isiOS,isWebView:f(r),isDesktop:f(!e&&!o&&!r)})}},Tn=function(n){return window.matchMedia(n).matches},Rn=$(function(){return Sn(navigator.userAgent,Tn)}),Dn=function(n){if(null===n||n===undefined)throw new Error("Node cannot be null or undefined");return{dom:n}},On={fromHtml:function(n,e){e=(e||document).createElement("div");if(e.innerHTML=n,!e.hasChildNodes()||1<e.childNodes.length)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return Dn(e.childNodes[0])},fromTag:function(n,e){n=(e||document).createElement(n);return Dn(n)},fromText:function(n,e){n=(e||document).createTextNode(n);return Dn(n)},fromDom:Dn,fromPoint:function(n,e,t){return x.from(n.dom.elementFromPoint(e,t)).map(Dn)}},An=function(n,e){n=n.dom;if(1!==n.nodeType)return!1;if(n.matches!==undefined)return n.matches(e);if(n.msMatchesSelector!==undefined)return n.msMatchesSelector(e);if(n.webkitMatchesSelector!==undefined)return n.webkitMatchesSelector(e);if(n.mozMatchesSelector!==undefined)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},kn=function(n){return 1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount},In=function(n,e){return n.dom===e.dom},Bn=function(n,e){return t=n.dom,n=e.dom,e=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(t.compareDocumentPosition(n)&e);var t},En=function(n,e){return(Rn().browser.isIE()?Bn:function(n,e){n=n.dom,e=e.dom;return n!==e&&n.contains(e)})(n,e)},Pn=An,Mn=Object.keys,Nn=Object.hasOwnProperty,jn=function(n,e){for(var t=Mn(n),r=0,o=t.length;r<o;r++){var u=t[r];e(n[u],u)}},Wn=function(n,t){return Ln(n,function(n,e){return{k:e,v:t(n,e)}})},Ln=function(n,t){var r={};return jn(n,function(n,e){e=t(n,e);r[e.k]=e.v}),r},zn=function(n,e){var t,r,o,u,i={};return t=e,u=i,r=function(n,e){u[e]=n},o=y,jn(n,function(n,e){(t(n,e)?r:o)(n,e)}),i},_n=function(n,t){var r=[];return jn(n,function(n,e){r.push(t(n,e))}),r},Fn=function(n){return Mn(n).length},Hn=function(n,e){return qn(n,e)?x.from(n[e]):x.none()},qn=function(n,e){return Nn.call(n,e)},Vn=function(n,e){return qn(n,e)&&n[e]!==undefined&&null!==n[e]},Un=["tfoot","thead","tbody","colgroup"],Kn=function(n,e,t){return{element:n,rowspan:e,colspan:t}},$n=function(n,e,t){return{element:n,cells:e,section:t}},Gn=function(n,e,t){return{element:n,isNew:e,isLocked:t}},Xn=function(n,e){return{cells:n,section:e}},Yn=("undefined"!=typeof window||Function("return this;")(),function(n){return n.dom.nodeName.toLowerCase()}),Jn=function(n){return n.dom.nodeType},Qn=function(e){return function(n){return Jn(n)===e}},Zn=function(n){return 8===Jn(n)||"#comment"===Yn(n)},ne=Qn(1),ee=Qn(3),te=Qn(9),re=Qn(11),oe=function(e){return function(n){return ne(n)&&Yn(n)===e}},ue=function(n){return On.fromDom(n.dom.ownerDocument)},ie=function(n){return te(n)?n:ue(n)},ce=function(n){return x.from(n.dom.parentNode).map(On.fromDom)},le=function(n,e){for(var t=a(e)?e:d,r=n.dom,o=[];null!==r.parentNode&&r.parentNode!==undefined;){var u=r.parentNode,i=On.fromDom(u);if(o.push(i),!0===t(i))break;r=u}return o},ae=function(n){return x.from(n.dom.previousSibling).map(On.fromDom)},fe=function(n){return x.from(n.dom.nextSibling).map(On.fromDom)},se=function(n){return A(n.dom.childNodes,On.fromDom)},de=function(n,e){n=n.dom.childNodes;return x.from(n[e]).map(On.fromDom)},n=a(Element.prototype.attachShadow)&&a(Node.prototype.getRootNode),me=f(n),ge=n?function(n){return On.fromDom(n.dom.getRootNode())}:ie,pe=function(n){var e=ge(n);return re(n=e)&&c(n.dom.host)?x.some(e):x.none()},he=function(n){return On.fromDom(n.dom.host)},be=function(n){return c(n.dom.shadowRoot)},ve=function(n){var e=ee(n)?n.dom.parentNode:n.dom;if(e===undefined||null===e||null===e.ownerDocument)return!1;var t,r,o=e.ownerDocument;return pe(On.fromDom(e)).fold(function(){return o.body.contains(e)},(t=ve,r=he,function(n){return t(r(n))}))},we=function(n){n=n.dom.body;if(null===n||n===undefined)throw new Error("Body is not available yet");return On.fromDom(n)},ye=function(n,e){var t=[];return k(se(n),function(n){t=(t=e(n)?t.concat([n]):t).concat(ye(n,e))}),t},Ce=function(n,e,t){return r=function(n){return An(n,e)},I(le(n,t),r);var r},xe=function(n,e){return t=function(n){return An(n,e)},I(se(n),t);var t},Se=function(n,e){return function(n,e){e=e===undefined?document:e.dom;return kn(e)?[]:A(e.querySelectorAll(n),On.fromDom)}(e,n)};function Te(n,e,t,r,o){return n(t,r)?x.some(t):a(o)&&o(t)?x.none():e(t,r,o)}var Re,De,Oe,Ae=function(n,e,t){for(var r=n.dom,o=a(t)?t:d;r.parentNode;){var r=r.parentNode,u=On.fromDom(r);if(e(u))return x.some(u);if(o(u))break}return x.none()},ke=function(n,e,t){return Ae(n,function(n){return An(n,e)},t)},Ie=function(n,e){return t=function(n){return An(n,e)},P(n.dom.childNodes,function(n){return t(On.fromDom(n))}).map(On.fromDom);var t},Be=function(n,e){return function(n,e){e=e===undefined?document:e.dom;return kn(e)?x.none():x.from(e.querySelector(n)).map(On.fromDom)}(e,n)},Ee=function(n,e,t){return Te(An,ke,n,e,t)},Pe=function(n,e,t){if(!(g(t)||r(t)||i(t)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",t,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(e,t+"")},Me=function(n,e,t){Pe(n.dom,e,t)},Ne=function(n,e){var t=n.dom;jn(e,function(n,e){Pe(t,e,n)})},je=function(n,e){e=n.dom.getAttribute(e);return null===e?undefined:e},We=function(n,e){return x.from(je(n,e))},Le=function(n,e){n.dom.removeAttribute(e)},ze=function(n){return E(n.dom.attributes,function(n,e){return n[e.name]=e.value,n},{})},_e=function(n){return n.style!==undefined&&a(n.style.getPropertyValue)},Fe=function(n,e,t){if(!g(t))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",t,":: Element ",n),new Error("CSS value must be a string: "+t);_e(n)&&n.style.setProperty(e,t)},He=function(n,e,t){n=n.dom;Fe(n,e,t)},qe=function(n,e){var t=n.dom;jn(e,function(n,e){Fe(t,e,n)})},Ve=function(n,e){var t=n.dom,r=window.getComputedStyle(t).getPropertyValue(e);return""!==r||ve(n)?r:Ue(t,e)},Ue=function(n,e){return _e(n)?n.style.getPropertyValue(e):""},Ke=function(n,e){n=n.dom,e=Ue(n,e);return x.from(e).filter(function(n){return 0<n.length})},$e=function(n,e){var t=n.dom;e=e,_e(t=t)&&t.style.removeProperty(e),We(n,"style").map(un).is("")&&Le(n,"style")},Ge=function(n,e,t){return void 0===t&&(t=0),We(n,e).map(function(n){return parseInt(n,10)}).getOr(t)},Xe=function(n,e){return Ge(n,e,1)},Ye=function(n){return 1<Xe(n,"colspan")},Je=function(n){return 1<Xe(n,"rowspan")},Qe=function(n,e){return parseInt(Ve(n,e),10)},Ze=f(10),nt=f(10),et=function(n,e){return tt(n,e,C)},tt=function(n,e,t){return j(se(n),function(n){return An(n,e)?t(n)?[n]:[]:tt(n,e,t)})},rt=function(n,e){return function(n,e,t){if((t=void 0===t?d:t)(e))return x.none();if(R(n,Yn(e)))return x.some(e);return ke(e,n.join(","),function(n){return An(n,"table")||t(n)})}(["td","th"],n,e)},ot=function(n){return et(n,"th,td")},ut=function(n){return An(n,"colgroup")?xe(n,"col"):j(lt(n),function(n){return xe(n,"col")})},it=function(n,e){return Ee(n,"table",e)},ct=function(n){return et(n,"tr")},lt=function(n){return it(n).fold(f([]),function(n){return xe(n,"colgroup")})},at=function(n,t){return A(n,function(n){if("colgroup"===Yn(n)){var e=A(ut(n),function(n){var e=Ge(n,"span",1);return Kn(n,1,e)});return $n(n,e,"colgroup")}e=A(ot(n),function(n){var e=Ge(n,"rowspan",1),t=Ge(n,"colspan",1);return Kn(n,e,t)});return $n(n,e,t(n))})},ft=function(n){return ce(n).map(function(n){n=Yn(n);return R(Un,n)?n:"tbody"}).getOr("tbody")},st=function(n){var e=ct(n),e=U(lt(n),e);return at(e,ft)},dt=function(n,e,t){var r=n.cells,o=r.slice(0,e),e=r.slice(e),e=o.concat(t).concat(e);return pt(n,e)},mt=function(n,e,t){return dt(n,e,[t])},gt=function(n,e,t){n.cells[e]=t},pt=function(n,e){return Xn(e,n.section)},ht=function(n,e){var t=n.cells,e=A(t,e);return Xn(e,n.section)},bt=function(n,e){return n.cells[e]},vt=function(n,e){return bt(n,e).element},wt=function(n){return n.cells.length},yt=function(n){n=function(n,e){for(var t=[],r=[],o=0,u=n.length;o<u;o++){var i=n[o];(e(i,o)?t:r).push(i)}return{pass:t,fail:r}}(n,function(n){return"colgroup"===n.section});return{rows:n.fail,cols:n.pass}},Ct="data-snooker-locked-cols",xt=function(n){return We(n,Ct).bind(function(n){return x.from(n.match(/\d+/g))}).map(function(n){return L(n,C)})},St=function(n){n=E(yt(n).rows,function(t,n){return k(n.cells,function(n,e){n.isLocked&&(t[e]=!0)}),t},{});return function(n,e){n=v.call(n,0);return n.sort(e),n}(_n(n,function(n,e){return parseInt(e,10)}))},Tt=function(n,e){n=j(n.all,function(n){return n.cells});return I(n,e)},Rt=function(n){var l={},e=[],t={},a=F(n).map(function(n){return n.element}).bind(it).bind(xt).getOr({}),u=0,f=0,s=0;return k(n,function(n){var c,r,o;"colgroup"===n.section?(r={},o=0,k(n.cells,function(e){var t=e.colspan;O(t,function(n){n=o+n;r[n]={element:e.element,colspan:t,column:n}}),o+=t}),t=r):(c=[],k(n.cells,function(n){for(var e=0;l[s+","+e]!==undefined;)e++;for(var t=Vn(a,e.toString()),r={element:n.element,rowspan:n.rowspan,colspan:n.colspan,row:s,column:e,isLocked:t},o=0;o<n.colspan;o++)for(var u=0;u<n.rowspan;u++){var i=e+o;l[s+u+","+i]=r,f=Math.max(f,i+1)}c.push(r)}),u++,e.push($n(n.element,c,n.section)),s++)}),{grid:{rows:u,columns:f},access:l,all:e,columns:t}},Dt={fromTable:function(n){n=st(n);return Rt(n)},generate:Rt,getAt:function(n,e,t){t=n.access[e+","+t];return t!==undefined?x.some(t):x.none()},findItem:function(n,e,t){n=Tt(n,function(n){return t(e,n.element)});return 0<n.length?x.some(n[0]):x.none()},filterItems:Tt,justCells:function(n){return j(n.all,function(n){return n.cells})},justColumns:function(n){return n=n.columns,_n(n,function(n){return n})},hasColumns:function(n){return 0<Mn(n.columns).length},getColumnAt:function(n,e){return x.from(n.columns[e])}},Ot=function(n,e){var t=e.column,r=e.column+e.colspan-1,o=e.row,e=e.row+e.rowspan-1;return t<=n.finishCol&&r>=n.startCol&&o<=n.finishRow&&e>=n.startRow},At=function(n,e){return e.column>=n.startCol&&e.column+e.colspan-1<=n.finishCol&&e.row>=n.startRow&&e.row+e.rowspan-1<=n.finishRow},kt=function(n,e,t){var e=Dt.findItem(n,e,In),r=Dt.findItem(n,t,In);return e.bind(function(t){return r.map(function(n){return e=t,n=n,{startRow:Math.min(e.row,n.row),startCol:Math.min(e.column,n.column),finishRow:Math.max(e.row+e.rowspan-1,n.row+n.rowspan-1),finishCol:Math.max(e.column+e.colspan-1,n.column+n.colspan-1)};var e})})},It=function(e,n,t){return kt(e,n,t).bind(function(n){return function(n,e){for(var t=!0,r=w(At,e),o=e.startRow;o<=e.finishRow;o++)for(var u=e.startCol;u<=e.finishCol;u++)t=t&&Dt.getAt(n,o,u).exists(r);return t?x.some(e):x.none()}(e,n)})},Bt=function(e,n,t){return kt(e,n,t).map(function(n){n=Dt.filterItems(e,w(Ot,n));return A(n,function(n){return n.element})})},Et=function(n,e){return Dt.findItem(n,e,function(n,e){return En(e,n)}).map(function(n){return n.element})},Pt=function(e,u,i){return it(e).bind(function(n){var t,r,o,n=Nt(n);return t=n,r=u,o=i,Dt.findItem(t,e,In).bind(function(n){var e=0<r?n.row+n.rowspan-1:n.row,n=0<o?n.column+n.colspan-1:n.column;return Dt.getAt(t,e+r,n+o).map(function(n){return n.element})})})},Mt=function(n,e,t,r,o){var u=Nt(n),e=In(n,t)?x.some(e):Et(u,e),i=In(n,o)?x.some(r):Et(u,r);return e.bind(function(e){return i.bind(function(n){return Bt(u,e,n)})})},Nt=Dt.fromTable,jt=function(e,t){ce(e).each(function(n){n.dom.insertBefore(t.dom,e.dom)})},Wt=function(n,e){fe(n).fold(function(){ce(n).each(function(n){zt(n,e)})},function(n){jt(n,e)})},Lt=function(e,t){de(e,0).fold(function(){zt(e,t)},function(n){e.dom.insertBefore(t.dom,n.dom)})},zt=function(n,e){n.dom.appendChild(e.dom)},_t=function(n,e){jt(n,e),zt(e,n)},Ft=function(t,r){k(r,function(n,e){e=0===e?t:r[e-1];Wt(e,n)})},Ht=function(e,n){k(n,function(n){zt(e,n)})},qt=function(n){n.dom.textContent="",k(se(n),function(n){Vt(n)})},Vt=function(n){n=n.dom;null!==n.parentNode&&n.parentNode.removeChild(n)},Ut=function(n){var e,t=se(n);0<t.length&&(e=n,k(t,function(n){jt(e,n)})),Vt(n)},Kt=(Re=ee,De="text",{get:function(n){if(!Re(n))throw new Error("Can only get "+De+" value of a "+De+" node");return Oe(n).getOr("")},getOption:Oe=function(n){return Re(n)?x.from(n.dom.nodeValue):x.none()},set:function(n,e){if(!Re(n))throw new Error("Can only set raw "+De+" value of a "+De+" node");n.dom.nodeValue=e}}),$t=function(n){return Kt.get(n)},Gt=function(n){return Kt.getOption(n)},Xt=function(n,e){return Kt.set(n,e)},Yt=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Jt(){return{up:f({selector:ke,closest:Ee,predicate:Ae,all:le}),down:f({selector:Se,predicate:ye}),styles:f({get:Ve,getRaw:Ke,set:He,remove:$e}),attrs:f({get:je,set:Me,remove:Le,copyTo:function(n,e){n=ze(n);Ne(e,n)}}),insert:f({before:jt,after:Wt,afterAll:Ft,append:zt,appendAll:Ht,prepend:Lt,wrap:_t}),remove:f({unwrap:Ut,remove:Vt}),create:f({nu:On.fromTag,clone:function(n){return On.fromDom(n.dom.cloneNode(!1))},text:On.fromText}),query:f({comparePosition:function(n,e){return n.dom.compareDocumentPosition(e.dom)},prevSibling:ae,nextSibling:fe}),property:f({children:se,name:Yn,parent:ce,document:function(n){return ie(n).dom},isText:ee,isComment:Zn,isElement:ne,isSpecial:function(n){n=Yn(n);return R(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],n)},getText:$t,setText:Xt,isBoundary:function(n){return!!ne(n)&&("body"===Yn(n)||R(Yt,Yn(n)))},isEmptyTag:function(n){return!!ne(n)&&R(["br","img","hr","input"],Yn(n))},isNonEditable:function(n){return ne(n)&&"false"===je(n,"contenteditable")}}),eq:In,is:Pn}}var Qt=function(t,r,n,e){n=r(t,n);return B(e,function(n,e){e=r(t,e);return Zt(t,n,e)},n)},Zt=function(e,n,t){return n.bind(function(n){return t.filter(w(e.eq,n))})},nr=function(n,e,t){return 0<t.length?Qt(n,e,t[0],t.slice(1)):x.none()},er=function(e,n,t,r){void 0===r&&(r=d);var o=[n].concat(e.up().all(n)),n=[t].concat(e.up().all(t)),t=function(e){return M(e,r).fold(function(){return e},function(n){return e.slice(0,n+1)})},o=t(o),u=t(n),n=P(o,function(n){return D(u,w(e.eq,n))});return{firstpath:o,secondpath:u,shared:n}},tr=Jt(),rr=function(t,n){return nr(tr,function(n,e){return t(e)},n)},or=function(n){return ke(n,"table")},ur=function(u,i,c){var l=function(e){return function(n){return c!==undefined&&c(n)||In(n,e)}};return In(u,i)?x.some({boxes:x.some([u]),start:u,finish:i}):or(u).bind(function(o){return or(i).bind(function(r){if(In(o,r))return x.some({boxes:function(n,e,t){n=Nt(n);return Bt(n,e,t)}(o,u,i),start:u,finish:i});if(En(o,r)){var n=0<(e=Ce(i,"td,th",l(o))).length?e[e.length-1]:i;return x.some({boxes:Mt(o,u,o,i,r),start:u,finish:n})}if(En(r,o)){var e=0<(e=Ce(u,"td,th",l(r))).length?e[e.length-1]:u;return x.some({boxes:Mt(r,u,o,i,r),start:u,finish:e})}return er(tr,u,i,t).shared.bind(function(n){return Ee(n,"table",c).bind(function(n){var e=Ce(i,"td,th",l(n)),t=0<e.length?e[e.length-1]:i,e=Ce(u,"td,th",l(n)),e=0<e.length?e[e.length-1]:u;return x.some({boxes:Mt(n,u,o,i,r),start:e,finish:t})})});var t})})},ir=function(n,e){e=Se(n,e);return 0<e.length?x.some(e):x.none()},cr=function(n,e,r){return Be(n,e).bind(function(t){return Be(n,r).bind(function(e){return rr(or,[t,e]).map(function(n){return{first:t,last:e,table:n}})})})},lr=function(n,e,t,r,o){return u=o,P(n,function(n){return An(n,u)}).bind(function(n){return Pt(n,e,t).bind(function(n){return t=r,ke(e=n,"table").bind(function(n){return Be(n,t).bind(function(n){return ur(n,e).bind(function(e){return e.boxes.map(function(n){return{boxes:n,start:e.start,finish:e.finish}})})})});var e,t})});var u},ar=ir,fr=function(u,n,e){return cr(u,n,e).bind(function(t){var n=function(n){return In(u,n)},e="thead,tfoot,tbody,table",r=ke(t.first,e,n),o=ke(t.last,e,n);return r.bind(function(e){return o.bind(function(n){return In(e,n)?function(n,e,t){n=Nt(n);return It(n,e,t)}(t.table,t.first,t.last):x.none()})})})},t=function(i){if(!l(i))throw new Error("cases must be an array");if(0===i.length)throw new Error("there must be at least one case");var c=[],t={};return k(i,function(n,r){var e=Mn(n);if(1!==e.length)throw new Error("one and only one name per case");var o=e[0],u=n[o];if(t[o]!==undefined)throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!l(u))throw new Error("case arguments must be an array");c.push(o),t[o]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=t.length;if(e!==u.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+u.length+" ("+u+"), got "+e);return{fold:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(n.length!==i.length)throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+n.length);return n[r].apply(null,t)},match:function(n){var e=Mn(n);if(c.length!==e.length)throw new Error("Wrong number of arguments to match. Expected: "+c.join(",")+"\nActual: "+e.join(","));if(!W(c,function(n){return R(e,n)}))throw new Error("Not all branches were specified when using match. Specified: "+e.join(", ")+"\nRequired: "+c.join(", "));return n[o].apply(null,t)},log:function(n){console.log(n,{constructors:c,constructor:o,params:t})}}}}),t},sr=t([{none:[]},{multiple:["elements"]},{single:["element"]}]),dr=function(n,e,t,r){return n.fold(e,t,r)},mr=sr.none,gr=sr.multiple,pr=sr.single,hr=tinymce.util.Tools.resolve("tinymce.PluginManager"),br=function(n,e){return On.fromDom(n.dom.cloneNode(e))},vr=function(n){return br(n,!1)},wr=function(n){return br(n,!0)},yr=function(n,e){e=function(n,e){e=On.fromTag(e),n=ze(n);return Ne(e,n),e}(n,e),n=se(wr(n));return Ht(e,n),e},Cr=function(n){for(var e=[],t=function(n){e.push(n)},r=0;r<n.length;r++)n[r].each(t);return e},xr=function(n,e){return n?x.some(e):x.none()},Sr=function(t,r){var n=function(n){var e=r(n);if(e<=0||null===e){n=Ve(n,t);return parseFloat(n)||0}return e},o=function(t,n){return E(n,function(n,e){e=Ve(t,e),e=e===undefined?0:parseInt(e,10);return isNaN(e)?n:n+e},0)};return{set:function(n,e){if(!i(e)&&!e.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+e);n=n.dom;_e(n)&&(n.style[t]=e+"px")},get:n,getOuter:n,aggregate:o,max:function(n,e,t){t=o(n,t);return t<e?e-t:0}}},Tr=Sr("width",function(n){return n.dom.offsetWidth}),Rr=function(n){return Tr.get(n)},Dr=function(n){return Tr.getOuter(n)},Or=function(t,r){void 0===r&&(r=C);var n=t.grid,e=O(n.columns,s),o=O(n.rows,s);return A(e,function(e){return Ar(function(){return j(o,function(n){return Dt.getAt(t,n,e).filter(function(n){return n.column===e}).toArray()})},function(n){return 1===n.colspan&&r(n.element)},function(){return Dt.getAt(t,0,e)})})},Ar=function(n,e,t){var r=n();return P(r,e).orThunk(function(){return x.from(r[0]).orThunk(t)}).map(function(n){return n.element})},kr=function(t){var n=t.grid,e=O(n.rows,s),r=O(n.columns,s);return A(e,function(e){return Ar(function(){return j(r,function(n){return Dt.getAt(t,e,n).filter(function(n){return n.row===e}).fold(f([]),function(n){return[n]})})},function(n){return 1===n.rowspan},function(){return Dt.getAt(t,e,0)})})},Ir=function(e,t){if(t<0||t>=e.length-1)return x.none();var n=e[t].fold(function(){var n=function(n){n=v.call(n,0);return n.reverse(),n}(e.slice(0,t));return q(n,function(n,e){return n.map(function(n){return{value:n,delta:e+1}})})},function(n){return x.some({value:n,delta:0})}),r=e[t+1].fold(function(){var n=e.slice(t+1);return q(n,function(n,e){return n.map(function(n){return{value:n,delta:e+1}})})},function(n){return x.some({value:n,delta:1})});return n.bind(function(t){return r.map(function(n){var e=n.delta+t.delta;return Math.abs(n.value-t.value)/e})})},Br=function(e,t){return function(n){return"rtl"===Er(n)?t:e}},Er=function(n){return"rtl"===Ve(n,"direction")?"rtl":"ltr"},Pr=Sr("height",function(n){var e=n.dom;return ve(n)?e.getBoundingClientRect().height:e.offsetHeight}),Mr=function(n){return Pr.get(n)},Nr=function(n){return Pr.getOuter(n)},jr=function(t,r){return{left:t,top:r,translate:function(n,e){return jr(t+n,r+e)}}},Wr=jr,Lr=function(n,e){return n!==undefined?n:e!==undefined?e:0},zr=function(n){var e=n.dom.ownerDocument,t=e.body,r=e.defaultView,o=e.documentElement;if(t===n.dom)return Wr(t.offsetLeft,t.offsetTop);var u=Lr(null==r?void 0:r.pageYOffset,o.scrollTop),e=Lr(null==r?void 0:r.pageXOffset,o.scrollLeft),r=Lr(o.clientTop,t.clientTop),t=Lr(o.clientLeft,t.clientLeft);return _r(n).translate(e-t,u-r)},_r=function(n){var e=n.dom,t=e.ownerDocument.body;return t===e?Wr(t.offsetLeft,t.offsetTop):ve(n)?function(n){n=n.getBoundingClientRect();return Wr(n.left,n.top)}(e):Wr(0,0)},Fr=function(n,e){return{row:n,y:e}},Hr=function(n,e){return{col:n,x:e}},qr=function(n){return zr(n).left+Dr(n)},Vr=function(n){return zr(n).left},Ur=function(n,e){return Hr(n,Vr(e))},Kr=function(n,e){return Hr(n,qr(e))},$r=function(n){return zr(n).top},Gr=function(n,e){return Fr(n,$r(e))},Xr=function(n,e){return Fr(n,$r(e)+Nr(e))},Yr=function(t,e,r){if(0===r.length)return[];var n=A(r.slice(1),function(n,e){return n.map(function(n){return t(e,n)})}),o=r[r.length-1].map(function(n){return e(r.length-1,n)});return n.concat([o])},Jr={delta:s,positions:function(n){return Yr(Gr,Xr,n)},edge:$r},Qr=Br({delta:s,edge:Vr,positions:function(n){return Yr(Ur,Kr,n)}},{delta:function(n){return-n},edge:qr,positions:function(n){return Yr(Kr,Ur,n)}}),Zr={delta:function(n,e){return Qr(e).delta(n,e)},positions:function(n,e){return Qr(e).positions(n,e)},edge:function(n){return Qr(n).edge(n)}},no={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},eo=(Mc="[eE][+-]?[0-9]+",Mc=["Infinity",(o="[0-9]+")+"\\."+(ln=function(n){return"(?:"+n+")?"})(o)+ln(Mc),"\\."+o+ln(Mc),o+ln(Mc)].join("|"),new RegExp("^("+("[+-]?(?:"+Mc+")")+")(.*)$")),to=function(n,r){return x.from(eo.exec(n)).bind(function(n){var e,t=Number(n[1]),n=n[2];return e=n,D(r,function(n){return D(no[n],function(n){return e===n})})?x.some({value:t,unit:n}):x.none()})},ro=function(){var n=Rn().browser;return n.isIE()||n.isEdge()},oo=function(n,e,t){return function(n,e){n=parseFloat(n);return isNaN(n)?e:n}(Ve(n,e),t)},uo=function(n){return ro()?(t=(e=n).dom.getBoundingClientRect().height,"border-box"===Ve(e,"box-sizing")?t:t-oo(e,"padding-top",0)-oo(e,"padding-bottom",0)-(oo(e,"border-top-width",0)+oo(e,"border-bottom-width",0))):oo(n,"height",Mr(n));var e,t},io=function(n){return ro()?(t=(e=n).dom.getBoundingClientRect().width,"border-box"===Ve(e,"box-sizing")?t:t-oo(e,"padding-left",0)-oo(e,"padding-right",0)-(oo(e,"border-left-width",0)+oo(e,"border-right-width",0))):oo(n,"width",Rr(n));var e,t},co=/(\d+(\.\d+)?)%/,lo=/(\d+(\.\d+)?)px|em/,ao=function(n,e){var t=x.from(n.dom.offsetParent).map(On.fromDom).getOr(we(ue(n)));return e(n)/e(t)*100},fo=function(n,e){He(n,"width",e+"px")},so=function(n,e){He(n,"width",e+"%")},mo=function(n,e){He(n,"height",e+"px")},go=function(n,e,t,r){var o,u,i=parseInt(n,10);return on(n,"%")&&"table"!==Yn(e)?(o=i,u=t,t=r,e=it(r=e).map(function(n){n=u(n);return Math.floor(o/100*n)}).getOr(o),t(r,e),e):i},po=function(n){var e,t=Ke(e=n,"height").getOrThunk(function(){return uo(e)+"px"});return t?go(t,n,Mr,mo):Mr(n)},ho=function(n){return Ke(n,"width").fold(function(){return x.from(je(n,"width"))},function(n){return x.some(n)})},bo=function(n,e){return n/e.pixelWidth()*100},vo=function(e,t){return ho(e).fold(function(){var n=Rr(e);return bo(n,t)},function(n){return function(n,e,t){e=co.exec(e);if(null!==e)return parseFloat(e[1]);n=io(n);return bo(n,t)}(e,n,t)})},wo=function(e,t){return ho(e).fold(function(){return io(e)},function(n){return function(n,e,t){var r=lo.exec(e);if(null!==r)return parseInt(r[1],10);e=co.exec(e);return null===e?io(n):parseFloat(e[1])/100*t.pixelWidth()}(e,n,t)})},yo=function(n){return e="rowspan",po(n=n)/Xe(n,e);var e},Co=function(n,e,t){He(n,"width",e+t)},xo=function(n){return ao(n,Rr)+"%"},So=f(co),To=f(lo),Ro=oe("col"),Do=function(n,e,t){return Ke(n,e).fold(function(){return t(n)+"px"},function(n){return n})},Oo=function(n,e){return Do(n,"width",function(n){return Ro(n)?Rr(n):wo(n,e)})},Ao=function(n){return Do(n,"height",yo)},ko=function(n,e){return Ke(n,e).isSome()},Io=function(n,e,t,r,o,u){return n.filter(r).fold(function(){return u(Ir(t,e))},function(n){return o(n)})},Bo=function(n,e,r,o,u){var i=Or(n,function(n){return ko(n,"width")}),n=Dt.hasColumns(n)?A(Dt.justColumns(n),function(n){return x.from(n.element)}):i,c=[x.some(Zr.edge(e))].concat(A(Zr.positions(i,e),function(n){return n.map(function(n){return n.x})})),l=h(Ye);return A(n,function(n,t){return Io(n,t,c,l,function(n){if(!Ro(e=n)||ko(e,"width"))return r(n,u);var e,e=(e=i[t],n=s,e!==undefined&&null!==e?n(e):x.none());return Io(e,t,c,l,function(n){return o(x.some(Rr(n)))},o)},o)})},Eo=function(n){return n.map(function(n){return n+"px"}).getOr("")},Po=function(n,e,t){return Bo(n,e,wo,function(n){return n.getOrThunk(t.minCellWidth)},t)},Mo=function(n,e,t,r,o){var n=kr(n),u=[x.some(t.edge(e))].concat(A(t.positions(n,e),function(n){return n.map(function(n){return n.y})}));return A(n,function(n,e){return Io(n,e,u,h(Je),r,o)})},No=function(n){var e=n;return{get:function(){return e},set:function(n){e=n}}},jo=function(t){var n=function(){return Rr(t)},e=f(0);return{width:n,pixelWidth:n,getWidths:function(n,e){return Po(n,t,e)},getCellDelta:e,singleColumnWidth:f([0]),minCellWidth:e,setElementWidth:y,adjustTableWidth:y,isRelative:!0,label:"none"}},Wo=function(n,r){var t=No(parseFloat(n)),o=No(Rr(r));return{width:t.get,pixelWidth:o.get,getWidths:function(n,e){return Bo(n,r,vo,function(n){return n.fold(function(){return t.minCellWidth()},function(n){return n/t.pixelWidth()*100})},t=e);var t},getCellDelta:function(n){return n/o.get()*100},singleColumnWidth:function(n,e){return[100-n]},minCellWidth:function(){return Ze()/o.get()*100},setElementWidth:so,adjustTableWidth:function(n){var e=t.get(),e=e+n/100*e;so(r,e),t.set(e),o.set(Rr(r))},isRelative:!0,label:"percent"}},Lo=function(n,t){var e=No(n),r=e.get;return{width:r,pixelWidth:r,getWidths:function(n,e){return Po(n,t,e)},getCellDelta:s,singleColumnWidth:function(n,e){return[Math.max(Ze(),n+e)-n]},minCellWidth:Ze,setElementWidth:fo,adjustTableWidth:function(n){n=r()+n;fo(t,n),e.set(n)},isRelative:!1,label:"pixel"}},zo=function(e){return ho(e).fold(function(){return jo(e)},function(n){return function(n,e){var t=So().exec(e);if(null!==t)return Wo(t[1],n);e=To().exec(e);if(null!==e){var r=parseInt(e[1],10);return Lo(r,n)}r=Rr(n);return Lo(r,n)}(e,n)})},_o=Lo,Fo=Wo,Ho=function(n,e,t,r){for(var o=e.grid.columns,u=e.grid.rows,i=0;i<u;i++)for(var c=!1,l=0;l<o;l++)i<t.minRow||i>t.maxRow||l<t.minCol||l>t.maxCol||(Dt.getAt(e,i,l).filter(r).isNone()?function(n,e,t){n=n[t].element,t=On.fromTag("td");zt(t,On.fromTag("br")),(e?zt:Lt)(n,t)}(n,c,i):c=!0)},qo=function(n,e){var o,u,i,c,l,a,f,t=function(n){return An(n.element,e)},r=wr(n),s=st(r),d=zo(n),m=Dt.generate(s),g=(o=t,h=m.grid.columns,u=m.grid.rows,i=h,l=c=0,a=[],f=[],jn(m.access,function(n){var e,t,r;a.push(n),o(n)&&(f.push(n),t=(e=n.row)+n.rowspan-1,n=(r=n.column)+n.colspan-1,e<u?u=e:c<t&&(c=t),r<i?i=r:l<n&&(l=n))}),{minRow:u,minCol:i,maxRow:c,maxCol:l,allCells:a,selectedCells:f}),p="th:not("+e+"),td:not("+e+")",h=tt(r,"th,td",function(n){return An(n,p)});return k(h,Vt),Ho(s,m,g,t),function(n,e,t,r){jn(t.columns,function(n){(n.column<e.minCol||n.column>e.maxCol)&&Vt(n.element)});t=I(et(n,"tr"),function(n){return 0===n.dom.childElementCount});k(t,Vt),e.minCol!==e.maxCol&&e.minRow!==e.maxRow||k(et(n,"th,td"),function(n){Le(n,"rowspan"),Le(n,"colspan")}),Le(n,Ct),Le(n,"data-snooker-col-series"),zo(n).adjustTableWidth(r)}(r,g,m,function(n,e,t,r){if(0===r.minCol&&e.grid.columns===r.maxCol+1)return 0;e=Po(e,n,t),n=E(e,function(n,e){return n+e},0),n=E(e.slice(r.minCol,r.maxCol+1),function(n,e){return n+e},0)/n*t.pixelWidth()-t.pixelWidth();return t.getCellDelta(n)}(n,Dt.fromTable(n),d,g)),r},Vo=function(n){return"img"===Yn(n)?1:Gt(n).fold(function(){return se(n).length},function(n){return n.length})},Uo=["img","br"],Ko=function(n){return Gt(n).filter(function(n){return 0!==n.trim().length||-1<n.indexOf("\xa0")}).isSome()||R(Uo,Yn(n))},$o=function(n){return r=Ko,(o=function(n){for(var e=0;e<n.childNodes.length;e++){var t=On.fromDom(n.childNodes[e]);if(r(t))return x.some(t);t=o(n.childNodes[e]);if(t.isSome())return t}return x.none()})(n.dom);var r,o},Go=function(n){return Xo(n,Ko)},Xo=function(n,o){var u=function(n){for(var e=se(n),t=e.length-1;0<=t;t--){var r=e[t];if(o(r))return x.some(r);r=u(r);if(r.isSome())return r}return x.none()};return u(n)},Yo={scope:["row","col"]},Jo=function(){var n=On.fromTag("td");return zt(n,On.fromTag("br")),n},Qo=function(){return On.fromTag("col")},Zo=function(){return On.fromTag("colgroup")},nu=function(n,e,t){var r=yr(n,e);return jn(t,function(n,e){null===n?Le(r,e):Me(r,e,n)}),r},eu=function(n){return n},tu=function(n){return function(){return On.fromTag("tr",n.dom)}},ru=function(l,n,a){var f=function(n,e){!function(n,e){n=n.dom,e=e.dom;_e(n)&&_e(e)&&(e.style.cssText=n.style.cssText)}(n.element,e),$e(e,"height"),1!==n.colspan&&$e(e,"width")};return{col:function(n){var e=ue(n.element),e=On.fromTag(Yn(n.element),e.dom);return f(n,e),l(n.element,e),e},colgroup:Zo,row:tu(n),cell:function(n){var t,r,o,u,i,e=ue(n.element),c=On.fromTag(Yn(n.element),e.dom),e=a.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),e=0<e.length?(t=n.element,r=c,o=e,$o(t).map(function(n){var e=o.join(","),e=Ce(n,e,function(n){return In(n,t)});return B(e,function(n,e){e=vr(e);return Le(e,"contenteditable"),zt(n,e),e},r)}).getOr(r)):c;return zt(e,On.fromTag("br")),f(n,c),u=n.element,i=c,jn(Yo,function(e,t){return We(u,t).filter(function(n){return R(e,n)}).each(function(n){return Me(i,t,n)})}),l(n.element,c),c},replace:nu,gap:Jo}},ou=function(n){return{col:Qo,colgroup:Zo,row:tu(n),cell:Jo,replace:eu,gap:Jo}},uu=function(n){return A(n,On.fromDom)},iu=function(n){return n.nodeName.toLowerCase()},cu=function(n){return On.fromDom(n.getBody())},lu=function(n){return n.getBoundingClientRect().width},au=function(n){return n.getBoundingClientRect().height},fu=function(e){return function(n){return In(n,cu(e))}},su=function(n){return/^\d+(\.\d+)?$/.test(n)?n+"px":n},du=function(n){Le(n,"data-mce-style");var e=function(n){return Le(n,"data-mce-style")};k(ot(n),e),k(ut(n),e)},mu=function(n,e){e=n.dom.getStyle(e,"width")||n.dom.getAttrib(e,"width");return x.from(e).filter(cn)},gu=function(n){return/^(\d+(\.\d+)?)%$/.test(n)},pu=function(n){return On.fromDom(n.selection.getStart())},hu=function(n){return dr(n.get(),f([]),s,z)},an="data-mce-selected",fn="data-mce-first-selected",sn="data-mce-last-selected",bu={selected:an,selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:fn,firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:sn,lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},vu=function(n,e,t){return{element:t,mergable:(o=e,u=bu,dr(n.get(),x.none,function(e){return e.length<=1?x.none():fr(o,u.firstSelectedSelector,u.lastSelectedSelector).map(function(n){return{bounds:n,cells:e}})},x.none)),unmergable:(r=function(n,e){return We(n,e).exists(function(n){return 1<parseInt(n,10)})},0<(e=hu(e=n)).length&&W(e,function(n){return r(n,"rowspan")||r(n,"colspan")})?x.some(e):x.none()),selection:hu(n)};var r,o,u},wu=function(i,e,c,l){i.on("BeforeGetContent",function(t){var n=function(n){t.preventDefault(),it(n[0]).map(function(n){n=qo(n,"[data-mce-selected]");return du(n),[n]}).each(function(n){var e;t.content="text"===t.format?A(n,function(n){return n.dom.innerText}).join(""):(e=i,A(n,function(n){return e.selection.serializer.serialize(n.dom,{})}).join(""))})};!0===t.selection&&dr(e.get(),y,n,y)}),i.on("BeforeSetContent",function(u){!0===u.selection&&!0===u.paste&&x.from(i.dom.getParent(i.selection.getStart(),"th,td")).each(function(n){var o=On.fromDom(n);it(o).each(function(e){var n,t,r=I(function(n,e){e=(e||document).createElement("div");return e.innerHTML=n,se(On.fromDom(e))}(u.content),function(n){return"meta"!==Yn(n)});1===r.length&&(t=r[0],"table"===Yn(t))&&(u.preventDefault(),n=On.fromDom(i.getDoc()),n=ou(n),n={element:o,clipboard:r[0],generators:n},c.pasteCells(e,n).each(function(n){i.selection.setRng(n.rng),i.focus(),l.clear(e)}))})})})},Qn=t([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),yu=V({},Qn),Cu=function(n,e,r,o,u){var i=n.slice(0),n=(e=e,0===(n=n).length?yu.none():1===n.length?yu.only(0):0===e?yu.left(0,1):e===n.length-1?yu.right(e-1,e):0<e&&e<n.length-1?yu.middle(e-1,e,e+1):yu.none()),e=f(A(i,f(0)));return n.fold(e,function(n){return o.singleColumnWidth(i[n],r)},function(n,e){return u.calcLeftEdgeDeltas(i,n,e,r,o.minCellWidth(),o.isRelative)},function(n,e,t){return u.calcMiddleDeltas(i,n,e,t,r,o.minCellWidth(),o.isRelative)},function(n,e){return u.calcRightEdgeDeltas(i,n,e,r,o.minCellWidth(),o.isRelative)})},xu=function(n,e,t){for(var r=0,o=n;o<e;o++)r+=t[o]!==undefined?t[o]:0;return r},Su=function(n,e){return(Dt.hasColumns(n)?function(n,t){n=Dt.justColumns(n);return A(n,function(n,e){return{element:n.element,width:t[e],colspan:n.colspan}})}:function(n,t){n=Dt.justCells(n);return A(n,function(n){var e=xu(n.column,n.column+n.colspan,t);return{element:n.element,width:e,colspan:n.colspan}})})(n,e)},Tu=function(n,e,t){e=Su(n,e);k(e,function(n){t.setElementWidth(n.element,n.width)})},Ru=function(n,e,t,r,o){var u=Dt.fromTable(n),n=o.getCellDelta(e),i=o.getWidths(u,o),e=t===u.grid.columns-1,n=r.clampTableDelta(i,t,n,o.minCellWidth(),e),t=Cu(i,t,n,o,r),t=A(t,function(n,e){return n+i[e]});Tu(u,t,o),r.resizeTable(o.adjustTableWidth,n,e)},Du=function(n,t,r,e){var o,u=Dt.fromTable(n),i=Mo(u,n,e,yo,function(n){return n.getOrThunk(nt)}),e=A(i,function(n,e){return r===e?Math.max(t+n,nt()):n}),i=function(n,t){n=Dt.justCells(n);return A(n,function(n){var e=xu(n.row,n.row+n.rowspan,t);return{element:n.element,height:e,rowspan:n.rowspan}})}(u,e),u=(o=e,A(u.all,function(n,e){return{element:n.element,height:o[e]}}));k(u,function(n){mo(n.element,n.height)}),k(i,function(n){mo(n.element,n.height)});e=B(e,function(n,e){return n+e},0);mo(n,e)},Ou=function(n){return A(n,f(0))},Au=function(n,e,t,r,o){return o(n.slice(0,e)).concat(r).concat(o(n.slice(t)))},n=function(o){return function(n,e,t,r){if(o(t)){r=Math.max(r,n[e]-Math.abs(t)),e=Math.abs(r-n[e]);return 0<=t?e:-e}return t}},ku=n(function(n){return n<0}),Iu=n(C),Bu=function(){var i=function(n,t,e,r){var o=(100+e)/100,u=Math.max(r,(n[t]+e)/o);return A(n,function(n,e){return(e===t?u:n/o)-n})},c=function(n,e,t,r,o,u){return u?i(n,e,r,o):function(n,e,t,r,o){o=ku(n,e,r,o);return Au(n,e,t+1,[o,0],Ou)}(n,e,t,r,o)};return{resizeTable:function(n,e){return n(e)},clampTableDelta:ku,calcLeftEdgeDeltas:c,calcMiddleDeltas:function(n,e,t,r,o,u,i){return c(n,t,r,o,u,i)},calcRightEdgeDeltas:function(n,e,t,r,o,u){if(u)return i(n,t,r,o);o=ku(n,t,r,o);return Ou(n.slice(0,t)).concat([o])},calcRedestributedWidths:function(n,e,t,r){if(r){var o=(e+t)/e,e=A(n,function(n){return n/o});return{delta:100*o-100,newSizes:e}}return{delta:t,newSizes:n}}}},Eu=function(){var i=function(n,e,t,r,o){o=Iu(n,0<=r?t:e,r,o);return Au(n,e,t+1,[o,-o],Ou)};return{resizeTable:function(n,e,t){t&&n(e)},clampTableDelta:function(n,e,t,r,o){if(o){if(0<=t)return t;o=E(n,function(n,e){return n+e-r},0);return Math.max(-o,t)}return ku(n,e,t,r)},calcLeftEdgeDeltas:i,calcMiddleDeltas:function(n,e,t,r,o,u){return i(n,t,r,o,u)},calcRightEdgeDeltas:function(n,e,t,r,o,u){if(u)return Ou(n);r/=n.length;return A(n,f(r))},calcRedestributedWidths:function(n,e,t,r){return{delta:0,newSizes:n}}}},Pu=function(n,e){var t=x.from(n.dom.documentElement).map(On.fromDom).getOr(n);return{parent:f(t),view:f(n),origin:f(Wr(0,0)),isResizable:e}},Mu=function(n,e,t){return{parent:f(e),view:f(n),origin:f(Wr(0,0)),isResizable:t}},Nu=t([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),ju=function(n,e,t){var r=t.substring(0,t.length-n.length),n=parseFloat(r);return r===n.toString()?e(n):Nu.invalid(t)},Wu=V(V({},Nu),{from:function(n){return on(n,"%")?ju("%",Nu.percent,n):on(n,"px")?ju("px",Nu.pixels,n):Nu.invalid(n)}}),Lu=function(n,r,o){return n.fold(function(){return r},function(n){return t=(e=n)/o,A(r,function(n){return Wu.from(n).fold(function(){return n},function(n){return n*t+"px"},function(n){return n/100*e+"px"})});var e,t},function(n){return e=o,A(r,function(n){return Wu.from(n).fold(function(){return n},function(n){return n/e*100+"%"},function(n){return n+"%"})});var e})},zu=function(n,e,t){t=Wu.from(t),e=W(n,function(n){return"0px"===n})?function(n,e){n=n.fold(function(){return f("")},function(n){return f(n/e+"px")},function(){return f(100/e+"%")});return O(e,n)}(t,n.length):Lu(t,n,e);return Fu(e)},_u=function(n,e){return 0===n.length?e:B(n,function(n,e){return Wu.from(e).fold(f(0),s,s)+n},0)},Fu=function(n){if(0===n.length)return n;var e,t=B(n,function(n,e){var t=Wu.from(e).fold(function(){return{value:e,remainder:0}},function(n){return e=n,t="px",{value:(n=Math.floor(e))+t,remainder:e-n};var e,t},function(n){return{value:n+"%",remainder:0}});return{output:[t.value].concat(n.output),remainder:n.remainder+t.remainder}},{output:[],remainder:0}),n=t.output;return n.slice(0,n.length-1).concat([(n=n[n.length-1],e=Math.round(t.remainder),Wu.from(n).fold(f(n),function(n){return n+e+"px"},function(n){return n+e+"%"}))])},Hu=Wu.from,qu=function(n){return Hu(n).fold(f("px"),f("px"),f("%"))},Vu=function(l,n,e,a){var f=Dt.fromTable(l),i=f.all,s=Dt.justCells(f),d=Dt.justColumns(f);n.each(function(n){var t,r,o,u,e=qu(n),i=Rr(l),c=Bo(f,l,Oo,Eo,a),i=zu(c,i,n);Dt.hasColumns(f)?(o=i,u=e,k(d,function(n,e){e=_u([o[e]],Ze());He(n.element,"width",e+u)})):(t=i,r=e,k(s,function(n){var e=t.slice(n.column,n.colspan+n.column),e=_u(e,Ze());He(n.element,"width",e+r)})),He(l,"width",n)}),e.each(function(n){var t,r,e=qu(n),o=Mr(l),u=Mo(f,l,Jr,Ao,Eo),o=zu(u,o,n);t=o,o=i,r=e,k(s,function(n){var e=t.slice(n.row,n.rowspan+n.row),e=_u(e,nt());He(n.element,"height",e+r)}),k(o,function(n,e){He(n.element,"height",t[e])}),He(l,"height",n)})},Uu=function(n){return ho(n).exists(function(n){return co.test(n)})},Ku=function(n){return ho(n).exists(function(n){return lo.test(n)})},$u=function(n){return ho(n).isNone()},Gu=xo,Xu=function(n){return Dt.fromTable(n).grid},Yu=function(e){var o=[];return{bind:function(n){if(n===undefined)throw new Error("Event bind error: undefined handler");o.push(n)},unbind:function(e){o=I(o,function(n){return n!==e})},trigger:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r={};k(e,function(n,e){r[n]=t[e]}),k(o,function(n){n(r)})}}},Ju=function(n){return{registry:Wn(n,function(n){return{bind:n.bind,unbind:n.unbind}}),trigger:Wn(n,function(n){return n.trigger})}},Qu=function(n){return n.slice(0).sort()},Zu=function(r,o,u){if(0===o.length)throw new Error("You must specify at least one required field.");var t;return function(e,n){if(!l(n))throw new Error("The "+e+" fields must be an array. Was: "+n+".");k(n,function(n){if(!g(n))throw new Error("The value "+n+" in the "+e+" fields was not a string.")})}("required",o),t=Qu(o),P(t,function(n,e){return e<t.length-1&&n===t[e+1]}).each(function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}),function(e){var t=Mn(e);W(o,function(n){return R(t,n)})||function(n,e){throw new Error("All required keys ("+Qu(n).join(", ")+") were not specified. Specified keys were: "+Qu(e).join(", ")+".")}(o,t),r(o,t);var n=I(o,function(n){return!u.validate(e[n],n)});return 0<n.length&&function(n,e){throw new Error("All values need to be of type: "+e+". Keys ("+Qu(n).join(", ")+") were not.")}(n,u.label),e}},ni=function(e,n){n=I(n,function(n){return!R(e,n)});0<n.length&&function(n){throw new Error("Unsupported keys for object: "+Qu(n).join(", "))}(n)},sr=function(n){return Zu(ni,n,{validate:a,label:"function"})},Sr=sr(["compare","extract","mutate","sink"]),ei=sr(["element","start","stop","destroy"]),ti=sr(["forceDrop","drop","move","delayDrop"]),ri=function(){var o=x.none(),u=Ju({move:Yu(["info"])});return{onEvent:function(n,r){r.extract(n).each(function(n){var e,t;(e=r,t=n,n=o.map(function(n){return e.compare(n,t)}),o=x.some(t),n).each(function(n){u.trigger.move(n)})})},reset:function(){o=x.none()},events:u.registry}},oi=function(){var n,e=(n=Ju({move:Yu(["info"])}),{onEvent:y,reset:y,events:n.registry}),t=ri(),r=e;return{on:function(){r.reset(),r=t},off:function(){r.reset(),r=e},isOn:function(){return r===t},onEvent:function(n,e){r.onEvent(n,e)},events:t.events}},ui=function(e,t,n){var r,o,u,i=!1,c=Ju({start:Yu([]),stop:Yu([])}),l=oi(),a=function(){d.stop(),l.isOn()&&(l.off(),c.trigger.stop())},f=(r=a,o=200,u=null,{cancel:function(){null!==u&&(clearTimeout(u),u=null)},throttle:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];null!==u&&clearTimeout(u),u=setTimeout(function(){r.apply(null,n),u=null},o)}});l.events.move.bind(function(n){t.mutate(e,n.info)});var s=function(t){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];i&&t.apply(null,n)}},d=t.sink(ti({forceDrop:a,drop:s(a),move:s(function(n){f.cancel(),l.onEvent(n,t)}),delayDrop:s(f.throttle)}),n);return{element:d.element,go:function(n){d.start(n),l.on(),c.trigger.start()},on:function(){i=!0},off:function(){i=!1},destroy:function(){d.destroy()},events:c.registry}},ii=function(n){var t,r,e=On.fromDom(function(n){if(me()&&c(n.target)){var e=On.fromDom(n.target);if(ne(e)&&be(e)&&n.composed&&n.composedPath){e=n.composedPath();if(e)return F(e)}}return x.from(n.target)}(n).getOr(n.target)),o=function(){return n.stopPropagation()},u=function(){return n.preventDefault()},i=(t=u,r=o,function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return t(r.apply(null,n))});return{target:e,x:n.clientX,y:n.clientY,stop:o,prevent:u,kill:i,raw:n}},ci=function(n,e,t,r,o){var u,i,r=(u=t,i=r,function(n){u(n)&&i(ii(n))});return n.dom.addEventListener(e,r,o),{unbind:w(li,n,e,r,o)}},li=function(n,e,t,r){n.dom.removeEventListener(e,t,r)},ai=C,fi=function(n,e,t){return ci(n,e,ai,t,!1)},si=ii,di=function(n,e){e=je(n,e);return e===undefined||""===e?[]:e.split(" ")},mi=function(n){return n.dom.classList!==undefined},gi=function(n,e){return function(n,e,t){t=di(n,e).concat([t]);return Me(n,e,t.join(" ")),!0}(n,"class",e)},pi=function(n,e){mi(n)?n.dom.classList.add(e):gi(n,e)},hi=function(n,e){return mi(n)&&n.dom.classList.contains(e)},o=function(n){var e=n.replace(/\./g,"-");return{resolve:function(n){return e+"-"+n}}},bi=o("ephox-dragster").resolve,vi=Sr({compare:function(n,e){return Wr(e.left-n.left,e.top-n.top)},extract:function(n){return x.some(Wr(n.x,n.y))},sink:function(n,e){var t=function(n){var n=V({layerClass:bi("blocker")},n),e=On.fromTag("div");Me(e,"role","presentation"),qe(e,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),pi(e,bi("blocker")),pi(e,n.layerClass);return{element:function(){return e},destroy:function(){Vt(e)}}}(e),r=fi(t.element(),"mousedown",n.forceDrop),o=fi(t.element(),"mouseup",n.drop),u=fi(t.element(),"mousemove",n.move),i=fi(t.element(),"mouseout",n.delayDrop);return ei({element:t.element,start:function(n){zt(n,t.element())},stop:function(){Vt(t.element())},destroy:function(){t.destroy(),o.unbind(),u.unbind(),i.unbind(),r.unbind()}})},mutate:function(n,e){n.mutate(e.left,e.top)}}),wi=function(n){return"true"===je(n,"contenteditable")},ln=o("ephox-snooker").resolve,yi=function(){var t,r=Ju({drag:Yu(["xDelta","yDelta","target"])}),o=x.none(),n={mutate:function(n,e){t.trigger.drag(n,e)},events:(t=Ju({drag:Yu(["xDelta","yDelta"])})).registry};n.events.drag.bind(function(e){o.each(function(n){r.trigger.drag(e.xDelta,e.yDelta,n)})});return{assign:function(n){o=x.some(n)},get:function(){return o},mutate:n.mutate,events:r.registry}},Ci=ln("resizer-bar"),xi=ln("resizer-rows"),Si=ln("resizer-cols"),Ti=function(n){n=Se(n.parent(),"."+Ci);k(n,Vt)},Ri=function(e,n,t){var r=e.origin();k(n,function(n){n.each(function(n){n=t(r,n);pi(n,Ci),zt(e.parent(),n)})})},Di=function(n,e,i,c){Ri(n,e,function(n,e){var t,r,o,u,n=(t=e.col,r=e.x-n.left,o=i.top-n.top,u=7,e=c,n=On.fromTag("div"),qe(n,{position:"absolute",left:r-u/2+"px",top:o+"px",height:e+"px",width:u+"px"}),Ne(n,{"data-column":t,role:"presentation"}),n);return pi(n,Si),n})},Oi=function(n,e,i,c){Ri(n,e,function(n,e){var t,r,o,u,n=(t=e.row,r=i.left-n.left,o=e.y-n.top,u=c,e=7,n=On.fromTag("div"),qe(n,{position:"absolute",left:r+"px",top:o-e/2+"px",height:e+"px",width:u+"px"}),Ne(n,{"data-row":t,role:"presentation"}),n);return pi(n,xi),n})},Ai=function(n,e,t,r,o){var u,i=zr(t),c=e.isResizable,r=0<r.length?Jr.positions(r,t):[],l=0<r.length?(u=c,j(n.all,function(n,e){return u(n.element)?[e]:[]})):[],r=I(r,function(n,e){return D(l,function(n){return e===n})});Oi(e,r,i,Dr(t));var a,f,s,o=0<o.length?Zr.positions(o,t):[],d=0<o.length?(f=c,s=[],O((a=n).grid.columns,function(n){Dt.getColumnAt(a,n).map(function(n){return n.element}).forall(f)&&s.push(n)}),I(s,function(e){var n=Dt.filterItems(a,function(n){return n.column===e});return W(n,function(n){return f(n.element)})})):[],o=I(o,function(n,e){return D(d,function(n){return e===n})});Di(e,o,i,Nr(t))},ki=function(n,e){var t,r,o;Ti(n),n.isResizable(e)&&(t=Dt.fromTable(e),r=kr(t),o=Or(t),Ai(t,n,e,r,o))},Ii=function(n,e){n=Se(n.parent(),"."+Ci);k(n,e)},Bi=function(n){Ii(n,function(n){He(n,"display","none")})},Ei=function(n){Ii(n,function(n){He(n,"display","block")})},Pi=ln("resizer-bar-dragging"),Mi=function(o){var n,e,t=yi(),r=(e=(n=void 0===(n={})?{}:n).mode!==undefined?n.mode:vi,ui(t,e,n)),u=x.none(),i=function(n,e){return x.from(je(n,e))};t.events.drag.bind(function(t){i(t.target,"data-row").each(function(n){var e=Qe(t.target,"top");He(t.target,"top",e+t.yDelta+"px")}),i(t.target,"data-column").each(function(n){var e=Qe(t.target,"left");He(t.target,"left",e+t.xDelta+"px")})});var c=function(n,e){return Qe(n,e)-Ge(n,"data-initial-"+e,0)};r.events.stop.bind(function(){t.get().each(function(r){u.each(function(t){i(r,"data-row").each(function(n){var e=c(r,"top");Le(r,"data-initial-top"),m.trigger.adjustHeight(t,e,parseInt(n,10))}),i(r,"data-column").each(function(n){var e=c(r,"left");Le(r,"data-initial-left"),m.trigger.adjustWidth(t,e,parseInt(n,10))}),ki(o,t)})})});var l=function(n,e){m.trigger.startAdjust(),t.assign(n),Me(n,"data-initial-"+e,Qe(n,e)),pi(n,Pi),He(n,"opacity","0.2"),r.go(o.parent())},a=fi(o.parent(),"mousedown",function(n){var e;e=n.target,hi(e,xi)&&l(n.target,"top"),e=n.target,hi(e,Si)&&l(n.target,"left")}),f=function(n){return In(n,o.view())},s=function(n){return Ee(n,"table",f).filter(function(n){return Ee(n,"[contenteditable]",f).exists(wi)})},d=fi(o.view(),"mouseover",function(n){s(n.target).fold(function(){ve(n.target)&&Ti(o)},function(n){u=x.some(n),ki(o,n)})}),m=Ju({adjustHeight:Yu(["table","delta","row"]),adjustWidth:Yu(["table","delta","column"]),startAdjust:Yu([])});return{destroy:function(){a.unbind(),d.unbind(),r.destroy(),Ti(o)},refresh:function(n){ki(o,n)},on:r.on,off:r.off,hideBars:w(Bi,o),showBars:w(Ei,o),events:m.registry}},Ni=function(n,o,u){var r=Jr,i=Zr,n=Mi(n),c=Ju({beforeResize:Yu(["table","type"]),afterResize:Yu(["table","type"]),startDrag:Yu([])});return n.events.adjustHeight.bind(function(n){var e=n.table;c.trigger.beforeResize(e,"row");var t=r.delta(n.delta,e);Du(e,t,n.row,r),c.trigger.afterResize(e,"row")}),n.events.startAdjust.bind(function(n){c.trigger.startDrag()}),n.events.adjustWidth.bind(function(n){var e=n.table;c.trigger.beforeResize(e,"col");var t=i.delta(n.delta,e),r=u(e);Ru(e,t,n.column,o,r),c.trigger.afterResize(e,"col")}),{on:n.on,off:n.off,hideBars:n.hideBars,showBars:n.showBars,destroy:n.destroy,events:c.registry}},ji=function(n,e){return n.fire("newrow",{node:e})},Wi=function(n,e){return n.fire("newcell",{node:e})},Li=function(n,e,t){n.fire("TableModified",V(V({},t),{table:e}))},zi={structure:!1,style:!0},_i={structure:!0,style:!1},Fi={"border-collapse":"collapse",width:"100%"},Hi={border:"1"},qi="preservetable",Vi=function(n){return n.getParam("table_sizing_mode","auto")},Ui=function(n){return n.getParam("table_responsive_width")},Ki=function(n){return n.getParam("table_default_attributes",Hi,"object")},$i=function(n){return n.getParam("table_default_styles",function(n){if(Zi(n)){var e=n.getBody().offsetWidth;return V(V({},Fi),{width:e+"px"})}return nc(n)?zn(Fi,function(n,e){return"width"!==e}):Fi}(n),"object")},Gi=function(n){return n.getParam("table_cell_advtab",!0,"boolean")},Xi=function(n){return n.getParam("table_row_advtab",!0,"boolean")},Yi=function(n){return n.getParam("table_advtab",!0,"boolean")},Ji=function(n){return n.getParam("table_style_by_css",!1,"boolean")},Qi=function(n){return"relative"===Vi(n)||!0===Ui(n)},Zi=function(n){return"fixed"===Vi(n)||!1===Ui(n)},nc=function(n){return"responsive"===Vi(n)},ec=function(n){var e="section",n=n.getParam("table_header_type",e,"string");return R(["section","cells","sectionCells","auto"],n)?n:e},tc=function(n){var e=n.getParam("table_column_resizing",qi,"string");return P(["preservetable","resizetable"],function(n){return n===e}).getOr(qi)},rc=function(n){return"preservetable"===tc(n)},oc=function(n){return"resizetable"===tc(n)},uc=function(n){n=n.getParam("table_clone_elements");return g(n)?x.some(n.split(/[ ,]/)):Array.isArray(n)?x.some(n):x.none()},ic=function(n,e){if(Qi(n)){var t=mu(n,e.dom).filter(gu).getOrThunk(function(){return Gu(e)});return Fo(t,e)}return Zi(n)?_o(Rr(e),e):zo(e)},cc=function(n){Le(n,"width")},lc=function(n,e){var t=Rr(n)+"px";Vu(n,x.some(t),x.none(),e),cc(n)},ac=function(n,e){var t=ic(n,e);n=t,e=xo(t=e),Vu(t,x.some(e),x.none(),n),cc(t)},fc=function(n,e){n=ic(n,e);lc(e,n)},sc=function(n){$e(n,"width");var e=ut(n),e=0<e.length?e:ot(n);k(e,function(n){$e(n,"width"),cc(n)}),cc(n)},dc=function(){var n=On.fromTag("div");return qe(n,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),zt(we(On.fromDom(document)),n),n},mc="bar-",gc=function(n){return"false"!==je(n,"data-mce-resize")},pc=function(i){var c,l,u=x.none(),t=x.none(),r=x.none(),o=function(n){return"TABLE"===n.nodeName},n=function(){return t},a=function(n){return ic(i,n)},f=function(){return(rc(i)?Eu:Bu)()},s=function(n,e,t){var r,o,u=on(e,"e");""===l&&ac(i,n),t!==c&&""!==l?(He(n,"width",l),r=f(),e=a(n),u=rc(i)||u?Xu(n).columns-1:0,Ru(n,t-c,u,r,e)):gu(l)&&(o=parseFloat(l.replace("%","")),He(n,"width",t*o/c+"%")),/^(\d+(\.\d+)?)px$/.test(l)&&(o=n,n=Dt.fromTable(o),Dt.hasColumns(n)||k(ot(o),function(n){var e=Ve(n,"width");He(n,"width",e),Le(n,"width")}))};return i.on("init",function(){var n,e,n=(e=gc,(n=i).inline?Mu(cu(n),dc(),e):Pu(On.fromDom(n.getDoc()),e));r=x.some(n),function(n){n=n.getParam("object_resizing",!0);return g(n)?"table"===n:n}(i)&&i.getParam("table_resize_bars",!0,"boolean")&&(e=f(),(e=Ni(n,e,a)).on(),e.events.startDrag.bind(function(n){u=x.some(i.selection.getRng())}),e.events.beforeResize.bind(function(n){var e,t,r,o=n.table.dom;e=i,r=lu(t=o),o=au(o),n=mc+n.type,e.fire("ObjectResizeStart",{target:t,width:r,height:o,origin:n})}),e.events.afterResize.bind(function(n){var e,t,r=n.table,o=r.dom;du(r),u.each(function(n){i.selection.setRng(n),i.focus()}),e=i,r=lu(t=o),o=au(o),n=mc+n.type,e.fire("ObjectResized",{target:t,width:r,height:o,origin:n}),i.undoManager.add()}),t=x.some(e))}),i.on("ObjectResizeStart",function(n){var e,t=n.target;o(t)&&(e=On.fromDom(t),k(i.dom.select(".mce-clonedresizable"),function(n){i.dom.addClass(n,"mce-"+tc(i)+"-columns")}),!Ku(e)&&Zi(i)?fc(i,e):!Uu(e)&&Qi(i)&&ac(i,e),$u(e)&&rn(n.origin,mc)&&ac(i,e),c=n.width,l=nc(i)?"":mu(i,t).getOr(""))}),i.on("ObjectResized",function(n){var e,t=n.target;o(t)&&(e=On.fromDom(t),t=n.origin,rn(t,"corner-")&&s(e,t,n.width),du(e),Li(i,e.dom,zi))}),i.on("SwitchMode",function(){t.each(function(n){i.mode.isReadOnly()?n.hideBars():n.showBars()})}),{lazyResize:n,lazyWire:function(){return r.getOr(Pu(On.fromDom(i.getBody()),gc))},destroy:function(){t.each(function(n){n.destroy()}),r.each(function(n){n=n,i.inline&&Vt(n.parent())})}}},hc=function(n,e){return{element:n,offset:e}},bc=function(e,n,t){return e.property().isText(n)&&0===e.property().getText(n).trim().length||e.property().isComment(n)?t(n).bind(function(n){return bc(e,n,t).orThunk(function(){return x.some(n)})}):x.none()},vc=function(n,e){return(n.property().isText(e)?n.property().getText(e):n.property().children(e)).length},wc=function(n,e){var t=bc(n,e,n.query().prevSibling).getOr(e);if(n.property().isText(t))return hc(t,vc(n,t));e=n.property().children(t);return 0<e.length?wc(n,e[e.length-1]):hc(t,vc(n,t))},yc=wc,Cc=Jt(),xc=function(t,r){1===Xe(t,"colspan")&&ho(t).bind(function(n){return to(n,["fixed","relative","empty"])}).each(function(n){var e=n.value/2;Co(t,e,n.unit),Co(r,e,n.unit)})},Sc=function(n,e,t,r){t===r?Le(n,e):Me(n,e,t)},Tc=function(n,e,t){H(xe(n,e)).fold(function(){return Lt(n,t)},function(n){return Wt(n,t)})},Rc=function(u,n){var t=[],r=[],i=function(n){return A(n,function(n){n.isNew&&t.push(n.element);var e=n.element;return qt(e),k(n.cells,function(n){n.isNew&&r.push(n.element),Sc(n.element,"colspan",n.colspan,1),Sc(n.element,"rowspan",n.rowspan,1),zt(e,n.element)}),e})},c=function(n){return j(n,function(n){return A(n.cells,function(n){return Sc(n.element,"span",n.colspan,1),n.element})})},o=function(n,e){var t,r,o,o=(o=Ie(t=u,r=e).getOrThunk(function(){var n=On.fromTag(r,ue(t).dom);return"thead"===r?Tc(t,"caption,colgroup",n):"colgroup"===r?Tc(t,"caption",n):zt(t,n),n}),qt(o),o),n=("colgroup"===e?c:i)(n);Ht(o,n)},e=function(n,e){0<n.length?o(n,e):Ie(u,e).each(Vt)},l=[],a=[],f=[],s=[];return k(n,function(n){switch(n.section){case"thead":l.push(n);break;case"tbody":a.push(n);break;case"tfoot":f.push(n);break;case"colgroup":s.push(n)}}),e(s,"colgroup"),e(l,"thead"),e(a,"tbody"),e(f,"tfoot"),{newRows:t,newCells:r}},Dc=function(n,e){if(0===n.length)return 0;var t=n[0];return M(n,function(n){return!e(t.element,n.element)}).fold(function(){return n.length},function(n){return n})},Oc=function(n,e,t,r){var o,u=n[e].cells.slice(t),u=Dc(u,r),e=(o=t,A(n,function(n){return bt(n,o)}).slice(e));return{colspan:u,rowspan:Dc(e,r)}},Ac=function(o,u){var i=A(o,function(n){return A(n.cells,d)});return A(o,function(n,r){return{details:j(n.cells,function(n,e){if(!1!==i[r][e])return[];var t=Oc(o,r,e,u);return function(n,e,t,r){for(var o=n;o<n+t;o++)for(var u=e;u<e+r;u++)i[o][u]=!0}(r,e,t.rowspan,t.colspan),[{element:n.element,rowspan:t.rowspan,colspan:t.colspan,isNew:n.isNew}]}),section:n.section}})},kc=function(n,e,t){var r,o=[];Dt.hasColumns(n)&&(r=A(Dt.justColumns(n),function(n){return Gn(n.element,t,!1)}),o.push(Xn(r,"colgroup")));for(var u=0;u<n.grid.rows;u++){for(var i=[],c=0;c<n.grid.columns;c++){var l=Dt.getAt(n,u,c).map(function(n){return Gn(n.element,t,n.isLocked)}).getOrThunk(function(){return Gn(e.gap(),!0,!1)});i.push(l)}var a=Xn(i,n.all[u].section);o.push(a)}return o},Ic=function(n,t){return A(n,function(n){var e,e=(e=n.details,q(e,function(n){return ce(n.element).map(function(n){var e=ce(n).isNone();return Gn(n,e,!1)})}).getOrThunk(function(){return Gn(t.row(),!0,!1)}));return{element:e.element,cells:n.details,section:n.section,isNew:e.isNew}})},Bc=function(n,e){n=Ac(n,In);return Ic(n,e)},Ec=function(n,e){return q(n.all,function(n){return P(n.cells,function(n){return In(e,n.element)})})},Pc=function(e,n,t){n=A(n.selection,function(n){return rt(n).bind(function(n){return Ec(e,n)}).filter(t)}),n=Cr(n);return xr(0<n.length,n)},Mc=function(a,e,f,s,d){return function(o,u,n,r,i,c){var l=Dt.fromTable(u);return e(l,n).map(function(n){var e=kc(l,r,!1),t=a(e,n,In,d(r)),e=St(t.grid);return{info:n,grid:Bc(t.grid,r),cursor:t.cursor,lockedColumns:e}}).bind(function(n){var e=Rc(u,n.grid),t=x.from(i).getOrThunk(function(){return zo(u)}),r=x.from(c).getOrThunk(Eu);return f(u,n.grid,n.info,t,r),s(u),ki(o,u),Le(u,Ct),0<n.lockedColumns.length&&Me(u,Ct,n.lockedColumns.join(",")),x.some({cursor:n.cursor,newRows:e.newRows,newCells:e.newCells})})}},Nc=function(e,n){return rt(n.element).bind(function(n){return Ec(e,n)})},jc=function(n,e){return Pc(n,e,C).map(function(n){return{cells:n,generators:e.generators,clipboard:e.clipboard}})},Wc=function(n,e){return Pc(n,e,C)},an=function(n,e){return Nc(n,e).filter(function(n){return!n.isLocked})},Lc=function(n,e){return Pc(n,e,function(n){return!n.isLocked})},zc=function(e,n){return W(n,function(n){return Ec(e,n).exists(function(n){return!n.isLocked})})},_c=function(e,n){return n.mergable.filter(function(n){return zc(e,n.cells)})},Fc=function(e,n){return n.unmergable.filter(function(n){return zc(e,n)})},Hc=function(n,e,t,r){for(var o=yt(n).rows,u=!0,i=0;i<o.length;i++)for(var c=0;c<wt(o[0]);c++){var l=o[i],a=bt(l,c),f=t(a.element,e);!0===f&&!1===u?gt(l,c,Gn(r(),!0,a.isLocked)):!0===f&&(u=!1)}return n},qc=function(n,t,i,c){var e,r,l=yt(n).rows;return 0<t&&t<l.length&&(e=l[t-1].cells,r=i,e=E(e,function(n,e){return D(n,function(n){return r(n.element,e.element)})?n:n.concat([e])},[]),k(e,function(n){for(var o=x.none(),u=t;u<l.length;u++)for(var e=0;e<wt(l[0]);e++)!function(e){var t=l[u],r=bt(t,e);i(r.element,n.element)&&(o=o.isNone()?x.some(c()):o).each(function(n){gt(t,e,Gn(n,!0,r.isLocked))})}(e)})),n},Vc=function(t){return{is:function(n){return t===n},isValue:C,isError:d,getOr:f(t),getOrThunk:f(t),getOrDie:f(t),or:function(n){return Vc(t)},orThunk:function(n){return Vc(t)},fold:function(n,e){return e(t)},map:function(n){return Vc(n(t))},mapError:function(n){return Vc(t)},each:function(n){n(t)},bind:function(n){return n(t)},exists:function(n){return n(t)},forall:function(n){return n(t)},toOptional:function(){return x.some(t)}}},Uc=function(t){return{is:d,isValue:d,isError:C,getOr:s,getOrThunk:function(n){return n()},getOrDie:function(){return n=String(t),function(){throw new Error(n)}();var n},or:function(n){return n},orThunk:function(n){return n()},fold:function(n,e){return n(t)},map:function(n){return Uc(t)},mapError:function(n){return Uc(n(t))},each:y,bind:function(n){return Uc(t)},exists:d,forall:C,toOptional:x.none}},Kc={value:Vc,error:Uc,fromOption:function(n,e){return n.fold(function(){return Uc(e)},Vc)}},$c=function(n,e){return{rowDelta:0,colDelta:wt(n[0])-wt(e[0])}},Gc=function(n,e){return{rowDelta:n.length-e.length,colDelta:0}},Xc=function(n,e,t,r){var o="colgroup"===e.section?t.col:t.cell;return O(n,function(n){return Gn(o(),!0,r(n))})},Yc=function(t,n,r,o){return t.concat(O(n,function(){var n=t[t.length-1],e=Xc(n.cells.length,n,r,function(n){return qn(o,n.toString())});return pt(n,e)}))},Jc=function(n,t,r,o){return A(n,function(n){var e=Xc(t,n,r,d);return dt(n,o,e)})},Qc=function(n,e,t){var r=e.colDelta<0?Jc:s,o=e.rowDelta<0?Yc:s,u=St(n),i=wt(n[0]),u=D(u,function(n){return n===i-1}),n=r(n,Math.abs(e.colDelta),t,u?i-1:i),u=St(n);return o(n,Math.abs(e.rowDelta),t,L(u,C))},Zc=function(n,e,t,r,o,u){for(var i,c,l,a=n.row,f=n.column,s=a+t.length,d=f+wt(t[0])+u.length,m=L(u,C),g=a;g<s;g++)for(var p,h,b=0,v=f;v<d;v++)m[v]?b++:(h=v,l=void 0,l=w(c=o,bt((i=e)[p=g],h).element),c=i[p],1<i.length&&1<wt(c)&&(0<h&&l(vt(c,h-1))||h<c.cells.length-1&&l(vt(c,h+1))||0<p&&l(vt(i[p-1],h))||p<i.length-1&&l(vt(i[p+1],h)))&&Hc(e,vt(e[g],v),o,r.cell),h=(p=bt(t[g-a],v-f-b)).element,h=r.replace(h),gt(e[g],v,Gn(h,!0,p.isLocked)));return e},nl=function(e,t,n){return I(n,function(n){return n>=e.column&&n<=wt(t[0])+e.column})},el=function(n,t,r,o,u){var e,i,c,l=St(t),a=(e=n,i=t,c=l,n=wt(t[0]),i=O(n-e.column,function(n){return n+e.column}),n=P(i,function(e){return W(c,function(n){return n!==e})}).getOr(n-1),V(V({},e),{column:n})),f=nl(a,r,l);return function(n,e,t){if(n.row>=e.length||n.column>wt(e[0]))return Kc.error("invalid start address out of table bounds, row: "+n.row+", column: "+n.column);var r=e.slice(n.row),e=r[0].cells.slice(n.column),n=wt(t[0]),t=t.length;return Kc.value({rowDelta:r.length-t,colDelta:e.length-n})}(a,t,r).map(function(n){var e=V(V({},n),{colDelta:n.colDelta-f.length}),n=Qc(t,e,o),e=St(n),e=nl(a,r,e);return Zc(a,n,r,o,u,e)})},tl=function(t,n,e,r,o){var u,i,c;l=n,u=t,i=o,c=r.cell,0<u&&u<l[0].cells.length&&k(l,function(n){var e=n.cells[u-1],t=n.cells[u];i(t.element,e.element)&&gt(n,u,Gn(c(),!0,t.isLocked))});var l=Gc(e,n),a=Qc(e,l,r),l=Gc(n,a),r=Qc(n,l,r);return A(r,function(n,e){return dt(n,t,a[e].cells)})},rl=function(n,e,t,r,o){qc(e,n,o,r.cell);var u,i,c=St(e),l=$c(e,t),o=V(V({},l),{colDelta:l.colDelta-c.length}),l=Qc(e,o,r),c=yt(l),o=c.cols,c=c.rows,l=St(l),e=$c(t,e),e=V(V({},e),{colDelta:e.colDelta+l.length}),t=(u=r,i=l,A(t,function(r){return E(i,function(n,e){var t=Xc(1,r,u,C)[0];return mt(n,e,t)},r)})),r=Qc(t,e,r);return o.concat(c.slice(0,n)).concat(r).concat(c.slice(n,c.length))},ol=function(n,t,e,r,o){var u=yt(n),i=u.rows,c=u.cols,n=i.slice(0,t),u=i.slice(t),e=ht(i[e],function(n,e){return 0<t&&t<i.length&&r(vt(i[t-1],e),vt(i[t],e))?bt(i[t],e):Gn(o(n.element,r),!0,n.isLocked)});return c.concat(n).concat([e]).concat(u)},ul=function(n,t,r,o,u){return A(n,function(n){var e=0<t&&t<wt(n)&&o(vt(n,t-1),vt(n,t)),e=function(n,e,t,r,o,u,i){if("colgroup"!==t&&r)return bt(n,e);o=bt(n,o);return Gn(i(o.element,u),!0,!1)}(n,t,n.section,e,r,o,u);return mt(n,t,e)})},il=function(n,t,r,o){return A(n,function(n){return ht(n,function(n){return e=n,D(t,function(n){return r(e.element,n.element)})?Gn(o(n.element,r),!0,n.isLocked):n;var e})})},cl=function(n,e,t,r){return vt(n[e],t)!==undefined&&0<e&&r(vt(n[e-1],t),vt(n[e],t))},ll=function(n,e,t){return 0<e&&t(vt(n,e-1),vt(n,e))},al=function(t,r,o,n){var e=yt(t).rows,e=j(e,function(n,e){return cl(t,e,r,o)||ll(n,r,o)?[]:[bt(n,r)]});return il(t,e,o,n)},fl=function(n,t,r,e){var o=yt(n).rows,u=o[t],i=j(u.cells,function(n,e){return cl(o,t,e,r)||ll(u,e,r)?[]:[n]});return il(n,i,r,e)},sl=function(n){return E(n,function(n,e){return D(n,function(n){return n.column===e.column})?n:n.concat([e])},[]).sort(function(n,e){return n.column-e.column})},dl=function(n){return{element:n,colspan:Ge(n,"colspan",1),rowspan:Ge(n,"rowspan",1)}},ml=function(n){return We(n,"scope").map(function(n){return n.substr(0,3)})},fn=function(e,t){void 0===t&&(t=dl);var r=No(x.none()),o=function(n){n=t(n);return"col"!==Yn((n=n).element)?e.cell(n):e.col(n)},u=function(n){var e=o(n);return r.get().isNone()&&r.set(x.some(e)),i=x.some({item:n,replacement:e}),e},i=x.none();return{getOrInit:function(e,t){return i.fold(function(){return u(e)},function(n){return t(e,n.item)?n.replacement:u(e)})},cursor:r.get}},sn=function(o,c){return function(t){var r=No(x.none()),u=[],i=function(n){var e=t.replace(n,c,{scope:o});return u.push({item:n,sub:e}),r.get().isNone()&&r.set(x.some(e)),e};return{replaceOrInit:function(e,t){return"col"===Yn(e)?e:(r=e,o=t,P(u,function(n){return o(n.item,r)}).fold(function(){return i(e)},function(n){return t(e,n.item)?n.sub:i(e)}));var r,o},cursor:r.get}}},Qn=function(r){var e=No(x.none());return{unmerge:function(t){e.get().isNone()&&e.set(x.some(t));var n=ml(t);return n.each(function(n){return Me(t,"scope",n)}),function(){var e=r.cell({element:t,colspan:1,rowspan:1});return $e(e,"width"),$e(t,"width"),n.each(function(n){return Me(e,"scope",n)}),e}},merge:function(r){return $e(r[0],"width"),function(){var n=Cr(A(r,ml));if(0===n.length)return x.none();var e=n[0],t=["row","col"];return D(n,function(n){return n!==e&&R(t,n)})?x.none():x.from(e)}().fold(function(){return Le(r[0],"scope")},function(n){return Me(r[0],"scope",n+"group")}),f(r[0])},cursor:e.get}},gl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],pl=Jt(),hl=function(n){return function(n,e){e=n.property().name(e);return R(gl,e)}(pl,n)},bl=function(n){return function(n,e){e=n.property().name(e);return R(["ol","ul"],e)}(pl,n)},vl=function(n){return n=n,R(["br","img","hr","input"],pl.property().name(n))},wl=function(n){var e,u=function(n){return"br"===Yn(n)},t=function(o){return Go(o).bind(function(t){var r=fe(t).map(function(n){return!!hl(n)||!!vl(n)&&"img"!==Yn(n)}).getOr(!1);return ce(t).map(function(n){return!0===r||("li"===Yn(e=n)||Ae(e,bl).isSome())||u(t)||hl(n)&&!In(o,n)?[]:[On.fromTag("br")];var e})}).getOr([])},r=0===(e=j(n,function(n){var e=se(n);return W(e,function(n){return u(n)||ee(n)&&0===$t(n).trim().length})?[]:e.concat(t(n))})).length?[On.fromTag("br")]:e;qt(n[0]),Ht(n[0],r)},n=function(n){0===ot(n).length&&Vt(n)},yl=function(n,e){return{grid:n,cursor:e}},Cl=function(n,e,t){var r=yt(n).rows;return xl(r,e,t).orThunk(function(){return xl(r,0,0)})},xl=function(n,e,t){return x.from(n[e]).bind(function(n){return x.from(n.cells[t]).bind(function(n){return x.from(n.element)})})},Sl=function(n,e,t){var r=yt(n).rows;return yl(n,xl(r,e,t))},Tl=function(n){return E(n,function(n,e){return D(n,function(n){return n.row===e.row})?n:n.concat([e])},[]).sort(function(n,e){return n.row-e.row})},Rl=function(n,e,t){var r,n=(r=t.section,at(n,function(){return r})),n=Dt.generate(n);return kc(n,e,!0)},Dl=function(n,e){e=I(n,e);return 0===e.length?x.some("td"):e.length===n.length?x.some("th"):x.none()},sr=function(n,e,t,r){var o=Dt.generate(e),e=r.getWidths(o,r);Tu(o,e,r)},Sr=function(n,e,t,r,o){var u=Dt.generate(e),i=r.getWidths(u,r),e=r.pixelWidth(),e=o.calcRedestributedWidths(i,e,t.pixelDelta,r.isRelative),t=e.newSizes,e=e.delta;Tu(u,t,r),r.adjustTableWidth(e)},Ol=function(n,e){return D(e,function(n){return 0===n.column&&n.isLocked})},Al=function(e,n){return D(n,function(n){return n.column+n.colspan>=e.grid.columns&&n.isLocked})},kl=function(n,e){var t=Or(n),e=sl(e);return E(e,function(n,e){return n+t[e.column].map(Dr).getOr(0)},0)},o=function(t){return function(e,n){return Wc(e,n).filter(function(n){return!(t?Ol:Al)(e,n)}).map(function(n){return{details:n,pixelDelta:kl(e,n)}})}},ln=function(t){return function(e,n){return jc(e,n).filter(function(n){return!(t?Ol:Al)(e,n.cells)})}},Il=Mc(function(n,e,t,r){var o=e[0].row,u=Tl(e),n=B(u,function(n,e){return{grid:ol(n.grid,o,e.row+n.delta,t,r.getOrInit),delta:n.delta+1}},{grid:n,delta:0}).grid;return Sl(n,o,e[0].column)},Wc,y,y,fn),Bl=Mc(function(n,e,t,r){var o=Tl(e),u=o[o.length-1],i=u.row+u.rowspan,n=B(o,function(n,e){return ol(n,i,e.row,t,r.getOrInit)},n);return Sl(n,i,e[0].column)},Wc,y,y,fn),El=Mc(function(n,e,t,r){var o=e.details,e=sl(o),u=e[0].column,n=B(e,function(n,e){return{grid:ul(n.grid,u,e.column+n.delta,t,r.getOrInit),delta:n.delta+1}},{grid:n,delta:0}).grid;return Sl(n,o[0].row,u)},o(!0),Sr,y,fn),Pl=Mc(function(n,e,t,r){var o=e.details,e=o[o.length-1],u=e.column+e.colspan,e=sl(o),n=B(e,function(n,e){return ul(n,u,e.column,t,r.getOrInit)},n);return Sl(n,o[0].row,u)},o(!1),Sr,y,fn),Ml=Mc(function(n,e,t,r){var o,e=sl(e.details),n=(n=n,o=A(e,function(n){return n.column}),j(n,function(n){var e=n.cells,e=B(o,function(n,e){return 0<=e&&e<n.length?n.slice(0,e).concat(n.slice(e+1)):n},e);return 0<e.length?[Xn(e,n.section)]:[]})),e=Cl(n,e[0].row,e[0].column);return yl(n,e)},function(e,n){return Lc(e,n).map(function(n){return{details:n,pixelDelta:-kl(e,n)}})},Sr,n,fn),Nl=Mc(function(n,e,t,r){var o,u,i=Tl(e),n=(o=n,u=i[0].row,n=i[i.length-1].row,i=yt(o),o=i.rows,i.cols.concat(o.slice(0,u)).concat(o.slice(n+1))),e=Cl(n,e[0].row,e[0].column);return yl(n,e)},Wc,y,n,fn),jl=(Mc(function(n,e,t,r){r=al(n,e.column,t,r.replaceOrInit);return Sl(r,e.row,e.column)},an,y,y,sn("row","th")),Mc(function(n,e,t,r){var o=sl(e),n=E(o,function(n,e){return al(n,e.column,t,r.replaceOrInit)},n);return Sl(n,e[0].row,e[0].column)},Lc,y,y,sn("row","th"))),Wl=(Mc(function(n,e,t,r){r=al(n,e.column,t,r.replaceOrInit);return Sl(r,e.row,e.column)},an,y,y,sn(null,"td")),Mc(function(n,e,t,r){var o=sl(e),n=E(o,function(n,e){return al(n,e.column,t,r.replaceOrInit)},n);return Sl(n,e[0].row,e[0].column)},Lc,y,y,sn(null,"td"))),Ll=(Mc(function(n,e,t,r){r=fl(n,e.row,t,r.replaceOrInit);return Sl(r,e.row,e.column)},Nc,y,y,sn("col","th")),Mc(function(n,e,t,r){var o=Tl(e),n=E(o,function(n,e){return fl(n,e.row,t,r.replaceOrInit)},n);return Sl(n,e[0].row,e[0].column)},Wc,y,y,sn("col","th")),Mc(function(n,e,t,r){r=fl(n,e.row,t,r.replaceOrInit);return Sl(r,e.row,e.column)},Nc,y,y,sn(null,"td")),Mc(function(n,e,t,r){var o=Tl(e),n=E(o,function(n,e){return fl(n,e.row,t,r.replaceOrInit)},n);return Sl(n,e[0].row,e[0].column)},Wc,y,y,sn(null,"td")),Mc(function(n,e,t,r){var o=e.cells;wl(o);r=function(n,e,t){var r=yt(n).rows;if(0===r.length)return n;for(var o=e.startRow;o<=e.finishRow;o++)for(var u=e.startCol;u<=e.finishCol;u++){var i=r[o],c=bt(i,u).isLocked;gt(i,u,Gn(t(),!1,c))}return n}(n,e.bounds,r.merge(o));return yl(r,x.from(o[0]))},_c,sr,y,Qn)),zl=Mc(function(n,e,t,r){n=B(e,function(n,e){return Hc(n,e,t,r.unmerge(e))},n);return yl(n,x.from(e[0]))},Fc,sr,y,Qn),_l=Mc(function(n,t,e,r){var o=function(n,e){n=Dt.fromTable(n);return kc(n,e,!0)}(t.clipboard,t.generators),u={row:t.row,column:t.column};return el(u,n,o,t.generators,e).fold(function(){return yl(n,x.some(t.element))},function(n){var e=Cl(n,t.row,t.column);return yl(n,e)})},function(e,t){return rt(t.element).bind(function(n){return Ec(e,n).map(function(n){return V(V({},n),{generators:t.generators,clipboard:t.clipboard})})})},sr,y,fn),Fl=Mc(function(n,e,t,r){var o=yt(n).rows,u=e.cells[0].column,o=o[e.cells[0].row],o=Rl(e.clipboard,e.generators,o),t=tl(u,n,o,e.generators,t),e=Cl(t,e.cells[0].row,e.cells[0].column);return yl(t,e)},ln(!0),y,y,fn),Hl=Mc(function(n,e,t,r){var o=yt(n).rows,u=e.cells[e.cells.length-1].column+e.cells[e.cells.length-1].colspan,o=o[e.cells[0].row],o=Rl(e.clipboard,e.generators,o),t=tl(u,n,o,e.generators,t),e=Cl(t,e.cells[0].row,e.cells[0].column);return yl(t,e)},ln(!1),y,y,fn),ql=Mc(function(n,e,t,r){var o=yt(n).rows,u=e.cells[0].row,o=o[u],o=Rl(e.clipboard,e.generators,o),t=rl(u,n,o,e.generators,t),e=Cl(t,e.cells[0].row,e.cells[0].column);return yl(t,e)},jc,y,y,fn),Vl=Mc(function(n,e,t,r){var o=yt(n).rows,u=e.cells[e.cells.length-1].row+e.cells[e.cells.length-1].rowspan,o=o[e.cells[0].row],o=Rl(e.clipboard,e.generators,o),t=rl(u,n,o,e.generators,t),e=Cl(t,e.cells[0].row,e.cells[0].column);return yl(t,e)},jc,y,y,fn),Ul=function(n,e){var o=Dt.fromTable(n);return Wc(o,e).bind(function(n){var e=n[n.length-1],t=n[0].column,r=e.column+e.colspan,e=N(A(o.all,function(n){return I(n.cells,function(n){return n.column>=t&&n.column<r})}));return Dl(e,function(n){return"th"===Yn(n.element)})}).getOr("")},Kl=function(n){return iu(n.parentNode)},$l=function(n,e){var t="thead"===Kl(e),e=!D(e.cells,function(n){return"th"!==iu(n)});return t||e?x.some({thead:t,ths:e}):x.none()},Gl=function(n,e){return"thead"===(t=$l(0,e).fold(function(){return Kl(e)},function(n){return"thead"}))?"header":"tfoot"===t?"footer":"body";var t},Xl=function(e,n,t){var r,o,u=e.getParent(n,"table"),i=n.parentNode,c=iu(i);t!==c&&((r=e.select(t,u)[0])||(r=e.create(t),o=u.firstChild,"thead"===t?H(xe(On.fromDom(u),"caption,colgroup")).fold(function(){return u.insertBefore(r,o)},function(n){return e.insertAfter(r,n.dom)}):u.appendChild(r)),"tbody"===t&&"thead"===c&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),i.hasChildNodes()||e.remove(i))},Yl=function(n,e,t,r){var o=n.dom,t=function(n,e,t){if(c(t)&&iu(e)!==t){t=n.dom.rename(e,t);return Wi(n,t),t}return e}(n,e,t);return u(r)||o.setAttrib(t,"scope",r),t},Jl=function(e,n,t,r){return k(n,function(n){return Yl(e,n,t,r)})},Ql=function(n,e,t){var r,o,u=n.dom;"header"===t?(r="auto"===(r=ec(n))?(o=it(On.fromDom(e.cells[0])).map(ct).getOr([]),q(o,function(n){return $l(0,n.dom)}).map(function(n){return n.thead&&n.ths?"sectionCells":n.thead?"section":"cells"}).getOr("section")):r,Jl(n,e.cells,"section"===r?"td":"th","col"),Xl(u,e,"cells"===r?"tbody":"thead")):(Jl(n,e.cells,"td",null),Xl(u,e,"footer"===t?"tfoot":"tbody"))},ln=function(o){return function(n,e){var t,r=Yn(n),n="col"===r||"colgroup"===r?it(t=n).bind(function(n){return ar(n,bu.firstSelectedSelector)}).fold(function(){return t},function(n){return n[0]}):n;return Ee(n,o,e)}},Zl=ln("th,td"),na=ln("th,td,caption"),ea=function(n,e,t){return Zl(n,t).map(function(n){return hu(e)}).getOr([])},ta=function(n,t){var e=Zl(n),r=e.bind(function(n){return it(n)}).map(ct);return n=r,r=function(e,n){return I(n,function(n){return D(uu(n.dom.cells),function(n){return"1"===je(n,t)||In(n,e)})})},((e=e).isSome()&&n.isSome()?x.some(r(e.getOrDie(),n.getOrDie())):x.none()).getOr([])},ra=function(s,n,r){var e=function(n){return"table"===Yn(cu(n))},d=uc(s),t=oc(s)?y:xc,o=function(i,c,l,a,f){return function(n,e){du(n);var t=a(),r=On.fromDom(s.getDoc()),o=ru(l,r,d),u=ic(s,n),r=(oc(s)?Bu:Eu)();return c(n)?i(t,n,e,o,u,r).bind(function(n){return k(n.newRows,function(n){ji(s,n.dom)}),k(n.newCells,function(n){Wi(s,n.dom)}),n.cursor.map(function(n){var e=yc(Cc,n),n=s.dom.createRng();return n.setStart(e.element.dom,e.offset),n.setEnd(e.element.dom,e.offset),{rng:n,effect:f}})}):x.none()}},u=o(Nl,function(n){return!1===e(s)||1<Xu(n).rows},y,n,_i),i=o(Ml,function(n){return!1===e(s)||1<Xu(n).columns},y,n,_i),c=o(Il,C,y,n,_i),l=o(Bl,C,y,n,_i),a=o(El,C,t,n,_i),f=o(Pl,C,t,n,_i),m=o(Ll,C,y,n,_i),g=o(zl,C,y,n,_i),p=o(Fl,C,y,n,_i),h=o(Hl,C,y,n,_i),b=o(ql,C,y,n,_i),v=o(Vl,C,y,n,_i),t=o(_l,C,y,n,_i),w=function(n,e){return Hn(n,"type").filter(function(n){return R(e,n)})};return{deleteRow:u,deleteColumn:i,insertRowsBefore:c,insertRowsAfter:l,insertColumnsBefore:a,insertColumnsAfter:f,mergeCells:m,unmergeCells:g,pasteColsBefore:p,pasteColsAfter:h,pasteRowsBefore:b,pasteRowsAfter:v,pasteCells:t,setTableCellType:function(t,n){return w(n,["td","th"]).each(function(n){var e=A(ea(pu(t),r),function(n){return n.dom});Jl(t,e,n,null)})},setTableRowType:function(t,n){return w(n,["header","body","footer"]).each(function(e){A(ta(pu(t),bu.selected),function(n){return Ql(t,n.dom,e)})})},makeColumnsHeader:o(jl,C,y,n,_i),unmakeColumnsHeader:o(Wl,C,y,n,_i),getTableRowType:function(n){var e=ta(pu(n),bu.selected);if(0<e.length){var t=A(e,function(n){return Gl(0,n.dom)}),n=R(t,"header"),e=R(t,"footer");if(n||e){t=R(t,"body");return!n||t||e?n||t||!e?"":"footer":"header"}return"body"}},getTableCellType:function(n){return Dl(ea(pu(n),r),function(n){return"th"===Yn(n)}).getOr("")},getTableColType:Ul}},oa={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},ua=function(n,e,t,r){for(var o=On.fromTag("tr"),u=0;u<n;u++){var i=r<e||u<t?On.fromTag("th"):On.fromTag("td");u<t&&Me(i,"scope","row"),r<e&&Me(i,"scope","col"),zt(i,On.fromTag("br")),zt(o,i)}return o},ia=function(n){var e=On.fromTag("colgroup");return O(n,function(){return zt(e,On.fromTag("col"))}),e},ca=function(n,e,t,r){return O(n,function(n){return ua(e,t,r,n)})},la=function(n,e){n.selection.select(e.dom,!0),n.selection.collapse(!0)},aa=function(r,t,o,u,i){var c=$i(r),l={styles:c,attributes:Ki(r),colGroups:r.getParam("table_use_colgroups",!1,"boolean")};return r.undoManager.ignore(function(){var n=function(n,e,t,r,o,u){void 0===u&&(u=oa);var i=On.fromTag("table"),c="cells"!==o;qe(i,u.styles),Ne(i,u.attributes),u.colGroups&&zt(i,ia(e));var l=Math.min(n,t);c&&0<t&&(u=On.fromTag("thead"),zt(i,u),a=ca(t,e,"sectionCells"===o?l:0,r),Ht(u,a));var a=On.fromTag("tbody");zt(i,a);r=ca(c?n-l:n,e,c?0:t,r);return Ht(a,r),i}(o,t,i,u,ec(r),l);Me(n,"data-mce-id","__mce");var e,n=(e=n,n=On.fromTag("div"),e=On.fromDom(e.dom.cloneNode(!0)),zt(n,e),n.dom.innerHTML);r.insertContent(n),r.addVisual()}),Be(cu(r),'table[data-mce-id="__mce"]').map(function(n){var e,t;return Zi(r)?fc(r,n):nc(r)?sc(n):(Qi(r)||(t=c.width,g(t)&&-1!==t.indexOf("%")))&&ac(r,n),du(n),Le(n,"data-mce-id"),e=r,k(Se(n,"tr"),function(n){ji(e,n.dom),k(Se(n,"th,td"),function(n){Wi(e,n.dom)})}),t=r,Be(n,"td,th").each(w(la,t)),n.dom}).getOr(null)},fa=function(n,e,t,r,o){void 0===r&&(r={});var u=function(n){return i(n)&&0<n};if(u(e)&&u(t)){u=r.headerRows||0,r=r.headerColumns||0;return aa(n,t,e,r,u)}return console.error(o),null},sa=function(n){return function(){return n().fold(function(){return[]},function(n){return A(n,function(n){return n.dom})})}},da=function(e){return function(n){n=0<n.length?x.some(uu(n)):x.none();e(n)}},ma=function(n,e,t,r){return{insertTable:(o=n,function(n,e,t){t=fa(o,e,n,t=void 0===t?{}:t,"Invalid values for insertTable - rows and columns values are required to insert a table.");return o.undoManager.add(),t}),setClipboardRows:da(e.setRows),getClipboardRows:sa(e.getRows),setClipboardCols:da(e.setColumns),getClipboardCols:sa(e.getColumns),resizeHandler:t,selectionTargets:r};var o},ga=function(n,e,t){var r=Ge(n,e,1);1===t||r<=1?Le(n,e):Me(n,e,Math.min(t,r))},pa=function(n,e){var o=Dt.fromTable(n);return Lc(o,e).map(function(n){var t,r,e=n[n.length-1],n=n[0].column,e=e.column+e.colspan;return U(function(n,e,t){if(Dt.hasColumns(n)){var r=I(Dt.justColumns(n),function(n){return n.column>=e&&n.column<t}),n=A(r,function(n){n=wr(n.element);return ga(n,"span",t-e),n}),r=On.fromTag("colgroup");return Ht(r,n),[r]}return[]}(o,n,e),(t=n,r=e,A(o.all,function(n){var e=I(n.cells,function(n){return n.column>=t&&n.column<r}),n=A(e,function(n){n=wr(n.element);return ga(n,"colspan",r-t),n}),e=On.fromTag("tr");return Ht(e,n),e})))})},ha=function(n,e,t){var r=Dt.fromTable(n);return Wc(r,e).bind(function(n){var e=kc(r,t,!1),n=yt(e).rows.slice(n[0].row,n[n.length-1].row+n[n.length-1].rowspan),n=j(n,function(n){var e=I(n.cells,function(n){return!n.isLocked});return 0<e.length?[V(V({},n),{cells:e})]:[]}),n=Bc(n,t);return xr(0<n.length,n)}).map(function(n){return A(n,function(n){var t=vr(n.element);return k(n.cells,function(n){var e=wr(n.element);Sc(e,"colspan",n.colspan,1),Sc(e,"rowspan",n.rowspan,1),zt(t,e)}),t})})},ba=tinymce.util.Tools.resolve("tinymce.util.Tools"),va=function(o,n,u){return function(n,e){for(var t=0;t<e.length;t++){var r=o.getStyle(e[t],u);if((n=void 0===n?r:n)!==r)return""}return n}(void 0,o.select("td,th",n))},wa=function(n,e,t){t&&n.formatter.apply("align"+t,{},e)},ya=function(e,t){ba.each("left center right".split(" "),function(n){e.formatter.remove("align"+n,{},t)})},Ca=function(n,e){return(e||[]).concat(A(n,function(n){var e=n.text||n.title;return Vn(n,"menu")?{text:e,items:Ca(n.menu)}:{text:e,value:n.value}}))},xa=function(e){return function(n){return rn(n,"rgb")?e.toHex(n):n}},Sa=function(n,e){e=On.fromDom(e);return{borderwidth:Ke(e,"border-width").getOr(""),borderstyle:Ke(e,"border-style").getOr(""),bordercolor:Ke(e,"border-color").map(xa(n)).getOr(""),backgroundcolor:Ke(e,"background-color").map(xa(n)).getOr("")}},Ta=function(n){var o=n[0],n=n.slice(1);return k(n,function(n){k(Mn(o),function(r){jn(n,function(n,e){var t=o[r];""!==t&&r===e&&t!==n&&(o[r]="")})})}),o},Ra=function(n){var e=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===n?[{name:"borderwidth",type:"input",label:"Border width"}].concat(e):e}},Mc=function(n,e,t,r){return P(n,function(n){return t.formatter.matchNode(r,e+n)}).getOr("")},Da=w(Mc,["left","center","right"],"align"),Oa=w(Mc,["top","middle","bottom"],"valign"),Aa=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}],ka=function(n){return Aa.concat(function(n){n=Ca(n.getParam("table_cell_class_list",[],"array"));return 0<n.length?x.some({name:"class",type:"listbox",label:"Class",items:n}):x.none()}(n).toArray())},fn=function(u){return function(t,r){var o=t.dom;return{setAttrib:function(n,e){u&&!e||o.setAttrib(r,n,e)},setStyle:function(n,e){u&&!e||o.setStyle(r,n,e)},setFormat:function(n,e){u&&!e||(""===e?t.formatter.remove(n,{value:null},r,!0):t.formatter.apply(n,{value:e},r))}}}},Ia={normal:fn(!1),ifTruthy:fn(!0)},Ba=function(t){return it(t[0]).map(function(n){var e=Dt.fromTable(n),n=Dt.justCells(e),n=I(n,function(e){return D(t,function(n){return In(e.element,n)})});return A(n,function(n){return{element:n.element.dom,column:Dt.getColumnAt(e,n.column).map(function(n){return n.element.dom})}})})},Ea=function(a,n,t,f){var e,r,s=1===n.length,o=zn(f,function(n,e){return t[e]!==n});0<Fn(o)&&1<=n.length&&(e=it(n[0]),Ba(n).each(function(n){k(n,function(n){var e,t,r,o,u,i=Yl(a,n.element,f.celltype),c=s?Ia.normal(a,i):Ia.ifTruthy(a,i),l=n.column.map(function(n){return s?Ia.normal(a,n):Ia.ifTruthy(a,n)}).getOr(c);e=l,n=f,(l=c).setAttrib("scope",n.scope),l.setAttrib("class",n["class"]),l.setStyle("height",su(n.height)),e.setStyle("width",su(n.width)),Gi(a)&&(u=f,(o=c).setFormat("tablecellbackgroundcolor",u.backgroundcolor),o.setFormat("tablecellbordercolor",u.bordercolor),o.setFormat("tablecellborderstyle",u.borderstyle),o.setFormat("tablecellborderwidth",su(u.borderwidth))),s&&(ya(a,i),t=a,r=i,ba.each("top middle bottom".split(" "),function(n){t.formatter.remove("valign"+n,{},r)})),f.halign&&wa(a,i,f.halign),f.valign&&(o=a,u=i,(i=f.valign)&&o.formatter.apply("valign"+i,{},u))})}),r=0<Fn(zn(o,function(n,e){return"scope"!==e&&"celltype"!==e})),e.each(function(n){return Li(a,n.dom,{structure:qn(o,"celltype"),style:r})}))},Pa=function(n,e,t,r){var o=r.getData();r.close(),n.undoManager.transact(function(){Ea(n,e,t,o),n.focus()})},Ma=function(i,n){n=Ba(n).map(function(n){return A(n,function(n){return e=i,t=n.element,r=Gi(i),o=n.column,u=e.dom,n=o.getOr(t),V({width:(o=function(n,e){return u.getStyle(n,e)||u.getAttrib(n,e)})(n,"width"),height:o(t,"height"),scope:u.getAttrib(t,"scope"),celltype:iu(t),"class":u.getAttrib(t,"class",""),halign:Da(e,t),valign:Oa(e,t)},r?Sa(u,t):{});var e,t,r,o,u})});return Ta(n.getOrDie())},Na=function(n,e){var t,r,o=ea(pu(n),e);0!==o.length&&(t=Ma(n,o),r={type:"tabpanel",tabs:[{title:"General",name:"general",items:ka(n)},Ra("cell")]},e={type:"panel",items:[{type:"grid",columns:2,items:ka(n)}]},n.windowManager.open({title:"Cell Properties",size:"normal",body:Gi(n)?r:e,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:t,onSubmit:w(Pa,n,o,t)}))},ja=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Wa=function(n){return ja.concat(function(n){n=Ca(n.getParam("table_row_class_list",[],"array"));return 0<n.length?x.some({name:"class",type:"listbox",label:"Class",items:n}):x.none()}(n).toArray())},La=function(o,n,u,i){var e,t,c=1===n.length,r=zn(i,function(n,e){return u[e]!==n});0<Fn(r)&&(k(n,function(n){i.type!==iu(n.parentNode)&&Ql(o,n,i.type);var e,t,r=c?Ia.normal(o,n):Ia.ifTruthy(o,n);t=i,(e=r).setAttrib("class",t["class"]),e.setStyle("height",su(t.height)),Xi(o)&&(t=i,(r=r).setStyle("background-color",t.backgroundcolor),r.setStyle("border-color",t.bordercolor),r.setStyle("border-style",t.borderstyle)),i.align!==u.align&&(ya(o,n),wa(o,n,i.align))}),e=qn(r,"type"),t=!e||1<Fn(r),it(On.fromDom(n[0])).each(function(n){return Li(o,n.dom,{structure:e,style:t})}))},za=function(n,e,t,r){var o=r.getData();r.close(),n.undoManager.transact(function(){La(n,e,t,o),n.focus()})},_a=function(o){var n,e,t,r=ta(pu(o),bu.selected);0!==r.length&&(t=A(r,function(n){return e=o,t=n.dom,r=Xi(o),n=e.dom,V({height:n.getStyle(t,"height")||n.getAttrib(t,"height"),"class":n.getAttrib(t,"class",""),type:Gl(0,t),align:Da(e,t)},r?Sa(n,t):{});var e,t,r}),n=Ta(t),e={type:"tabpanel",tabs:[{title:"General",name:"general",items:Wa(o)},Ra("row")]},t={type:"panel",items:[{type:"grid",columns:2,items:Wa(o)}]},o.windowManager.open({title:"Row Properties",size:"normal",body:Xi(o)?e:t,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:n,onSubmit:w(za,o,A(r,function(n){return n.dom}),n)}))},Fa=tinymce.util.Tools.resolve("tinymce.Env"),Ha=function(n,e,t,r){if("TD"===e.tagName||"TH"===e.tagName)g(t)?n.setStyle(e,t,r):n.setStyle(e,t);else if(e.children)for(var o=0;o<e.children.length;o++)Ha(n,e.children[o],t,r)},qa=function(t,r,o,n){var u,i=t.dom,c=n.getData(),l=zn(c,function(n,e){return o[e]!==n});n.close(),""===c["class"]&&delete c["class"],t.undoManager.transact(function(){var n,e;r||(n=parseInt(c.cols,10)||1,e=parseInt(c.rows,10)||1,r=aa(t,n,e,0,0)),0<Fn(l)&&(function(n,e,t){var r,o=n.dom,u={},i={};if(u["class"]=t["class"],i.height=su(t.height),o.getAttrib(e,"width")&&!Ji(n)?u.width=(r=t.width)?r.replace(/px$/,""):"":i.width=su(t.width),Ji(n)?(i["border-width"]=su(t.border),i["border-spacing"]=su(t.cellspacing)):(u.border=t.border,u.cellpadding=t.cellpadding,u.cellspacing=t.cellspacing),Ji(n)&&e.children)for(var c=0;c<e.children.length;c++)Ha(o,e.children[c],{"border-width":su(t.border),padding:su(t.cellpadding)}),Yi(n)&&Ha(o,e.children[c],{"border-color":t.bordercolor});Yi(n)&&(i["background-color"]=t.backgroundcolor,i["border-color"]=t.bordercolor,i["border-style"]=t.borderstyle),u.style=o.serializeStyle(V(V({},$i(n)),i)),o.setAttribs(e,V(V({},Ki(n)),u))}(t,r,c),(u=i.select("caption",r)[0])&&!c.caption&&i.remove(u),!u&&c.caption&&((u=i.create("caption")).innerHTML=Fa.ie?"\xa0":'<br data-mce-bogus="1"/>',r.insertBefore(u,r.firstChild)),""===c.align?ya(t,r):wa(t,r,c.align)),t.focus(),t.addVisual(),0<Fn(l)&&(e=!(n=qn(l,"caption"))||1<Fn(l),Li(t,r,{structure:n,style:e}))})},Va=function(n,e){var t,r,o,u,i,c,l,a=n.dom,r=(c=Yi(r=n),u=$i(r),l=Ki(r),c=c?(i=r.dom,{borderstyle:Hn(u,"border-style").getOr(""),bordercolor:xa(i)(Hn(u,"border-color").getOr("")),backgroundcolor:xa(i)(Hn(u,"background-color").getOr(""))}):{},V(V(V(V(V(V({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,"class":"",align:"",border:""}),u),l),c),(o=u["border-width"],Ji(r)&&o?{border:o}:Hn(l,"border").fold(function(){return{}},function(n){return{border:n}}))),(i=Hn(u,"border-spacing").or(Hn(l,"cellspacing")).fold(function(){return{}},function(n){return{cellspacing:n}}),c=Hn(u,"border-padding").or(Hn(l,"cellpadding")).fold(function(){return{}},function(n){return{cellpadding:n}}),V(V({},i),c))));!1===e?(t=a.getParent(n.selection.getStart(),"table",n.getBody()))?(f=t,u=Yi(o=n),l=o.dom,r=V({width:l.getStyle(f,"width")||l.getAttrib(f,"width"),height:l.getStyle(f,"height")||l.getAttrib(f,"height"),cellspacing:l.getStyle(f,"border-spacing")||l.getAttrib(f,"cellspacing"),cellpadding:l.getAttrib(f,"cellpadding")||va(o.dom,f,"padding"),border:(i=l,c=f,a=Ke(On.fromDom(c),"border-width"),Ji(o)&&a.isSome()?a.getOr(""):i.getAttrib(c,"border")||va(o.dom,c,"border-width")||va(o.dom,c,"border")),caption:!!l.select("caption",f)[0],"class":l.getAttrib(f,"class",""),align:Da(o,f)},u?Sa(l,f):{})):Yi(n)&&(r.borderstyle="",r.bordercolor="",r.backgroundcolor=""):(r.cols="1",r.rows="1",Yi(n)&&(r.borderstyle="",r.bordercolor="",r.backgroundcolor=""));var f=Ca(n.getParam("table_class_list",[],"array"));0<f.length&&r["class"]&&(r["class"]=r["class"].replace(/\s*mce\-item\-table\s*/g,""));var s={type:"grid",columns:2,items:function(n,e,t){t=t?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],n=n.getParam("table_appearance_options",!0,"boolean")?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],e=0<e.length?[{type:"listbox",name:"class",label:"Class",items:e}]:[];return t.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(n).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(e)}(n,f,e)},e=Yi(n)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[s]},Ra("table")]}:{type:"panel",items:[s]};n.windowManager.open({title:"Table Properties",size:"normal",body:e,onSubmit:w(qa,n,t,r),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r})},Ua=function(n){return na(pu(n),fu(n))},Ka=function(n){return Zl(pu(n),fu(n))},$a=function(u,r,t,i,e){var c=fu(u),l=function(n){return it(n,c)},a=function(e){return function(n){u.selection.setRng(n.rng),u.focus(),t.clear(e),du(e),Li(u,e.dom,n.effect)}},o=function(r){return Ka(u).each(function(t){l(t).each(function(n){var e=vu(i,n,t);r(n,e).each(a(n))})})},f=function(){return Ka(u).map(function(r){return l(r).bind(function(n){var e=vu(i,n,r),t=ru(y,On.fromDom(u.getDoc()),x.none());return ha(n,e,t)})})},s=function(){return Ka(u).map(function(t){return l(t).bind(function(n){var e=vu(i,n,t);return pa(n,e)})})},d=function(o,n){return n().each(function(n){var r=A(n,wr);Ka(u).each(function(n){return l(n).each(function(n){var e,t=ou(On.fromDom(u.getDoc())),t=(e=r,t=t,{selection:hu(i),clipboard:e,generators:t});o(n,t).each(a(n))})})})};jn({mceTableSplitCells:function(){return o(r.unmergeCells)},mceTableMergeCells:function(){return o(r.mergeCells)},mceTableInsertRowBefore:function(){return o(r.insertRowsBefore)},mceTableInsertRowAfter:function(){return o(r.insertRowsAfter)},mceTableInsertColBefore:function(){return o(r.insertColumnsBefore)},mceTableInsertColAfter:function(){return o(r.insertColumnsAfter)},mceTableDeleteCol:function(){return o(r.deleteColumn)},mceTableDeleteRow:function(){return o(r.deleteRow)},mceTableCutCol:function(n){return s().each(function(n){e.setColumns(n),o(r.deleteColumn)})},mceTableCutRow:function(n){return f().each(function(n){e.setRows(n),o(r.deleteRow)})},mceTableCopyCol:function(n){return s().each(function(n){return e.setColumns(n)})},mceTableCopyRow:function(n){return f().each(function(n){return e.setRows(n)})},mceTablePasteColBefore:function(n){return d(r.pasteColsBefore,e.getColumns)},mceTablePasteColAfter:function(n){return d(r.pasteColsAfter,e.getColumns)},mceTablePasteRowBefore:function(n){return d(r.pasteRowsBefore,e.getRows)},mceTablePasteRowAfter:function(n){return d(r.pasteRowsAfter,e.getRows)},mceTableDelete:function(){return Ua(u).each(function(n){it(n,c).filter(h(c)).each(function(n){var e=On.fromText("");Wt(n,e),Vt(n),u.dom.isEmpty(u.getBody())?(u.setContent(""),u.selection.setCursorLocation()):((n=u.dom.createRng()).setStart(e.dom,0),n.setEnd(e.dom,0),u.selection.setRng(n),u.nodeChanged())})})},mceTableSizingMode:function(n,e){return t=e,Ua(u).each(function(n){nc(u)||Zi(u)||Qi(u)||it(n,c).each(function(n){"relative"!==t||Uu(n)?"fixed"!==t||Ku(n)?"responsive"!==t||$u(n)||sc(n):fc(u,n):ac(u,n),du(n),Li(u,n.dom,_i)})});var t}},function(n,e){return u.addCommand(e,n)});var m=function(e,n){n.each(function(n){Li(e,n.dom,_i)})};jn({mceTableCellType:function(n,e){var t=it(pu(u),c);r.setTableCellType(u,e),m(u,t)},mceTableRowType:function(n,e){var t=it(pu(u),c);r.setTableRowType(u,e),m(u,t)}},function(n,e){return u.addCommand(e,n)}),u.addCommand("mceTableColType",function(n,e){return Hn(e,"type").each(function(n){return o("th"===n?r.makeColumnsHeader:r.unmakeColumnsHeader)})}),jn({mceTableProps:w(Va,u,!1),mceTableRowProps:w(_a,u),mceTableCellProps:w(Na,u,i)},function(n,e){return u.addCommand(e,function(){return n()})}),u.addCommand("mceInsertTable",function(n,e){p(e)&&0<Mn(e).length?fa(u,e.rows,e.columns,e.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):Va(u,!0)}),u.addCommand("mceTableApplyCellStyle",function(n,e){var r,o=function(n){return"tablecell"+n.toLowerCase().replace("-","")};!p(e)||0!==(r=ea(pu(u),i,c)).length&&(function(n){for(var e in n)if(Nn.call(n,e))return!1;return!0}(e=zn(e,function(n,e){return u.formatter.has(o(e))&&g(n)}))||(jn(e,function(e,t){k(r,function(n){Ia.normal(u,n.dom).setFormat(o(t),e)})}),l(r[0]).each(function(n){return Li(u,n.dom,zi)})))})},Ga=function(t,r,o){var n=fu(t);jn({mceTableRowType:function(){return r.getTableRowType(t)},mceTableCellType:function(){return r.getTableCellType(t)},mceTableColType:function(){return Zl(pu(t)).bind(function(t){return it(t,n).map(function(n){var e=vu(o,n,t);return r.getTableColType(n,e)})}).getOr("")}},function(n,e){return t.addQueryValueHandler(e,n)})},Xa={tablecellbackgroundcolor:{selector:"td,th",styles:{backgroundColor:"%value"},remove_similar:!0},tablecellbordercolor:{selector:"td,th",styles:{borderColor:"%value"},remove_similar:!0},tablecellborderstyle:{selector:"td,th",styles:{borderStyle:"%value"},remove_similar:!0},tablecellborderwidth:{selector:"td,th",styles:{borderWidth:"%value"},remove_similar:!0}},Ya=t([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Ja=V(V({},Ya),{none:function(n){return void 0===n&&(n=undefined),Ya.none(n)}}),Qa=function(t,n){return it(t,n).bind(function(n){var e=ot(n);return M(e,function(n){return In(t,n)}).map(function(n){return{index:n,all:e}})})},Za=function(n,e,t,r){return{start:n,soffset:e,finish:t,foffset:r}},ln=t([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),nf={before:ln.before,on:ln.on,after:ln.after,cata:function(n,e,t,r){return n.fold(e,t,r)},getStart:function(n){return n.fold(s,s,s)}},ef=t([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),tf={domRange:ef.domRange,relative:ef.relative,exact:ef.exact,exactFromRange:function(n){return ef.exact(n.start,n.soffset,n.finish,n.foffset)},getWin:function(n){n=n.match({domRange:function(n){return On.fromDom(n.startContainer)},relative:function(n,e){return nf.getStart(n)},exact:function(n,e,t,r){return n}});return On.fromDom(ie(n).dom.defaultView)},range:Za},rf=function(n,e){return n.selectNodeContents(e.dom)},of=function(n,e,t){var r,o,n=n.document.createRange();return r=n,e.fold(function(n){r.setStartBefore(n.dom)},function(n,e){r.setStart(n.dom,e)},function(n){r.setStartAfter(n.dom)}),o=n,t.fold(function(n){o.setEndBefore(n.dom)},function(n,e){o.setEnd(n.dom,e)},function(n){o.setEndAfter(n.dom)}),n},uf=function(n,e,t,r,o){n=n.document.createRange();return n.setStart(e.dom,t),n.setEnd(r.dom,o),n},cf=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}},lf=t([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),af=function(n,e,t){return e(On.fromDom(t.startContainer),t.startOffset,On.fromDom(t.endContainer),t.endOffset)},ff=function(n,e){var o,t,e=(o=n,e.match({domRange:function(n){return{ltr:f(n),rtl:x.none}},relative:function(n,e){return{ltr:$(function(){return of(o,n,e)}),rtl:$(function(){return x.some(of(o,e,n))})}},exact:function(n,e,t,r){return{ltr:$(function(){return uf(o,n,e,t,r)}),rtl:$(function(){return x.some(uf(o,t,r,n,e))})}}}));return(t=(e=e).ltr()).collapsed?e.rtl().filter(function(n){return!1===n.collapsed}).map(function(n){return lf.rtl(On.fromDom(n.endContainer),n.endOffset,On.fromDom(n.startContainer),n.startOffset)}).getOrThunk(function(){return af(0,lf.ltr,t)}):af(0,lf.ltr,t)},sf=function(u,n){return ff(u,n).match({ltr:function(n,e,t,r){var o=u.document.createRange();return o.setStart(n.dom,e),o.setEnd(t.dom,r),o},rtl:function(n,e,t,r){var o=u.document.createRange();return o.setStart(t.dom,r),o.setEnd(n.dom,e),o}})},df=(lf.ltr,lf.rtl,function(n,e,t){return e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom}),mf=function(t,r,n,e,o){var u=function(n){var e=t.dom.createRange();return e.setStart(r.dom,n),e.collapse(!0),e},i=$t(r).length,i=function(n,e,t,r,o){if(0===o)return 0;if(e===r)return o-1;for(var u=r,i=1;i<o;i++){var c=n(i),l=Math.abs(e-c.left);if(t<=c.bottom){if(t<c.top||u<l)return i-1;u=l}}return 0}(function(n){return u(n).getBoundingClientRect()},n,e,o.right,i);return u(i)},gf=function(n,e,t,r){return ee(e)?function(e,t,r,o){var n=e.dom.createRange();n.selectNode(t.dom);n=n.getClientRects();return q(n,function(n){return df(n,r,o)?x.some(n):x.none()}).map(function(n){return mf(e,t,r,o,n)})}(n,e,t,r):(e=e,u=t,i=r,c=(o=n).dom.createRange(),e=se(e),q(e,function(n){return c.selectNode(n.dom),df(c.getBoundingClientRect(),u,i)?gf(o,n,u,i):x.none()}));var o,u,i,c},pf=function(n,e){return e-n.left<n.right-e},hf=function(n,e,t){n=n.dom.createRange();return n.selectNode(e.dom),n.collapse(t),n},bf=function(e,n,t){var r=e.dom.createRange();r.selectNode(n.dom);var r=r.getBoundingClientRect(),o=pf(r,t);return(!0===o?$o:Go)(n).map(function(n){return hf(e,n,o)})},vf=function(n,e,t){var r=e.dom.getBoundingClientRect(),t=pf(r,t);return x.some(hf(n,e,t))},wf=function(n,e,t,r){var o=n.dom.createRange();o.selectNode(e.dom);o=o.getBoundingClientRect();return function(n,e,t,r){var o=n.dom.createRange();o.selectNode(e.dom);o=o.getBoundingClientRect(),t=Math.max(o.left,Math.min(o.right,t)),r=Math.max(o.top,Math.min(o.bottom,r));return gf(n,e,t,r)}(n,e,Math.max(o.left,Math.min(o.right,t)),Math.max(o.top,Math.min(o.bottom,r)))},yf=document.caretPositionFromPoint?function(t,n,e){return x.from(t.dom.caretPositionFromPoint(n,e)).bind(function(n){if(null===n.offsetNode)return x.none();var e=t.dom.createRange();return e.setStart(n.offsetNode,n.offset),e.collapse(),x.some(e)})}:document.caretRangeFromPoint?function(n,e,t){return x.from(n.dom.caretRangeFromPoint(e,t))}:function(o,u,e){return On.fromPoint(o,u,e).bind(function(r){var n=function(){return n=o,t=u,(0===se(e=r).length?vf:bf)(n,e,t);var n,e,t};return 0===se(r).length?n():wf(o,r,u,e).orThunk(n)})},Cf=function(n,e){var t=Yn(n);return"input"===t?nf.after(n):R(["br","img"],t)?0===e?nf.before(n):nf.after(n):nf.on(n,e)},xf=function(n,e){n=n.fold(nf.before,Cf,nf.after),e=e.fold(nf.before,Cf,nf.after);return tf.relative(n,e)},Sf=function(n,e,t,r){e=Cf(n,e),r=Cf(t,r);return tf.relative(e,r)},Tf=function(n,e,t,r){var o,u,i,c,l,l=(u=e,i=t,c=r,(l=ue(o=n).dom.createRange()).setStart(o.dom,u),l.setEnd(i.dom,c),l),r=In(n,t)&&e===r;return l.collapsed&&!r},Rf=function(n){return x.from(n.getSelection())},Df=function(n,e){Rf(n).each(function(n){n.removeAllRanges(),n.addRange(e)})},Of=function(n,e,t,r,o){o=uf(n,e,t,r,o);Df(n,o)},Af=function(a,n){return ff(a,n).match({ltr:function(n,e,t,r){Of(a,n,e,t,r)},rtl:function(u,i,c,l){Rf(a).each(function(n){if(n.setBaseAndExtent)n.setBaseAndExtent(u.dom,i,c.dom,l);else if(n.extend)try{t=c,r=l,(e=n).collapse(u.dom,i),e.extend(t.dom,r)}catch(o){Of(a,c,l,u,i)}else Of(a,c,l,u,i);var e,t,r})}})},kf=function(n,e,t,r,o){o=Sf(e,t,r,o);Af(n,o)},If=function(n,e,t){t=xf(e,t);Af(n,t)},Bf=function(n){var o=tf.getWin(n).dom,e=function(n,e,t,r){return uf(o,n,e,t,r)},n=n.match({domRange:function(n){var e=On.fromDom(n.startContainer),t=On.fromDom(n.endContainer);return Sf(e,n.startOffset,t,n.endOffset)},relative:xf,exact:Sf});return ff(o,n).match({ltr:e,rtl:e})},Ef=function(n){if(0<n.rangeCount){var e=n.getRangeAt(0),n=n.getRangeAt(n.rangeCount-1);return x.some(Za(On.fromDom(e.startContainer),e.startOffset,On.fromDom(n.endContainer),n.endOffset))}return x.none()},Pf=function(n){if(null===n.anchorNode||null===n.focusNode)return Ef(n);var e=On.fromDom(n.anchorNode),t=On.fromDom(n.focusNode);return Tf(e,n.anchorOffset,t,n.focusOffset)?x.some(Za(e,n.anchorOffset,t,n.focusOffset)):Ef(n)},Mf=function(n,e){e=function(n,e){n=n.document.createRange();return rf(n,e),n}(n,e);Df(n,e)},Nf=function(n){return Rf(n).filter(function(n){return 0<n.rangeCount}).bind(Pf).map(function(n){return tf.exact(n.start,n.soffset,n.finish,n.foffset)})},jf=function(n,e){n=sf(n,e);return 0<(e=0<(n=(e=n).getClientRects()).length?n[0]:e.getBoundingClientRect()).width||0<e.height?x.some(e).map(cf):x.none()},Wf=tinymce.util.Tools.resolve("tinymce.util.VK"),Lf=function(n,e,t){return Ff(n,e,Qa(r=t,o).fold(function(){return Ja.none(r)},function(n){return n.index+1<n.all.length?Ja.middle(r,n.all[n.index+1]):Ja.last(r)}));var r,o},zf=function(n,e,t){return Ff(n,e,Qa(r=t,o).fold(function(){return Ja.none()},function(n){return 0<=n.index-1?Ja.middle(r,n.all[n.index-1]):Ja.first(r)}));var r,o},_f=function(n,e){e=tf.exact(e,0,e,0);return Bf(e)},Ff=function(e,t,n){return n.fold(x.none,x.none,function(n,e){return $o(e).map(function(n){return _f(0,n)})},function(n){return it(n,t).bind(function(n){return e.execCommand("mceTableInsertRowAfter"),function(n){n=Se(n,"tr");return H(n).bind(function(n){return Be(n,"td,th").map(function(n){return _f(0,n)})})}(n)})})},Hf=["table","li","dl"],qf=function(n,e){return{selection:n,kill:e}},Vf=function(n,e,t,r){return{start:nf.on(n,e),finish:nf.on(t,r)}},Uf=function(n,e){e=sf(n,e);return Za(On.fromDom(e.startContainer),e.startOffset,On.fromDom(e.endContainer),e.endOffset)},Kf=Vf,$f=function(t,n,r,e,o){return In(r,e)?x.none():ur(r,e,n).bind(function(n){var e=n.boxes.getOr([]);return 0<e.length?(o(t,e,n.start,n.finish),x.some(qf(x.some(Kf(r,0,r,Vo(r))),!0))):x.none()})},Gf=function(n,e){return{item:n,mode:e}},Mc=function(n,e,t,r){return void 0===r&&(r=Xf),n.property().parent(e).map(function(n){return Gf(n,r)})},Xf=function(n,e,t,r){return void 0===r&&(r=Yf),t.sibling(n,e).map(function(n){return Gf(n,r)})},Yf=function(n,e,t,r){void 0===r&&(r=Yf);e=n.property().children(e);return t.first(e).map(function(n){return Gf(n,r)})},Jf=[{current:Mc,next:Xf,fallback:x.none()},{current:Xf,next:Yf,fallback:x.some(Mc)},{current:Yf,next:Yf,fallback:x.some(Xf)}],Qf=function(e,t,r,o,n){return P(n=void 0===n?Jf:n,function(n){return n.current===r}).bind(function(n){return n.current(e,t,o,n.next).orThunk(function(){return n.fallback.bind(function(n){return Qf(e,t,n,o)})})})},Zf=function(){return{sibling:function(n,e){return n.query().prevSibling(e)},first:function(n){return 0<n.length?x.some(n[n.length-1]):x.none()}}},ns=function(){return{sibling:function(n,e){return n.query().nextSibling(e)},first:function(n){return 0<n.length?x.some(n[0]):x.none()}}},es=function(e,n,t,r,o,u){return Qf(e,n,r,o).bind(function(n){return u(n.item)?x.none():t(n.item)?x.some(n.item):es(e,n.item,t,n.mode,o,u)})},ts=function(e){return function(n){return 0===e.property().children(n).length}},rs=function(n,e,t,r){return es(n,e,t,Xf,Zf(),r)},os=function(n,e,t,r){return es(n,e,t,Xf,ns(),r)},us=Jt(),fn=function(n,e){return rs(us,n,ts(us),e)},ln=function(n,e){return os(us,n,ts(us),e)},is=t([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),cs=function(n){return Ee(n,"tr")},ls=V(V({},is),{verify:function(t,e,n,r,o,u,i){return Ee(r,"td,th",i).bind(function(n){return Ee(e,"td,th",i).map(function(e){return In(n,e)?In(r,n)&&Vo(n)===o?u(e):is.none("in same cell"):rr(cs,[n,e]).fold(function(){return function(n,e,t){e=n.getRect(e),t=n.getRect(t);return t.right>e.left&&t.left<e.right}(t,e,n)?is.success():u(e)},function(n){return u(e)})})}).getOr(is.none("default"))},cata:function(n,e,t,r,o){return n.fold(e,t,r,o)}}),as=function(n,e){return M(n,w(In,e))},fs=function(n){return"br"===Yn(n)},ss=function(n,e,t){return e(n,t).bind(function(n){return ee(n)&&0===$t(n).trim().length?ss(n,e,t):x.some(n)})},ds=function(e,n,t,r){return de(o=n,u=t).filter(fs).orThunk(function(){return de(o,u-1).filter(fs)}).bind(function(n){return r.traverse(n).fold(function(){return ss(n,r.gather,e).map(r.relative)},function(n){return ce(r=n).bind(function(e){var t=se(e);return as(t,r).map(function(n){return{parent:e,children:t,element:r,index:n}})}).map(function(n){return nf.on(n.parent,n.index)});var r})});var o,u},ms=function(n,e,t,r){var o,u,i;return(fs(e)?(o=n,u=e,(i=r).traverse(u).orThunk(function(){return ss(u,i.gather,o)}).map(i.relative)):ds(n,e,t,r)).map(function(n){return{start:n,finish:n}})},gs=function(n,e){return{left:n.left,top:n.top+e,right:n.right,bottom:n.bottom+e}},ps=function(n,e){return{left:n.left,top:n.top-e,right:n.right,bottom:n.bottom-e}},hs=function(n,e,t){return{left:n.left+e,top:n.top+t,right:n.right+e,bottom:n.bottom+t}},bs=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}},vs=function(n,e){return x.some(n.getRect(e))},ws=function(n,e,t){return ne(e)?vs(n,e).map(bs):ee(e)?(n=n,e=e,(0<=(t=t)&&t<Vo(e)?n.getRangedRect(e,t,e,t+1):0<t?n.getRangedRect(e,t-1,e,t):x.none()).map(bs)):x.none()},ys=function(n,e){return ne(e)?vs(n,e).map(bs):ee(e)?n.getRangedRect(e,0,e,Vo(e)).map(bs):x.none()},Cs=t([{none:[]},{retry:["caret"]}]),xs=function(e,n,t){return Te(function(n,e){return e(n)},Ae,n,hl,r).fold(d,function(n){return ys(e,n).exists(function(n){return e=n,(n=t).left<e.left||Math.abs(e.right-n.left)<1||n.left>e.right;var e})});var r},Mc={point:function(n){return n.bottom},adjuster:function(n,e,t,r,o){var u=gs(o,5);return Math.abs(t.bottom-r.bottom)<1||t.top>o.bottom?Cs.retry(u):t.top===o.bottom?Cs.retry(gs(o,1)):xs(n,e,o)?Cs.retry(hs(u,5,0)):Cs.none()},move:gs,gather:ln},Ss=function(t,r,o,u,i){return 0===i?x.some(u):(n=t,e=u.left,c=r.point(u),n.elementFromPoint(e,c).filter(function(n){return"table"===Yn(n)}).isSome()?(c=i-1,Ss(t,r,o,r.move(u,5),c)):t.situsFromPoint(u.left,r.point(u)).bind(function(n){return n.start.fold(x.none,function(e){return ys(t,e).bind(function(n){return r.adjuster(t,e,n,o,u).fold(x.none,function(n){return Ss(t,r,o,n,i-1)})}).orThunk(function(){return x.some(u)})},x.none)}));var n,e,c},t=function(e,t,n){var r,o=e.move(n,5),u=Ss(t,e,n,o,100).getOr(o);return r=u,n=t,((o=e).point(r)>n.getInnerHeight()?x.some(o.point(r)-n.getInnerHeight()):o.point(r)<0?x.some(-o.point(r)):x.none()).fold(function(){return t.situsFromPoint(u.left,e.point(u))},function(n){return t.scrollBy(0,n),t.situsFromPoint(u.left,e.point(u)-n)})},Ts={tryUp:w(t,{point:function(n){return n.top},adjuster:function(n,e,t,r,o){var u=ps(o,5);return Math.abs(t.top-r.top)<1||t.bottom<o.top?Cs.retry(u):t.bottom===o.top?Cs.retry(ps(o,1)):xs(n,e,o)?Cs.retry(hs(u,5,0)):Cs.none()},move:ps,gather:fn}),tryDown:w(t,Mc),ieTryUp:function(n,e){return n.situsFromPoint(e.left,e.top-5)},ieTryDown:function(n,e){return n.situsFromPoint(e.left,e.bottom+5)},getJumpSize:f(5)},Rs=function(t,r,o){return t.getSelection().bind(function(e){return ms(r,e.finish,e.foffset,o).fold(function(){return x.some(hc(e.finish,e.foffset))},function(n){n=t.fromSitus(n),n=ls.verify(t,e.finish,e.foffset,n.finish,n.foffset,o.failure,r);return ls.cata(n,function(n){return x.none()},function(){return x.none()},function(n){return x.some(hc(n,0))},function(n){return x.some(hc(n,Vo(n)))})})})},Ds=function(t,r,o,u,i,c){return 0===c?x.none():ks(t,r,o,u,i).bind(function(n){var e=t.fromSitus(n),e=ls.verify(t,o,u,e.finish,e.foffset,i.failure,r);return ls.cata(e,function(){return x.none()},function(){return x.some(n)},function(n){return In(o,n)&&0===u?Os(t,o,u,ps,i):Ds(t,r,n,0,i,c-1)},function(n){return In(o,n)&&u===Vo(n)?Os(t,o,u,gs,i):Ds(t,r,n,Vo(n),i,c-1)})})},Os=function(e,n,t,r,o){return ws(e,n,t).bind(function(n){return As(e,o,r(n,Ts.getJumpSize()))})},As=function(n,e,t){var r=Rn().browser;return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?e.otherRetry(n,t):r.isIE()?e.ieRetry(n,t):x.none()},ks=function(e,n,t,r,o){return ws(e,t,r).bind(function(n){return As(e,o,n)})},Is=function(n,e){return Ae(n,function(n){return ce(n).exists(function(n){return In(n,e)})},t).isSome();var t},Bs=function(u,i,c,n,l){return Ee(n,"td,th",i).bind(function(o){return Ee(o,"table",i).bind(function(n){return Is(l,n)?Rs(e=u,t=i,r=c).bind(function(n){return Ds(e,t,n.element,n.offset,r,20).map(e.fromSitus)}).bind(function(e){return Ee(e.finish,"td,th",i).map(function(n){return{start:o,finish:n,range:e}})}):x.none();var e,t,r})})},Es=function(n,e,t,r,o,u){return Rn().browser.isIE()?x.none():u(r,e).orThunk(function(){return Bs(n,e,t,r,o).map(function(n){n=n.range;return qf(x.some(Kf(n.start,n.soffset,n.finish,n.foffset)),!0)})})},Ps=function(n,r){return Ee(n,"tr",r).bind(function(t){return Ee(t,"table",r).bind(function(n){var e=Se(n,"tr");return In(t,e[0])?rs(us,n,function(n){return Go(n).isSome()},r).map(function(n){var e=Vo(n);return qf(x.some(Kf(n,e,n,e)),!0)}):x.none()})})},Ms=function(n,r){return Ee(n,"tr",r).bind(function(t){return Ee(t,"table",r).bind(function(n){var e=Se(n,"tr");return In(t,e[e.length-1])?os(us,n,function(n){return $o(n).isSome()},r).map(function(n){return qf(x.some(Kf(n,0,n,0)),!0)}):x.none()})})},Ns=function(n,e,t,r,o,u,i){return Bs(n,t,r,o,u).bind(function(n){return $f(e,t,n.start,n.finish,i)})},js=function(n,e){return Ee(n,"td,th",e)},Ws=function(o,u,e,i){var t,r=(t=No(x.none()),{clear:function(){return t.set(x.none())},set:function(n){return t.set(x.some(n))},isSet:function(){return t.get().isSome()},on:function(n){return t.get().each(n)}}),c=r.clear,l=function(n){r.on(function(r){i.clearBeforeUpdate(u),js(n.target,e).each(function(t){ur(r,t,e).each(function(n){var e=n.boxes.getOr([]);(1<e.length||1===e.length&&!In(r,t))&&(i.selectRange(u,e,n.start,n.finish),o.selectContents(t))})})})};return{clearstate:c,mousedown:function(n){i.clear(u),js(n.target,e).each(r.set)},mouseover:function(n){l(n)},mouseup:function(n){l(n),c()}}},Ls={traverse:fe,gather:ln,relative:nf.before,otherRetry:Ts.tryDown,ieRetry:Ts.ieTryDown,failure:ls.failedDown},zs={traverse:ae,gather:fn,relative:nf.before,otherRetry:Ts.tryUp,ieRetry:Ts.ieTryUp,failure:ls.failedUp},fn=function(e){return function(n){return n===e}},_s=fn(38),Fs=fn(40),Hs=function(n){return 37<=n&&n<=40},qs={isBackward:fn(37),isForward:fn(39)},Vs={isBackward:fn(39),isForward:fn(37)},Us=function(u){return{elementFromPoint:function(n,e){return On.fromPoint(On.fromDom(u.document),n,e)},getRect:function(n){return n.dom.getBoundingClientRect()},getRangedRect:function(n,e,t,r){r=tf.exact(n,e,t,r);return jf(u,r)},getSelection:function(){return Nf(u).map(function(n){return Uf(u,n)})},fromSitus:function(n){n=tf.relative(n.start,n.finish);return Uf(u,n)},situsFromPoint:function(n,e){return function(n,e,t){n=On.fromDom(n.document);return yf(n,e,t).map(function(n){return Za(On.fromDom(n.startContainer),n.startOffset,On.fromDom(n.endContainer),n.endOffset)})}(u,n,e).map(function(n){return Vf(n.start,n.soffset,n.finish,n.foffset)})},clearSelection:function(){Rf(u).each(function(n){return n.removeAllRanges()})},collapseSelection:function(o){void 0===o&&(o=!1),Nf(u).each(function(n){return n.fold(function(n){return n.collapse(o)},function(n,e){e=o?n:e;If(u,e,e)},function(n,e,t,r){t=o?n:t,r=o?e:r;kf(u,t,r,t,r)})})},setSelection:function(n){kf(u,n.start,n.soffset,n.finish,n.foffset)},setRelativeSelection:function(n,e){If(u,n,e)},selectContents:function(n){Mf(u,n)},getInnerHeight:function(){return u.innerHeight},getScrollY:function(){var n,e;return(n=On.fromDom(u.document),e=n!==undefined?n.dom:document,n=e.body.scrollLeft||e.documentElement.scrollLeft,e=e.body.scrollTop||e.documentElement.scrollTop,Wr(n,e)).top},scrollBy:function(n,e){!function(n,e,t){t=(t!==undefined?t.dom:document).defaultView;t&&t.scrollBy(n,e)}(n,e,On.fromDom(u.document))}}},Ks=function(n,e){return{rows:n,cols:e}},$s=function(n,d,m,g){var l=Us(n),a=function(){return g.clear(d),x.none()};return{keydown:function(n,e,t,r,o,u){var n=n.raw,i=n.which,c=!0===n.shiftKey;return ir(d,g.selectedSelector).fold(function(){return Fs(i)&&c?w(Ns,l,d,m,Ls,r,e,g.selectRange):_s(i)&&c?w(Ns,l,d,m,zs,r,e,g.selectRange):Fs(i)?w(Es,l,m,Ls,r,e,Ms):_s(i)?w(Es,l,m,zs,r,e,Ps):x.none},function(o){var n=function(n){return function(){return q(n,function(n){return e=n.rows,n=n.cols,t=d,lr(o,e,n,(r=g).firstSelectedSelector,r.lastSelectedSelector).map(function(n){return r.clearBeforeUpdate(t),r.selectRange(t,n.boxes,n.start,n.finish),n.boxes});var e,t,r}).fold(function(){return cr(d,g.firstSelectedSelector,g.lastSelectedSelector).map(function(n){var e=Fs(i)||u.isForward(i)?nf.after:nf.before;return l.setRelativeSelection(nf.on(n.first,0),e(n.table)),g.clear(d),qf(x.none(),!0)})},function(n){return x.some(qf(x.none(),!0))})}};return Fs(i)&&c?n([Ks(1,0)]):_s(i)&&c?n([Ks(-1,0)]):u.isBackward(i)&&c?n([Ks(0,-1),Ks(-1,0)]):u.isForward(i)&&c?n([Ks(0,1),Ks(1,0)]):Hs(i)&&!1==c?a:x.none})()},keyup:function(c,l,a,f,s){return ir(d,g.selectedSelector).fold(function(){var t,r,n,o,u,e=c.raw,i=e.which;return!1!=(!0===e.shiftKey)&&Hs(i)?(t=d,r=m,n=l,e=a,o=f,i=s,u=g.selectRange,In(n,o)&&e===i?x.none():Ee(n,"td,th",r).bind(function(e){return Ee(o,"td,th",r).bind(function(n){return $f(t,r,e,n,u)})})):x.none()},x.none)}}},Gs=function(o,u,e){var t=function(n){Le(n,o.selected),Le(n,o.firstSelected),Le(n,o.lastSelected)},i=function(n){Me(n,o.selected,"1")},c=function(n){r(n),e()},r=function(n){n=Se(n,o.selectedSelector);k(n,t)};return{clearBeforeUpdate:r,clear:c,selectRange:function(n,e,t,r){c(n),k(e,i),Me(t,o.firstSelected,"1"),Me(r,o.lastSelected,"1"),u(e,t,r)},selectedSelector:o.selectedSelector,firstSelectedSelector:o.firstSelectedSelector,lastSelectedSelector:o.lastSelectedSelector}},Xs=function(n,e,t){var r=Dt.fromTable(n);return Wc(r,e).map(function(n){var e=kc(r,t,!1);return{upOrLeftCells:function(n,e,t){n=n.slice(0,e[e.length-1].row+1),t=Bc(n,t);return j(t,function(n){n=n.cells.slice(0,e[e.length-1].column+1);return A(n,function(n){return n.element})})}(e,n,t),downOrRightCells:function(n,e,t){n=n.slice(e[0].row+e[0].rowspan-1,n.length),t=Bc(n,t);return j(t,function(n){n=n.cells.slice(e[0].column+e[0].colspan-1,n.cells.length);return A(n,function(n){return n.element})})}(e,n,t)}})},Ys=function(n){return!1===hi(On.fromDom(n.target),"ephox-snooker-resizer-bar")};function Js(p,h,n){var b=Gs(bu,function(r,o,u){n.targets().each(function(t){it(o).each(function(n){var e=uc(p),e=ru(y,On.fromDom(p.getDoc()),e),e=Xs(n,t,e);p.fire("TableSelectionChange",{cells:r,start:o,finish:u,otherCells:e})})})},function(){p.fire("TableSelectionClear")});return p.on("init",function(n){var r,e,o,u,t=p.getWin(),i=cu(p),c=fu(p),l=function(n,e,t,r){n=Us(n),r=Ws(n,e,t,r);return{clearstate:r.clearstate,mousedown:r.mousedown,mouseover:r.mouseover,mouseup:r.mouseup}}(t,i,c,b),a=$s(t,i,c,b),f=(r=i,e=c,o=b,u=Us(t),function(n,t){o.clearBeforeUpdate(r),ur(n,t,e).each(function(n){var e=n.boxes.getOr([]);o.selectRange(r,e,n.start,n.finish),u.selectContents(t),u.collapseSelection()})});p.on("TableSelectorChange",function(n){return f(n.start,n.finish)});var s,d,m=function(n,e){!0===n.raw.shiftKey&&(e.kill&&n.kill(),e.selection.each(function(n){n=tf.relative(n.start,n.finish),n=sf(t,n);p.selection.setRng(n)}))},g=function(n){return 0===n.button},c=(s=No(On.fromDom(i)),d=No(0),{touchEnd:function(n){var e,t,r=On.fromDom(n.target);"td"!==Yn(r)&&"th"!==Yn(r)||(e=s.get(),t=d.get(),In(e,r)&&n.timeStamp-t<300&&(n.preventDefault(),f(r,r))),s.set(r),d.set(n.timeStamp)}});p.on("dragstart",function(n){l.clearstate()}),p.on("mousedown",function(n){g(n)&&Ys(n)&&l.mousedown(si(n))}),p.on("mouseover",function(n){var e;((e=n).buttons===undefined||Fa.browser.isEdge()&&0===e.buttons||0!=(1&e.buttons))&&Ys(n)&&l.mouseover(si(n))}),p.on("mouseup",function(n){g(n)&&Ys(n)&&l.mouseup(si(n))}),p.on("touchend",c.touchEnd),p.on("keyup",function(n){var e,t,r=si(n);r.raw.shiftKey&&Hs(r.raw.which)&&(e=p.selection.getRng(),t=On.fromDom(e.startContainer),n=On.fromDom(e.endContainer),a.keyup(r,t,e.startOffset,n,e.endOffset).each(function(n){m(r,n)}))}),p.on("keydown",function(n){var e=si(n);h().each(function(n){return n.hideBars()});var t=p.selection.getRng(),r=On.fromDom(t.startContainer),o=On.fromDom(t.endContainer),n=Br(qs,Vs)(On.fromDom(p.selection.getStart()));a.keydown(e,r,t.startOffset,o,t.endOffset,n).each(function(n){m(e,n)}),h().each(function(n){return n.showBars()})}),p.on("NodeChange",function(){var n=p.selection,e=On.fromDom(n.getStart()),n=On.fromDom(n.getEnd());rr(it,[e,n]).fold(function(){return b.clear(i)},y)})}),{clear:b.clear}}var Qs=function(n,r){var o=No(x.none()),u=No([]),t=x.none(),i=oe("caption"),e=function(e){return t.forall(function(n){return!n[e]})},c=function(){return na(pu(n),fu(n)).bind(function(t){return it(t).map(function(n){return i(t)?{element:e=t,mergable:x.none(),unmergable:x.none(),selection:[e]}:vu(r,n,t);var e})})},l=function(e){return it(e.element).map(function(n){var t=Dt.fromTable(n),n=Wc(t,e).getOr([]),n=E(n,function(n,e){return e.isLocked&&(n.onAny=!0,0===e.column?n.onFirst=!0:e.column+e.colspan>=t.grid.columns&&(n.onLast=!0)),n},{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:_c(t,e).isSome(),unmergeable:Fc(t,e).isSome(),locked:n}})},a=function(){o.set($(c)()),t=o.get().bind(l),k(u.get(),function(n){return n()})},f=function(e,t){var r=function(){return o.get().fold(function(){e.setDisabled(!0)},function(n){e.setDisabled(t(n))})};return r(),u.set(u.get().concat([r])),function(){u.set(I(u.get(),function(n){return n!==r}))}},s=function(e){return t.exists(function(n){return n.locked[e]})};return n.on("NodeChange ExecCommand TableSelectorChange",a),{onSetupTable:function(n){return f(n,function(n){return!1})},onSetupCellOrRow:function(n){return f(n,function(n){return i(n.element)})},onSetupColumn:function(e){return function(n){return f(n,function(n){return i(n.element)||s(e)})}},onSetupPasteable:function(e){return function(n){return f(n,function(n){return i(n.element)||e().isNone()})}},onSetupPasteableColumn:function(e,t){return function(n){return f(n,function(n){return i(n.element)||e().isNone()||s(t)})}},onSetupMergeable:function(n){return f(n,function(n){return e("mergeable")})},onSetupUnmergeable:function(n){return f(n,function(n){return e("unmergeable")})},resetTargets:a,targets:function(){return o.get()}}},Zs=function(e){var n=e.getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol");0<n.length&&e.ui.registry.addContextToolbar("table",{predicate:function(n){return e.dom.is(n,"table")&&e.getBody().contains(n)},items:n,scope:"node",position:"node"})};hr.add("table",function(i){var n,e,t,r,o,u,c=(n=function(){return cu(i)},e=function(){return na(pu(i))},t=bu.selectedSelector,{get:function(){return ar(n(),t).fold(function(){return e().map(pr).getOrThunk(mr)},function(n){return gr(n)})}}),l=Qs(i,c),a=pc(i),f=Js(i,a.lazyResize,l),s=ra(i,a.lazyWire,c),d=(r=No(x.none()),o=No(x.none()),u=function(n){n.set(x.none())},{getRows:r.get,setRows:function(n){r.set(n),u(o)},clearRows:function(){return u(r)},getColumns:o.get,setColumns:function(n){o.set(n),u(r)},clearColumns:function(){return u(o)}});return $a(i,s,f,c,d),Ga(i,s,c),wu(i,c,s,f),function(e,n,t){var r=function(n){return function(){return e.execCommand(n)}},o=function(n){e.execCommand("mceInsertTable",!1,{rows:n.numRows,columns:n.numColumns})},u={text:"Table properties",onSetup:n.onSetupTable,onAction:r("mceTableProps")},i={text:"Delete table",icon:"table-delete-table",onSetup:n.onSetupTable,onAction:r("mceTableDelete")};e.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:r("mceTableInsertRowBefore"),onSetup:n.onSetupCellOrRow}),e.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:r("mceTableInsertRowAfter"),onSetup:n.onSetupCellOrRow}),e.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:r("mceTableDeleteRow"),onSetup:n.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:r("mceTableRowProps"),onSetup:n.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:r("mceTableCutRow"),onSetup:n.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:r("mceTableCopyRow"),onSetup:n.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:r("mceTablePasteRowBefore"),onSetup:n.onSetupPasteable(t.getRows)}),e.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:r("mceTablePasteRowAfter"),onSetup:n.onSetupPasteable(t.getRows)});e.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:r("mceTableInsertColBefore"),onSetup:n.onSetupColumn("onFirst")}),e.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:r("mceTableInsertColAfter"),onSetup:n.onSetupColumn("onLast")}),e.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:r("mceTableDeleteCol"),onSetup:n.onSetupColumn("onAny")}),e.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:r("mceTableCutCol"),onSetup:n.onSetupColumn("onAny")}),e.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:r("mceTableCopyCol"),onSetup:n.onSetupColumn("onAny")}),e.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:r("mceTablePasteColBefore"),onSetup:n.onSetupPasteableColumn(t.getColumns,"onFirst")}),e.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:r("mceTablePasteColAfter"),onSetup:n.onSetupPasteableColumn(t.getColumns,"onLast")});e.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:r("mceTableCellProps"),onSetup:n.onSetupCellOrRow}),e.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:r("mceTableMergeCells"),onSetup:n.onSetupMergeable}),e.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:r("mceTableSplitCells"),onSetup:n.onSetupUnmergeable});!1===e.getParam("table_grid",!0,"boolean")?e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:r("mceInsertTable")}):e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:o}]}}),e.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:r("mceInsertTable")}),e.ui.registry.addMenuItem("tableprops",u),e.ui.registry.addMenuItem("deletetable",i),e.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:function(){return"tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter"}}),e.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:function(){return"tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter"}}),e.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:function(){return"tablecellprops tablemergecells tablesplitcells"}}),e.ui.registry.addContextMenu("table",{update:function(){return n.resetTargets(),n.targets().fold(function(){return""},function(n){return"caption"===Yn(n.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}})}(i,l,d),function(e,n,t){e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(n){return n("inserttable | cell row column | advtablesort | tableprops deletetable")}});var r=function(n){return function(){return e.execCommand(n)}};e.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:r("mceTableProps"),icon:"table",onSetup:n.onSetupTable}),e.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:r("mceTableDelete"),icon:"table-delete-table",onSetup:n.onSetupTable}),e.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:r("mceTableCellProps"),icon:"table-cell-properties",onSetup:n.onSetupCellOrRow}),e.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:r("mceTableMergeCells"),icon:"table-merge-cells",onSetup:n.onSetupMergeable}),e.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:r("mceTableSplitCells"),icon:"table-split-cells",onSetup:n.onSetupUnmergeable}),e.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:r("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:n.onSetupCellOrRow}),e.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:r("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:n.onSetupCellOrRow}),e.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:r("mceTableDeleteRow"),icon:"table-delete-row",onSetup:n.onSetupCellOrRow}),e.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:r("mceTableRowProps"),icon:"table-row-properties",onSetup:n.onSetupCellOrRow}),e.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:r("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:n.onSetupColumn("onFirst")}),e.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:r("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:n.onSetupColumn("onLast")}),e.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:r("mceTableDeleteCol"),icon:"table-delete-column",onSetup:n.onSetupColumn("onAny")}),e.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:r("mceTableCutRow"),onSetup:n.onSetupCellOrRow}),e.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:r("mceTableCopyRow"),onSetup:n.onSetupCellOrRow}),e.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:r("mceTablePasteRowBefore"),onSetup:n.onSetupPasteable(t.getRows)}),e.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:r("mceTablePasteRowAfter"),onSetup:n.onSetupPasteable(t.getRows)}),e.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:r("mceTableCutCol"),onSetup:n.onSetupColumn("onAny")}),e.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:r("mceTableCopyCol"),onSetup:n.onSetupColumn("onAny")}),e.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:r("mceTablePasteColBefore"),onSetup:n.onSetupPasteableColumn(t.getColumns,"onFirst")}),e.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:r("mceTablePasteColAfter"),onSetup:n.onSetupPasteableColumn(t.getColumns,"onLast")}),e.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:r("mceInsertTable"),icon:"table"})}(i,l,d),Zs(i),i.on("PreInit",function(){i.serializer.addTempAttr(bu.firstSelected),i.serializer.addTempAttr(bu.lastSelected),i.formatter.register(Xa)}),i.getParam("table_tab_navigation",!0,"boolean")&&i.on("keydown",function(n){var e,t,r,o,u;t=i,r=f,(e=n).keyCode===Wf.TAB&&(o=cu(t),u=function(n){var e=Yn(n);return In(n,o)||R(Hf,e)},n=t.selection.getRng(),n=On.fromDom(e.shiftKey?n.startContainer:n.endContainer),rt(n,u).each(function(n){e.preventDefault(),it(n,u).each(r.clear),t.selection.collapse(e.shiftKey),(e.shiftKey?zf:Lf)(t,u,n).each(function(n){t.selection.setRng(n)})}))}),i.on("remove",function(){a.destroy()}),ma(i,d,a,l)})}();