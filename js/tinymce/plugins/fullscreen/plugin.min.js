/**
 * Copyright (c) Tiny Technologies, Inc. All rights reserved.
 * Licensed under the LGPL or a commercial license.
 * For LGPL see License.txt in the project root for license information.
 * For commercial licenses see https://www.tiny.cloud/
 *
 * Version: 5.8.1 (2021-05-20)
 */
!function(){"use strict";var c=function(n){var e=n;return{get:function(){return e},set:function(n){e=n}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=function(n){return{isFullscreen:function(){return null!==n.get()}}},e=function(t){return function(n){return n=typeof(e=n),(null===e?"null":"object"==n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n)===t;var e}},t=function(e){return function(n){return typeof n===e}},r=e("string"),o=e("array"),u=t("boolean"),l=function(n){return!(null===(n=n)||n===undefined)},f=t("function"),a=t("number"),d=function(){},s=function(n){return function(){return n}};var m,h=s(!1),g=s(!0),p=function(){return v},v=(m=function(n){return n.isNone()},{fold:function(n,e){return n()},is:h,isSome:h,isNone:g,getOr:e=function(n){return n},getOrThunk:t=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:s(null),getOrUndefined:s(undefined),or:e,orThunk:t,map:p,each:d,bind:p,exists:h,forall:g,filter:p,equals:m,equals_:m,toArray:function(){return[]},toString:s("none()")}),y=function(t){var n=s(t),e=function(){return o},r=function(n){return n(t)},o={fold:function(n,e){return e(t)},is:function(n){return t===n},isSome:g,isNone:h,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(n){return y(n(t))},each:function(n){n(t)},bind:r,exists:r,forall:r,filter:function(n){return n(t)?o:v},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(n){return n.is(t)},equals_:function(n,e){return n.fold(h,function(n){return e(t,n)})}};return o},w={some:y,none:p,from:function(n){return null===n||n===undefined?v:y(n)}},b=function(){return n=function(n){return n.unbind()},e=c(w.none()),t=function(){return e.get().each(n)},{clear:function(){t(),e.set(w.none())},isSet:function(){return e.get().isSome()},set:function(n){t(),e.set(w.some(n))}};var n,e,t},S=Array.prototype.push,E=function(n,e){for(var t=n.length,r=new Array(t),o=0;o<t;o++){var u=n[o];r[o]=e(u,o)}return r},F=function(n,e){for(var t=0,r=n.length;t<r;t++)e(n[t],t)},T=function(n,e){for(var t=[],r=0,o=n.length;r<o;r++){var u=n[r];e(u,r)&&t.push(u)}return t},x=function(n,e){return function(n){for(var e=[],t=0,r=n.length;t<r;++t){if(!o(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);S.apply(e,n[t])}return e}(E(n,e))},D=function(n){return e=n,(n=0)<=n&&n<e.length?w.some(e[n]):w.none();var e},k=Object.keys,C=function(n){return n.style!==undefined&&f(n.style.getPropertyValue)},O=function(n){if(null===n||n===undefined)throw new Error("Node cannot be null or undefined");return{dom:n}},A={fromHtml:function(n,e){e=(e||document).createElement("div");if(e.innerHTML=n,!e.hasChildNodes()||1<e.childNodes.length)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return O(e.childNodes[0])},fromTag:function(n,e){n=(e||document).createElement(n);return O(n)},fromText:function(n,e){n=(e||document).createTextNode(n);return O(n)},fromDom:O,fromPoint:function(n,e,t){return w.from(n.dom.elementFromPoint(e,t)).map(O)}},p=("undefined"!=typeof window||Function("return this;")(),function(e){return function(n){return n.dom.nodeType===e}}),N=p(1),M=p(3),P=p(9),L=p(11),q=function(n,e){n=n.dom;if(1!==n.nodeType)return!1;if(n.matches!==undefined)return n.matches(e);if(n.msMatchesSelector!==undefined)return n.msMatchesSelector(e);if(n.webkitMatchesSelector!==undefined)return n.webkitMatchesSelector(e);if(n.mozMatchesSelector!==undefined)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},H=function(n){return A.fromDom(n.dom.ownerDocument)},R=function(e){return w.from(e.dom.parentNode).map(A.fromDom).map(V).map(function(n){return T(n,function(n){return e.dom!==n.dom})}).getOr([])},V=function(n){return E(n.dom.childNodes,A.fromDom)},p=f(Element.prototype.attachShadow)&&f(Node.prototype.getRootNode),W=s(p),B=p?function(n){return A.fromDom(n.dom.getRootNode())}:function(n){return P(n)?n:H(n)},j=function(n){var e=B(n);return L(n=e)&&l(n.dom.host)?w.some(e):w.none()},z=function(n){return A.fromDom(n.dom.host)},I=function(n){return l(n.dom.shadowRoot)},U=function(n){var e=M(n)?n.dom.parentNode:n.dom;if(e===undefined||null===e||null===e.ownerDocument)return!1;var t,r,o=e.ownerDocument;return j(A.fromDom(e)).fold(function(){return o.body.contains(e)},(t=U,r=z,function(n){return t(r(n))}))},_=function(n,e,t){!function(n,e,t){if(!(r(t)||u(t)||a(t)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",t,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(e,t+"")}(n.dom,e,t)},K=function(n,e){e=n.dom.getAttribute(e);return null===e?undefined:e},X=function(n,e){n.dom.removeAttribute(e)},Y=function(n,e){var t=n.dom;!function(n,e){for(var t=k(n),r=0,o=t.length;r<o;r++){var u=t[r];e(n[u],u)}}(e,function(n,e){!function(n,e,t){if(!r(t))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",t,":: Element ",n),new Error("CSS value must be a string: "+t);C(n)&&n.style.setProperty(e,t)}(t,e,n)})},G=function(n,e){return C(n)?n.style.getPropertyValue(e):""},J=function(n){var t,r,e=A.fromDom(function(n){if(W()&&l(n.target)){var e=A.fromDom(n.target);if(N(e)&&I(e)&&n.composed&&n.composedPath){e=n.composedPath();if(e)return D(e)}}return w.from(n.target)}(n).getOr(n.target)),o=function(){return n.stopPropagation()},u=function(){return n.preventDefault()},i=(t=u,r=o,function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return t(r.apply(null,n))});return{target:e,x:n.clientX,y:n.clientY,stop:o,prevent:u,kill:i,raw:n}},Q=function(n,e,t,r,o){var u,i,r=(u=t,i=r,function(n){u(n)&&i(J(n))});return n.dom.addEventListener(e,r,o),{unbind:function(r){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=o.concat(n);return r.apply(null,t)}}(Z,n,e,r,o)}},Z=function(n,e,t,r){n.dom.removeEventListener(e,t,r)},$=g,nn=function(n,e,t){return Q(n,e,$,t,!1)},en=function(t,r){return{left:t,top:r,translate:function(n,e){return en(t+n,r+e)}}},tn=en,rn=function(n){n=n===undefined?window:n;return w.from(n.visualViewport)},on=function(n,e,t,r){return{x:n,y:e,width:t,height:r,right:n+t,bottom:e+r}},un=function(n){var t=n===undefined?window:n,e=t.document,r=(n=A.fromDom(e),e=n!==undefined?n.dom:document,n=e.body.scrollLeft||e.documentElement.scrollLeft,e=e.body.scrollTop||e.documentElement.scrollTop,tn(n,e));return rn(t).fold(function(){var n=t.document.documentElement,e=n.clientWidth,n=n.clientHeight;return on(r.left,r.top,e,n)},function(n){return on(Math.max(n.pageLeft,r.left),Math.max(n.pageTop,r.top),n.width,n.height)})},cn=function(t,r,n){return rn(n).map(function(n){var e=function(n){return r(J(n))};return n.addEventListener(t,e),{unbind:function(){return n.removeEventListener(t,e)}}}).getOrThunk(function(){return{unbind:d}})},p=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ln=tinymce.util.Tools.resolve("tinymce.Env"),fn=tinymce.util.Tools.resolve("tinymce.util.Delay"),an=function(n,e){n.fire("FullscreenStateChanged",{state:e})},dn=function(n){return n.getParam("fullscreen_native",!1,"boolean")},sn=function(n){var e=A.fromDom(n.getElement());return j(e).map(z).getOrThunk(function(){return function(n){n=n.dom.body;if(null===n||n===undefined)throw new Error("Body is not available yet");return A.fromDom(n)}(H(e))})},mn=function(n){return n.dom===((n=H(n).dom).fullscreenElement!==undefined?n.fullscreenElement:n.msFullscreenElement!==undefined?n.msFullscreenElement:n.webkitFullscreenElement!==undefined?n.webkitFullscreenElement:null)},hn=function(n,e,t){return T(function(n,e){for(var t=f(e)?e:h,r=n.dom,o=[];null!==r.parentNode&&r.parentNode!==undefined;){var u=r.parentNode,i=A.fromDom(u);if(o.push(i),!0===t(i))break;r=u}return o}(n,t),e)},gn=function(n){return e=n,n=t===undefined?document:t.dom,1!==(t=n).nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount?[]:E(n.querySelectorAll(e),A.fromDom);var e,t},pn=function(n,e){return t=function(n){return q(n,e)},T(R(n),t);var t},vn="data-ephox-mobile-fullscreen-style",yn="position:absolute!important;",wn="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",bn=ln.os.isAndroid(),Sn=function(n){var e,t,r,t=(t="background-color",r=(e=n).dom,""!==(n=window.getComputedStyle(r).getPropertyValue(t))||U(e)?n:G(r,t));return t!==undefined&&""!==t?"background-color:"+t+"!important":"background-color:rgb(255,255,255)!important;"},En=function(r,n,e){var t,o=function(t){return function(n){var e=K(n,"style"),e=e===undefined?"no-styles":e.trim();e===t||(_(n,vn,e),Y(n,r.parseStyle(t)))}},u=(t="*",hn(n,function(n){return q(n,t)},i)),i=x(u,function(n){return pn(n,"*:not(.tox-silver-sink)")}),e=Sn(e);F(i,o("display:none!important;")),F(u,o(yn+wn+e)),o((!0===bn?"":yn)+wn+e)(n)},Fn=p.DOM,Tn=rn().fold(function(){return{bind:d,unbind:d}},function(e){var t,r=(t=c(w.none()),{clear:function(){return t.set(w.none())},set:function(n){return t.set(w.some(n))},isSet:function(){return t.get().isSome()},on:function(n){return t.get().each(n)}}),o=b(),u=b(),i=fn.throttle(function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame(function(){r.on(function(n){return Y(n,{top:e.offsetTop+"px",left:e.offsetLeft+"px",height:e.height+"px",width:e.width+"px"})})})},50);return{bind:function(n){r.set(n),i(),o.set(cn("resize",i)),u.set(cn("scroll",i))},unbind:function(){r.on(function(){o.clear(),u.clear()}),r.clear()}}}),xn=function(e,r){var n,t=document.body,o=document.documentElement,u=e.getContainer(),i=A.fromDom(u),c=sn(e),l=r.get(),f=A.fromDom(e.getBody()),a=ln.deviceType.isTouch(),d=u.style,s=e.iframeElement.style,m=function(e){e(t,"tox-fullscreen"),e(o,"tox-fullscreen"),e(u,"tox-fullscreen"),j(i).map(function(n){return z(n).dom}).each(function(n){e(n,"tox-fullscreen"),e(n,"tox-shadowhost")})},h=function(){var t,n;a&&(t=e.dom,n=gn("["+vn+"]"),F(n,function(n){var e=K(n,vn);"no-styles"!==e?Y(n,t.parseStyle(e)):X(n,"style"),X(n,vn)})),m(Fn.removeClass),Tn.unbind(),w.from(r.get()).each(function(n){return n.fullscreenChangeHandler.unbind()})};l?(l.fullscreenChangeHandler.unbind(),dn(e)&&mn(c)&&function(n){n=n.dom;n.exitFullscreen?n.exitFullscreen():n.msExitFullscreen?n.msExitFullscreen():n.webkitCancelFullScreen&&n.webkitCancelFullScreen()}(H(c)),s.width=l.iframeWidth,s.height=l.iframeHeight,d.width=l.containerWidth,d.height=l.containerHeight,d.top=l.containerTop,d.left=l.containerLeft,n=l.scrollPos,window.scrollTo(n.x,n.y),r.set(null),an(e,!1),h(),e.off("remove",h)):(l=nn(H(c),document.fullscreenElement!==undefined?"fullscreenchange":document.msFullscreenElement!==undefined?"MSFullscreenChange":document.webkitFullscreenElement!==undefined?"webkitfullscreenchange":"fullscreenchange",function(n){dn(e)&&(mn(c)||null===r.get()||xn(e,r))}),l={scrollPos:{x:(n=un(window)).x,y:n.y},containerWidth:d.width,containerHeight:d.height,containerTop:d.top,containerLeft:d.left,iframeWidth:s.width,iframeHeight:s.height,fullscreenChangeHandler:l},a&&En(e.dom,i,f),s.width=s.height="100%",d.width=d.height="",m(Fn.addClass),Tn.bind(i),e.on("remove",h),r.set(l),dn(e)&&function(n){n=n.dom;n.requestFullscreen?n.requestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.webkitRequestFullScreen&&n.webkitRequestFullScreen()}(c),an(e,!0))},Dn=function(t,r){return function(e){e.setActive(null!==r.get());var n=function(n){return e.setActive(n.state)};return t.on("FullscreenStateChanged",n),function(){return t.off("FullscreenStateChanged",n)}}};n.add("fullscreen",function(n){var e,t,r,o,u=c(null);return n.inline||(t=u,(e=n).addCommand("mceFullScreen",function(){xn(e,t)}),o=u,(r=n).ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:function(){return r.execCommand("mceFullScreen")},onSetup:Dn(r,o)}),r.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:function(){return r.execCommand("mceFullScreen")},onSetup:Dn(r,o)}),n.addShortcut("Meta+Shift+F","","mceFullScreen")),i(u)})}();