/**
 * Copyright (c) Tiny Technologies, Inc. All rights reserved.
 * Licensed under the LGPL or a commercial license.
 * For LGPL see License.txt in the project root for license information.
 * For commercial licenses see https://www.tiny.cloud/
 *
 * Version: 5.8.1 (2021-05-20)
 */
!function(){"use strict";var r=function(e){if(null===e)return"null";if(e===undefined)return"undefined";var t=typeof e;return"object"==t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},t=function(e){return{eq:e}},s=t(function(e,t){return e===t}),i=function(o){return t(function(e,t){if(e.length!==t.length)return!1;for(var n=e.length,r=0;r<n;r++)if(!o.eq(e[r],t[r]))return!1;return!0})},c=function(e,n){return r=i(e),o=function(e){return t=n,Array.prototype.slice.call(e).sort(t);var t},t(function(e,t){return r.eq(o(e),o(t))});var r,o},a=function(u){return t(function(e,t){var n=Object.keys(e),r=Object.keys(t);if(!c(s).eq(n,r))return!1;for(var o=n.length,i=0;i<o;i++){var a=n[i];if(!u.eq(e[a],t[a]))return!1}return!0})},u=t(function(e,t){if(e===t)return!0;var n=r(e);return n===r(t)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?e===t:"array"===n?i(u).eq(e,t):"object"===n&&a(u).eq(e,t))}),e=function(n){return function(e){return e=typeof(t=e),(null===t?"null":"object"==e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e)===n;var t}},n=function(t){return function(e){return typeof e===t}},o=function(t){return function(e){return t===e}},W=e("string"),w=e("object"),b=e("array"),l=o(null),f=n("boolean"),d=o(undefined),K=function(e){return null===e||e===undefined},V=function(e){return!K(e)},m=n("function"),C=n("number"),ee=function(){},v=function(n,r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r.apply(null,e))}},x=function(e){return function(){return e}},g=function(e){return e};function h(r){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=o.concat(e);return r.apply(null,n)}}var p=function(t){return function(e){return!t(e)}},y=function(e){return function(){throw new Error(e)}},S=function(e){return e()},N=function(e){e()},E=x(!1),k=x(!0),_=function(){return A},A=(st=function(e){return e.isNone()},{fold:function(e,t){return e()},is:E,isSome:E,isNone:k,getOr:We=function(e){return e},getOrThunk:Ke=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:x(null),getOrUndefined:x(undefined),or:We,orThunk:Ke,map:_,each:ee,bind:_,exists:E,forall:k,filter:_,equals:st,equals_:st,toArray:function(){return[]},toString:x("none()")}),R=function(n){var e=x(n),t=function(){return o},r=function(e){return e(n)},o={fold:function(e,t){return t(n)},is:function(e){return n===e},isSome:k,isNone:E,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return R(e(n))},each:function(e){e(n)},bind:r,exists:r,forall:r,filter:function(e){return e(n)?o:A},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(E,function(e){return t(n,e)})}};return o},T={some:R,none:_,from:function(e){return null===e||e===undefined?A:R(e)}},D=Array.prototype.slice,O=Array.prototype.indexOf,B=Array.prototype.push,P=function(e,t){return O.call(e,t)},L=function(e,t){return-1<P(e,t)},I=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return!0;return!1},M=function(e,t){for(var n=e.length,r=new Array(n),o=0;o<n;o++){var i=e[o];r[o]=t(i,o)}return r},X=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},F=function(e,t){for(var n=e.length-1;0<=n;n--)t(e[n],n)},U=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r)&&n.push(i)}return n},z=function(e,t,n){return F(e,function(e){n=t(n,e)}),n},j=function(e,t,n){return X(e,function(e){n=t(n,e)}),n},H=function(e,t){return function(e,t,n){for(var r=0,o=e.length;r<o;r++){var i=e[r];if(t(i,r))return T.some(i);if(n(i,r))break}return T.none()}(e,t,E)},q=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return T.some(n);return T.none()},$=function(e,t){return function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!b(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);B.apply(t,e[n])}return t}(M(e,t))},Y=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n))return!1;return!0},G=function(e){e=D.call(e,0);return e.reverse(),e},J=function(e,t){return U(e,function(e){return!L(t,e)})},Q=function(e,t){return 0<=t&&t<e.length?T.some(e[t]):T.none()},Z=function(e){return Q(e,0)},te=function(e){return Q(e,e.length-1)},ne=m(Array.from)?Array.from:function(e){return D.call(e)},re=Object.keys,oe=Object.hasOwnProperty,ie=function(e,t){for(var n=re(e),r=0,o=n.length;r<o;r++){var i=n[r];t(e[i],i)}},ae=function(e,n){return ue(e,function(e,t){return{k:t,v:n(e,t)}})},ue=function(e,n){var r={};return ie(e,function(e,t){t=n(e,t);r[t.k]=t.v}),r},se=function(n){return function(e,t){n[t]=e}},ce=function(e,n,r,o){return ie(e,function(e,t){(n(e,t)?r:o)(e,t)}),{}},le=function(e,t){var n={},r={};return ce(e,t,se(n),se(r)),{t:n,f:r}},fe=function(e,t){var n={};return ce(e,t,se(n),ee),n},de=function(e){return n=function(e){return e},r=[],ie(e,function(e,t){r.push(n(e,t))}),r;var n,r},me=function(e,t){return ge(e,t)?T.from(e[t]):T.none()},ge=function(e,t){return oe.call(e,t)},pe=function(e,t){return ge(e,t)&&e[t]!==undefined&&null!==e[t]},he=Array.isArray,ve=function(e,t,n){var r,o;if(!e)return!1;if(n=n||e,e.length!==undefined){for(r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return!1}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return!1;return!0},ye=function(n,r){var o=[];return ve(n,function(e,t){o.push(r(e,t,n))}),o},be=function(n,r){var o=[];return ve(n,function(e,t){r&&!r(e,t,n)||o.push(e)}),o},Ce=function(e,t){if(e)for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},we=function(e,t,n,r){for(var o=d(n)?e[0]:n,i=0;i<e.length;i++)o=t.call(r,o,e[i],i);return o},xe=function(e,t,n){for(var r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return r;return-1},Se=function(e){return e[e.length-1]},Ne=function(){return(Ne=Object.assign||function Ne(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Ee(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}var ke,_e,Ae,Re,Te,De,Oe,Be=function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}return undefined}(e,t);if(!n)return{major:0,minor:0};e=function(e){return Number(t.replace(n,"$"+e))};return Le(e(1),e(2))},Pe=function(){return Le(0,0)},Le=function(e,t){return{major:e,minor:t}},Ie={nu:Le,detect:function(e,t){t=String(t).toLowerCase();return 0===e.length?Pe():Be(e,t)},unknown:Pe},Me=function(e,t){var n=String(t).toLowerCase();return H(e,function(e){return e.search(n)})},Fe=function(e,n){return Me(e,n).map(function(e){var t=Ie.detect(e.versionRegexes,n);return{current:e.name,version:t}})},Ue=function(e,n){return Me(e,n).map(function(e){var t=Ie.detect(e.versionRegexes,n);return{current:e.name,version:t}})},ze=function(e,t){return-1!==e.indexOf(t)},je=function(e,t){return n=e,e=0,""===(t=t)||n.length>=t.length&&n.substr(e,e+t.length)===t;var n},e=function(t){return function(e){return e.replace(t,"")}},He=e(/^\s+|\s+$/g),Ve=e(/^\s+/g),qe=e(/\s+$/g),$e=function(e){return 0<e.length},o=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,n=function(t){return function(e){return ze(e,t)}},We=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return ze(e,"edge/")&&ze(e,"chrome")&&ze(e,"safari")&&ze(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,o],search:function(e){return ze(e,"chrome")&&!ze(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return ze(e,"msie")||ze(e,"trident")}},{name:"Opera",versionRegexes:[o,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:n("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:n("firefox")},{name:"Safari",versionRegexes:[o,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(ze(e,"safari")||ze(e,"mobile/"))&&ze(e,"applewebkit")}}],Ke=[{name:"Windows",search:n("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return ze(e,"iphone")||ze(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:n("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:n("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:n("linux"),versionRegexes:[]},{name:"Solaris",search:n("sunos"),versionRegexes:[]},{name:"FreeBSD",search:n("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:n("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Xe={browsers:x(We),oses:x(Ke)},Ye="Firefox",Ge=function(e){var t=e.current,n=e.version,e=function(e){return function(){return t===e}};return{current:t,version:n,isEdge:e("Edge"),isChrome:e("Chrome"),isIE:e("IE"),isOpera:e("Opera"),isFirefox:e(Ye),isSafari:e("Safari")}},Je={unknown:function(){return Ge({current:undefined,version:Ie.unknown()})},nu:Ge,edge:x("Edge"),chrome:x("Chrome"),ie:x("IE"),opera:x("Opera"),firefox:x(Ye),safari:x("Safari")},Qe="Windows",Ze="Android",et="Solaris",tt="FreeBSD",nt="ChromeOS",rt=function(e){var t=e.current,n=e.version,e=function(e){return function(){return t===e}};return{current:t,version:n,isWindows:e(Qe),isiOS:e("iOS"),isAndroid:e(Ze),isOSX:e("OSX"),isLinux:e("Linux"),isSolaris:e(et),isFreeBSD:e(tt),isChromeOS:e(nt)}},ot={unknown:function(){return rt({current:undefined,version:Ie.unknown()})},nu:rt,windows:x(Qe),ios:x("iOS"),android:x(Ze),linux:x("Linux"),osx:x("OSX"),solaris:x(et),freebsd:x(tt),chromeos:x(nt)},it=function(e,t){var n,r,o=Xe.browsers(),i=Xe.oses(),a=Fe(o,e).fold(Je.unknown,Je.nu),u=Ue(i,e).fold(ot.unknown,ot.nu);return{browser:a,os:u,deviceType:(n=a,r=e,o=t,a=(i=u).isiOS()&&!0===/ipad/i.test(r),e=i.isiOS()&&!a,t=i.isiOS()||i.isAndroid(),u=t||o("(pointer:coarse)"),o=a||!e&&t&&o("(min-device-width:768px)"),t=e||t&&!o,r=n.isSafari()&&i.isiOS()&&!1===/safari/i.test(r),{isiPad:x(a),isiPhone:x(e),isTablet:x(o),isPhone:x(t),isTouch:x(u),isAndroid:i.isAndroid,isiOS:i.isiOS,isWebView:x(r),isDesktop:x(!t&&!o&&!r)})}},at=function(e){return window.matchMedia(e).matches},ut=(Ae=!(ke=function(){return it(navigator.userAgent,at)}),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ae||(Ae=!0,_e=ke.apply(null,e)),_e}),st=navigator.userAgent,_=ut(),e=_.browser,o=_.os,n=_.deviceType,We=/WebKit/.test(st)&&!e.isEdge(),Ke="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,_=-1!==st.indexOf("Windows Phone"),ct={opera:e.isOpera(),webkit:We,ie:!(!e.isIE()&&!e.isEdge())&&e.version.major,gecko:e.isFirefox(),mac:o.isOSX()||o.isiOS(),iOS:n.isiPad()||n.isiPhone(),android:o.isAndroid(),contentEditable:!0,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:!0,range:window.getSelection&&"Range"in window,documentMode:e.isIE()?document.documentMode||7:10,fileApi:Ke,ceFalse:!0,cacheSuffix:null,container:null,experimentalShadowDom:!1,canHaveCSP:!e.isIE(),desktop:n.isDesktop(),windowsPhone:_,browser:{current:e.current,version:e.version,isChrome:e.isChrome,isEdge:e.isEdge,isFirefox:e.isFirefox,isIE:e.isIE,isOpera:e.isOpera,isSafari:e.isSafari},os:{current:o.current,version:o.version,isAndroid:o.isAndroid,isChromeOS:o.isChromeOS,isFreeBSD:o.isFreeBSD,isiOS:o.isiOS,isLinux:o.isLinux,isOSX:o.isOSX,isSolaris:o.isSolaris,isWindows:o.isWindows},deviceType:{isDesktop:n.isDesktop,isiPad:n.isiPad,isiPhone:n.isiPhone,isPhone:n.isPhone,isTablet:n.isTablet,isTouch:n.isTouch,isWebView:n.isWebView}},lt=/^\s*|\s*$/g,ft=function(e){return null===e||e===undefined?"":(""+e).replace(lt,"")},dt=function(e,t){return t?!("array"!==t||!he(e))||typeof e===t:e!==undefined},mt=function(e,n,r,o){o=o||this,e&&(r&&(e=e[r]),ve(e,function(e,t){return!1!==n.call(o,e,t,r)&&void mt(e,n,r,o)}))},gt={trim:ft,isArray:he,is:dt,toArray:function(e){if(he(e))return e;for(var t=[],n=0,r=e.length;n<r;n++)t[n]=e[n];return t},makeMap:function(e,t,n){var r;for(t=t||",",n=n||{},r=(e="string"==typeof(e=e||[])?e.split(t):e).length;r--;)n[e[r]]={};return n},each:ve,map:ye,grep:be,inArray:Ce,hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},extend:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var o,i,a=t[r];for(o in a)!a.hasOwnProperty(o)||(i=a[o])!==undefined&&(e[o]=i)}return e},create:function(e,t,n){var r,o,i,a=this,u=0,s=(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e))[3].match(/(^|\.)(\w+)$/i)[2],c=a.createNS(e[3].replace(/\.\w+$/,""),n);if(!c[s]){if("static"===e[2])return c[s]=t,void(this.onCreate&&this.onCreate(e[2],e[3],c[s]));t[s]||(t[s]=function(){},u=1),c[s]=t[s],a.extend(c[s].prototype,t),e[5]&&(r=a.resolve(e[5]).prototype,o=e[5].match(/\.(\w+)$/i)[1],i=c[s],c[s]=u?function(){return r[o].apply(this,arguments)}:function(){return this.parent=r[o],i.apply(this,arguments)},c[s].prototype[s]=c[s],a.each(r,function(e,t){c[s].prototype[t]=r[t]}),a.each(t,function(e,t){r[t]?c[s].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!==s&&(c[s].prototype[t]=e)})),a.each(t["static"],function(e,t){c[s][t]=e})}},walk:mt,createNS:function(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)t[r=e[n]]||(t[r]={}),t=t[r];return t},resolve:function(e,t){var n,r;for(t=t||window,n=0,r=(e=e.split(".")).length;n<r&&(t=t[e[n]]);n++);return t},explode:function(e,t){return!e||dt(e,"array")?e:ye(e.split(t||","),ft)},_addCacheSuffix:function(e){var t=ct.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},pt=function(e){if(null===e||e===undefined)throw new Error("Node cannot be null or undefined");return{dom:e}},ht={fromHtml:function(e,t){t=(t||document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return pt(t.childNodes[0])},fromTag:function(e,t){e=(t||document).createElement(e);return pt(e)},fromText:function(e,t){e=(t||document).createTextNode(e);return pt(e)},fromDom:pt,fromPoint:function(e,t,n){return T.from(e.dom.elementFromPoint(t,n)).map(pt)}},vt=function(e,t){for(var n=[],r=function(e){return n.push(e),t(e)},o=t(e);(o=o.bind(r)).isSome(););return n},yt=function(e,t){e=e.dom;if(1!==e.nodeType)return!1;if(e.matches!==undefined)return e.matches(t);if(e.msMatchesSelector!==undefined)return e.msMatchesSelector(t);if(e.webkitMatchesSelector!==undefined)return e.webkitMatchesSelector(t);if(e.mozMatchesSelector!==undefined)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},bt=function(e){return 1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount},Ct=function(e,t){return e.dom===t.dom},wt=function(e,t){return n=e.dom,e=t.dom,t=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(n.compareDocumentPosition(e)&t);var n},xt=function(e,t){return(ut().browser.isIE()?wt:function(e,t){e=e.dom,t=t.dom;return e!==t&&e.contains(t)})(e,t)},St=("undefined"!=typeof window||Function("return this;")(),function(e){return e.dom.nodeName.toLowerCase()}),Nt=function(e){return e.dom.nodeType},st=function(t){return function(e){return Nt(e)===t}},Et=st(1),kt=st(3),_t=st(9),At=st(11),Rt=function(e){return ht.fromDom(e.dom.ownerDocument)},Tt=function(e){return _t(e)?e:Rt(e)},Dt=function(e){return ht.fromDom(Tt(e).dom.defaultView)},Ot=function(e){return T.from(e.dom.parentNode).map(ht.fromDom)},Bt=function(e){return T.from(e.dom.previousSibling).map(ht.fromDom)},Pt=function(e){return T.from(e.dom.nextSibling).map(ht.fromDom)},Lt=function(e){return G(vt(e,Bt))},It=function(e){return vt(e,Pt)},Mt=function(e){return M(e.dom.childNodes,ht.fromDom)},Ft=function(e,t){e=e.dom.childNodes;return T.from(e[t]).map(ht.fromDom)},Ut=function(e){return Ft(e,0)},zt=function(e){return Ft(e,e.dom.childNodes.length-1)},jt=function(e){return At(e)&&V(e.dom.host)},We=m(Element.prototype.attachShadow)&&m(Node.prototype.getRootNode),Ht=x(We),Vt=We?function(e){return ht.fromDom(e.dom.getRootNode())}:Tt,qt=function(e){return jt(e)?e:function(e){e=e.dom.head;if(null===e||e===undefined)throw new Error("Head is not available yet");return ht.fromDom(e)}(Tt(e))},$t=function(e){return ht.fromDom(e.dom.host)},Wt=function(e){return V(e.dom.shadowRoot)},Kt=function(t,n){Ot(t).each(function(e){e.dom.insertBefore(n.dom,t.dom)})},Xt=function(e,t){Pt(e).fold(function(){Ot(e).each(function(e){Gt(e,t)})},function(e){Kt(e,t)})},Yt=function(t,n){Ut(t).fold(function(){Gt(t,n)},function(e){t.dom.insertBefore(n.dom,e.dom)})},Gt=function(e,t){e.dom.appendChild(t.dom)},Jt=function(t,e){X(e,function(e){Gt(t,e)})},Qt=function(e){e.dom.textContent="",X(Mt(e),function(e){Zt(e)})},Zt=function(e){e=e.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},en=function(e){var t,n=Mt(e);0<n.length&&(t=e,X(n,function(e){Kt(t,e)})),Zt(e)},tn=function(e){var t=kt(e)?e.dom.parentNode:e.dom;if(t===undefined||null===t||null===t.ownerDocument)return!1;var n,r,o=t.ownerDocument;return function(e){e=Vt(e);return jt(e)?T.some(e):T.none()}(ht.fromDom(t)).fold(function(){return o.body.contains(t)},(n=tn,r=$t,function(e){return n(r(e))}))},nn=function(n,r){return{left:n,top:r,translate:function(e,t){return nn(n+e,r+t)}}},rn=nn,on=function(e,t){return e!==undefined?e:t!==undefined?t:0},an=function(e){var t=e.dom,n=t.ownerDocument.body;return n===t?rn(n.offsetLeft,n.offsetTop):tn(e)?function(e){e=e.getBoundingClientRect();return rn(e.left,e.top)}(t):rn(0,0)},un=function(e){var t=e!==undefined?e.dom:document,e=t.body.scrollLeft||t.documentElement.scrollLeft,t=t.body.scrollTop||t.documentElement.scrollTop;return rn(e,t)},sn=function(e,t,n){n=(n!==undefined?n.dom:document).defaultView;n&&n.scrollTo(e,t)},cn=function(e,t){ut().browser.isSafari()&&m(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},ln=function(e,t,n,r){return{x:e,y:t,width:n,height:r,right:e+n,bottom:t+r}},fn=function(e){var n=e===undefined?window:e,e=n.document,r=un(ht.fromDom(e));return function(e){e=e===undefined?window:e;return T.from(e.visualViewport)}(n).fold(function(){var e=n.document.documentElement,t=e.clientWidth,e=e.clientHeight;return ln(r.left,r.top,t,e)},function(e){return ln(Math.max(e.pageLeft,r.left),Math.max(e.pageTop,r.top),e.width,e.height)})},Ke=function(t){return function(e){return!!e&&e.nodeType===t}},dn=function(e){return!!e&&!Object.getPrototypeOf(e)},mn=Ke(1),gn=function(e){var t=e.map(function(e){return e.toLowerCase()});return function(e){if(e&&e.nodeName){e=e.nodeName.toLowerCase();return L(t,e)}return!1}},_=function(r,e){var o=e.toLowerCase().split(" ");return function(e){var t;if(mn(e))for(t=0;t<o.length;t++){var n=e.ownerDocument.defaultView.getComputedStyle(e,null);if((n?n.getPropertyValue(r):null)===o[t])return!0}return!1}},e=function(t){return function(e){return mn(e)&&e.hasAttribute(t)}},pn=function(e){return mn(e)&&e.hasAttribute("data-mce-bogus")},hn=function(e){return mn(e)&&"TABLE"===e.tagName},o=function(t){return function(e){if(mn(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}},vn=gn(["textarea","input"]),yn=Ke(3),bn=Ke(8),Cn=Ke(9),wn=Ke(11),xn=gn(["br"]),Sn=gn(["img"]),Nn=o("true"),En=o("false"),n=gn(["td","th"]),kn=gn(["video","audio","object","embed"]),_n=function(e){return e.style!==undefined&&m(e.style.getPropertyValue)},An=function(e,t,n){if(!(W(n)||f(n)||C(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Rn=function(e,t,n){An(e.dom,t,n)},Tn=function(e,t){var n=e.dom;ie(t,function(e,t){An(n,t,e)})},Dn=function(e,t){t=e.dom.getAttribute(t);return null===t?undefined:t},On=function(e,t){return T.from(Dn(e,t))},Bn=function(e,t){e.dom.removeAttribute(t)},Pn=function(e,t){var n=e.dom;ie(t,function(e,t){!function(e,t,n){if(!W(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);_n(e)&&e.style.setProperty(t,n)}(n,t,e)})},Ln=function(e,t){var n=e.dom,r=window.getComputedStyle(n).getPropertyValue(t);return""!==r||tn(e)?r:In(n,t)},In=function(e,t){return _n(e)?e.style.getPropertyValue(t):""},Mn=function(e,t){e=e.dom,t=In(e,t);return T.from(t).filter(function(e){return 0<e.length})},Fn=function(e){var t={},n=e.dom;if(_n(n))for(var r=0;r<n.style.length;r++){var o=n.style.item(r);t[o]=n.style[o]}return t},Un=ut().browser,zn=function(e){return H(e,Et)},jn=function(e,t){return e.children&&L(e.children,t)},Hn=function(e,t,n){var r,o,i=0,a=0,u=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===Ln(ht.fromDom(e),"position"))return{x:i=(o=t.getBoundingClientRect()).left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,y:a=o.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop};for(r=t;r&&r!==n&&r.nodeType&&!jn(r,n);)i+=r.offsetLeft||0,a+=r.offsetTop||0,r=r.offsetParent;for(r=t.parentNode;r&&r!==n&&r.nodeType&&!jn(r,n);)i-=r.scrollLeft||0,a-=r.scrollTop||0,r=r.parentNode;a+=(t=ht.fromDom(t),Un.isFirefox()&&"table"===St(t)?zn(Mt(t)).filter(function(e){return"caption"===St(e)}).bind(function(r){return zn(It(r)).map(function(e){var t=e.dom.offsetTop,n=r.dom.offsetTop,e=r.dom.offsetHeight;return t<=n?-e:0})}).getOr(0):0)}return{x:i,y:a}},st={},We={exports:st};Re=undefined,Te=st,De=We,Oe=undefined,function(e){"object"==typeof Te&&void 0!==De?De.exports=e():"function"==typeof Re&&Re.amd?Re([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).EphoxContactWrapper=e()}(function(){return function s(r,o,i){function a(t,e){if(!o[t]){if(!r[t]){var n="function"==typeof Oe&&Oe;if(!e&&n)return n(t,!0);if(u)return u(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=o[t]={exports:{}},r[t][0].call(n.exports,function(e){return a(r[t][1][e]||e)},n,n.exports,s,r,o,i)}return o[t].exports}for(var u="function"==typeof Oe&&Oe,e=0;e<i.length;e++)a(i[e]);return a}({1:[function(e,t,n){var r,o,t=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var s,c=[],l=!1,f=-1;function d(){l&&s&&(l=!1,s.length?c=s.concat(c):f=-1,c.length&&m())}function m(){if(!l){var e=u(d);l=!0;for(var t=c.length;t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,l=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function p(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new g(e,t)),1!==c.length||l||u(m)},g.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=p,t.addListener=p,t.once=p,t.off=p,t.removeListener=p,t.removeAllListeners=p,t.emit=p,t.prependListener=p,t.prependOnceListener=p,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],2:[function(e,f,t){!function(t){function r(){}function a(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],l(e,this)}function o(r,o){for(;3===r._state;)r=r._value;0!==r._state?(r._handled=!0,a._immediateFn(function(){var e,t=1===r._state?o.onFulfilled:o.onRejected;if(null!==t){try{e=t(r._value)}catch(n){return void u(o.promise,n)}i(o.promise,e)}else(1===r._state?i:u)(o.promise,r._value)})):r._deferreds.push(o)}function i(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void s(e);if("function"==typeof n)return void l((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,s(e)}catch(i){u(e,i)}var r,o}function u(e,t){e._state=2,e._value=t,s(e)}function s(e){2===e._state&&0===e._deferreds.length&&a._immediateFn(function(){e._handled||a._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function l(e,t){var n=!1;try{e(function(e){n||(n=!0,i(t,e))},function(e){n||(n=!0,u(t,e))})}catch(r){if(n)return;n=!0,u(t,r)}}var e,n;e=this,n=setTimeout,a.prototype["catch"]=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(r);return o(this,new c(e,t,n)),n},a.all=function(e){var s=Array.prototype.slice.call(e);return new a(function(o,i){if(0===s.length)return o([]);var a=s.length;function u(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void n.call(e,function(e){u(t,e)},i)}s[t]=e,0==--a&&o(s)}catch(r){i(r)}}for(var e=0;e<s.length;e++)u(e,s[e])})},a.resolve=function(t){return t&&"object"==typeof t&&t.constructor===a?t:new a(function(e){e(t)})},a.reject=function(n){return new a(function(e,t){t(n)})},a.race=function(o){return new a(function(e,t){for(var n=0,r=o.length;n<r;n++)o[n].then(e,t)})},a._immediateFn="function"==typeof t?function(e){t(e)}:function(e){n(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},a._setImmediateFn=function(e){a._immediateFn=e},a._setUnhandledRejectionFn=function(e){a._unhandledRejectionFn=e},void 0!==f&&f.exports?f.exports=a:e.Promise||(e.Promise=a)}.call(this,e("timers").setImmediate)},{timers:3}],3:[function(s,e,c){!function(e,t){var r=s("process/browser.js").nextTick,n=Function.prototype.apply,o=Array.prototype.slice,i={},a=0;function u(e,t){this._id=e,this._clearFn=t}c.setTimeout=function(){return new u(n.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new u(n.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(e){e.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},c.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},c._unrefActive=c.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},c.setImmediate="function"==typeof e?e:function(e){var t=a++,n=!(arguments.length<2)&&o.call(arguments,1);return i[t]=!0,r(function(){i[t]&&(n?e.apply(null,n):e.call(null),c.clearImmediate(t))}),t},c.clearImmediate="function"==typeof t?t:function(e){delete i[e]}}.call(this,s("timers").setImmediate,s("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(e,t,n){var r=e("promise-polyfill"),e="undefined"!=typeof window?window:Function("return this;")();t.exports={boltExport:e.Promise||r}},{"promise-polyfill":2}]},{},[4])(4)});var Vn=We.exports.boltExport,qn=function(e){var n=T.none(),t=[],r=function(e){o()?a(e):t.push(e)},o=function(){return n.isSome()},i=function(e){X(e,a)},a=function(t){n.each(function(e){setTimeout(function(){t(e)},0)})};return e(function(e){o()||(n=T.some(e),i(t),t=[])}),{get:r,map:function(n){return qn(function(t){r(function(e){t(n(e))})})},isReady:o}},$n={nu:qn,pure:function(t){return qn(function(e){e(t)})}},Wn=function(e){setTimeout(function(){throw e},0)},Kn=function(n){var e=function(e){n().then(e,Wn)};return{map:function(e){return Kn(function(){return n().then(e)})},bind:function(t){return Kn(function(){return n().then(function(e){return t(e).toPromise()})})},anonBind:function(e){return Kn(function(){return n().then(function(){return e.toPromise()})})},toLazy:function(){return $n.nu(e)},toCached:function(){var e=null;return Kn(function(){return e=null===e?n():e})},toPromise:n,get:e}},Xn=function(e){return Kn(function(){return new Vn(e)})},Yn=function(a,e){return e(function(r){var o=[],i=0;0===a.length?r([]):X(a,function(e,t){var n;e.get((n=t,function(e){o[n]=e,++i>=a.length&&r(o)}))})})},Gn=function(n){return{is:function(e){return n===e},isValue:k,isError:E,getOr:x(n),getOrThunk:x(n),getOrDie:x(n),or:function(e){return Gn(n)},orThunk:function(e){return Gn(n)},fold:function(e,t){return t(n)},map:function(e){return Gn(e(n))},mapError:function(e){return Gn(n)},each:function(e){e(n)},bind:function(e){return e(n)},exists:function(e){return e(n)},forall:function(e){return e(n)},toOptional:function(){return T.some(n)}}},Jn=function(n){return{is:E,isValue:E,isError:k,getOr:g,getOrThunk:function(e){return e()},getOrDie:function(){return y(String(n))()},or:function(e){return e},orThunk:function(e){return e()},fold:function(e,t){return e(n)},map:function(e){return Jn(n)},mapError:function(e){return Jn(e(n))},each:ee,bind:function(e){return Jn(n)},exists:E,forall:k,toOptional:T.none}},Qn={value:Gn,error:Jn,fromOption:function(e,t){return e.fold(function(){return Jn(t)},Gn)}},Ke=function(a){if(!b(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");var u=[],n={};return X(a,function(e,r){var t=re(e);if(1!==t.length)throw new Error("one and only one name per case");var o=t[0],i=e[o];if(n[o]!==undefined)throw new Error("duplicate key detected:"+o);if("cata"===o)throw new Error("cannot have a case named cata (sorry)");if(!b(i))throw new Error("case arguments must be an array");u.push(o),n[o]=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.length;if(t!==i.length)throw new Error("Wrong number of arguments to case "+o+". Expected "+i.length+" ("+i+"), got "+t);return{fold:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+e.length);return e[r].apply(null,n)},match:function(e){var t=re(e);if(u.length!==t.length)throw new Error("Wrong number of arguments to match. Expected: "+u.join(",")+"\nActual: "+t.join(","));if(!Y(u,function(e){return L(t,e)}))throw new Error("Not all branches were specified when using match. Specified: "+t.join(", ")+"\nRequired: "+u.join(", "));return e[o].apply(null,n)},log:function(e){console.log(e,{constructors:u,constructor:o,params:n})}}}}),n},Zn=(Ke([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(e){return e.fold(g,g)});function er(e,t,n,r,o){return e(n,r)?T.some(n):m(o)&&o(n)?T.none():t(n,r,o)}var tr,nr,rr,or,ir,ar,ur=function(e,t,n){for(var r=e.dom,o=m(n)?n:E;r.parentNode;){var r=r.parentNode,i=ht.fromDom(r);if(t(i))return T.some(i);if(o(i))break}return T.none()},sr=function(e,t,n){return er(function(e,t){return t(e)},ur,e,t,n)},cr=function(e,t){return H(e.dom.childNodes,function(e){return t(ht.fromDom(e))}).map(ht.fromDom)},lr=function(e,t,n){return ur(e,function(e){return yt(e,t)},n)},fr=function(e,t){return function(e,t){t=t===undefined?document:t.dom;return bt(t)?T.none():T.from(t.querySelector(e)).map(ht.fromDom)}(t,e)},dr=function(e,t,n){return er(yt,lr,e,t,n)},mr=window.Promise||(tr=function(n,r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.apply(r,e)}},nr=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},or=(rr=function(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],ir(e,tr(pr,this),tr(hr,this))}).immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){return setTimeout(e,1)},ir=function(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(o){if(r)return;r=!0,n(o)}},rr.prototype["catch"]=function(e){return this.then(null,e)},rr.prototype.then=function(n,r){var o=this;return new rr(function(e,t){gr.call(o,new yr(n,r,e,t))})},rr.all=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var s=Array.prototype.slice.call(1===e.length&&nr(e[0])?e[0]:e);return new rr(function(o,i){if(0===s.length)return o([]);for(var a=s.length,u=function(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void n.call(e,function(e){u(t,e)},i)}s[t]=e,0==--a&&o(s)}catch(r){i(r)}},e=0;e<s.length;e++)u(e,s[e])})},rr.resolve=function(t){return t&&"object"==typeof t&&t.constructor===rr?t:new rr(function(e){e(t)})},rr.reject=function(n){return new rr(function(e,t){t(n)})},rr.race=function(o){return new rr(function(e,t){for(var n=0,r=o.length;n<r;n++)o[n].then(e,t)})},rr);function gr(r){var o=this;null!==this._state?or(function(){var e,t=o._state?r.onFulfilled:r.onRejected;if(null!==t){try{e=t(o._value)}catch(n){return void r.reject(n)}r.resolve(e)}else(o._state?r.resolve:r.reject)(o._value)}):this._deferreds.push(r)}function pr(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void ir(tr(t,e),tr(pr,this),tr(hr,this))}this._state=!0,this._value=e,vr.call(this)}catch(n){hr.call(this,n)}}function hr(e){this._state=!1,this._value=e,vr.call(this)}function vr(){for(var e=0,t=this._deferreds.length;e<t;e++)gr.call(this,this._deferreds[e]);this._deferreds=null}function yr(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}var br,Cr=function(e,t){for(var n=window.requestAnimationFrame,r=["ms","moz","webkit"],o=0;o<r.length&&!n;o++)n=window[r[o]+"RequestAnimationFrame"];(n=n||function(e){window.setTimeout(e,0)})(e,t)},wr=function(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)},xr=function(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)},o=function(n,r){var o,e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];clearTimeout(o),o=wr(function(){n.apply(this,e)},r)};return e.stop=function(){clearTimeout(o)},e},Sr={requestAnimationFrame:function(e,t){ar?ar.then(e):ar=new mr(function(e){t=t||document.body,Cr(e,t)}).then(e)},setTimeout:wr,setInterval:xr,setEditorTimeout:function(e,t,n){return wr(function(){e.removed||t()},n)},setEditorInterval:function(e,t,n){var r=xr(function(){e.removed?clearInterval(r):t()},n);return r},debounce:o,throttle:o,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}},Nr=function(l,f){void 0===f&&(f={});var d=0,m={},g=ht.fromDom(l),p=Tt(g),h=f.maxLoadTime||5e3,n=function(e,t,n){var r,e=gt._addCacheSuffix(e),o=me(m,e).getOrThunk(function(){return{id:"mce-u"+d++,passed:[],failed:[],count:0}});(m[e]=o).count++;var i,a=function(e,t){for(var n=e.length;n--;)e[n]();o.status=t,o.passed=[],o.failed=[],r&&(r.onload=null,r.onerror=null,r=null)},u=function(){return a(o.passed,2)},s=function(){return a(o.failed,3)},c=function(){var e;e=c,function(){for(var e=l.styleSheets,t=e.length;t--;){var n=e[t].ownerNode;if(n&&n.id===r.id)return u(),1}}()||(Date.now()-i<h?Sr.setTimeout(e):s())};t&&o.passed.push(t),n&&o.failed.push(n),1!==o.status&&(2!==o.status?3!==o.status?(o.status=1,t=ht.fromTag("link",p.dom),Tn(t,{rel:"stylesheet",type:"text/css",id:o.id}),i=Date.now(),f.contentCssCors&&Rn(t,"crossOrigin","anonymous"),f.referrerPolicy&&Rn(t,"referrerpolicy",f.referrerPolicy),(r=t.dom).onload=c,r.onerror=s,n=t,Gt(qt(g),n),Rn(t,"href",e)):s():u())},r=function(t){return Xn(function(e){n(t,v(e,x(Qn.value(t))),v(e,x(Qn.error(t))))})},t=function(e){var n=gt._addCacheSuffix(e);me(m,n).each(function(e){var t;0==--e.count&&(delete m[n],t=e.id,e=qt(g),fr(e,"#"+t).each(Zt))})};return{load:n,loadAll:function(e,t,n){e=M(e,r),Yn(e,Xn).get(function(e){e=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o)?n:r).push(a)}return{pass:n,fail:r}}(e,function(e){return e.isValue()});0<e.fail.length?n(e.fail.map(Zn)):t(e.pass.map(Zn))})},unload:t,unloadAll:function(e){X(e,function(e){t(e)})},_setReferrerPolicy:function(e){f.referrerPolicy=e}}},Er=(br=new WeakMap,{forElement:function(e,t){var n=Vt(e).dom;return T.from(br.get(n)).getOrThunk(function(){var e=Nr(n,t);return br.set(n,e),e})}}),kr=(_r.prototype.current=function(){return this.node},_r.prototype.next=function(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node},_r.prototype.prev=function(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node},_r.prototype.prev2=function(e){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",e),this.node},_r.prototype.findSibling=function(e,t,n,r){var o,i;if(e){if(!r&&e[t])return e[t];if(e!==this.rootNode){if(o=e[n])return o;for(i=e.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(o=i[n])return o}}},_r.prototype.findPreviousNode=function(e,t,n,r){var o,i;if(e&&(o=e[n],!this.rootNode||o!==this.rootNode)){if(o){if(!r)for(i=o[t];i;i=i[t])if(!i[t])return i;return o}return(e=e.parentNode)&&e!==this.rootNode?e:void 0}},_r);function _r(e,t){this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}var Ar,Rr,st=function(t){var n;return function(e){return(n=n||function(e,t){for(var n={},r=0,o=e.length;r<o;r++){var i=e[r];n[String(i)]=t(i,r)}return n}(t,k)).hasOwnProperty(St(e))}},Tr=st(["h1","h2","h3","h4","h5","h6"]),Dr=st(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Or=function(e){return Et(e)&&!Dr(e)},Br=function(e){return Et(e)&&"br"===St(e)},Pr=st(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Lr=st(["ul","ol","dl"]),Ir=st(["li","dd","dt"]),Mr=st(["thead","tbody","tfoot"]),Fr=st(["td","th"]),Ur=st(["pre","script","textarea","style"]),zr="\ufeff",jr="\xa0",Hr=zr,Vr=function(e){return e===zr},qr=function(e){return e.replace(/\uFEFF/g,"")},$r=mn,Wr=yn,Kr=function(e){return Wr(e)&&(e=e.parentNode),$r(e)&&e.hasAttribute("data-mce-caret")},Xr=function(e){return Wr(e)&&Vr(e.data)},Yr=function(e){return Kr(e)||Xr(e)},Gr=function(e){return e.firstChild!==e.lastChild||!xn(e.firstChild)},Jr=function(e){var t=e.container();return!!yn(t)&&(t.data.charAt(e.offset())===Hr||e.isAtStart()&&Xr(t.previousSibling))},Qr=function(e){var t=e.container();return!!yn(t)&&(t.data.charAt(e.offset()-1)===Hr||e.isAtEnd()&&Xr(t.nextSibling))},Zr=function(e,t,n){var r=t.ownerDocument.createElement(e);r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(((e=document.createElement("br")).setAttribute("data-mce-bogus","1"),e));e=t.parentNode;return n?e.insertBefore(r,t):t.nextSibling?e.insertBefore(r,t.nextSibling):e.appendChild(r),r},eo=function(e){return Wr(e)&&e.data[0]===Hr},to=function(e){return Wr(e)&&e.data[e.data.length-1]===Hr},no=function(e){return e&&e.hasAttribute("data-mce-caret")?(function(e){e=e.getElementsByTagName("br"),e=e[e.length-1];pn(e)&&e.parentNode.removeChild(e)}(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null},ro=Nn,oo=En,io=xn,ao=yn,uo=gn(["script","style","textarea"]),so=gn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),co=gn(["table"]),lo=Yr,fo=function(e){return!lo(e)&&(ao(e)?!uo(e.parentNode):so(e)||io(e)||co(e)||mo(e))},mo=function(e){return!1===(mn(t=e)&&"true"===t.getAttribute("unselectable"))&&oo(e);var t},go=function(e,t){return fo(e)&&function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(mo(e))return!1;if(ro(e))return!0}return!0}(e,t)},po=/^[ \t\r\n]*$/,ho=function(e){return po.test(e)},vo=function(e,t){var n=ht.fromDom(t),t=ht.fromDom(e);return e=t,t="pre,code",n=h(Ct,n),lr(e,t,n).isSome()},yo=function(e,t){return fo(e)&&!1===(n=t,yn(t=e)&&ho(t.data)&&!1===vo(t,n))||mn(n=e)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id"))||bo(e);var n},bo=e("data-mce-bookmark"),Co=e("data-mce-bogus"),wo=(Ar="data-mce-bogus",Rr="all",function(e){return mn(e)&&e.getAttribute(Ar)===Rr}),xo=function(e,t){return function(e,t){var n,r=0;if(yo(e,e))return!1;if(!(n=e.firstChild))return!0;var o=new kr(n,e);do{if(t){if(wo(n)){n=o.next(!0);continue}if(Co(n)){n=o.next();continue}}if(xn(n))r++,n=o.next();else{if(yo(n,e))return!1;n=o.next()}}while(n);return r<=1}(e.dom,t=void 0===t?!0:t)},So=function(e,t){return V(e)&&(yo(e,t)||Or(ht.fromDom(e)))},No=function(e){return"span"===e.nodeName.toLowerCase()&&"bookmark"===e.getAttribute("data-mce-type")},Eo=function(e,t){return yn(e)&&0<e.data.length&&(t=new kr(n=e,e=t).prev(!1),n=new kr(n,e).next(!1),t=d(t)||So(t,e),e=d(n)||So(n,e),t&&e);var n},ko=function(e,t,n){var r=n||t;if(mn(t)&&No(t))return t;for(var o,i=t.childNodes,a=i.length-1;0<=a;a--)ko(e,i[a],r);return!mn(t)||1===(o=t.childNodes).length&&No(o[0])&&t.parentNode.insertBefore(o[0],t),wn(o=t)||Cn(o)||yo(t,r)||mn(o=t)&&0<o.childNodes.length||Eo(t,r)||e.remove(t),t},_o=gt.makeMap,Ao=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ro=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,To=/[<>&\"\']/g,Do=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Oo={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Bo={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Po={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Lo=function(e,t){var n,r,o,i={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),Bo[r]||(o="&"+e[n+1]+";",i[r]=o,i[o]=r);return i}},Io=Lo("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Mo=function(e,t){return e.replace(t?Ao:Ro,function(e){return Bo[e]||e})},Fo=function(e,t){return e.replace(t?Ao:Ro,function(e){return 1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":Bo[e]||"&#"+e.charCodeAt(0)+";"})},Uo=function(e,t,n){return n=n||Io,e.replace(t?Ao:Ro,function(e){return Bo[e]||n[e]||e})},zo={encodeRaw:Mo,encodeAllRaw:function(e){return(""+e).replace(To,function(e){return Bo[e]||e})},encodeNumeric:Fo,encodeNamed:Uo,getEncodeFunc:function(e,t){var n=Lo(t)||Io,e=_o(e.replace(/\+/g,","));return e.named&&e.numeric?function(e,t){return e.replace(t?Ao:Ro,function(e){return Bo[e]!==undefined?Bo[e]:n[e]!==undefined?n[e]:1<e.length?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})}:e.named?t?function(e,t){return Uo(e,t,n)}:Uo:e.numeric?Fo:Mo},decode:function(e){return e.replace(Do,function(e,t){return t?65535<(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):Oo[t]||String.fromCharCode(t):Po[e]||Io[e]||(t=e,(e=ht.fromTag("div").dom).innerHTML=t,e.textContent||e.innerText||t)})}},jo={},Ho={},Vo=gt.makeMap,qo=gt.each,$o=gt.extend,Wo=gt.explode,Ko=gt.inArray,Xo=function(e,t){return(e=gt.trim(e))?e.split(t||" "):[]},Yo=function(e,n){var r;return e&&(r={},qo(e="string"==typeof e?{"*":e}:e,function(e,t){r[t]=r[t.toUpperCase()]=("map"===n?Vo:Wo)(e,/[, ]/)})),r},Go=function(o){var u,e,t,n,r,s,i,S={},a={},N=[],c={},l={},f=function(e,t,n){var r=o[e];return r?r=Vo(r,/[, ]/,Vo(r.toUpperCase(),/[, ]/)):(r=jo[e])||(r=Vo(t," ",Vo(t.toUpperCase()," ")),r=$o(r,n),jo[e]=r),r},d=(T=(o=o||{}).schema,s={},i=function(e,t,n){var r,o=function(e,t){for(var n={},r=0,o=e.length;r<o;r++)n[e[r]]=t||{};return n};t=t||"","string"==typeof(n=n||[])&&(n=Xo(n));for(var i=Xo(e),a=i.length;a--;)r={attributes:o(r=Xo([u,t].join(" "))),attributesOrder:r,children:o(n,Ho)},s[i[a]]=r},C=function(e,t){for(var n,r,o,i=Xo(e),a=i.length,u=Xo(t);a--;)for(n=s[i[a]],r=0,o=u.length;r<o;r++)n.attributes[u[r]]={},n.attributesOrder.push(u[r])},jo[T]||(u="id accesskey class dir lang style tabindex title role",e="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",t="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==T&&(u+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",e+=" article aside details dialog figure main header footer hgroup section nav",t+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==T&&(u+=" xml:lang",t=[t,r="acronym applet basefont big font strike tt"].join(" "),qo(Xo(r),function(e){i(e,"",t)}),e=[e,r="center dir isindex noframes"].join(" "),n=[e,t].join(" "),qo(Xo(r),function(e){i(e,"",n)})),n=n||[e,t].join(" "),i("html","manifest","head body"),i("head","","base command link meta noscript script style title"),i("title hr noscript br"),i("base","href target"),i("link","href rel media hreflang type sizes hreflang"),i("meta","name http-equiv content charset"),i("style","media type scoped"),i("script","src async defer type charset"),i("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",n),i("address dt dd div caption","",n),i("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",t),i("blockquote","cite",n),i("ol","reversed start type","li"),i("ul","","li"),i("li","value",n),i("dl","","dt dd"),i("a","href target rel media hreflang type",t),i("q","cite",t),i("ins del","cite datetime",n),i("img","src sizes srcset alt usemap ismap width height"),i("iframe","src name width height",n),i("embed","src type width height"),i("object","data type typemustmatch name usemap form width height",[n,"param"].join(" ")),i("param","name value"),i("map","name",[n,"area"].join(" ")),i("area","alt coords shape href target rel media hreflang type"),i("table","border","caption colgroup thead tfoot tbody tr"+("html4"===T?" col":"")),i("colgroup","span","col"),i("col","span"),i("tbody thead tfoot","","tr"),i("tr","","td th"),i("td","colspan rowspan headers",n),i("th","colspan rowspan headers scope abbr",n),i("form","accept-charset action autocomplete enctype method name novalidate target",n),i("fieldset","disabled form name",[n,"legend"].join(" ")),i("label","form for",t),i("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),i("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===T?n:t),i("select","disabled form multiple name required size","option optgroup"),i("optgroup","disabled label","option"),i("option","disabled label selected value"),i("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),i("menu","type label",[n,"li"].join(" ")),i("noscript","",n),"html4"!==T&&(i("wbr"),i("ruby","",[t,"rt rp"].join(" ")),i("figcaption","",n),i("mark rt rp summary bdi","",t),i("canvas","width height",n),i("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[n,"track source"].join(" ")),i("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[n,"track source"].join(" ")),i("picture","","img source"),i("source","src srcset type media sizes"),i("track","kind src srclang label default"),i("datalist","",[t,"option"].join(" ")),i("article section nav aside main header footer","",n),i("hgroup","","h1 h2 h3 h4 h5 h6"),i("figure","",[n,"figcaption"].join(" ")),i("time","datetime",t),i("dialog","open",n),i("command","type label icon disabled checked radiogroup command"),i("output","for form name",t),i("progress","value max",t),i("meter","value min max low high optimum",t),i("details","open",[n,"summary"].join(" ")),i("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==T&&(C("script","language xml:space"),C("style","xml:space"),C("object","declare classid code codebase codetype archive standby align border hspace vspace"),C("embed","align name hspace vspace"),C("param","valuetype type"),C("a","charset name rev shape coords"),C("br","clear"),C("applet","codebase archive code object alt name width height align hspace vspace"),C("img","name longdesc align border hspace vspace"),C("iframe","longdesc frameborder marginwidth marginheight scrolling align"),C("font basefont","size color face"),C("input","usemap align"),C("select"),C("textarea"),C("h1 h2 h3 h4 h5 h6 div p legend caption","align"),C("ul","type compact"),C("li","type"),C("ol dl menu dir","compact"),C("pre","width xml:space"),C("hr","align noshade size width"),C("isindex","prompt"),C("table","summary width frame rules cellspacing cellpadding align bgcolor"),C("col","width align char charoff valign"),C("colgroup","width align char charoff valign"),C("thead","align char charoff valign"),C("tr","align char charoff valign bgcolor"),C("th","axis align char charoff valign nowrap bgcolor width height"),C("form","accept"),C("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),C("tfoot","align char charoff valign"),C("tbody","align char charoff valign"),C("area","nohref"),C("body","background bgcolor text link vlink alink")),"html4"!==T&&(C("input button select textarea","autofocus"),C("input textarea","placeholder"),C("a","download"),C("link script img","crossorigin"),C("img","loading"),C("iframe","sandbox seamless allowfullscreen loading")),qo(Xo("a form meter progress dfn"),function(e){s[e]&&delete s[e].children[e]}),delete s.caption.children.table,delete s.script,jo[T]=s));!1===o.verify_html&&(o.valid_elements="*[*]");var m=Yo(o.valid_styles),g=Yo(o.invalid_styles,"map"),p=Yo(o.valid_classes,"map"),h=f("whitespace_elements","pre script noscript style textarea video audio iframe object code"),v=f("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),y=f("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),b=f("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),C="td th iframe video audio object script code",w=f("non_empty_elements",C+" pre",y),x=f("move_caret_before_on_enter_elements",C+" table",y),E=f("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),k=f("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",E),_=f("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");qo((o.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),function(e){l[e]=new RegExp("</"+e+"[^>]*>","gi")});var A=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},R=function(e){var t,n,r,o,i,a,u,s,c,l,f,d,m,g,p,h,v,y,b=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,C=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,w=/[*?+]/;if(e){var x=Xo(e,",");for(S["@"]&&(h=S["@"].attributes,v=S["@"].attributesOrder),t=0,n=x.length;t<n;t++)if(i=b.exec(x[t])){if(g=i[1],c=i[2],p=i[3],s=i[5],a={attributes:d={},attributesOrder:m=[]},"#"===g&&(a.paddEmpty=!0),"-"===g&&(a.removeEmpty=!0),"!"===i[4]&&(a.removeEmptyAttrs=!0),h&&(ie(h,function(e,t){d[t]=e}),m.push.apply(m,v)),s)for(r=0,o=(s=Xo(s,"|")).length;r<o;r++)(i=C.exec(s[r]))&&(u={},f=i[1],l=i[2].replace(/[\\:]:/g,":"),g=i[3],y=i[4],"!"===f&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(l),u.required=!0),"-"!==f?(g&&("="===g&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:l,value:y}),u.defaultValue=y),":"===g&&(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:l,value:y}),u.forcedValue=y),"<"===g&&(u.validValues=Vo(y,"?"))),w.test(l)?(a.attributePatterns=a.attributePatterns||[],u.pattern=A(l),a.attributePatterns.push(u)):(d[l]||m.push(l),d[l]=u)):(delete d[l],m.splice(Ko(m,l),1)));h||"@"!==c||(h=d,v=m),p&&(a.outputName=c,S[p]=a),w.test(c)?(a.pattern=A(c),N.push(a)):S[c]=a}}},T=function(e){S={},N=[],R(e),qo(d,function(e,t){a[t]=e.children})},C=function(e){var o=/^(~)?(.+)$/;e&&(jo.text_block_elements=jo.block_elements=null,qo(Xo(e,","),function(e){var t=o.exec(e),e="~"===t[1],n=e?"span":"div",r=t[2];a[r]=a[n],c[r]=n,e||(k[r.toUpperCase()]={},k[r]={}),S[r]||(e=S[n],delete(e=$o({},e)).removeEmptyAttrs,delete e.removeEmpty,S[r]=e),qo(a,function(e,t){e[n]&&(a[t]=e=$o({},a[t]),e[r]=e[n])})}))},f=function(e){var r=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;jo[o.schema]=null,e&&qo(Xo(e,","),function(e){var t,n,e=r.exec(e);e&&(n=e[1],t=n?a[e[2]]:a[e[2]]={"#comment":{}},t=a[e[2]],qo(Xo(e[3],"|"),function(e){"-"===n?delete t[e]:t[e]={}}))})},D=function(e){var t,n=S[e];if(n)return n;for(t=N.length;t--;)if((n=N[t]).pattern.test(e))return n};o.valid_elements?T(o.valid_elements):(qo(d,function(e,t){S[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},a[t]=e.children}),"html5"!==o.schema&&qo(Xo("strong/b em/i"),function(e){e=Xo(e,"/");S[e[1]].outputName=e[0]}),qo(Xo("ol ul sub sup blockquote span font a table tbody strong em b i"),function(e){S[e]&&(S[e].removeEmpty=!0)}),qo(Xo("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){S[e].paddEmpty=!0}),qo(Xo("span"),function(e){S[e].removeEmptyAttrs=!0})),C(o.custom_elements),f(o.valid_children),R(o.extended_valid_elements),f("+ol[ul|ol],+ul[ul|ol]"),qo({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){S[t]&&(S[t].parentsRequired=Xo(e))}),o.invalid_elements&&qo(Wo(o.invalid_elements),function(e){S[e]&&delete S[e]}),D("span")||R("span[!data-mce-type|*]");return{children:a,elements:S,getValidStyles:function(){return m},getValidClasses:function(){return p},getBlockElements:function(){return k},getInvalidStyles:function(){return g},getShortEndedElements:function(){return y},getTextBlockElements:function(){return E},getTextInlineElements:function(){return _},getBoolAttrs:function(){return b},getElementRule:D,getSelfClosingElements:function(){return v},getNonEmptyElements:function(){return w},getMoveCaretBeforeOnEnterElements:function(){return x},getWhiteSpaceElements:function(){return h},getSpecialElements:function(){return l},isValidChild:function(e,t){e=a[e.toLowerCase()];return!(!e||!e[t.toLowerCase()])},isValid:function(e,t){var n,r,o=D(e);if(o){if(!t)return!0;if(o.attributes[t])return!0;if(n=o.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},getCustomElements:function(){return c},addValidElements:R,setValidElements:T,addCustomElements:C,addValidChildren:f}},Jo=function(e,t,n,r){var o=function(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e};return"#"+o(t)+o(n)+o(r)},Qo=function(y,e){var s,c,b=this,C=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,w=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,x=/\s*([^:]+):\s*([^;]+);?/g,S=/\s+$/,N={},E=zr;y=y||{},e&&(s=e.getValidStyles(),c=e.getInvalidStyles());for(var t=("\\\" \\' \\; \\: ; : "+E).split(" "),k=0;k<t.length;k++)N[t[k]]=E+k,N[E+k]=t[k];return{toHex:function(e){return e.replace(C,Jo)},parse:function(e){var t,n,r,o,i,a,u,s={},c=y.url_converter,l=y.url_converter_scope||b,f=function(e,t,n){var r=s[e+"-top"+t];if(r){var o=s[e+"-right"+t];if(o){var i=s[e+"-bottom"+t];if(i){var a=s[e+"-left"+t];if(a){var u=[r,o,i,a];for(k=u.length-1;k--&&u[k]===u[k+1];);-1<k&&n||(s[e+t]=-1===k?u[0]:u.join(" "),delete s[e+"-top"+t],delete s[e+"-right"+t],delete s[e+"-bottom"+t],delete s[e+"-left"+t])}}}}},d=function(e){var t,n=s[e];if(n){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return!1;return s[e]=n[0],!0}},m=function(e){return r=!0,N[e]},g=function(e,t){return r&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return N[e]})),e=!t?e.replace(/\\([\'\";:])/g,"$1"):e},p=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},h=function(e){return e.replace(/\\[0-9a-f]+/gi,p)},v=function(e,t,n,r,o,i){if(o=o||i)return"'"+(o=g(o)).replace(/\'/g,"\\'")+"'";if(t=g(t||n||r),!y.allow_script_urls){r=t.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(r))return"";if(!y.allow_svg_data_urls&&/^data:image\/svg/i.test(r))return""}return"url('"+(t=c?c.call(l,t,"style"):t).replace(/\'/g,"\\'")+"')"};if(e){for(e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,m).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,m)});n=x.exec(e);)x.lastIndex=n.index+n[0].length,t=n[1].replace(S,"").toLowerCase(),n=n[2].replace(S,""),t&&n&&(t=h(t),n=h(n),-1===t.indexOf(E)&&-1===t.indexOf('"')&&(y.allow_script_urls||"behavior"!==t&&!/expression\s*\(|\/\*|\*\//.test(n))&&("font-weight"===t&&"700"===n?n="bold":"color"!==t&&"background-color"!==t||(n=n.toLowerCase()),n=(n=n.replace(C,Jo)).replace(w,v),s[t]=r?g(n,!0):n));f("border","",!0),f("border","-width"),f("border","-color"),f("border","-style"),f("padding",""),f("margin",""),o="border",a="border-style",u="border-color",d(i="border-width")&&d(a)&&d(u)&&(s[o]=s[i]+" "+s[a]+" "+s[u],delete s[i],delete s[a],delete s[u]),"medium none"===s.border&&delete s.border,"none"===s["border-image"]&&delete s["border-image"]}return s},serialize:function(i,a){var u="",e=function(e){var t,n=s[e];if(n)for(var r=0,o=n.length;r<o;r++)e=n[r],(t=i[e])&&(u+=(0<u.length?" ":"")+e+": "+t+";")};return a&&s?(e("*"),e(a)):ie(i,function(e,t){var n,r,o;!e||c&&(n=t,r=a,(o=c["*"])&&o[n]||(o=c[r])&&o[n])||(u+=(0<u.length?" ":"")+t+": "+e+";")}),u}}},Zo=/^(?:mouse|contextmenu)|click/,ei={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1,mozPressure:1},ti=E,ni=k,ri=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},oi=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},ii=function(e,t){var n,r,o=t||{};for(n in e)ei[n]||(o[n]=e[n]);return o.target||(o.target=o.srcElement||document),o.composedPath&&(o.composedPath=function(){return e.composedPath()}),e&&Zo.test(e.type)&&e.pageX===undefined&&e.clientX!==undefined&&(t=(r=o.target.ownerDocument||document).documentElement,r=r.body,o.pageX=e.clientX+(t&&t.scrollLeft||r&&r.scrollLeft||0)-(t&&t.clientLeft||r&&r.clientLeft||0),o.pageY=e.clientY+(t&&t.scrollTop||r&&r.scrollTop||0)-(t&&t.clientTop||r&&r.clientTop||0)),o.preventDefault=function(){o.defaultPrevented=!0,o.isDefaultPrevented=ni,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},o.stopPropagation=function(){o.cancelBubble=!0,o.isPropagationStopped=ni,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},!(o.stopImmediatePropagation=function(){o.isImmediatePropagationStopped=ni,o.stopPropagation()})==((r=o).isDefaultPrevented===ni||r.isDefaultPrevented===ti)&&(o.isDefaultPrevented=!0===o.defaultPrevented?ni:ti,o.isPropagationStopped=!0===o.cancelBubble?ni:ti,o.isImmediatePropagationStopped=ti),"undefined"==typeof o.metaKey&&(o.metaKey=!1),o},ai=function(e,t,n){var r,o=e.document,i={type:"ready"};n.domLoaded?t(i):(r=function(){oi(e,"DOMContentLoaded",r),oi(e,"load",r),n.domLoaded||(n.domLoaded=!0,t(i)),e=null},"complete"===o.readyState||"interactive"===o.readyState&&o.body?r():ri(e,"DOMContentLoaded",r),n.domLoaded||ri(e,"load",r))},ui=(si.prototype.bind=function(e,t,n,r){var o,i,a,u,s,c,l=this,f=window,d=function(e){l.executeHandlers(ii(e||f.event),o)};if(e&&3!==e.nodeType&&8!==e.nodeType){e[l.expando]?o=e[l.expando]:(o=l.count++,e[l.expando]=o,l.events[o]={}),r=r||e;for(var m=t.split(" "),g=m.length;g--;)s=d,u=c=!1,"DOMContentLoaded"===(a=m[g])&&(a="ready"),l.domLoaded&&"ready"===a&&"complete"===e.readyState?n.call(r,ii({type:a})):(l.hasMouseEnterLeave||(u=l.mouseEnterLeave[a])&&(s=function(e){var t=e.currentTarget,n=e.relatedTarget;if(n&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=ii(e||f.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,l.executeHandlers(e,o))}),l.hasFocusIn||"focusin"!==a&&"focusout"!==a||(c=!0,u="focusin"===a?"focus":"blur",s=function(e){(e=ii(e||f.event)).type="focus"===e.type?"focusin":"focusout",l.executeHandlers(e,o)}),(i=l.events[o][a])?"ready"===a&&l.domLoaded?n(ii({type:a})):i.push({func:n,scope:r}):(l.events[o][a]=i=[{func:n,scope:r}],i.fakeName=u,i.capture=c,i.nativeHandler=s,"ready"===a?ai(e,s,l):ri(e,u||a,s,c)));return e=i=null,n}},si.prototype.unbind=function(n,e,t){var r,o,i;if(!n||3===n.nodeType||8===n.nodeType)return this;var a=n[this.expando];if(a){if(i=this.events[a],e){for(var u,s,c,l,f=e.split(" "),d=f.length;d--;)if(l=i[o=f[d]]){if(t)for(r=l.length;r--;)l[r].func===t&&(u=l.nativeHandler,s=l.fakeName,c=l.capture,(l=l.slice(0,r).concat(l.slice(r+1))).nativeHandler=u,l.fakeName=s,l.capture=c,i[o]=l);t&&0!==l.length||(delete i[o],oi(n,l.fakeName||o,l.nativeHandler,l.capture))}}else ie(i,function(e,t){oi(n,e.fakeName||t,e.nativeHandler,e.capture)}),i={};for(o in i)if(ge(i,o))return this;delete this.events[a];try{delete n[this.expando]}catch(m){n[this.expando]=null}}return this},si.prototype.fire=function(e,t,n){var r;if(!e||3===e.nodeType||8===e.nodeType)return this;var o=ii(null,n);for(o.type=t,o.target=e;(r=e[this.expando])&&this.executeHandlers(o,r),(e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow)&&!o.isPropagationStopped(););return this},si.prototype.clean=function(e){var t,n;if(!e||3===e.nodeType||8===e.nodeType)return this;if(e[this.expando]&&this.unbind(e),(e=!e.getElementsByTagName?e.document:e)&&e.getElementsByTagName)for(this.unbind(e),t=(n=e.getElementsByTagName("*")).length;t--;)(e=n[t])[this.expando]&&this.unbind(e);return this},si.prototype.destroy=function(){this.events={}},si.prototype.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1},si.prototype.executeHandlers=function(e,t){var t=this.events[t],n=t&&t[e.type];if(n)for(var r=0,o=n.length;r<o;r++){var i=n[r];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}},si.Event=new si,si);function si(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}var ci,li,fi,di,mi,gi,pi,hi,vi,yi,bi,Ci,wi,xi,Si,Ni,Ei,ki="sizzle"+-new Date,_i=window.document,Ai=0,Ri=0,Ti=oa(),Di=oa(),Oi=oa(),Bi=function(e,t){return e===t&&(yi=!0),0},Pi=typeof undefined,Li={}.hasOwnProperty,We=[],Ii=We.pop,Mi=We.push,Fi=We.push,Ui=We.slice,zi=We.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},ji="[\\x20\\t\\r\\n\\f]",o="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",st="\\["+ji+"*("+o+")(?:"+ji+"*([*^$|!~]?=)"+ji+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+o+"))|)"+ji+"*\\]",e=":("+o+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+st+")*)|.*)\\)|)",Hi=new RegExp("^"+ji+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ji+"+$","g"),Vi=new RegExp("^"+ji+"*,"+ji+"*"),qi=new RegExp("^"+ji+"*([>+~]|"+ji+")"+ji+"*"),$i=new RegExp("="+ji+"*([^\\]'\"]*?)"+ji+"*\\]","g"),Wi=new RegExp(e),Ki=new RegExp("^"+o+"$"),Xi={ID:new RegExp("^#("+o+")"),CLASS:new RegExp("^\\.("+o+")"),TAG:new RegExp("^("+o+"|[*])"),ATTR:new RegExp("^"+st),PSEUDO:new RegExp("^"+e),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ji+"*(even|odd|(([+-]|)(\\d*)n|)"+ji+"*(?:([+-]|)"+ji+"*(\\d+)|))"+ji+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+ji+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ji+"*((?:-\\d)?\\d*)"+ji+"*\\)|)(?=[^-]|$)","i")},Yi=/^(?:input|select|textarea|button)$/i,Gi=/^h\d$/i,Ji=/^[^{]+\{\s*\[native \w/,Qi=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Zi=/[+~]/,ea=/'|\\/g,ta=new RegExp("\\\\([\\da-f]{1,6}"+ji+"?|("+ji+")|.)","ig"),na=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(65536+r):String.fromCharCode(r>>10|55296,1023&r|56320)};try{Fi.apply(We=Ui.call(_i.childNodes),_i.childNodes),We[_i.childNodes.length].nodeType}catch(LS){Fi={apply:We.length?function(e,t){Mi.apply(e,Ui.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}var ra=function(e,t,n,r){var o,i,a,u,s,c,l;if((t?t.ownerDocument||t:_i)!==Ci&&bi(t),n=n||[],!e||"string"!=typeof e)return n;if(1!==(o=(t=t||Ci).nodeType)&&9!==o)return[];if(xi&&!r){if(c=Qi.exec(e))if(l=c[1]){if(9===o){if(!(u=t.getElementById(l))||!u.parentNode)return n;if(u.id===l)return n.push(u),n}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(l))&&Ei(t,u)&&u.id===l)return n.push(u),n}else{if(c[2])return Fi.apply(n,t.getElementsByTagName(e)),n;if((l=c[3])&&ci.getElementsByClassName)return Fi.apply(n,t.getElementsByClassName(l)),n}if(ci.qsa&&(!Si||!Si.test(e))){if(s=u=ki,c=t,l=9===o&&e,1===o&&"object"!==t.nodeName.toLowerCase()){for(a=mi(e),(u=t.getAttribute("id"))?s=u.replace(ea,"\\$&"):t.setAttribute("id",s),s="[id='"+s+"'] ",i=a.length;i--;)a[i]=s+la(a[i]);c=Zi.test(e)&&sa(t.parentNode)||t,l=a.join(",")}if(l)try{return Fi.apply(n,c.querySelectorAll(l)),n}catch(f){}finally{u||t.removeAttribute("id")}}}return pi(e.replace(Hi,"$1"),t,n,r)};function oa(){var n=[];function r(e,t){return n.push(e+" ")>li.cacheLength&&delete r[n.shift()],r[e+" "]=t}return r}function ia(e){return e[ki]=!0,e}function aa(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ua(a){return ia(function(i){return i=+i,ia(function(e,t){for(var n,r=a([],e.length,i),o=r.length;o--;)e[n=r[o]]&&(e[n]=!(t[n]=e[n]))})})}function sa(e){return e&&typeof e.getElementsByTagName!=Pi&&e}function ca(){}function la(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function fa(a,e,t){var u=e.dir,s=t&&"parentNode"===u,c=Ri++;return e.first?function(e,t,n){for(;e=e[u];)if(1===e.nodeType||s)return a(e,t,n)}:function(e,t,n){var r,o,i=[Ai,c];if(n){for(;e=e[u];)if((1===e.nodeType||s)&&a(e,t,n))return!0}else for(;e=e[u];)if(1===e.nodeType||s){if((r=(o=e[ki]||(e[ki]={}))[u])&&r[0]===Ai&&r[1]===c)return i[2]=r[2];if((o[u]=i)[2]=a(e,t,n))return!0}}}function da(o){return 1<o.length?function(e,t,n){for(var r=o.length;r--;)if(!o[r](e,t,n))return!1;return!0}:o[0]}function ma(e,t,n,r,o){for(var i,a=[],u=0,s=e.length,c=null!=t;u<s;u++)(i=e[u])&&(n&&!n(i,r,o)||(a.push(i),c&&t.push(u)));return a}function ga(m,g,p,h,v,e){return h&&!h[ki]&&(h=ga(h)),v&&!v[ki]&&(v=ga(v,e)),ia(function(e,t,n,r){var o,i,a,u=[],s=[],c=t.length,l=e||function(e,t,n){for(var r=0,o=t.length;r<o;r++)ra(e,t[r],n);return n}(g||"*",n.nodeType?[n]:n,[]),f=!m||!e&&g?l:ma(l,u,m,n,r),d=p?v||(e?m:c||h)?[]:t:f;if(p&&p(f,d,n,r),h)for(o=ma(d,s),h(o,[],n,r),i=o.length;i--;)(a=o[i])&&(d[s[i]]=!(f[s[i]]=a));if(e){if(v||m){if(v){for(o=[],i=d.length;i--;)(a=d[i])&&o.push(f[i]=a);v(null,d=[],o,r)}for(i=d.length;i--;)(a=d[i])&&-1<(o=v?zi.call(e,a):u[i])&&(e[o]=!(t[o]=a))}}else d=ma(d===t?d.splice(c,d.length):d),v?v(null,t,d,r):Fi.apply(t,d)})}ci=ra.support={},di=ra.isXML=function(e){e=e&&(e.ownerDocument||e).documentElement;return!!e&&"HTML"!==e.nodeName},bi=ra.setDocument=function(e){var s=e?e.ownerDocument||e:_i,e=s.defaultView;return s!==Ci&&9===s.nodeType&&s.documentElement?(wi=(Ci=s).documentElement,xi=!di(s),e&&e!==function(e){try{return e.top}catch(t){}return null}(e)&&(e.addEventListener?e.addEventListener("unload",function(){bi()},!1):e.attachEvent&&e.attachEvent("onunload",function(){bi()})),ci.attributes=!0,ci.getElementsByTagName=!0,ci.getElementsByClassName=Ji.test(s.getElementsByClassName),ci.getById=!0,li.find.ID=function(e,t){if(typeof t.getElementById!=Pi&&xi){e=t.getElementById(e);return e&&e.parentNode?[e]:[]}},li.filter.ID=function(e){var t=e.replace(ta,na);return function(e){return e.getAttribute("id")===t}},li.find.TAG=ci.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!=Pi)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"!==e)return i;for(;n=i[o++];)1===n.nodeType&&r.push(n);return r},li.find.CLASS=ci.getElementsByClassName&&function(e,t){if(xi)return t.getElementsByClassName(e)},Ni=[],Si=[],ci.disconnectedMatch=!0,Si=Si.length&&new RegExp(Si.join("|")),Ni=Ni.length&&new RegExp(Ni.join("|")),e=Ji.test(wi.compareDocumentPosition),Ei=e||Ji.test(wi.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(n.contains?n.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Bi=e?function(e,t){if(e===t)return yi=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!ci.sortDetached&&t.compareDocumentPosition(e)===n?e===s||e.ownerDocument===_i&&Ei(_i,e)?-1:t===s||t.ownerDocument===_i&&Ei(_i,t)?1:vi?zi.call(vi,e)-zi.call(vi,t):0:4&n?-1:1)}:function(e,t){if(e===t)return yi=!0,0;var n,r=0,o=e.parentNode,i=t.parentNode,a=[e],u=[t];if(!o||!i)return e===s?-1:t===s?1:o?-1:i?1:vi?zi.call(vi,e)-zi.call(vi,t):0;if(o===i)return aa(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;a[r]===u[r];)r++;return r?aa(a[r],u[r]):a[r]===_i?-1:u[r]===_i?1:0},s):Ci},ra.matches=function(e,t){return ra(e,null,null,t)},ra.matchesSelector=function(e,t){if((e.ownerDocument||e)!==Ci&&bi(e),t=t.replace($i,"='$1']"),ci.matchesSelector&&xi&&(!Ni||!Ni.test(t))&&(!Si||!Si.test(t)))try{var n=(void 0).call(e,t);if(n||ci.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(LS){}return 0<ra(t,Ci,null,[e]).length},ra.contains=function(e,t){return(e.ownerDocument||e)!==Ci&&bi(e),Ei(e,t)},ra.attr=function(e,t){(e.ownerDocument||e)!==Ci&&bi(e);var n=li.attrHandle[t.toLowerCase()],n=n&&Li.call(li.attrHandle,t.toLowerCase())?n(e,t,!xi):undefined;return n!==undefined?n:ci.attributes||!xi?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},ra.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ra.uniqueSort=function(e){var t,n=[],r=0,o=0;if(yi=!ci.detectDuplicates,vi=!ci.sortStable&&e.slice(0),e.sort(Bi),yi){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return vi=null,e},fi=ra.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=fi(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=fi(t);return n},(li=ra.selectors={cacheLength:50,createPseudo:ia,match:Xi,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ta,na),e[3]=(e[3]||e[4]||e[5]||"").replace(ta,na),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ra.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ra.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Xi.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&Wi.test(n)&&(t=mi(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ta,na).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=Ti[e+" "];return t||(t=new RegExp("(^|"+ji+")"+e+"("+ji+"|$)"))&&Ti(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!=Pi&&e.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(e){e=ra.attr(e,t);return null==e?"!="===n:!n||(e+="","="===n?e===r:"!="===n?e!==r:"^="===n?r&&0===e.indexOf(r):"*="===n?r&&-1<e.indexOf(r):"$="===n?r&&e.slice(-r.length)===r:"~="===n?-1<(" "+e+" ").indexOf(r):"|="===n&&(e===r||e.slice(0,r.length+1)===r+"-"))}},CHILD:function(m,e,t,g,p){var h="nth"!==m.slice(0,3),v="last"!==m.slice(-4),y="of-type"===e;return 1===g&&0===p?function(e){return!!e.parentNode}:function(e,t,n){var r,o,i,a,u,s,c=h!=v?"nextSibling":"previousSibling",l=e.parentNode,f=y&&e.nodeName.toLowerCase(),d=!n&&!y;if(l){if(h){for(;c;){for(i=e;i=i[c];)if(y?i.nodeName.toLowerCase()===f:1===i.nodeType)return!1;s=c="only"===m&&!s&&"nextSibling"}return!0}if(s=[v?l.firstChild:l.lastChild],v&&d){for(u=(r=(o=l[ki]||(l[ki]={}))[m]||[])[0]===Ai&&r[1],a=r[0]===Ai&&r[2],i=u&&l.childNodes[u];i=++u&&i&&i[c]||(a=u=0)||s.pop();)if(1===i.nodeType&&++a&&i===e){o[m]=[Ai,u,a];break}}else if(d&&(r=(e[ki]||(e[ki]={}))[m])&&r[0]===Ai)a=r[1];else for(;(i=++u&&i&&i[c]||(a=u=0)||s.pop())&&((y?i.nodeName.toLowerCase()!==f:1!==i.nodeType)||!++a||(d&&((i[ki]||(i[ki]={}))[m]=[Ai,a]),i!==e)););return(a-=p)===g||a%g==0&&0<=a/g}}},PSEUDO:function(e,i){var t,a=li.pseudos[e]||li.setFilters[e.toLowerCase()]||ra.error("unsupported pseudo: "+e);return a[ki]?a(i):1<a.length?(t=[e,e,"",i],li.setFilters.hasOwnProperty(e.toLowerCase())?ia(function(e,t){for(var n,r=a(e,i),o=r.length;o--;)e[n=zi.call(e,r[o])]=!(t[n]=r[o])}):function(e){return a(e,0,t)}):a}},pseudos:{not:ia(function(e){var r=[],o=[],u=gi(e.replace(Hi,"$1"));return u[ki]?ia(function(e,t,n,r){for(var o,i=u(e,null,r,[]),a=e.length;a--;)(o=i[a])&&(e[a]=!(t[a]=o))}):function(e,t,n){return r[0]=e,u(r,null,n,o),r[0]=null,!o.pop()}}),has:ia(function(t){return function(e){return 0<ra(t,e).length}}),contains:ia(function(t){return t=t.replace(ta,na),function(e){return-1<(e.textContent||e.innerText||fi(e)).indexOf(t)}}),lang:ia(function(n){return Ki.test(n||"")||ra.error("unsupported lang: "+n),n=n.replace(ta,na).toLowerCase(),function(e){var t;do{if(t=xi?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===wi},focus:function(e){return e===Ci.activeElement&&(!Ci.hasFocus||Ci.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!li.pseudos.empty(e)},header:function(e){return Gi.test(e.nodeName)},input:function(e){return Yi.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:ua(function(){return[0]}),last:ua(function(e,t){return[t-1]}),eq:ua(function(e,t,n){return[n<0?n+t:n]}),even:ua(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ua(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ua(function(e,t,n){for(var r=n<0?n+t:n;0<=--r;)e.push(r);return e}),gt:ua(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=li.pseudos.eq,X(["radio","checkbox","file","password","image"],function(e){var t;li.pseudos[e]=(t=e,function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t})}),X(["submit","reset"],function(e){var n;li.pseudos[e]=(n=e,function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n})}),ca.prototype=li.filters=li.pseudos,li.setFilters=new ca,mi=ra.tokenize=function(e,t){var n,r,o,i,a,u,s,c=Di[e+" "];if(c)return t?0:c.slice(0);for(a=e,u=[],s=li.preFilter;a;){for(i in n&&!(r=Vi.exec(a))||(r&&(a=a.slice(r[0].length)||a),u.push(o=[])),n=!1,(r=qi.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(Hi," ")}),a=a.slice(n.length)),li.filter)li.filter.hasOwnProperty(i)&&(!(r=Xi[i].exec(a))||s[i]&&!(r=s[i](r))||(n=r.shift(),o.push({value:n,type:i,matches:r}),a=a.slice(n.length)));if(!n)break}return t?a.length:a?ra.error(e):Di(e,u).slice(0)},gi=ra.compile=function(e,t){var n,h,v,y,b,r,o=[],i=[],a=Oi[e+" "];if(!a){for(n=(t=t||mi(e)).length;n--;)((a=function f(e){for(var r,t,n,o=e.length,i=li.relative[e[0].type],a=i||li.relative[" "],u=i?1:0,s=fa(function(e){return e===r},a,!0),c=fa(function(e){return-1<zi.call(r,e)},a,!0),l=[function(e,t,n){return n=!i&&(n||t!==hi)||((r=t).nodeType?s:c)(e,t,n),r=null,n}];u<o;u++)if(t=li.relative[e[u].type])l=[fa(da(l),t)];else{if((t=li.filter[e[u].type].apply(null,e[u].matches))[ki]){for(n=++u;n<o&&!li.relative[e[n].type];n++);return ga(1<u&&da(l),1<u&&la(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(Hi,"$1"),t,u<n&&f(e.slice(u,n)),n<o&&f(e=e.slice(n)),n<o&&la(e))}l.push(t)}return da(l)}(t[n]))[ki]?o:i).push(a);(a=Oi(e,(h=i,y=0<(v=o).length,b=0<h.length,r=function(e,t,n,r,o){var i,a,u,s=0,c="0",l=e&&[],f=[],d=hi,m=e||b&&li.find.TAG("*",o),g=Ai+=null==d?1:Math.random()||.1,p=m.length;for(o&&(hi=t!==Ci&&t);c!==p&&null!=(i=m[c]);c++){if(b&&i){for(a=0;u=h[a++];)if(u(i,t,n)){r.push(i);break}o&&(Ai=g)}y&&((i=!u&&i)&&s--,e&&l.push(i))}if(s+=c,y&&c!==s){for(a=0;u=v[a++];)u(l,f,t,n);if(e){if(0<s)for(;c--;)l[c]||f[c]||(f[c]=Ii.call(r));f=ma(f)}Fi.apply(r,f),o&&!e&&0<f.length&&1<s+v.length&&ra.uniqueSort(r)}return o&&(Ai=g,hi=d),l},y?ia(r):r))).selector=e}return a},pi=ra.select=function(e,t,n,r){var o,i,a,u,s,c="function"==typeof e&&e,l=!r&&mi(e=c.selector||e);if(n=n||[],1===l.length){if(2<(i=l[0]=l[0].slice(0)).length&&"ID"===(a=i[0]).type&&ci.getById&&9===t.nodeType&&xi&&li.relative[i[1].type]){if(!(t=(li.find.ID(a.matches[0].replace(ta,na),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(o=Xi.needsContext.test(e)?0:i.length;o--&&(a=i[o],!li.relative[u=a.type]);)if((s=li.find[u])&&(r=s(a.matches[0].replace(ta,na),Zi.test(i[0].type)&&sa(t.parentNode)||t))){if(i.splice(o,1),!(e=r.length&&la(i)))return Fi.apply(n,r),n;break}}return(c||gi(e,l))(r,t,!xi,n,Zi.test(e)&&sa(t.parentNode)||t),n},ci.sortStable=ki.split("").sort(Bi).join("")===ki,ci.detectDuplicates=!!yi,bi(),ci.sortDetached=!0;var pa=document,ha=Array.prototype.push,va=Array.prototype.slice,ya=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ba=ui.Event,Ca=gt.makeMap("children,contents,next,prev"),wa=function(e){return void 0!==e},xa=function(e){return"string"==typeof e},Sa=function(e,t){var n,r=(t=t||pa).createElement("div"),o=t.createDocumentFragment();for(r.innerHTML=e;n=r.firstChild;)o.appendChild(n);return o},Na=function(e,t,n,r){var o;if(xa(t))t=Sa(t,Fa(e[0]));else if(t.length&&!t.nodeType){if(t=Ha.makeArray(t),r)for(o=t.length-1;0<=o;o--)Na(e,t[o],n,r);else for(o=0;o<t.length;o++)Na(e,t[o],n,r);return e}if(t.nodeType)for(o=e.length;o--;)n.call(e[o],t);return e},Ea=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},ka=function(e,t,n){var r,o;return t=Ha(t)[0],e.each(function(){n&&r===this.parentNode||(r=this.parentNode,o=t.cloneNode(!1),this.parentNode.insertBefore(o,this)),o.appendChild(this)}),e},_a=gt.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),Aa=gt.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Ra={"for":"htmlFor","class":"className",readonly:"readOnly"},Ta={"float":"cssFloat"},Da={},Oa={},Ba=function(e,t){return new Ha.fn.init(e,t)},Pa=/^\s*|\s*$/g,La=function(e){return null===e||e===undefined?"":(""+e).replace(Pa,"")},Ia=function(e,t){var n,r,o,i;if(e)if((n=e.length)===undefined){for(r in e)if(e.hasOwnProperty(r)&&(i=e[r],!1===t.call(i,r,i)))break}else for(o=0;o<n&&(i=e[o],!1!==t.call(i,o,i));o++);return e},Ma=function(e,n){var r=[];return Ia(e,function(e,t){n(t,e)&&r.push(t)}),r},Fa=function(e){return e?9===e.nodeType?e:e.ownerDocument:pa};Ba.fn=Ba.prototype={constructor:Ba,selector:"",context:null,length:0,init:function(e,t){var n,r,o=this;if(!e)return o;if(e.nodeType)return o.context=o[0]=e,o.length=1,o;if(t&&t.nodeType)o.context=t;else{if(t)return Ha(e).attr(t);o.context=t=document}if(xa(e)){if(!(n="<"===(o.selector=e).charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:ya.exec(e)))return Ha(t).find(e);if(n[1])for(r=Sa(e,Fa(t)).firstChild;r;)ha.call(o,r),r=r.nextSibling;else{if(!(r=Fa(t).getElementById(n[2])))return o;if(r.id!==n[2])return o.find(e);o.length=1,o[0]=r}}else this.add(e,!1);return o},toArray:function(){return gt.toArray(this)},add:function(e,t){var n,r;if(xa(e))return this.add(Ha(e));if(!1!==t)for(n=Ha.unique(this.toArray().concat(Ha.makeArray(e))),this.length=n.length,r=0;r<n.length;r++)this[r]=n[r];else ha.apply(this,Ha.makeArray(e));return this},attr:function(t,n){var e,r=this;if("object"==typeof t)Ia(t,function(e,t){r.attr(e,t)});else{if(!wa(n)){if(r[0]&&1===r[0].nodeType){if((e=Da[t])&&e.get)return e.get(r[0],t);if(Aa[t])return r.prop(t)?t:undefined;null===(n=r[0].getAttribute(t,2))&&(n=undefined)}return n}this.each(function(){var e;1===this.nodeType&&((e=Da[t])&&e.set?e.set(this,n):null===n?this.removeAttribute(t,2):this.setAttribute(t,n,2))})}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=Ra[e]||e))Ia(e,function(e,t){n.prop(e,t)});else{if(!wa(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1===this.nodeType&&(this[e]=t)})}return n},css:function(n,r){var e,o,i=this,t=function(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})},a=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})};if("object"==typeof n)Ia(n,function(e,t){i.css(e,t)});else if(wa(r))n=t(n),"number"!=typeof r||_a[n]||(r=r.toString()+"px"),i.each(function(){var e=this.style;if((o=Oa[n])&&o.set)o.set(this,r);else{try{this.style[Ta[n]||n]=r}catch(t){}null!==r&&""!==r||(e.removeProperty?e.removeProperty(a(n)):e.removeAttribute(n))}});else{if(e=i[0],(o=Oa[n])&&o.get)return o.get(e);if(!e.ownerDocument.defaultView)return e.currentStyle?e.currentStyle[t(n)]:"";try{return e.ownerDocument.defaultView.getComputedStyle(e,null).getPropertyValue(a(n))}catch(u){return undefined}}return i},remove:function(){for(var e,t=this.length;t--;)e=this[t],ba.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this.length;t--;)for(e=this[t];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t;if(wa(e)){t=this.length;try{for(;t--;)this[t].innerHTML=e}catch(n){Ha(this[t]).empty().append(e)}return this}return this[0]?this[0].innerHTML:""},text:function(e){var t;if(wa(e)){for(t=this.length;t--;)"innerText"in this[t]?this[t].innerText=e:this[0].textContent=e;return this}return this[0]?this[0].innerText||this[0].textContent:""},append:function(){return Na(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return Na(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?Na(this,arguments,function(e){this.parentNode.insertBefore(e,this)}):this},after:function(){return this[0]&&this[0].parentNode?Na(this,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):this},appendTo:function(e){return Ha(e).append(this),this},prependTo:function(e){return Ha(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return ka(this,e)},wrapAll:function(e){return ka(this,e,!0)},wrapInner:function(e){return this.each(function(){Ha(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){Ha(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),Ha(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(o,i){var e=this;return"string"!=typeof o||(-1!==o.indexOf(" ")?Ia(o.split(" "),function(){e.toggleClass(this,i)}):e.each(function(e,t){var n,r=Ea(t,o);r!==i&&(n=t.className,r?t.className=La((" "+n+" ").replace(" "+o+" "," ")):t.className+=n?" "+o:o)})),e},hasClass:function(e){return Ea(this[0],e)},each:function(e){return Ia(this,e)},on:function(e,t){return this.each(function(){ba.bind(this,e,t)})},off:function(e,t){return this.each(function(){ba.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?ba.fire(this,e.type,e):ba.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return Ha(va.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){for(var t=[],n=0,r=this.length;n<r;n++)Ha.find(e,this[n],t);return Ha(t)},filter:function(n){return Ha("function"==typeof n?Ma(this.toArray(),function(e,t){return n(t,e)}):Ha.filter(n,this.toArray()))},closest:function(n){var r=[];return n instanceof Ha&&(n=n[0]),this.each(function(e,t){for(;t;){if("string"==typeof n&&Ha(t).is(n)){r.push(t);break}if(t===n){r.push(t);break}t=t.parentNode}}),Ha(r)},offset:function(e){var t,n,r=0,o=0;return e?this.css(e):((n=this[0])&&(e=(t=n.ownerDocument).documentElement,n.getBoundingClientRect&&(r=(n=n.getBoundingClientRect()).left+(e.scrollLeft||t.body.scrollLeft)-e.clientLeft,o=n.top+(e.scrollTop||t.body.scrollTop)-e.clientTop)),{left:r,top:o})},push:ha,sort:Array.prototype.sort,splice:Array.prototype.splice},gt.extend(Ba,{extend:gt.extend,makeArray:function(e){return(t=e)&&t===t.window||e.nodeType?[e]:gt.toArray(e);var t},inArray:function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},isArray:gt.isArray,each:Ia,trim:La,grep:Ma,find:ra,expr:ra.selectors,unique:ra.uniqueSort,text:ra.getText,contains:ra.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!==t[r].nodeType&&t.splice(r,1);return t=1===t.length?Ha.find.matchesSelector(t[0],e)?[t[0]]:[]:Ha.find.matches(e,t)}});var Ua=function(e,t,n){var r=[],o=e[t];for("string"!=typeof n&&n instanceof Ha&&(n=n[0]);o&&9!==o.nodeType;){if(n!==undefined){if(o===n)break;if("string"==typeof n&&Ha(o).is(n))break}1===o.nodeType&&r.push(o),o=o[t]}return r},za=function(e,t,n,r){var o=[];for(r instanceof Ha&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(r!==undefined){if(e===r)break;if("string"==typeof r&&Ha(e).is(r))break}o.push(e)}return o},ja=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null};Ia({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return Ua(e,"parentNode")},next:function(e){return ja(e,"nextSibling",1)},prev:function(e){return ja(e,"previousSibling",1)},children:function(e){return za(e.firstChild,"nextSibling",1)},contents:function(e){return gt.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(r,o){Ba.fn[r]=function(t){var n=[];this.each(function(){var e=o.call(n,this,t,n);e&&(Ha.isArray(e)?n.push.apply(n,e):n.push(e))}),1<this.length&&(Ca[r]||(n=Ha.unique(n)),0===r.indexOf("parents")&&(n=n.reverse()));var e=Ha(n);return t?e.filter(t):e}}),Ia({parentsUntil:function(e,t){return Ua(e,"parentNode",t)},nextUntil:function(e,t){return za(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return za(e,"previousSibling",1,t).slice(1)}},function(o,i){Ba.fn[o]=function(t,e){var n=[];this.each(function(){var e=i.call(n,this,t,n);e&&(Ha.isArray(e)?n.push.apply(n,e):n.push(e))}),1<this.length&&(n=Ha.unique(n),0!==o.indexOf("parents")&&"prevUntil"!==o||(n=n.reverse()));var r=Ha(n);return e?r.filter(e):r}}),Ba.fn.is=function(e){return!!e&&0<this.filter(e).length},Ba.fn.init.prototype=Ba.fn,Ba.overrideDefaults=function(n){var r,o=function(e,t){return r=r||n(),0===arguments.length&&(e=r.element),t=t||r.context,new o.fn.init(e,t)};return Ha.extend(o,this),o},Ba.attrHooks=Da,Ba.cssHooks=Oa;var Ha=Ba,Va=gt.each,qa=gt.grep,$a=ct.ie,Wa=/^([a-z0-9],?)+$/i,Ka=function(e,t){var n=t.attr("style"),n=e.serialize(e.parse(n),t[0].nodeName);t.attr("data-mce-style",n=n||null)},Xa=function(e,t){var n,r,o=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!==r||r!==n&&e.nodeValue.length)&&(o++,n=r);return o},Ya=function(a,u){void 0===u&&(u={});var n,r,o,i,e,s={},c=window,l={},t=0,f=Er.forElement(ht.fromDom(a),{contentCssCors:u.contentCssCors,referrerPolicy:u.referrerPolicy}),d=[],m=u.schema||Go({}),g=Qo({url_converter:u.url_converter,url_converter_scope:u.url_converter_scope},u.schema),p=u.ownEvents?new ui:ui.Event,h=m.getBlockElements(),v=Ha.overrideDefaults(function(){return{context:a,element:q.getRoot()}}),y=function(e){return e&&a&&W(e)?a.getElementById(e):e},b=function(e){return v("string"==typeof e?y(e):e)},C=function(e,t,n){var r,o=b(e);return r=void 0===(r=o.length?(e=$[t])&&e.get?e.get(o,t):o.attr(t):r)?n||"":r},w=function(e){e=y(e);return e?e.attributes:[]},x=function(e,t,n){""===n&&(n=null);var r=b(e),o=r.attr(t);r.length&&((e=$[t])&&e.set?e.set(r,n,t):r.attr(t,n),o!==n&&u.onSetAttrib&&u.onSetAttrib({attrElm:r,attrName:t,attrValue:n}))},S=function(){return u.root_element||a.body},N=function(e,t){return Hn(a.body,y(e),t)},E=function(e,t,n){e=b(e);return n?e.css(t):("float"===(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}))&&(t=ct.browser.isIE()?"styleFloat":"cssFloat"),e[0]&&e[0].style?e[0].style[t]:undefined)},k=function(e){var t,n;return e=y(e),t=E(e,"width"),n=E(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},_=function(e,t){if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(Wa.test(t)){for(var n=t.toLowerCase().split(/,/),r=e.nodeName.toLowerCase(),o=n.length-1;0<=o;o--)if(n[o]===r)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}e=Array.isArray(e)?e:[e];return 0<ra(t,e[0].ownerDocument||e[0],null,e).length},A=function(e,t,n,r){var o,i=[],a=y(e);for(r=r===undefined,n=n||("BODY"!==S().nodeName?S().parentNode:null),gt.is(t,"string")&&(t="*"===(o=t)?function(e){return 1===e.nodeType}:function(e){return _(e,o)});a&&!(a===n||K(a.nodeType)||Cn(a)||wn(a));){if(!t||"function"==typeof t&&t(a)){if(!r)return[a];i.push(a)}a=a.parentNode}return r?i:null},R=function(e,t,n){var r=t;if(e)for("string"==typeof t&&(r=function(e){return _(e,t)}),e=e[n];e;e=e[n])if("function"==typeof r&&r(e))return e;return null},T=function(e,n,r){var o,e="string"==typeof e?y(e):e;return!!e&&(gt.isArray(e)&&(e.length||0===e.length)?(o=[],Va(e,function(e,t){e&&o.push(n.call(r,"string"==typeof e?y(e):e,t))}),o):n.call(r||this,e))},D=function(e,t){b(e).each(function(e,n){Va(t,function(e,t){x(n,t,e)})})},O=function(e,r){e=b(e);$a?e.each(function(e,t){if(!1!==t.canHaveHTML){for(;t.firstChild;)t.removeChild(t.firstChild);try{t.innerHTML="<br>"+r,t.removeChild(t.firstChild)}catch(n){Ha("<div></div>").html("<br>"+r).contents().slice(1).appendTo(t)}return r}}):e.html(r)},B=function(e,n,r,o,i){return T(e,function(e){var t="string"==typeof n?a.createElement(n):n;return D(t,r),o&&("string"!=typeof o&&o.nodeType?t.appendChild(o):"string"==typeof o&&O(t,o)),i?t:e.appendChild(t)})},P=function(e,t,n){return B(a.createElement(e),e,t,n,!0)},L=zo.encodeAllRaw,I=function(e,t){e=b(e);return(t?e.each(function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}):e).remove(),1<e.length?e.toArray():e[0]},M=function(e,t,n){b(e).toggleClass(t,n).each(function(){""===this.className&&Ha(this).attr("class",null)})},F=function(t,e,n){return T(e,function(e){return gt.is(e,"array")&&(t=t.cloneNode(!0)),n&&Va(qa(e.childNodes),function(e){t.appendChild(e)}),e.parentNode.replaceChild(t,e)})},U=function(e){if(mn(e)){var t="a"===e.nodeName.toLowerCase()&&!C(e,"href")&&C(e,"id");if(C(e,"name")||C(e,"data-mce-bookmark")||t)return!0}return!1},z=function(){return a.createRange()},j=function(e,t,n,r){if(gt.isArray(e)){for(var o=e.length,i=[];o--;)i[o]=j(e[o],t,n,r);return i}return!u.collect||e!==a&&e!==c||d.push([e,t,n,r]),p.bind(e,t,n,r||q)},H=function(e,t,n){if(gt.isArray(e)){for(var r=e.length,o=[];r--;)o[r]=H(e[r],t,n);return o}if(0<d.length&&(e===a||e===c))for(r=d.length;r--;){var i=d[r];e!==i[0]||t&&t!==i[1]||n&&n!==i[2]||p.unbind(i[0],i[1],i[2])}return p.unbind(e,t,n)},V=function(e){if(e&&mn(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},q={doc:a,settings:u,win:c,files:l,stdMode:!0,boxModel:!0,styleSheetLoader:f,boundEvents:d,styles:g,schema:m,events:p,isBlock:function(e){if("string"==typeof e)return!!h[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!h[e.nodeName])}return!1},$:v,$$:b,root:null,clone:function(t,e){if(!$a||1!==t.nodeType||e)return t.cloneNode(e);var n=a.createElement(t.nodeName);return Va(w(t),function(e){x(n,e.nodeName,C(t,e.nodeName))}),n},getRoot:S,getViewPort:function(e){e=fn(e);return{x:e.x,y:e.y,w:e.width,h:e.height}},getRect:function(e){e=y(e);var t=N(e),e=k(e);return{x:t.x,y:t.y,w:e.w,h:e.h}},getSize:k,getParent:function(e,t,n){n=A(e,t,n,!1);return n&&0<n.length?n[0]:null},getParents:A,get:y,getNext:function(e,t){return R(e,t,"nextSibling")},getPrev:function(e,t){return R(e,t,"previousSibling")},select:function(e,t){return ra(e,y(t)||u.root_element||a,[])},is:_,add:B,create:P,createHTML:function(e,t,n){var r,o="";for(r in o+="<"+e,t)t.hasOwnProperty(r)&&null!==t[r]&&"undefined"!=typeof t[r]&&(o+=" "+r+'="'+L(t[r])+'"');return void 0!==n?o+">"+n+"</"+e+">":o+" />"},createFragment:function(e){var t,n=a.createElement("div"),r=a.createDocumentFragment();for(r.appendChild(n),e&&(n.innerHTML=e);t=n.firstChild;)r.appendChild(t);return r.removeChild(n),r},remove:I,setStyle:function(e,t,n){t=W(t)?b(e).css(t,n):b(e).css(t);u.update_styles&&Ka(g,t)},getStyle:E,setStyles:function(e,t){t=b(e).css(t);u.update_styles&&Ka(g,t)},removeAllAttribs:function(e){return T(e,function(e){for(var t=e.attributes,n=t.length-1;0<=n;n--)e.removeAttributeNode(t.item(n))})},setAttrib:x,setAttribs:D,getAttrib:C,getPos:N,parseStyle:function(e){return g.parse(e)},serializeStyle:function(e,t){return g.serialize(e,t)},addStyle:function(e){var t,n;if(q!==Ya.DOM&&a===document){if(s[e])return;s[e]=!0}(n=a.getElementById("mceDefaultStyles"))||((n=a.createElement("style")).id="mceDefaultStyles",n.type="text/css",(t=a.getElementsByTagName("head")[0]).firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(a.createTextNode(e))},loadCSS:function(e){X((e=e||"").split(","),function(e){l[e]=!0,f.load(e,ee)})},addClass:function(e,t){b(e).addClass(t)},removeClass:function(e,t){M(e,t,!1)},hasClass:function(e,t){return b(e).hasClass(t)},toggleClass:M,show:function(e){b(e).show()},hide:function(e){b(e).hide()},isHidden:function(e){return"none"===b(e).css("display")},uniqueId:function(e){return(e||"mce_")+t++},setHTML:O,getOuterHTML:function(e){e="string"==typeof e?y(e):e;return mn(e)?e.outerHTML:Ha("<div></div>").append(Ha(e).clone()).html()},setOuterHTML:function(e,t){b(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}I(Ha(this).html(t),!0)})},decode:zo.decode,encode:L,insertAfter:function(e,t){var r=y(t);return T(e,function(e){var t=r.parentNode,n=r.nextSibling;return n?t.insertBefore(e,n):t.appendChild(e),e})},replace:F,rename:function(t,e){var n;return t.nodeName!==e.toUpperCase()&&(n=P(e),Va(w(t),function(e){x(n,e.nodeName,C(t,e.nodeName))}),F(n,t,!0)),n||t},findCommonAncestor:function(e,t){for(var n,r=e;r;){for(n=t;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:function(e){return g.toHex(gt.trim(e))},run:T,getAttribs:w,isEmpty:function(e,t){var n,r=0;if(U(e))return!1;if(e=e.firstChild){var o=new kr(e,e.parentNode),i=m?m.getWhiteSpaceElements():{};t=t||(m?m.getNonEmptyElements():null);do{if(n=e.nodeType,mn(e)){var a=e.getAttribute("data-mce-bogus");if(a){e=o.next("all"===a);continue}if(a=e.nodeName.toLowerCase(),t&&t[a]){if("br"!==a)return!1;r++,e=o.next();continue}if(U(e))return!1}if(8===n)return!1;if(3===n&&!ho(e.nodeValue))return!1;if(3===n&&e.parentNode&&i[e.parentNode.nodeName]&&ho(e.nodeValue))return!1;e=o.next()}while(e)}return r<=1},createRng:z,nodeIndex:Xa,split:function(e,t,n){var r,o,i=z();if(e&&t)return i.setStart(e.parentNode,Xa(e)),i.setEnd(t.parentNode,Xa(t)),r=i.extractContents(),(i=z()).setStart(t.parentNode,Xa(t)+1),i.setEnd(e.parentNode,Xa(e)+1),o=i.extractContents(),(i=e.parentNode).insertBefore(ko(q,r),e),n?i.insertBefore(n,e):i.insertBefore(t,e),i.insertBefore(ko(q,o),e),I(e),n||t},bind:j,unbind:H,fire:function(e,t,n){return p.fire(e,t,n)},getContentEditable:V,getContentEditableParent:function(e){for(var t=S(),n=null;e&&e!==t&&null===(n=V(e));e=e.parentNode);return n},destroy:function(){if(0<d.length)for(var e=d.length;e--;){var t=d[e];p.unbind(t[0],t[1],t[2])}ie(l,function(e,t){f.unload(t),delete l[t]}),ra.setDocument&&ra.setDocument()},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset}},$=(n=g,o=function(){return q},i=(r=u).keep_values,e={style:{set:function(e,t){null===t||"object"!=typeof t?(i&&e.attr("data-mce-style",t),null!==t&&"string"==typeof t?(e.removeAttr("style"),e.css(n.parse(t))):e.attr("style",t)):e.css(t)},get:function(e){var t=e.attr("data-mce-style")||e.attr("style");return t=n.serialize(n.parse(t),e[0].nodeName)}}},i&&(e.href=e.src={set:function(e,t,n){r.url_converter&&(t=r.url_converter.call(r.url_converter_scope||o(),t,n,e[0])),e.attr("data-mce-"+n,t).attr(n,t)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}}),e);return q};Ya.DOM=Ya(document),Ya.nodeIndex=Xa;var Ga=Ya.DOM,Ja=gt.each,Qa=gt.grep,Za=(eu.prototype._setReferrerPolicy=function(e){this.settings.referrerPolicy=e},eu.prototype.loadScript=function(e,t,n){var r=Ga,o=function(){r.remove(i),a&&(a.onerror=a.onload=a=null)},i=r.uniqueId(),a=document.createElement("script");a.id=i,a.type="text/javascript",a.src=gt._addCacheSuffix(e),this.settings.referrerPolicy&&r.setAttrib(a,"referrerpolicy",this.settings.referrerPolicy),a.onload=function(){o(),t()},a.onerror=function(){o(),m(n)?n():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(a)},eu.prototype.isDone=function(e){return 2===this.states[e]},eu.prototype.markDone=function(e){this.states[e]=2},eu.prototype.add=function(e,t,n,r){var o=this.states[e];this.queue.push(e),o===undefined&&(this.states[e]=0),t&&(this.scriptLoadedCallbacks[e]||(this.scriptLoadedCallbacks[e]=[]),this.scriptLoadedCallbacks[e].push({success:t,failure:r,scope:n||this}))},eu.prototype.load=function(e,t,n,r){return this.add(e,t,n,r)},eu.prototype.remove=function(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]},eu.prototype.loadQueue=function(e,t,n){this.loadScripts(this.queue,e,t,n)},eu.prototype.loadScripts=function(t,e,n,r){var o=this,i=[],a=function(t,e){Ja(o.scriptLoadedCallbacks[e],function(e){m(e[t])&&e[t].call(e.scope)}),o.scriptLoadedCallbacks[e]=undefined};o.queueLoadedCallbacks.push({success:e,failure:r,scope:n||this});var u=function(){var e=Qa(t);t.length=0,Ja(e,function(e){2!==o.states[e]?3!==o.states[e]?1!==o.states[e]&&(o.states[e]=1,o.loading++,o.loadScript(e,function(){o.states[e]=2,o.loading--,a("success",e),u()},function(){o.states[e]=3,o.loading--,i.push(e),a("failure",e),u()})):a("failure",e):a("success",e)}),o.loading||(e=o.queueLoadedCallbacks.slice(0),o.queueLoadedCallbacks.length=0,Ja(e,function(e){0===i.length?m(e.success)&&e.success.call(e.scope):m(e.failure)&&e.failure.call(e.scope,i)}))};u()},eu.ScriptLoader=new eu,eu);function eu(e){void 0===e&&(e={}),this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=0,this.settings=e}var tu=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},nu={},ru=tu("en"),ou=function(){return me(nu,ru.get())},iu={getData:function(){return ae(nu,function(e){return Ne({},e)})},setCode:function(e){e&&ru.set(e)},getCode:function(){return ru.get()},add:function(e,t){var n=nu[e];n||(nu[e]=n={}),ie(t,function(e,t){n[t.toLowerCase()]=e})},translate:function(e){var t,n=ou().getOr({}),r=function(e){return m(e)?Object.prototype.toString.call(e):o(e)?"":""+e},o=function(e){return""===e||null===e||e===undefined},i=function(e){e=r(e);return me(n,e.toLowerCase()).map(r).getOr(e)},a=function(e){return e.replace(/{context:\w+}$/,"")};if(o(e))return"";if(w(t=e)&&ge(t,"raw"))return r(e.raw);if(b(t=e)&&1<t.length){var u=e.slice(1);return a(i(e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return ge(u,t)?r(u[t]):e}))}return a(i(e))},isRtl:function(){return ou().bind(function(e){return me(e,"_dir")}).exists(function(e){return"rtl"===e})},hasCode:function(e){return ge(nu,e)}},au=function(){var r=[],u={},s={},o=[],c=function(t,n){var e=U(o,function(e){return e.name===t&&e.state===n});X(e,function(e){return e.callback()})},l=function(e){var t;return(t=s[e]?s[e].dependencies:t)||[]},f=function(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},d=function(e,t,n,r,o){var i,a;u[e]||(0!==(i="string"==typeof t?t:t.prefix+t.resource+t.suffix).indexOf("/")&&-1===i.indexOf("://")&&(i=au.baseURL+"/"+i),u[e]=i.substring(0,i.lastIndexOf("/")),a=function(){c(e,"loaded"),function(e,t,n,r){e=l(e);X(e,function(e){e=f(t,e);d(e.resource,e,undefined,undefined)}),n&&(r?n.call(r):n.call(Za))}(e,t,n,r)},s[e]?a():Za.ScriptLoader.add(i,a,r,o))},e=function(e,t,n){void 0===n&&(n="added"),ge(s,e)&&"added"===n||ge(u,e)&&"loaded"===n?t():o.push({name:e,state:n,callback:t})};return{items:r,urls:u,lookup:s,_listeners:o,get:function(e){return s[e]?s[e].instance:undefined},dependencies:l,requireLangPack:function(t,n){!1!==au.languageLoad&&e(t,function(){var e=iu.getCode();!e||n&&-1===(","+(n||"")+",").indexOf(","+e+",")||Za.ScriptLoader.add(u[t]+"/langs/"+e+".js")},"loaded")},add:function(e,t,n){return r.push(t),s[e]={instance:t,dependencies:n},c(e,"added"),t},remove:function(e){delete u[e],delete s[e]},createUrl:f,addComponents:function(e,t){var n=u[e];X(t,function(e){Za.ScriptLoader.add(n+"/"+e)})},load:d,waitFor:e}};au.languageLoad=!0,au.baseURL="",au.PluginManager=au(),au.ThemeManager=au();var uu=function(n,r){var o=null;return{cancel:function(){null!==o&&(clearTimeout(o),o=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null===o&&(o=setTimeout(function(){n.apply(null,e),o=null},r))}}},su=function(n,r){var o=null;return{cancel:function(){null!==o&&(clearTimeout(o),o=null)},throttle:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null!==o&&clearTimeout(o),o=setTimeout(function(){n.apply(null,e),o=null},r)}}},cu=function(e,t){t=Dn(e,t);return t===undefined||""===t?[]:t.split(" ")},lu=function(e){return e.dom.classList!==undefined},fu=function(e,t){return function(e,t,n){n=cu(e,t).concat([n]);return Rn(e,t,n.join(" ")),!0}(e,"class",t)},du=function(e,t){return r=t,0<(e=U(cu(n=e,t="class"),function(e){return e!==r})).length?Rn(n,t,e.join(" ")):Bn(n,t),!1;var n,r},mu=function(e,t){lu(e)?e.dom.classList.add(t):fu(e,t)},gu=function(e){0===(lu(e)?e.dom.classList:cu(e,"class")).length&&Bn(e,"class")},pu=function(e,t){return lu(e)&&e.dom.classList.contains(t)},hu=function(e,t){var n=[];return X(Mt(e),function(e){n=(n=t(e)?n.concat([e]):n).concat(hu(e,t))}),n},vu=function(e,t){return function(e,t){t=t===undefined?document:t.dom;return bt(t)?[]:M(t.querySelectorAll(e),ht.fromDom)}(t,e)},yu=x("mce-annotation"),bu=x("data-mce-annotation"),Cu=x("data-mce-annotation-uid"),wu=function(r,e){var t=r.selection.getRng(),n=ht.fromDom(t.startContainer),o=ht.fromDom(r.getBody()),e=e.fold(function(){return"."+yu()},function(e){return"["+bu()+'="'+e+'"]'}),n=Ft(n,t.startOffset).getOr(n),e=dr(n,e,function(e){return Ct(e,o)}),i=function(e,t){return function(e,t){e=e.dom;return!(!e||!e.hasAttribute)&&e.hasAttribute(t)}(e,t)?T.some(Dn(e,t)):T.none()};return e.bind(function(e){return i(e,""+Cu()).bind(function(n){return i(e,""+bu()).map(function(e){var t=xu(r,n);return{uid:n,name:e,elements:t}})})})},xu=function(e,t){e=ht.fromDom(e.getBody());return vu(e,"["+Cu()+'="'+t+'"]')},Su=function(t,e){var r=tu({}),s=function(e,t){n(e,function(e){return t(e),e})},n=function(e,t){var n=r.get(),t=t(n.hasOwnProperty(e)?n[e]:{listeners:[],previous:tu(T.none())});n[e]=t,r.set(n)},o=su(function(){var e=r.get(),e=function(e,t){e=D.call(e,0);return e.sort(t),e}(re(e));X(e,function(e){n(e,function(a){var u=a.previous.get();return wu(t,T.some(e)).fold(function(){var t;u.isSome()&&(s(t=e,function(e){X(e.listeners,function(e){return e(!1,t)})}),a.previous.set(T.none()))},function(e){var t,n,r,o=e.uid,i=e.name,e=e.elements;u.is(o)||(n=o,r=e,s(t=i,function(e){X(e.listeners,function(e){return e(!0,t,{uid:n,nodes:M(r,function(e){return e.dom})})})}),a.previous.set(T.some(o)))}),{previous:a.previous,listeners:a.listeners}})})},30);t.on("remove",function(){o.cancel()}),t.on("NodeChange",function(){o.throttle()});return{addListener:function(e,t){n(e,function(e){return{previous:e.previous,listeners:e.listeners.concat([t])}})}}},Nu=function(e,n){e.on("init",function(){e.serializer.addNodeFilter("span",function(e){X(e,function(t){T.from(t.attr(bu())).bind(n.lookup).each(function(e){!1===e.persistent&&t.unwrap()})})})})},Eu=0,ku=function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++Eu+String(t)},_u=function(e,t){var n=Rt(e).dom,r=ht.fromDom(n.createDocumentFragment()),n=function(e,t){t=(t||document).createElement("div");return t.innerHTML=e,Mt(ht.fromDom(t))}(t,n);Jt(r,n),Qt(e),Gt(e,r)},Au=function(e,t){return ht.fromDom(e.dom.cloneNode(t))},Ru=function(e){return Au(e,!1)},Tu=function(e){return Au(e,!0)},Du=function(e,t,n){void 0===n&&(n=E);var r=new kr(e,t),o=function(e){for(var t;(t=r[e]())&&!yn(t)&&!n(t););return T.from(t).filter(yn)};return{current:function(){return T.from(r.current()).filter(yn)},next:function(){return o("next")},prev:function(){return o("prev")},prev2:function(){return o("prev2")}}},Ou=function(t,e){var i=e||function(e){return t.isBlock(e)||xn(e)||En(e)},a=function(e,t,n,r){if(yn(e)){t=r(e,t,e.data);if(-1!==t)return T.some({container:e,offset:t})}return n().bind(function(e){return a(e.container,e.offset,n,r)})};return{backwards:function(e,t,n,r){var o=Du(e,r,i);return a(e,t,function(){return o.prev().map(function(e){return{container:e,offset:e.length}})},n).getOrNull()},forwards:function(e,t,n,r){var o=Du(e,r,i);return a(e,t,function(){return o.next().map(function(e){return{container:e,offset:0}})},n).getOrNull()}}},Bu=function(e,t,n){return e.isSome()&&t.isSome()?T.some(n(e.getOrDie(),t.getOrDie())):T.none()},Pu=Math.round,Lu=function(e){return e?{left:Pu(e.left),top:Pu(e.top),bottom:Pu(e.bottom),right:Pu(e.right),width:Pu(e.width),height:Pu(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},Iu=function(e,t){return e=Lu(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e},Mu=function(e,t,n){return 0<=e&&e<=Math.min(t.height,n.height)/2},Fu=function(e,t){var n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&Mu(t.top-e.bottom,e,t)},Uu=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&Mu(t.bottom-e.top,e,t)},zu=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},ju=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Hu=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},Vu=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),qu=function(e){return"string"==typeof e&&768<=e.charCodeAt(0)&&Vu.test(e)},$u=mn,o=fo,Wu=_("display","block table"),st=_("float","left right"),Ku=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(e){for(var t=0;t<n.length;t++)if(!n[t](e))return!1;return!0}}($u,o,p(st)),Xu=p(_("white-space","pre pre-line pre-wrap")),Yu=yn,Gu=xn,Ju=Ya.nodeIndex,Qu=Hu,Zu=function(e){return"createRange"in e?e.createRange():Ya.DOM.createRng()},es=function(e){return e&&/[\r\n\t ]/.test(e)},ts=function(e){return!!e.setStart&&!!e.setEnd},ns=function(e){var t=e.startContainer,n=e.startOffset;return!!(es(e.toString())&&Xu(t.parentNode)&&yn(t)&&(t=t.data,es(t[n-1])||es(t[n+1])))},rs=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},os=function(e){var t=e.getClientRects(),t=0<t.length?Lu(t[0]):Lu(e.getBoundingClientRect());return!ts(e)&&Gu(e)&&rs(t)?function(e){var t=e.ownerDocument,n=Zu(t),r=t.createTextNode(jr),t=e.parentNode;t.insertBefore(r,e),n.setStart(r,0),n.setEnd(r,1);n=Lu(n.getBoundingClientRect());return t.removeChild(r),n}(e):rs(t)&&ts(e)?function(e){var t=e.startContainer,n=e.endContainer,r=e.startOffset,o=e.endOffset;if(t===n&&yn(n)&&0===r&&1===o){e=e.cloneRange();return e.setEndAfter(n),os(e)}return null}(e):t},is=function(e,t){t=Iu(e,t);return t.width=1,t.right=t.left+1,t},as=function(e){var t,r=[],o=function(e){var t,n;0!==e.height&&(0<r.length&&(t=e,n=r[r.length-1],t.left===n.left&&t.top===n.top&&t.bottom===n.bottom&&t.right===n.right)||r.push(e))},n=function(e,t){var n=Zu(e.ownerDocument);if(t<e.data.length){if(qu(e.data[t]))return r;if(qu(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!ns(n)))return o(is(os(n),!1)),r}0<t&&(n.setStart(e,t-1),n.setEnd(e,t),ns(n)||o(is(os(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),ns(n)||o(is(os(n),!0)))};if(Yu(e.container()))return n(e.container(),e.offset()),r;if($u(e.container()))if(e.isAtEnd())t=Qu(e.container(),e.offset()),Yu(t)&&n(t,t.data.length),Ku(t)&&!Gu(t)&&o(is(os(t),!1));else{if(t=Qu(e.container(),e.offset()),Yu(t)&&n(t,0),Ku(t)&&e.isAtEnd())return o(is(os(t),!1)),r;e=Qu(e.container(),e.offset()-1),Ku(e)&&!Gu(e)&&(!Wu(e)&&!Wu(t)&&Ku(t)||o(is(os(e),!1))),Ku(t)&&o(is(os(t),!0))}return r},us=function(t,n,e){var r=function(){return e=e||as(us(t,n))};return{container:x(t),offset:x(n),toRange:function(){var e=Zu(t.ownerDocument);return e.setStart(t,n),e.setEnd(t,n),e},getClientRects:r,isVisible:function(){return 0<r().length},isAtStart:function(){return Yu(t),0===n},isAtEnd:function(){return Yu(t)?n>=t.data.length:n>=t.childNodes.length},isEqual:function(e){return e&&t===e.container()&&n===e.offset()},getNode:function(e){return Qu(t,e?n-1:n)}}};us.fromRangeStart=function(e){return us(e.startContainer,e.startOffset)},us.fromRangeEnd=function(e){return us(e.endContainer,e.endOffset)},us.after=function(e){return us(e.parentNode,Ju(e)+1)},us.before=function(e){return us(e.parentNode,Ju(e))},us.isAbove=function(e,t){return Bu(Z(t.getClientRects()),te(e.getClientRects()),Fu).getOr(!1)},us.isBelow=function(e,t){return Bu(te(t.getClientRects()),Z(e.getClientRects()),Uu).getOr(!1)},us.isAtStart=function(e){return!!e&&e.isAtStart()},us.isAtEnd=function(e){return!!e&&e.isAtEnd()},us.isTextPosition=function(e){return!!e&&yn(e.container())},us.isElementPosition=function(e){return!1===us.isTextPosition(e)};var ss,cs=function(e,t){yn(t)&&0===t.data.length&&e.remove(t)},ls=function(e,t,n){var r,o,i,a,u;wn(n)?(r=e,o=t,i=n,a=T.from(i.firstChild),u=T.from(i.lastChild),o.insertNode(i),a.each(function(e){return cs(r,e.previousSibling)}),u.each(function(e){return cs(r,e.nextSibling)})):(e=e,n=n,t.insertNode(n),cs(e,n.previousSibling),cs(e,n.nextSibling))},fs=yn,ds=pn,ms=Ya.nodeIndex,gs=function(e){e=e.parentNode;return ds(e)?gs(e):e},ps=function(e){return e?we(e.childNodes,function(e,t){return ds(t)&&"BR"!==t.nodeName?e=e.concat(ps(t)):e.push(t),e},[]):[]},hs=function(t){return function(e){return t===e}},vs=function(e){var t=fs(e)?"text()":e.nodeName.toLowerCase();return t+"["+function(e){var r=ps(gs(e)),t=xe(r,hs(e),e);r=r.slice(0,t+1);var n=we(r,function(e,t,n){return fs(t)&&fs(r[n-1])&&e++,e},0);return r=be(r,gn([e.nodeName])),xe(r,hs(e),e)-n}(e)+"]"},ys=function(e,t){var n,r=[],o=t.container(),i=t.offset();return fs(o)?n=function(e,t){for(;(e=e.previousSibling)&&fs(e);)t+=e.data.length;return t}(o,i):(i>=(t=o.childNodes).length?(n="after",i=t.length-1):n="before",o=t[i]),r.push(vs(o)),o=function(e,t,n){var r=[];for(t=t.parentNode;t!==e&&(!n||!n(t));t=t.parentNode)r.push(t);return r}(e,o),o=be(o,p(pn)),(r=r.concat(ye(o,vs))).reverse().join("/")+","+n},bs=function(e,t){if(!t)return null;var n=t.split(","),t=n[0].split("/"),n=1<n.length?n[1]:"before",e=we(t,function(e,t){var n,r=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);return r?("text()"===r[1]&&(r[1]="#text"),t=e,e=r[1],r=parseInt(r[2],10),n=ps(t),n=be(n,function(e,t){return!fs(e)||!fs(n[t-1])}),(n=be(n,gn([e])))[r]):null},e);return e?fs(e)?function(e,t){for(var n,r=e,o=0;fs(r);){if(n=r.data.length,o<=t&&t<=o+n){e=r,t-=o;break}if(!fs(r.nextSibling)){e=r,t=n;break}o+=n,r=r.nextSibling}return fs(e)&&t>e.data.length&&(t=e.data.length),us(e,t)}(e,parseInt(n,10)):(n="after"===n?ms(e)+1:ms(e),us(e.parentNode,n)):null},Cs=En,ws=function(e,t,n,r,o){var i=r[o?"startContainer":"endContainer"],r=r[o?"startOffset":"endOffset"],a=[],o=0,u=e.getRoot();for(yn(i)?a.push(n?function(e,t,n){for(var r=e(t.data.slice(0,n)).length,o=t.previousSibling;o&&yn(o);o=o.previousSibling)r+=e(o.data).length;return r}(t,i,r):r):(r>=(t=i.childNodes).length&&t.length&&(o=1,r=Math.max(0,t.length-1)),a.push(e.nodeIndex(t[r],n)+o));i&&i!==u;i=i.parentNode)a.push(e.nodeIndex(i,n));return a},xs=function(e,t,n){var r=0;return gt.each(e.select(t),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void r++}),r},Ss=function(e,t){var n=t?"start":"end",r=e[n+"Container"],o=e[n+"Offset"];mn(r)&&"TR"===r.nodeName&&(r=(n=r.childNodes)[Math.min(t?o:o-1,n.length-1)])&&(o=t?0:r.childNodes.length,e["set"+(t?"Start":"End")](r,o))},Ns=function(e){return Ss(e,!0),Ss(e,!1),e},Es=function(e,t){return mn(e)&&(e=Hu(e,t),Cs(e))?e:Yr(e)?(t=(e=yn(e)&&Kr(e)?e.parentNode:e).previousSibling,Cs(t)?t:(t=e.nextSibling,Cs(t)?t:void 0)):void 0},ks=function(e,t,n){var r=n.getNode(),o=r?r.nodeName:null,i=n.getRng();if(Cs(r)||"IMG"===o)return{name:o,index:xs(n.dom,o,r)};r=Es((r=i).startContainer,r.startOffset)||Es(r.endContainer,r.endOffset);return r?{name:o=r.tagName,index:xs(n.dom,o,r)}:(o=e,r=t,e=i,i=(t=n).dom,(n={}).start=ws(i,o,r,e,!0),t.isCollapsed()||(n.end=ws(i,o,r,e,!1)),n)},_s=function(e,t,n){t={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",t,"&#xFEFF;"):e.create("span",t)},As=function(e,t){var n=e.dom,r=e.getRng(),o=n.uniqueId(),i=e.isCollapsed(),a=e.getNode(),u=a.nodeName;if("IMG"===u)return{name:u,index:xs(n,u,a)};a=Ns(r.cloneRange());i||(a.collapse(!1),i=_s(n,o+"_end",t),ls(n,a,i)),(r=Ns(r)).collapse(!0);t=_s(n,o+"_start",t);return ls(n,r,t),e.moveToBookmark({id:o,keep:!0}),{id:o}},e=function(e,t,n){return 2===t?ks(qr,n,e):3===t?(n=(r=e).getRng(),{start:ys(r.dom.getRoot(),us.fromRangeStart(n)),end:ys(r.dom.getRoot(),us.fromRangeEnd(n))}):t?{rng:e.getRng()}:As(e,!1);var r},Rs=h(ks,g,!0),Ts=Ya.DOM,Ds=function(e,t,n){var r=e.getParam(t,n);if(-1===r.indexOf("="))return r;t=e.getParam(t,"","hash");return t.hasOwnProperty(e.id)?t[e.id]:n},Os=function(e){return e.getParam("content_security_policy","")},Bs=function(e){if(e.getParam("force_p_newlines",!1))return"p";e=e.getParam("forced_root_block","p");return!1===e?"":!0===e?"p":e},Ps=function(e){return e.getParam("forced_root_block_attrs",{})},Ls=function(e){return e.getParam("automatic_uploads",!0,"boolean")},Is=function(e){return e.getParam("icons","","string")},Ms=function(e){return e.getParam("referrer_policy","","string")},Fs=function(e){return e.getParam("language","en","string")},Us=function(e){return e.getParam("indent_use_margin",!1)},zs=function(e){e=e.getParam("font_css",[]);return b(e)?e:M(e.split(","),He)},js=function(e){e=e.getParam("object_resizing");return!1!==e&&!ct.iOS&&(W(e)?e:"table,img,figure.image,div,video,iframe")},Hs=function(e){return e.getParam("event_root")},Vs=function(e){return e.getParam("theme")},qs=function(e){return!1!==e.getParam("inline_boundaries")},$s=function(e){return e.getParam("plugins","","string")},Ws=mn,Ks=yn,Xs=function(e){var t=e.parentNode;t&&t.removeChild(e)},Ys=function(e){var t=qr(e);return{count:e.length-t.length,text:t}},Gs=function(e){for(var t;-1!==(t=e.data.lastIndexOf(Hr));)e.deleteData(t,1)},Js=function(e,t){return tc(e),t},Qs=function(e,t){var n=t.container(),r=function(e,t){t=P(e,t);return-1===t?T.none():T.some(t)}(ne(n.childNodes),e).map(function(e){return e<t.offset()?us(n,t.offset()-1):t}).getOr(t);return tc(e),r},Zs=function(e,t){return Ks(e)&&t.container()===e?(r=t,o=Ys((n=e).data.substr(0,r.offset())),i=Ys(n.data.substr(r.offset())),0<(o.text+i.text).length?(Gs(n),us(n,r.offset()-o.count)):r):Js(e,t);var n,r,o,i},ec=function(e,t){return us.isTextPosition(t)?Zs(e,t):(e=e,((t=t).container()===e.parentNode?Qs:Js)(e,t))},tc=function(e){Ws(e)&&Yr(e)&&(Gr(e)?e.removeAttribute("data-mce-caret"):Xs(e)),Ks(e)&&(Gs(e),0===e.data.length&&Xs(e))},nc=ut().browser,rc=En,oc=kn,ic=n,ac=function(e,t,n){var r,o,i=Iu(t.getBoundingClientRect(),n),a="BODY"===e.tagName?(r=e.ownerDocument.documentElement,o=e.scrollLeft||r.scrollLeft,e.scrollTop||r.scrollTop):(a=e.getBoundingClientRect(),o=e.scrollLeft-a.left,e.scrollTop-a.top);return i.left+=o,i.right+=o,i.top+=a,i.bottom+=a,i.width=1,0<(t=t.offsetWidth-t.clientWidth)&&(n&&(t*=-1),i.left+=t,i.right+=t),i},uc=function(e,o,i,t){var n,a,u=tu(T.none()),e=Bs(e),s=0<e.length?e:"p",c=function(){!function(e){for(var t=vu(ht.fromDom(e),"*[contentEditable=false],video,audio,embed,object"),n=0;n<t.length;n++){var r,o=t[n].dom,i=o.previousSibling;to(i)&&(1===(r=i.data).length?i.parentNode.removeChild(i):i.deleteData(r.length-1,1)),i=o.nextSibling,eo(i)&&(1===(r=i.data).length?i.parentNode.removeChild(i):i.deleteData(0,1))}}(o),a&&(tc(a),a=null),u.get().each(function(e){Ha(e.caret).remove(),u.set(T.none())}),n&&(Sr.clearInterval(n),n=null)},l=function(){n=Sr.setInterval(function(){t()?Ha("div.mce-visual-caret",o).toggleClass("mce-visual-caret-hidden"):Ha("div.mce-visual-caret",o).addClass("mce-visual-caret-hidden")},500)};return{show:function(t,e){var n;if(c(),ic(e))return null;if(!i(e))return a=function(e,t){var n,r=e.ownerDocument.createTextNode(Hr),o=e.parentNode;if(t){if(n=e.previousSibling,Wr(n)){if(Yr(n))return n;if(to(n))return n.splitText(n.data.length-1)}o.insertBefore(r,e)}else{if(n=e.nextSibling,Wr(n)){if(Yr(n))return n;if(eo(n))return n.splitText(1),n}e.nextSibling?o.insertBefore(r,e.nextSibling):o.appendChild(r)}return r}(e,t),n=e.ownerDocument.createRange(),cc(a.nextSibling)?(n.setStart(a,0),n.setEnd(a,0)):(n.setStart(a,1),n.setEnd(a,1)),n;a=Zr(s,e,t),r=ac(o,e,t),Ha(a).css("top",r.top);var r=Ha('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(r).appendTo(o)[0];return u.set(T.some({caret:r,element:e,before:t})),u.get().each(function(e){t&&Ha(e.caret).addClass("mce-visual-caret-before")}),l(),(n=e.ownerDocument.createRange()).setStart(a,0),n.setEnd(a,0),n},hide:c,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){u.get().each(function(e){var t=ac(o,e.element,e.before);Ha(e.caret).css(Ne({},t))})},destroy:function(){return Sr.clearInterval(n)}}},sc=function(){return nc.isIE()||nc.isEdge()||nc.isFirefox()},cc=function(e){return rc(e)||oc(e)},lc=function(e){return cc(e)||hn(e)&&sc()},fc=En,dc=kn,mc=_("display","block table table-cell table-caption list-item"),gc=Yr,pc=Kr,hc=mn,vc=fo,yc=function(e,t){for(var n;n=e(t);)if(!pc(n))return n;return null},bc=function(e,t,n,r,o){var i=new kr(e,r),r=fc(e)||pc(e);if(t<0){if(r&&n(e=yc(i.prev.bind(i),!0)))return e;for(;e=yc(i.prev.bind(i),o);)if(n(e))return e}if(0<t){if(r&&n(e=yc(i.next.bind(i),!0)))return e;for(;e=yc(i.next.bind(i),o);)if(n(e))return e}return null},Cc=function(e,t){for(;e&&e!==t;){if(mc(e))return e;e=e.parentNode}return null},wc=function(e,t,n){return Cc(e.container(),n)===Cc(t.container(),n)},xc=function(e,t){if(!t)return null;var n=t.container(),t=t.offset();return hc(n)?n.childNodes[t+e]:null},We=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},Sc=function(e,t,n){for(var r,o,i,a=e?"previousSibling":"nextSibling";n&&n!==t;){if(r=n[a],gc(r)&&(r=r[a]),fc(r)||dc(r)){if(i=n,Cc(r,o=t)===Cc(i,o))return r;break}if(vc(r))break;n=n.parentNode}return null},Nc=h(We,!0),Ec=h(We,!1),kc=function(e,t,n){var r,o=h(Sc,!0,t),i=h(Sc,!1,t),a=n.startContainer,u=n.startOffset;if(Kr(a)){if("before"===(t=(a=!hc(a)?a.parentNode:a).getAttribute("data-mce-caret"))&&(r=a.nextSibling,lc(r)))return Nc(r);if("after"===t&&(r=a.previousSibling,lc(r)))return Ec(r)}if(!n.collapsed)return n;if(yn(a)){if(gc(a)){if(1===e){if(r=i(a))return Nc(r);if(r=o(a))return Ec(r)}if(-1===e){if(r=o(a))return Ec(r);if(r=i(a))return Nc(r)}return n}if(to(a)&&u>=a.data.length-1)return 1===e&&(r=i(a))?Nc(r):n;if(eo(a)&&u<=1)return-1===e&&(r=o(a))?Ec(r):n;if(u===a.data.length)return(r=i(a))?Nc(r):n;if(0===u)return(r=o(a))?Ec(r):n}return n},_c=function(e,t){return T.from(xc(e?0:-1,t)).filter(fc)},Ac=function(e,t,n){n=kc(e,t,n);return-1===e?us.fromRangeStart(n):us.fromRangeEnd(n)},Rc=function(e){return T.from(e.getNode()).map(ht.fromDom)},Tc=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},Dc=function(e,t){t=wc(e,t);return!(t||!xn(e.getNode()))||t};(o=ss=ss||{})[o.Backwards=-1]="Backwards",o[o.Forwards=1]="Forwards";var Oc,Bc,Pc,Lc,Ic=En,Mc=yn,Fc=mn,Uc=xn,zc=fo,jc=function(e){return so(e)||!!mo(e=e)&&!0!==j(ne(e.getElementsByTagName("*")),function(e,t){return e||ro(t)},!1)},Hc=go,Vc=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},qc=function(e,t){if(0<e){if(zc(t.previousSibling)&&!Mc(t.previousSibling))return us.before(t);if(Mc(t))return us(t,0)}if(e<0){if(zc(t.nextSibling)&&!Mc(t.nextSibling))return us.after(t);if(Mc(t))return us(t,t.data.length)}return!(e<0)||Uc(t)?us.before(t):us.after(t)},$c=function(e,t,n){var r,o,i;if(!Fc(n)||!t)return null;if(t.isEqual(us.after(n))&&n.lastChild){if(i=us.after(n.lastChild),e<0&&zc(n.lastChild)&&Fc(n.lastChild))return Uc(n.lastChild)?us.before(n.lastChild):i}else i=t;var a,u=i.container(),s=i.offset();if(Mc(u)){if(e<0&&0<s)return us(u,--s);if(0<e&&s<u.length)return us(u,++s);r=u}else{if(e<0&&0<s&&(c=Vc(u,s-1),zc(c)))return!jc(c)&&(o=bc(c,e,Hc,c))?Mc(o)?us(o,o.data.length):us.after(o):Mc(c)?us(c,c.data.length):us.before(c);if(0<e&&s<u.childNodes.length&&(c=Vc(u,s),zc(c)))return Uc(c)?(a=n,(s=(t=c).nextSibling)&&zc(s)?Mc(s)?us(s,0):us.before(s):$c(ss.Forwards,us.after(t),a)):!jc(c)&&(o=bc(c,e,Hc,c))?Mc(o)?us(o,0):us.before(o):Mc(c)?us(c,0):us.after(c);r=c||i.getNode()}if((0<e&&i.isAtEnd()||e<0&&i.isAtStart())&&(r=bc(r,e,k,n,!0),Hc(r,n)))return qc(e,r);var c=bc(r,e,Hc,n),n=Se(U(function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n}(u,n),Ic));return!n||c&&n.contains(c)?c?qc(e,c):null:i=0<e?us.after(n):us.before(n)},Wc=function(t){return{next:function(e){return $c(ss.Forwards,e,t)},prev:function(e){return $c(ss.Backwards,e,t)}}},Kc=function(e){return us.isTextPosition(e)?0===e.offset():fo(e.getNode())},Xc=function(e){if(us.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return fo(e.getNode(!0))},Yc=function(e,t){return!us.isTextPosition(e)&&!us.isTextPosition(t)&&e.getNode()===t.getNode(!0)},Gc=function(e,t,n){return e?!Yc(t,n)&&(e=t,!(!us.isTextPosition(e)&&xn(e.getNode())))&&Xc(t)&&Kc(n):!Yc(n,t)&&Kc(t)&&Xc(n)},Jc=function(e,t,n){t=Wc(t);return T.from(e?t.next(n):t.prev(n))},Qc=function(t,n,r){return Jc(t,n,r).bind(function(e){return wc(r,e,n)&&Gc(t,r,e)?Jc(t,n,e):T.some(e)})},Zc=function(t,n,e,r){return Qc(t,n,e).bind(function(e){return r(e)?Zc(t,n,e,r):T.some(e)})},el=function(e,t){var n,r=e?t.firstChild:t.lastChild;return yn(r)?T.some(us(r,e?0:r.data.length)):r?fo(r)?T.some(e?us.before(r):xn(n=r)?us.before(n):us.after(n)):function(e,t,n){n=e?us.before(n):us.after(n);return Jc(e,t,n)}(e,t,r):T.none()},tl=h(Jc,!0),nl=h(Jc,!1),rl=h(el,!0),ol=h(el,!1),il="_mce_caret",al=function(e){return mn(e)&&e.id===il},ul=function(e,t){for(;t&&t!==e;){if(t.id===il)return t;t=t.parentNode}return null},sl=function(e,t){return mn(t)&&e.isBlock(t)&&!t.innerHTML&&!ct.ie&&(t.innerHTML='<br data-mce-bogus="1" />'),t},cl=function(e,t,n){return!(!1!==t.hasChildNodes()||!ul(e,t))&&(e=n,t=(n=t).ownerDocument.createTextNode(Hr),n.appendChild(t),e.setStart(t,0),e.setEnd(t,0),!0)},ll=function(e,t,n,r){var o,i,a,u=n[t?"start":"end"],s=e.getRoot();if(u){for(e=u[0],i=s,o=u.length-1;1<=o;o--){if(a=i.childNodes,cl(s,i,r))return!0;if(u[o]>a.length-1)return!!cl(s,i,r)||function(e,t){return ol(e).fold(E,function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0})}(i,r);i=a[u[o]]}3===i.nodeType&&(e=Math.min(u[0],i.nodeValue.length)),1===i.nodeType&&(e=Math.min(u[0],i.childNodes.length)),t?r.setStart(i,e):r.setEnd(i,e)}return!0},fl=function(e){return yn(e)&&0<e.data.length},dl=function(e,t,n){var r,o,i,a,u=e.get(n.id+"_"+t),s=n.keep;if(u){if(o=u.parentNode,a=(i=(r="start"===t?s?u.hasChildNodes()?(o=u.firstChild,1):fl(u.nextSibling)?(o=u.nextSibling,0):fl(u.previousSibling)?(o=u.previousSibling,u.previousSibling.data.length):(o=u.parentNode,e.nodeIndex(u)+1):e.nodeIndex(u):s?u.hasChildNodes()?(o=u.firstChild,1):fl(u.previousSibling)?(o=u.previousSibling,u.previousSibling.data.length):(o=u.parentNode,e.nodeIndex(u)):e.nodeIndex(u),o),r),!s){for(o=u.previousSibling,s=u.nextSibling,gt.each(gt.grep(u.childNodes),function(e){yn(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});u=e.get(n.id+"_"+t);)e.remove(u,!0);o&&s&&o.nodeType===s.nodeType&&yn(o)&&!ct.opera&&(r=o.nodeValue.length,o.appendData(s.nodeValue),e.remove(s),i=o,a=r)}return T.some(us(i,a))}return T.none()},ml=function(e,t){var n,r,o,i,a,u,s=e.dom;if(t){if(gt.isArray(t.start))return a=t,u=(e=s).createRng(),ll(e,!0,a,u)&&ll(e,!1,a,u)?T.some(u):T.none();if(W(t.start))return T.some((a=t,o=(u=s).createRng(),i=bs(u.getRoot(),a.start),o.setStart(i.container(),i.offset()),i=bs(u.getRoot(),a.end),o.setEnd(i.container(),i.offset()),o));if(t.hasOwnProperty("id"))return o=dl(r=s,"start",i=t),i=dl(r,"end",i),Bu(o,i.or(o),function(e,t){var n=r.createRng();return n.setStart(sl(r,e.container()),e.offset()),n.setEnd(sl(r,t.container()),t.offset()),n});if(t.hasOwnProperty("name"))return n=s,s=t,T.from(n.select(s.name)[s.index]).map(function(e){var t=n.createRng();return t.selectNode(e),t});if(t.hasOwnProperty("rng"))return T.some(t.rng)}return T.none()},gl=e,pl=function(t,e){ml(t,e).each(function(e){t.setRng(e)})},hl=function(e){return mn(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},vl=(Oc=jr,function(e){return Oc===e}),yl=function(e){return""!==e&&-1!==" \f\n\r\t\x0B".indexOf(e)},bl=function(e){return!yl(e)&&!vl(e)},Cl=function(e){return!!e.nodeType},wl=function(e,t,n){var r,o,i,a=n.startOffset,u=n.startContainer;if((n.startContainer!==n.endContainer||!(i=n.startContainer.childNodes[n.startOffset])||!/^(IMG)$/.test(i.nodeName))&&1===u.nodeType)for(a<(i=u.childNodes).length?(u=i[a],r=new kr(u,e.getParent(u,e.isBlock))):(u=i[i.length-1],(r=new kr(u,e.getParent(u,e.isBlock))).next(!0)),o=r.current();o;o=r.next())if(3===o.nodeType&&!El(o))return n.setStart(o,0),void t.setRng(n)},xl=function(e,t,n){if(e){var r=t?"nextSibling":"previousSibling";for(e=n?e:e[r];e;e=e[r])if(1===e.nodeType||!El(e))return e}},Sl=function(e,t){return Cl(t)&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},Nl=function(e,t,n){return e.schema.isValidChild(t,n)},El=function(e,t){if(void 0===t&&(t=!1),V(e)&&yn(e)){e=t?e.data.replace(/ /g,"\xa0"):e.data;return ho(e)}return!1},kl=function(e,n){return"string"!=typeof e?e=e(n):n&&(e=e.replace(/%(\w+)/g,function(e,t){return n[t]||e})),e},_l=function(e,t){return e=""+((e=e||"").nodeName||e),t=""+((t=t||"").nodeName||t),e.toLowerCase()===t.toLowerCase()},Al=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),""+(t="fontFamily"===n?t.replace(/[\'\"]/g,"").replace(/,\s+/g,","):t)},Rl=function(e,t,n){return Al(e,e.getStyle(t,n),n)},Tl=function(t,e){var n;return t.getParent(e,function(e){return(n=t.getStyle(e,"text-decoration"))&&"none"!==n}),n},Dl=function(e,t,n){return e.getParents(t,n,e.getRoot())},Ol=function(t,e,n){var r=["inline","block","selector","attributes","styles","classes"],o=function(e){return fe(e,function(e,t){return I(r,function(e){return e===t})})};return I(t.formatter.get(e),function(e){var r=o(e);return I(t.formatter.get(n),function(e){var t,n=o(e);return e=r,n=n,a(t=void 0===t?u:t).eq(e,n)})})},Bl=function(e){return pe(e,"block")},Pl=function(e){return pe(e,"selector")},Ll=function(e){return pe(e,"inline")},Il=function(e,t){return I(t.childNodes,e.isBlock)},Ml=hl,Fl=Dl,Ul=El,zl=Sl,jl=function(e,t){for(var n=t;n;){if(mn(n)&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},Hl=function(e,t,n,r){for(var o=t.data,i=n;e?0<=i:i<o.length;e?i--:i++)if(r(o.charAt(i)))return e?i+1:i;return-1},Vl=function(e,t,n){return Hl(e,t,n,function(e){return vl(e)||yl(e)})},ql=function(e,t,n){return Hl(e,t,n,bl)},$l=function(o,e,t,n,i,r){var a,u=o.getParent(t,o.isBlock)||e,s=function(e,t,n){var r=Ou(o),r=i?r.backwards:r.forwards;return T.from(r(e,t,function(e,t){return Ml(e.parentNode)?-1:n(i,a=e,t)},u))};return s(t,n,Vl).bind(function(e){return r?s(e.container,e.offset+(i?-1:0),ql):T.some(e)}).orThunk(function(){return a?T.some({container:a,offset:i?0:a.length}):T.none()})},Wl=function(e,t,n,r,o){yn(r)&&0===r.nodeValue.length&&r[o]&&(r=r[o]);for(var i=Fl(e,r),a=0;a<i.length;a++)for(var u=0;u<t.length;u++){var s=t[u];if(!("collapsed"in s&&s.collapsed!==n.collapsed)&&e.is(i[a],s.selector))return i[a]}return r},Kl=function(t,e,n,r){var o,i,a=t.dom,u=a.getRoot();if((i=!e[0].wrapper?a.getParent(n,e[0].block,u):i)||(o=a.getParent(n,"LI,TD,TH"),i=a.getParent(yn(n)?n.parentNode:n,function(e){return e!==u&&zl(t,e)},o)),!(i=i&&e[0].wrapper?Fl(a,i,"ul,ol").reverse()[0]||i:i))for(i=n;i[r]&&!a.isBlock(i[r])&&(i=i[r],!_l(i,"br")););return i||n},Xl=function(e,t,n,r){var o=n.parentNode;return!V(n[r])&&(!(o!==t&&!K(o)&&!e.isBlock(o))||Xl(e,t,o,r))},Yl=function(e,t,n,r,o){var i,a,u=n,s=o?"previousSibling":"nextSibling",c=e.getRoot();if(yn(n)&&!Ul(n)&&(o?0<r:r<n.data.length))return n;for(;;){if(!t[0].block_expand&&e.isBlock(u))return u;for(i=u[s];i;i=i[s]){var l=yn(i)&&!Xl(e,c,i,s);if(!Ml(i)&&(!xn(a=i)||!a.getAttribute("data-mce-bogus")||a.nextSibling)&&!Ul(i,l))return u}if(u===c||u.parentNode===c){n=u;break}u=u.parentNode}return n},Gl=function(e){return Ml(e.parentNode)||Ml(e)},Jl=function(e,t,n,r){void 0===r&&(r=!1);var o=t.startContainer,i=t.startOffset,a=t.endContainer,u=t.endOffset,s=e.dom;return mn(o)&&o.hasChildNodes()&&(o=Hu(o,i),yn(o)&&(i=0)),mn(a)&&a.hasChildNodes()&&(a=Hu(a,t.collapsed?u:u-1),yn(a)&&(u=a.nodeValue.length)),o=jl(s,o),a=jl(s,a),Gl(o)&&(o=Ml(o)?o:o.parentNode,o=t.collapsed?o.previousSibling||o:o.nextSibling||o,yn(o)&&(i=t.collapsed?o.length:0)),Gl(a)&&(a=Ml(a)?a:a.parentNode,a=t.collapsed?a.nextSibling||a:a.previousSibling||a,yn(a)&&(u=t.collapsed?0:a.length)),t.collapsed&&($l(s,e.getBody(),o,i,!0,r).each(function(e){var t=e.container,e=e.offset;o=t,i=e}),$l(s,e.getBody(),a,u,!1,r).each(function(e){var t=e.container,e=e.offset;a=t,u=e})),(n[0].inline||n[0].block_expand)&&(n[0].inline&&yn(o)&&0!==i||(o=Yl(s,n,o,i,!0)),n[0].inline&&yn(a)&&u!==a.nodeValue.length||(a=Yl(s,n,a,u,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(o=Wl(s,n,t,o,"previousSibling"),a=Wl(s,n,t,a,"nextSibling")),(n[0].block||n[0].selector)&&(o=Kl(e,n,o,"previousSibling"),a=Kl(e,n,a,"nextSibling"),n[0].block&&(s.isBlock(o)||(o=Yl(s,n,o,i,!0)),s.isBlock(a)||(a=Yl(s,n,a,u,!1)))),mn(o)&&(i=s.nodeIndex(o),o=o.parentNode),mn(a)&&(u=s.nodeIndex(a)+1,a=a.parentNode),{startContainer:o,startOffset:i,endContainer:a,endOffset:u}},Ql=function(e,t){var n=e.childNodes;return t>=n.length?t=n.length-1:t<0&&(t=0),n[t]||e},Zl=function(e,t,u){var n=t.startContainer,r=t.startOffset,o=t.endContainer,i=t.endOffset,s=function(e){var t=e[0];return 3===t.nodeType&&t===n&&r>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===i&&0<e.length&&t===o&&3===t.nodeType&&e.splice(e.length-1,1),e},c=function(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r},t=function(e,t){do{if(e.parentNode===t)return e}while(e=e.parentNode)},a=function(e,t,n){var r=n?"nextSibling":"previousSibling",o=e;for(o.parentNode;o&&o!==t;o=i){var i=o.parentNode,a=c(o===e?o:o[r],r);a.length&&(n||a.reverse(),u(s(a)))}};if(1===n.nodeType&&n.hasChildNodes()&&(n=Ql(n,r)),1===o.nodeType&&o.hasChildNodes()&&(o=Ql(o,i-1)),n===o)return u(s([n]));for(var l=e.findCommonAncestor(n,o),f=n;f;f=f.parentNode){if(f===o)return a(n,l,!0);if(f===l)break}for(f=o;f;f=f.parentNode){if(f===n)return a(o,l);if(f===l)break}e=t(n,l)||n,t=t(o,l)||o;a(n,e,!0);e=c(e===n?e:e.nextSibling,"nextSibling",t===o?t.nextSibling:t);e.length&&u(s(e)),a(o,t)},ef=function(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},tf=function(e){return U($(e,function(e){e=ju(e);return e?[ht.fromDom(e)]:[]}),Fr)},nf=function(e,t){t=vu(t,"td[data-mce-selected],th[data-mce-selected]");return 0<t.length?t:tf(e)},rf=function(e){return nf(ef(e.selection.getSel()),ht.fromDom(e.getBody()))},of=function(t){return Ut(t).fold(x([t]),function(e){return[t].concat(of(e))})},af=function(t){return zt(t).fold(x([t]),function(e){return"br"===St(e)?Bt(e).map(function(e){return[t].concat(af(e))}).getOr([]):[t].concat(af(e))})},uf=function(n,e){return Bu((r=(t=e).startContainer,t=t.startOffset,yn(r)?0===t?T.some(ht.fromDom(r)):T.none():T.from(r.childNodes[t]).map(ht.fromDom)),(e=(t=e).endContainer,t=t.endOffset,yn(e)?t===e.data.length?T.some(ht.fromDom(e)):T.none():T.from(e.childNodes[t-1]).map(ht.fromDom)),function(e,t){e=H(of(n),h(Ct,e)),t=H(af(n),h(Ct,t));return e.isSome()&&t.isSome()}).getOr(!1);var t,r},sf=function(e,t,n,r){var o=n,i=new kr(n,o),a=fe(e.schema.getMoveCaretBeforeOnEnterElements(),function(e,t){return!L(["td","th","table"],t.toLowerCase())});do{if(yn(n)&&0!==gt.trim(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName])return void(r?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n))}while(n=r?i.next():i.prev());"BODY"===o.nodeName&&(r?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},cf=function(e){e=e.selection.getSel();return e&&0<e.rangeCount},lf=function(n,r){var e=rf(n);0<e.length?X(e,function(e){var t=e.dom,e=n.dom.createRng();e.setStartBefore(t),e.setEndAfter(t),r(e,!0)}):r(n.selection.getRng(),!1)},ff=function(e,t,n){t=As(e,t);n(t),e.moveToBookmark(t)},df=(Bc=kt,Pc="text",{get:function(e){if(!Bc(e))throw new Error("Can only get "+Pc+" value of a "+Pc+" node");return Lc(e).getOr("")},getOption:Lc=function(e){return Bc(e)?T.from(e.dom.nodeValue):T.none()},set:function(e,t){if(!Bc(e))throw new Error("Can only set raw "+Pc+" value of a "+Pc+" node");e.dom.nodeValue=t}}),mf=function(e){return df.get(e)},gf=function(n,r,o,i){return Ot(r).fold(function(){return"skipping"},function(e){return"br"===i||kt(t=r)&&mf(t)===Hr?"valid":Et(t=r)&&pu(t,yu())?"existing":al(r.dom)?"caret":Nl(n,o,i)&&Nl(n,St(e),o)?"valid":"invalid-child";var t})},pf=function(e,t,n,r){var o=t.uid,o=void 0===o?ku("mce-annotation"):o,t=function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}(t,["uid"]),e=ht.fromTag("span",e);mu(e,yu()),Rn(e,""+Cu(),o),Rn(e,""+bu(),n);var i,o=r(o,t),t=o.attributes,o=o.classes,o=void 0===o?[]:o;return Tn(e,void 0===t?{}:t),i=e,X(o,function(e){mu(i,e)}),e},hf=function(r,e,t,n,o){var i=[],a=pf(r.getDoc(),o,t,n),u=tu(T.none()),s=function(){u.set(T.none())},c=function(e){X(e,l)},l=function(e){switch(gf(r,e,"span",St(e))){case"invalid-child":s();var t=Mt(e);c(t),s();break;case"valid":var n=u.get().getOrThunk(function(){var e=Ru(a);return i.push(e),u.set(T.some(e)),e});Kt(t=e,n=n),Gt(n,t)}};return Zl(r.dom,e,function(e){s(),function(e){e=M(e,ht.fromDom);c(e)}(e)}),i},vf=function(i,a,u,s){i.undoManager.transact(function(){var e,t,n=i.selection,r=n.getRng(),o=0<rf(i).length;r.collapsed&&!o&&(r=Jl(e=i,t=r,[{inline:!0}]),t.setStart(r.startContainer,r.startOffset),t.setEnd(r.endContainer,r.endOffset),e.selection.setRng(t)),n.getRng().collapsed&&!o?(o=pf(i.getDoc(),s,a,u.decorate),_u(o,jr),n.getRng().insertNode(o.dom),n.select(o.dom)):ff(n,!1,function(){lf(i,function(e){hf(i,e,a,u.decorate,s)})})})},yf=function(o){var n,r=(n={},{register:function(e,t){n[e]={name:e,settings:t}},lookup:function(e){return n.hasOwnProperty(e)?T.from(n[e]).map(function(e){return e.settings}):T.none()}});Nu(o,r);var i=Su(o);return{register:function(e,t){r.register(e,t)},annotate:function(t,n){r.lookup(t).each(function(e){vf(o,t,e,n)})},annotationChanged:function(e,t){i.addListener(e,t)},remove:function(e){wu(o,T.some(e)).each(function(e){e=e.elements;X(e,en)})},getAll:function(e){var t,r,e=(t=o,e=e,t=ht.fromDom(o.getBody()),e=vu(t,"["+bu()+'="'+e+'"]'),r={},X(e,function(e){var t=Dn(e,Cu()),n=r.hasOwnProperty(t)?r[t]:[];r[t]=n.concat([e])}),r);return ae(e,function(e){return M(e,function(e){return e.dom})})}}},bf=function(e){return{getBookmark:h(gl,e),moveToBookmark:h(pl,e)}};bf.isBookmarkNode=hl;var Cf=function(e,t){for(;t&&t!==e;){if(Nn(t)||En(t))return t;t=t.parentNode}return null},wf=function(t,n,e){if(e.collapsed)return!1;if(ct.browser.isIE()&&e.startOffset===e.endOffset-1&&e.startContainer===e.endContainer){var r=e.startContainer.childNodes[e.startOffset];if(mn(r))return I(r.getClientRects(),function(e){return zu(e,t,n)})}return I(e.getClientRects(),function(e){return zu(e,t,n)})},xf=function(e,t,n){return e.fire(t,n)},Sf={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||Sf.metaKeyPressed(e)},metaKeyPressed:function(e){return ct.mac?e.metaKey:e.ctrlKey&&!e.altKey}},Nf=En,Ef=function(n,s){var c,l,f,d,m,g,p,h,v,y,o,b,C,w,x,S="data-mce-selected",N=s.dom,r=gt.each,E=s.getDoc(),k=document,i=Math.abs,a=Math.round,_=s.getBody(),A={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},u=function(e){return e&&("IMG"===e.nodeName||s.dom.is(e,"figure.image"))},R=function(e){return kn(e)||N.hasClass(e,"mce-preview-object")},T=function(e){var t=e.target;!function(e,t){if("longpress"!==e.type&&0!==e.type.indexOf("touch"))return u(e.target)&&!wf(e.clientX,e.clientY,t);var n=e.touches[0];return u(e.target)&&!wf(n.clientX,n.clientY,t)}(e,s.selection.getRng())||e.isDefaultPrevented()||s.selection.select(t)},D=function(e){return N.is(e,"figure.image")?[e.querySelector("img")]:N.hasClass(e,"mce-preview-object")&&V(e.firstElementChild)?[e,e.firstElementChild]:[e]},O=function(e){var t=js(s);return!!t&&("false"!==e.getAttribute("data-mce-resize")&&(e!==s.getBody()&&(N.hasClass(e,"mce-preview-object")?yt(ht.fromDom(e.firstElementChild),t):yt(ht.fromDom(e),t))))},B=function(e,t,n){V(n)&&(e=D(e),X(e,function(e){e.style[t]||!s.schema.isValid(e.nodeName.toLowerCase(),t)?N.setStyle(e,t,n):N.setAttrib(e,t,""+n)}))},P=function(e,t,n){B(e,"width",t),B(e,"height",n)},L=function(e){var t,n=e.screenX-g,r=e.screenY-p;b=n*d[2]+h,C=r*d[3]+v,b=b<5?5:b,C=C<5?5:C,((u(c)||R(c))&&!1!==s.getParam("resize_img_proportional",!0,"boolean")?!Sf.modifierPressed(e):Sf.modifierPressed(e))&&(i(n)>i(r)?(C=a(b*y),b=a(C/y)):(b=a(C/y),C=a(b*y))),P(l,b,C),t=d.startPos.x+n,e=d.startPos.y+r,N.setStyles(f,{left:t=0<t?t:0,top:e=0<e?e:0,display:"block"}),f.innerHTML=b+" &times; "+C,d[2]<0&&l.clientWidth<=b&&N.setStyle(l,"left",void 0+(h-b)),d[3]<0&&l.clientHeight<=C&&N.setStyle(l,"top",void 0+(v-C)),(n=_.scrollWidth-w)+(r=_.scrollHeight-x)!==0&&N.setStyles(f,{left:t-n,top:e-r}),o||(r="corner-"+d.name,s.fire("ObjectResizeStart",{target:c,width:h,height:v,origin:r}),o=!0)},I=function(){var e=o;o=!1,e&&(B(c,"width",b),B(c,"height",C)),N.unbind(E,"mousemove",L),N.unbind(E,"mouseup",I),k!==E&&(N.unbind(k,"mousemove",L),N.unbind(k,"mouseup",I)),N.remove(l),N.remove(f),N.remove(m),M(c),e&&(e="corner-"+d.name,s.fire("ObjectResized",{target:c,width:b,height:C,origin:e}),N.setAttrib(c,"style",N.getAttrib(c,"style"))),s.nodeChanged()},M=function(e){j();var t=N.getPos(e,_),o=t.x,i=t.y,n=e.getBoundingClientRect(),a=n.width||n.right-n.left,u=n.height||n.bottom-n.top;c!==e&&(F(),c=e,b=C=0);t=s.fire("ObjectSelected",{target:e}),n=N.getAttrib(c,S,"1");O(e)&&!t.isDefaultPrevented()?r(A,function(n,r){var t=function(e){var t=D(c)[0];g=e.screenX,p=e.screenY,h=t.clientWidth,v=t.clientHeight,y=v/h,(d=n).name=r,d.startPos={x:a*n[0]+o,y:u*n[1]+i},w=_.scrollWidth,x=_.scrollHeight,m=N.add(_,"div",{"class":"mce-resize-backdrop"}),N.setStyles(m,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),l=R(t=c)?N.create("img",{src:ct.transparentSrc}):t.cloneNode(!0),N.addClass(l,"mce-clonedresizable"),N.setAttrib(l,"data-mce-bogus","all"),l.contentEditable="false",N.setStyles(l,{left:o,top:i,margin:0}),P(l,a,u),l.removeAttribute(S),_.appendChild(l),N.bind(E,"mousemove",L),N.bind(E,"mouseup",I),k!==E&&(N.bind(k,"mousemove",L),N.bind(k,"mouseup",I)),f=N.add(_,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},h+" &times; "+v)},e=N.get("mceResizeHandle"+r);e&&N.remove(e),e=N.add(_,"div",{id:"mceResizeHandle"+r,"data-mce-bogus":"all","class":"mce-resizehandle",unselectable:!0,style:"cursor:"+r+"-resize; margin:0; padding:0"}),11===ct.ie&&(e.contentEditable=!1),N.bind(e,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),t(e)}),n.elm=e,N.setStyles(e,{left:a*n[0]+o-e.offsetWidth/2,top:u*n[1]+i-e.offsetHeight/2})}):F(),N.getAttrib(c,S)||c.setAttribute(S,n)},F=function(){j(),c&&c.removeAttribute(S),ie(A,function(e,t){t=N.get("mceResizeHandle"+t);t&&(N.unbind(t),N.remove(t))})},U=function(e){var t=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};o||s.removed||(r(N.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute(S)}),e="mousedown"===e.type?e.target:n.getNode(),t(e=N.$(e).closest("table,img,figure.image,hr,video,span.mce-preview-object")[0],_)&&(H(),t(n.getStart(!0),e)&&t(n.getEnd(!0),e))?M(e):F())},z=function(e){return Nf(Cf(s.getBody(),e))},j=function(){ie(A,function(e){e.elm&&(N.unbind(e.elm),delete e.elm)})},H=function(){try{s.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};s.on("init",function(){var e;H(),(ct.browser.isIE()||ct.browser.isEdge())&&(s.on("mousedown click",function(e){var t=e.target,n=t.nodeName;o||!/^(TABLE|IMG|HR)$/.test(n)||z(t)||(2!==e.button&&s.selection.select(t,"TABLE"===n),"mousedown"===e.type&&s.nodeChanged())}),N.bind(_,"mscontrolselect",e=function(e){var t=function(e){Sr.setEditorTimeout(s,function(){return s.selection.select(e)})};if(z(e.target)||kn(e.target))return e.preventDefault(),void t(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&t(e.target))}),s.on("remove",function(){return N.unbind(_,"mscontrolselect",e)}));var t=Sr.throttle(function(e){s.composing||U(e)});s.on("nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged",t),s.on("keyup compositionend",function(e){c&&"TABLE"===c.nodeName&&t(e)}),s.on("hide blur",F),s.on("contextmenu longpress",T,!0)}),s.on("remove",j);return{isResizable:O,showResizeRect:M,hideResizeRect:F,updateResizeRect:U,destroy:function(){c=l=m=null}}},kf=function(e){return Nn(e)||En(e)},_f=function(e,t,n){var r,o,i=n;if(i.caretPositionFromPoint)(o=i.caretPositionFromPoint(e,t))&&((r=n.createRange()).setStart(o.offsetNode,o.offset),r.collapse(!0));else if(n.caretRangeFromPoint)r=n.caretRangeFromPoint(e,t);else if(i.body.createTextRange){r=i.body.createTextRange();try{r.moveToPoint(e,t),r.collapse(!0)}catch(a){r=function(e,n,t){var r=t.elementFromPoint(e,n),o=t.body.createTextRange();if(r&&"HTML"!==r.tagName||(r=t.body),o.moveToElementText(r),0<(r=(r=gt.toArray(o.getClientRects())).sort(function(e,t){return(e=Math.abs(Math.max(e.top-n,e.bottom-n)))-(t=Math.abs(Math.max(t.top-n,t.bottom-n)))})).length){n=(r[0].bottom+r[0].top)/2;try{return o.moveToPoint(e,n),o.collapse(!0),o}catch(i){}}return null}(e,t,n)}return e=r,t=n.body,n=e&&e.parentElement?e.parentElement():null,En(function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(n,t,kf))?null:e}return r},Af=function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},Rf=function(e,t,n){return null!==function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(e,t,n)},Tf=function(e){return e&&"TABLE"===e.nodeName},Df=function(e,t,n){for(var r=new kr(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=r[n?"prev":"next"]();)if(xn(t))return!0},Of=function(e,t,n,r,o){var i,a,u=e.getRoot(),s=e.schema.getNonEmptyElements(),c=e.getParent(o.parentNode,e.isBlock)||u;if(r&&xn(o)&&t&&e.isEmpty(c))return T.some(us(o.parentNode,e.nodeIndex(o)));for(var l,f,d=new kr(o,c);a=d[r?"prev":"next"]();){if("false"===e.getContentEditableParent(a)||(f=u,Yr(l=a)&&!1===Rf(l,f,al)))return T.none();if(yn(a)&&0<a.nodeValue.length)return!1===function(e,t,n){return Rf(e,t,function(e){return e.nodeName===n})}(a,u,"A")?T.some(us(a,r?a.nodeValue.length:0)):T.none();if(e.isBlock(a)||s[a.nodeName.toLowerCase()])return T.none();i=a}return n&&i?T.some(us(i,0)):T.none()},Bf=function(e,t,n,r){var o,i=e.getRoot(),a=!1,u=r[(n?"start":"end")+"Container"],s=r[(n?"start":"end")+"Offset"],r=mn(u)&&s===u.childNodes.length,c=e.schema.getNonEmptyElements(),l=n;if(Yr(u))return T.none();if(mn(u)&&s>u.childNodes.length-1&&(l=!1),Cn(u)&&(u=i,s=0),u===i){if(l&&(f=u.childNodes[0<s?s-1:0])){if(Yr(f))return T.none();if(c[f.nodeName]||Tf(f))return T.none()}if(u.hasChildNodes()){if(s=Math.min(!l&&0<s?s-1:s,u.childNodes.length-1),u=u.childNodes[s],s=yn(u)&&r?u.data.length:0,!t&&u===i.lastChild&&Tf(u))return T.none();if(function(e,t){for(;t&&t!==e;){if(En(t))return!0;t=t.parentNode}return!1}(i,u)||Yr(u))return T.none();if(u.hasChildNodes()&&!1===Tf(u)){var f=u,d=new kr(u,i);do{if(En(f)||Yr(f)){a=!1;break}if(yn(f)&&0<f.nodeValue.length){s=l?0:f.nodeValue.length,u=f,a=!0;break}if(c[f.nodeName.toLowerCase()]&&(!(o=f)||!/^(TD|TH|CAPTION)$/.test(o.nodeName))){s=e.nodeIndex(f),u=f.parentNode,l||s++,a=!0;break}}while(f=l?d.next():d.prev())}}}return t&&(yn(u)&&0===s&&Of(e,r,t,!0,u).each(function(e){u=e.container(),s=e.offset(),a=!0}),mn(u)&&(!(f=(f=u.childNodes[s])||u.childNodes[s-1])||!xn(f)||(n="A",(i=f).previousSibling&&i.previousSibling.nodeName===n)||Df(e,f,!1)||Df(e,f,!0)||Of(e,r,t,!0,f).each(function(e){u=e.container(),s=e.offset(),a=!0}))),l&&!t&&yn(u)&&s===u.nodeValue.length&&Of(e,r,t,!1,u).each(function(e){u=e.container(),s=e.offset(),a=!0}),a?T.some(us(u,s)):T.none()},Pf=function(e,t){var n=t.collapsed,r=t.cloneRange(),o=us.fromRangeStart(t);return Bf(e,n,!0,r).each(function(e){n&&us.isAbove(o,e)||r.setStart(e.container(),e.offset())}),n||Bf(e,n,!1,r).each(function(e){r.setEnd(e.container(),e.offset())}),n&&r.collapse(!0),Af(t,r)?T.none():T.some(r)},Lf=function(e,t){return e.splitText(t)},If=function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,e=e.endOffset;return t===r&&yn(t)?0<n&&n<t.nodeValue.length&&(t=(r=Lf(t,n)).previousSibling,n<e?(t=r=Lf(r,e-=n).previousSibling,e=r.nodeValue.length,n=0):e=0):(yn(t)&&0<n&&n<t.nodeValue.length&&(t=Lf(t,n),n=0),yn(r)&&0<e&&e<r.nodeValue.length&&(e=(r=Lf(r,e).previousSibling).nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:e}},st=function(n){return{walk:function(e,t){return Zl(n,e,t)},split:If,normalize:function(t){return Pf(n,t).fold(E,function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0})}}};st.compareRanges=Af,st.getCaretRangeFromPoint=_f,st.getSelectedNode=ju,st.getNode=Hu;var Mf,Ff,Uf,zf,jf,Hf=(Mf="height",Ff=function(e){var t=e.dom;return tn(e)?t.getBoundingClientRect().height:t.offsetHeight},{set:function(e,t){if(!C(t)&&!t.match(/^[0-9]+$/))throw new Error(Mf+".set accepts only positive integer values. Value was "+t);e=e.dom;_n(e)&&(e.style[Mf]=t+"px")},get:Uf=function(e){var t=Ff(e);if(t<=0||null===t){e=Ln(e,Mf);return parseFloat(e)||0}return t},getOuter:Uf,aggregate:zf=function(n,e){return j(e,function(e,t){t=Ln(n,t),t=t===undefined?0:parseInt(t,10);return isNaN(t)?e:e+t},0)},max:function(e,t,n){n=zf(e,n);return n<t?t-n:0}}),Vf=function(n,e){return n.view(e).fold(x([]),function(e){var t=n.owner(e),t=Vf(n,t);return[e].concat(t)})},qf=Object.freeze({__proto__:null,view:function(e){return(e.dom===document?T.none():T.from(null===(e=e.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(ht.fromDom)},owner:Tt}),$f=function(e){var t=ht.fromDom(document),n=un(t),t=function(e,t){e=t.owner(e);return Vf(t,e)}(e,qf),e=an(e),t=z(t,function(e,t){t=an(t);return{left:e.left+t.left,top:e.top+t.top}},{left:0,top:0});return rn(t.left+e.left+n.left,t.top+e.top+n.top)},Wf=function(e){return"textarea"===St(e)},Kf=function(e,t){var n=function(e){var t=e.dom.ownerDocument,n=t.body,r=t.defaultView,o=t.documentElement;if(n===e.dom)return rn(n.offsetLeft,n.offsetTop);var i=on(null==r?void 0:r.pageYOffset,o.scrollTop),t=on(null==r?void 0:r.pageXOffset,o.scrollLeft),r=on(o.clientTop,n.clientTop),n=on(o.clientLeft,n.clientLeft);return an(e).translate(t-n,i-r)}(e),r=Hf.get(e);return{element:e,bottom:n.top+r,height:r,pos:n,cleanup:t}},Xf=function(e,t){var t=function(e,t){var n=Mt(e);if(0===n.length||Wf(e))return{element:e,offset:t};if(t<n.length&&!Wf(n[t]))return{element:n[t],offset:0};n=n[n.length-1];return Wf(n)?{element:e,offset:t}:"img"===St(n)?{element:n,offset:1}:kt(n)?{element:n,offset:mf(n).length}:{element:n,offset:Mt(n).length}}(e,t),n=ht.fromHtml('<span data-mce-bogus="all">\ufeff</span>');return Kt(t.element,n),Kf(n,function(){return Zt(n)})},Yf=function(n,r,o,i){Zf(n,function(e,t){return Jf(n,r,o,i)},o)},Gf=function(e,t,n,r,o){var i={elm:r.element.dom,alignToTop:o};e.fire("ScrollIntoView",i).isDefaultPrevented()||(n(t,un(t).top,r,o),e.fire("AfterScrollIntoView",i))},Jf=function(e,t,n,r){var o=ht.fromDom(e.getBody()),i=ht.fromDom(e.getDoc());o.dom.offsetWidth;n=Xf(ht.fromDom(n.startContainer),n.startOffset);Gf(e,i,t,n,r),n.cleanup()},Qf=function(e,t,n,r){var o=ht.fromDom(e.getDoc());Gf(e,o,n,Kf(ht.fromDom(t),ee),r)},Zf=function(e,t,n){var r=n.startContainer,o=n.startOffset,i=n.endContainer,a=n.endOffset;t(ht.fromDom(r),ht.fromDom(i));t=e.dom.createRng();t.setStart(r,o),t.setEnd(i,a),e.selection.setRng(n)},ed=function(e,t,n,r){var o=e.pos;n?sn(o.left,o.top,r):(e=o.top-t+e.height,sn(o.left,e,r))},td=function(e,t,n,r,o){var i=n+t,a=r.pos.top,u=r.bottom,s=n<=u-a;a<t?ed(r,n,!1!==o,e):i<a?ed(r,n,s?!1!==o:!0===o,e):i<u&&!s&&ed(r,n,!0===o,e)},nd=function(e,t,n,r){var o=e.dom.defaultView.innerHeight;td(e,t,o,n,r)},rd=function(e,t,n,r){var o=e.dom.defaultView.innerHeight;td(e,t,o,n,r);t=$f(n.element),o=fn(window);t.top<o.y?cn(n.element,!1!==r):t.top>o.bottom&&cn(n.element,!0===r)},od=function(e,t,n){return Yf(e,nd,t,n)},id=function(e,t,n){return Qf(e,t,nd,n)},ad=function(e,t,n){return Yf(e,rd,t,n)},ud=function(e,t,n){return Qf(e,t,rd,n)},sd=function(e,t,n){(e.inline?od:ad)(e,t,n)},cd=function(e){var t=Vt(e).dom;return e.dom===t.activeElement},ld=function(e){return void 0===e&&(e=ht.fromDom(document)),T.from(e.dom.activeElement).map(ht.fromDom)},_=function(e,t,n,r){return{start:e,soffset:t,finish:n,foffset:r}},We=Ke([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),fd=(We.before,We.on,We.after,function(e){return e.fold(g,g,g)}),dd=Ke([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),md={domRange:dd.domRange,relative:dd.relative,exact:dd.exact,exactFromRange:function(e){return dd.exact(e.start,e.soffset,e.finish,e.foffset)},getWin:function(e){e=e.match({domRange:function(e){return ht.fromDom(e.startContainer)},relative:function(e,t){return fd(e)},exact:function(e,t,n,r){return e}});return Dt(e)},range:_},gd=ut().browser,pd=function(e,t){t=kt(t)?mf(t).length:Mt(t).length+1;return t<e?t:e<0?0:e},hd=function(e){return md.range(e.start,pd(e.soffset,e.start),e.finish,pd(e.foffset,e.finish))},vd=function(e,t){return!dn(t.dom)&&(xt(e,t)||Ct(e,t))},yd=function(t){return function(e){return vd(t,e.start)&&vd(t,e.finish)}},bd=function(e){return!0===e.inline||gd.isIE()},Cd=function(e){return md.range(ht.fromDom(e.startContainer),e.startOffset,ht.fromDom(e.endContainer),e.endOffset)},wd=function(e){return function(e){e=e.getSelection();return(e&&0!==e.rangeCount?T.from(e.getRangeAt(0)):T.none()).map(Cd)}(Dt(e).dom).filter(yd(e))},xd=function(e){var t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),T.some(t)}catch(n){return T.none()}},Sd=function(e){var t=bd(e)?wd(ht.fromDom(e.getBody())):T.none();e.bookmark=t.isSome()?t:e.bookmark},Nd=function(n){return(n.bookmark||T.none()).bind(function(e){return t=ht.fromDom(n.getBody()),T.from(e).filter(yd(t)).map(hd);var t}).bind(xd)},Ed={isEditorUIElement:function(e){e=e.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},kd=function(t,e){var n,r;ut().browser.isIE()?(r=t).on("focusout",function(){Sd(r)}):(n=e,t.on("mouseup touchend",function(e){n.throttle()})),t.on("keyup NodeChange",function(e){"nodechange"===(e=e).type&&e.selectionChange||Sd(t)})},_d=function(r){var o=uu(function(){Sd(r)},0);r.on("init",function(){var e,t,n;r.inline&&(e=r,t=o,n=function(){t.throttle()},Ya.DOM.bind(document,"mouseup",n),e.on("remove",function(){Ya.DOM.unbind(document,"mouseup",n)})),kd(r,o)}),r.on("remove",function(){o.cancel()})},Ad=Ya.DOM,Rd=function(t,e){var n=t.getParam("custom_ui_selector","","string");return null!==Ad.getParent(e,function(e){return Ed.isEditorUIElement(e)||!!n&&t.dom.is(e,n)})},Td=function(n,e){var t=e.editor;_d(t),t.on("focusin",function(){var e=n.focusedEditor;e!==t&&(e&&e.fire("blur",{focusedEditor:t}),n.setActive(t),(n.focusedEditor=t).fire("focus",{blurredEditor:e}),t.focus(!0))}),t.on("focusout",function(){Sr.setEditorTimeout(t,function(){var e=n.focusedEditor;Rd(t,function(e){try{var t=Vt(ht.fromDom(e.getElement()));return ld(t).fold(function(){return document.body},function(e){return e.dom})}catch(n){return document.body}}(t))||e!==t||(t.fire("blur",{focusedEditor:null}),n.focusedEditor=null)})}),jf||(jf=function(e){var t=n.activeEditor;t&&!function(e){if(Ht()&&V(e.target)){var t=ht.fromDom(e.target);if(Et(t)&&Wt(t)&&e.composed&&e.composedPath){t=e.composedPath();if(t)return Z(t)}}return T.from(e.target)}(e).each(function(e){e.ownerDocument===document&&(e===document.body||Rd(t,e)||n.focusedEditor!==t||(t.fire("blur",{focusedEditor:null}),n.focusedEditor=null))})},Ad.bind(document,"focusin",jf))},Dd=function(e,t){e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(Ad.unbind(document,"focusin",jf),jf=null)},Od=function(t,e){return((e=e).collapsed?T.from(Hu(e.startContainer,e.startOffset)).map(ht.fromDom):T.none()).bind(function(e){return Mr(e)?T.some(e):!1===xt(t,e)?T.some(t):T.none()})},Bd=function(t,e){Od(ht.fromDom(t.getBody()),e).bind(function(e){return rl(e.dom)}).fold(function(){t.selection.normalize()},function(e){return t.selection.setRng(e.toRange())})},Pd=function(e){if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},Ld=function(e){return cd(e)||ld(Vt(t=e)).filter(function(e){return t.dom.contains(e.dom)}).isSome();var t},Id=function(t){var e=Vt(ht.fromDom(t.getElement()));return ld(e).filter(function(e){return!function(e){e=e.classList;return e!==undefined&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))}(e.dom)&&Rd(t,e.dom)}).isSome()},Md=function(e){return e.inline?function(e){e=e.getBody();return e&&Ld(ht.fromDom(e))}(e):(e=e).iframeElement&&cd(ht.fromDom(e.iframeElement))},Fd=function(e){return e.editorManager.setActive(e)},Ud=function(e,t){e.removed||(t?Fd:function(t){var e=t.selection,n=t.getBody(),r=e.getRng();t.quirks.refreshContentEditable(),t.bookmark!==undefined&&!1===Md(t)&&Nd(t).each(function(e){t.selection.setRng(e),r=e});var o,e=(o=t,e=e.getNode(),o.dom.getParent(e,function(e){return"true"===o.dom.getContentEditable(e)}));if(t.$.contains(n,e))return Pd(e),Bd(t,r),void Fd(t);t.inline||(ct.opera||Pd(n),t.getWin().focus()),(ct.gecko||t.inline)&&(Pd(n),Bd(t,r)),Fd(t)})(e)},zd=function(e,t,n,r,o){var i=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return T.from(i).map(ht.fromDom).map(function(e){return r&&t.collapsed?e:Ft(e,o(e,a)).getOr(e)}).bind(function(e){return Et(e)?T.some(e):Ot(e).filter(Et)}).map(function(e){return e.dom}).getOr(e)},jd=function(e,t,n){return zd(e,t,!0,n,function(e,t){return Math.min(e.dom.childNodes.length,t)})},Hd=function(e,t,n){return zd(e,t,!1,n,function(e,t){return 0<t?t-1:t})},Vd=function(e,t){for(var n=e;e&&yn(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},qd=function(n,e){return M(e,function(e){var t=n.fire("GetSelectionRange",{range:e});return t.range!==e?t.range:e})},$d={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Wd=function(e,t,n){var r=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[r])return e[r];if(e!==t){var i=e[o];if(i)return i;for(var a=e.parent;a&&a!==t;a=a.parent)if(i=a[o])return i}},Kd=function(e){var t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t},Xd=(Yd.create=function(e,t){var n=new Yd(e,$d[e]||1);return t&&ie(t,function(e,t){n.attr(t,e)}),n},Yd.prototype.replace=function(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this},Yd.prototype.attr=function(e,t){var n,r=this;if("string"!=typeof e)return e!==undefined&&null!==e&&ie(e,function(e,t){r.attr(t,e)}),r;if(n=r.attributes){if(t===undefined)return n.map[e];if(null===t){if(e in n.map){delete n.map[e];for(var o=n.length;o--;)if(n[o].name===e)return n.splice(o,1),r}return r}if(e in n.map){for(o=n.length;o--;)if(n[o].name===e){n[o].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,r}},Yd.prototype.clone=function(){var e,t=new Yd(this.name,this.type);if(e=this.attributes){var n=[];n.map={};for(var r=0,o=e.length;r<o;r++){var i=e[r];"id"!==i.name&&(n[n.length]={name:i.name,value:i.value},n.map[i.name]=i.value)}t.attributes=n}return t.value=this.value,t.shortEnded=this.shortEnded,t},Yd.prototype.wrap=function(e){return this.parent.insert(e,this),e.append(this),this},Yd.prototype.unwrap=function(){for(var e=this.firstChild;e;){var t=e.next;this.insert(e,this,!0),e=t}this.remove()},Yd.prototype.remove=function(){var e=this.parent,t=this.next,n=this.prev;return e&&(e.firstChild===this?(e.firstChild=t)&&(t.prev=null):n.next=t,e.lastChild===this?(e.lastChild=n)&&(n.next=null):t.prev=n,this.parent=this.next=this.prev=null),this},Yd.prototype.append=function(e){e.parent&&e.remove();var t=this.lastChild;return t?((t.next=e).prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e},Yd.prototype.insert=function(e,t,n){e.parent&&e.remove();var r=t.parent||this;return n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,(e.next=t).prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,(e.prev=t).next=e),e.parent=r,e},Yd.prototype.getAll=function(e){for(var t=[],n=this.firstChild;n;n=Wd(n,this))n.name===e&&t.push(n);return t},Yd.prototype.empty=function(){if(this.firstChild){for(var e=[],t=this.firstChild;t;t=Wd(t,this))e.push(t);for(var n=e.length;n--;)(t=e[n]).parent=t.firstChild=t.lastChild=t.next=t.prev=null}return this.firstChild=this.lastChild=null,this},Yd.prototype.isEmpty=function(e,t,n){void 0===t&&(t={});var r=this.firstChild;if(Kd(this))return!1;if(r)do{if(1===r.type){if(r.attr("data-mce-bogus"))continue;if(e[r.name])return!1;if(Kd(r))return!1}if(8===r.type)return!1;if(3===r.type&&!function(e){if(!ho(e.value))return!1;var t=e.parent;return!t||"span"===t.name&&!t.attr("style")||!/^[ ]+$/.test(e.value)}(r))return!1;if(3===r.type&&r.parent&&t[r.parent.name]&&ho(r.value))return!1;if(n&&n(r))return!1}while(r=Wd(r,this));return!0},Yd.prototype.walk=function(e){return Wd(this,null,e)},Yd);function Yd(e,t){this.name=e,1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}var Gd=function(e,t){return e.replace(t.re,function(e){return me(t.uris,e).getOr(e)})},Jd=["img","video"],Qd=function(e,t,n){return!e.allow_html_data_urls&&(/^data:image\//i.test(t)?(e=e.allow_svg_data_urls,n=n,!(K(e)?L(Jd,n):e)&&/^data:image\/svg\+xml/i.test(t)):/^data:/i.test(t))},Zd=function(e,t,n){var r,o,i=1,a=e.getShortEndedElements(),u=/<([!?\/])?([A-Za-z0-9\-_:.]+)(\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g;for(u.lastIndex=r=n;o=u.exec(t);){if(r=u.lastIndex,"/"===o[1])i--;else if(!o[1]){if(o[2]in a)continue;i++}if(0===i)break}return r},em=function($,W){void 0===W&&(W=Go()),!1!==($=$||{}).fix_self_closing&&($.fix_self_closing=!0);var K=$.comment||ee,X=$.cdata||ee,Y=$.text||ee,G=$.start||ee,J=$.end||ee,Q=$.pi||ee,Z=$.doctype||ee,n=function(c,e){void 0===e&&(e="html");for(var t,i,l,n,r,o,f,a,u,s,d,m,g,p,h,v,y,b,C=c.html,w=0,x=[],S=0,N=zo.decode,E=gt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),k=/((java|vb)script|mhtml):/i,_="html"===e?0:1,A=function(e){for(var t,n=x.length;n--&&x[n].name!==e;);if(0<=n){for(t=x.length-1;n<=t;t--)(e=x[t]).valid&&J(e.name);x.length=n}},R=function(e,t){return Y(Gd(e,c),t)},T=function(e){""!==e&&(">"===e.charAt(0)&&(e=" "+e),$.allow_conditional_comments||"[if"!==e.substr(0,3).toLowerCase()||(e=" "+e),K(Gd(e,c)))},D=function(e,t){var n=e||"",r=!je(n,"--"),o=function(e,t,n){void 0===n&&(n=0);var r=e.toLowerCase();if(-1!==r.indexOf("[if ",n)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(r.substr(n))){var o=r.indexOf("[endif]",n);return r.indexOf(">",o)}if(t){var i=r.indexOf(">",n);return-1!==i?i:r.length}i=/--!?>/g;i.lastIndex=n;e=i.exec(e);return e?e.index+e[0].length:r.length}(C,r,t);return e=C.substr(t,o-t),T(r?n+e:e),o+1},O=function(e,t,n,r,o){var i,a;if(t=t.toLowerCase(),o=t in M?t:N(n||r||o||""),n=Gd(o,c),F&&!f&&!1==(0===(u=t).indexOf("data-")||0===u.indexOf("aria-"))){if(!(i=g[t])&&p){for(a=p.length;a--&&!(i=p[a]).pattern.test(t););-1===a&&(i=null)}if(!i)return;if(i.validValues&&!(n in i.validValues))return}if(E[t]&&!$.allow_script_urls){var u=n.replace(/[\s\u0000-\u001F]+/g,"");try{u=decodeURIComponent(u)}catch(s){u=unescape(u)}if(k.test(u))return;if(Qd($,u,e))return}f&&(t in E||0===t.indexOf("on"))||(l.map[t]=n,l.push({name:t,value:n}))},B=new RegExp("<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\w\\W]*?)>)|(?:!(--)?)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_:.]*)(\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>))","g"),P=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,L=W.getShortEndedElements(),I=$.self_closing_elements||W.getSelfClosingElements(),M=W.getBoolAttrs(),F=$.validate,U=$.remove_internals,z=$.fix_self_closing,j=W.getSpecialElements(),H=C+">";t=B.exec(H);){var V=t[0];if(w<t.index&&R(N(C.substr(w,t.index-w))),i=t[7])A(i=":"===(i=i.toLowerCase()).charAt(0)?i.substr(1):i);else if(i=t[8]){if(t.index+V.length>C.length){R(N(C.substr(t.index))),w=t.index+V.length;continue}a=(i=":"===(i=i.toLowerCase()).charAt(0)?i.substr(1):i)in L,z&&I[i]&&0<x.length&&x[x.length-1].name===i&&A(i);var q=function(e,t){e=e.exec(t);if(e){t=e[1],e=e[2];return"string"==typeof t&&"data-mce-bogus"===t.toLowerCase()?e:null}return null}(P,t[9]);if(null!==q){if("all"===q){w=Zd(W,C,B.lastIndex),B.lastIndex=w;continue}s=!1}if(!F||(u=W.getElementRule(i))){if(s=!0,F&&(g=u.attributes,p=u.attributePatterns),(m=t[9])?((f=-1!==m.indexOf("data-mce-type"))&&U&&(s=!1),(l=[]).map={},m.replace(P,function(e,t,n,r,o){return O(i,t,n,r,o),""})):(l=[]).map={},F&&!f){if(h=u.attributesRequired,v=u.attributesDefault,y=u.attributesForced,u.removeEmptyAttrs&&!l.length&&(s=!1),y)for(n=y.length;n--;)o=(d=y[n]).name,"{$uid}"===(b=d.value)&&(b="mce_"+S++),l.map[o]=b,l.push({name:o,value:b});if(v)for(n=v.length;n--;)(o=(d=v[n]).name)in l.map||("{$uid}"===(b=d.value)&&(b="mce_"+S++),l.map[o]=b,l.push({name:o,value:b}));if(h){for(n=h.length;n--&&!(h[n]in l.map););-1===n&&(s=!1)}if(d=l.map["data-mce-bogus"]){if("all"===d){w=Zd(W,C,B.lastIndex),B.lastIndex=w;continue}s=!1}}s&&G(i,l,a)}else s=!1;if(q=j[i]){q.lastIndex=w=t.index+V.length,w=(t=q.exec(C))?(s&&(r=C.substr(w,t.index-w)),t.index+t[0].length):(r=C.substr(w),C.length),s&&(0<r.length&&R(r,!0),J(i)),B.lastIndex=w;continue}a||(m&&m.indexOf("/")===m.length-1?s&&J(i):x.push({name:i,valid:s}))}else if(i=t[1])T(i);else if(i=t[2]){if(!(1==_||$.preserve_cdata||0<x.length&&W.isValidChild(x[x.length-1].name,"#cdata"))){w=D("",t.index+2),B.lastIndex=w;continue}X(i)}else if(i=t[3])Z(i);else{if((i=t[4])||"<!"===V){w=D(i,t.index+V.length),B.lastIndex=w;continue}if(i=t[5]){if(1!=_){w=D("?",t.index+2),B.lastIndex=w;continue}Q(i,t[6])}}w=t.index+V.length}for(w<C.length&&R(N(C.substr(w))),n=x.length-1;0<=n;n--)(i=x[n]).valid&&J(i.name)};return{parse:function(e,t){void 0===t&&(t="html"),n(function(e){for(var t,n=/data:[^;]+;base64,([a-z0-9\+\/=]+)/gi,r=[],o={},i=ku("img"),a=0,u=0;t=n.exec(e);){var s=t[0],c=i+"_"+u++;o[c]=s,a<t.index&&r.push(e.substr(a,t.index-a)),r.push(c),a=t.index+s.length}var l=new RegExp(i+"_[0-9]+","g");return 0===a?{prefix:i,uris:o,html:e,re:l}:(a<e.length&&r.push(e.substr(a)),{prefix:i,uris:o,html:r.join(""),re:l})}(e),t)}}};em.findEndTag=Zd;var tm=function(e,t){for(var n,r,o,i=t,a=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,u=e.schema,i=function(e,t){e=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(e,"")}(e.getTempAttrs(),i),s=u.getShortEndedElements();o=a.exec(i);)n=a.lastIndex,r=o[0].length,o=s[o[1]]?n:em.findEndTag(u,i,n),i=i.substring(0,n-r)+i.substring(o),a.lastIndex=n-r;return qr(i)},nm=tm,rm=function(e,t,n,r){return t.format=n,t.get=!0,t.getInner=!0,t.no_events||e.fire("BeforeGetContent",t),n="raw"===t.format?gt.trim(nm(e.serializer,r.innerHTML)):"text"===t.format?e.dom.isEmpty(r)?"":qr(r.innerText||r.textContent):"tree"===t.format?e.serializer.serialize(r,t):function(e,t){e=Bs(e),e=new RegExp("^(<"+e+"[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/"+e+">[\r\n]*|<br \\/>[\r\n]*)$");return t.replace(e,"")}(e,e.serializer.serialize(r,t)),L(["text","tree"],t.format)||Ur(ht.fromDom(r))?t.content=n:t.content=gt.trim(n),t.no_events||e.fire("GetContent",t),t.content},om=gt.each,im=function(o){return{compare:function(e,t){if(e.nodeName!==t.nodeName)return!1;var n=function(t){var n={};return om(o.getAttribs(t),function(e){e=e.nodeName.toLowerCase();0!==e.indexOf("_")&&"style"!==e&&0!==e.indexOf("data-")&&(n[e]=o.getAttrib(t,e))}),n},r=function(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(void 0===(n=t[r]))return!1;if(e[r]!==n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0};return!!r(n(e),n(t))&&(!!r(o.parseStyle(o.getAttrib(e,"style")),o.parseStyle(o.getAttrib(t,"style")))&&(!hl(e)&&!hl(t)))}}},am=gt.makeMap,um=function(e){var u=[],s=(e=e||{}).indent,c=am(e.indent_before||""),l=am(e.indent_after||""),f=zo.getEncodeFunc(e.entity_encoding||"raw",e.entities),d="html"===e.element_format;return{start:function(e,t,n){var r,o,i,a;if(s&&c[e]&&0<u.length&&0<(a=u[u.length-1]).length&&"\n"!==a&&u.push("\n"),u.push("<",e),t)for(r=0,o=t.length;r<o;r++)i=t[r],u.push(" ",i.name,'="',f(i.value,!0),'"');u[u.length]=!n||d?">":" />",n&&s&&l[e]&&0<u.length&&0<(a=u[u.length-1]).length&&"\n"!==a&&u.push("\n")},end:function(e){var t;u.push("</",e,">"),s&&l[e]&&0<u.length&&0<(t=u[u.length-1]).length&&"\n"!==t&&u.push("\n")},text:function(e,t){0<e.length&&(u[u.length]=t?e:f(e))},cdata:function(e){u.push("<![CDATA[",e,"]]>")},comment:function(e){u.push("\x3c!--",e,"--\x3e")},pi:function(e,t){t?u.push("<?",e," ",f(t),"?>"):u.push("<?",e,"?>"),s&&u.push("\n")},doctype:function(e){u.push("<!DOCTYPE",e,">",s?"\n":"")},reset:function(){u.length=0},getContent:function(){return u.join("").replace(/\n$/,"")}}},sm=function(t,m){void 0===m&&(m=Go());var g=um(t);(t=t||{}).validate=!("validate"in t)||t.validate;return{serialize:function(e){var l=t.validate,f={3:function(e){g.text(e.value,e.raw)},8:function(e){g.comment(e.value)},7:function(e){g.pi(e.name,e.value)},10:function(e){g.doctype(e.value)},4:function(e){g.cdata(e.value)},11:function(e){if(e=e.firstChild)for(;d(e),e=e.next;);}};g.reset();var d=function(e){var t,n,r,o,i,a,u,s,c=f[e.type];if(c)c(e);else{if(t=e.name,c=e.shortEnded,n=e.attributes,l&&n&&1<n.length&&((i=[]).map={},s=m.getElementRule(e.name))){for(a=0,u=s.attributesOrder.length;a<u;a++)(r=s.attributesOrder[a])in n.map&&(o=n.map[r],i.map[r]=o,i.push({name:r,value:o}));for(a=0,u=n.length;a<u;a++)(r=n[a].name)in i.map||(o=n.map[r],i.map[r]=o,i.push({name:r,value:o}));n=i}if(g.start(e.name,n,c),!c){if(e=e.firstChild)for(;d(e),e=e.next;);g.end(t)}}};return 1!==e.type||t.inner?f[11](e):d(e),g.getContent()}}},cm=new Set;X(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],function(e){cm.add(e)});var lm,fm,dm=["font","text-decoration","text-emphasis"],mm=function(e,t){return re(e.parseStyle(e.getAttrib(t,"style")))},gm=function(e,t){return Y(mm(e,t),function(e){return!cm.has(e)})},pm=function(n,r,o){var e=mm(n,r),i=mm(n,o),a=function(e){var t=n.getStyle(r,e),e=n.getStyle(o,e);return $e(t)&&$e(e)&&t!==e};return I(e,function(t){var e=function(e){return I(e,function(e){return e===t})};if(e(i)||!e(dm))return a(t);e=U(i,function(t){return I(dm,function(e){return je(t,e)})});return I(e,a)})},o=function(n,r,o){return T.from(o.container()).filter(yn).exists(function(e){var t=n?0:-1;return r(e.data.charAt(o.offset()+t))})},hm=h(o,!0,yl),vm=h(o,!1,yl),ym=function(e){e=e.container();return yn(e)&&(0===e.data.length||Vr(e.data)&&bf.isBookmarkNode(e.parentNode))},e=function(t,n){return function(e){return T.from(xc(t?0:-1,e)).filter(n).isSome()}},We=function(e){return Sn(e)&&"block"===Ln(ht.fromDom(e),"display")},_=function(e){return En(e)&&!(mn(e=e)&&"all"===e.getAttribute("data-mce-bogus"))},bm=e(!0,We),Cm=e(!1,We),wm=e(!0,kn),xm=e(!1,kn),Sm=e(!0,hn),Nm=e(!1,hn),Em=e(!0,_),km=e(!1,_),_m=function(e){var t=vu(e,"br"),e=U(function(e){for(var t=[],n=e.dom;n;)t.push(ht.fromDom(n)),n=n.lastChild;return t}(e).slice(-1),Br);t.length===e.length&&X(e,Zt)},Am=function(e){Qt(e),Gt(e,ht.fromHtml('<br data-mce-bogus="1">'))},Rm=function(n){zt(n).each(function(t){Bt(t).each(function(e){Dr(n)&&Br(t)&&Dr(e)&&Zt(t)})})},Tm=function(e,t,n){return xt(t,e)?function(e,t){for(var n=m(t)?t:E,r=e.dom,o=[];null!==r.parentNode&&r.parentNode!==undefined;){var i=r.parentNode,a=ht.fromDom(i);if(o.push(a),!0===n(a))break;r=i}return o}(e,function(e){return n(e)||Ct(e,t)}).slice(0,-1):[]},Dm=function(e,t){return Tm(e,t,E)},Om=function(e,t){return[e].concat(Dm(e,t))},Bm=function(e,t,n){return Zc(e,t,n,ym)},Pm=function(e,t){return H(Om(ht.fromDom(t.container()),e),Dr)},o=function(e,n,r){return Bm(e,n.dom,r).forall(function(t){return Pm(n,r).fold(function(){return!1===wc(t,r,n.dom)},function(e){return!1===wc(t,r,n.dom)&&xt(e,ht.fromDom(t.container()))})})},We=function(t,n,r){return Pm(n,r).fold(function(){return Bm(t,n.dom,r).forall(function(e){return!1===wc(e,r,n.dom)})},function(e){return Bm(t,e.dom,r).isNone()})},Lm=h(We,!1),Im=h(We,!0),Mm=h(o,!1),Fm=h(o,!0),Um=function(e){return Rc(e).exists(Br)},zm=function(e,t,n){var r=U(Om(ht.fromDom(n.container()),t),Dr),t=Z(r).getOr(t);return Jc(e,t.dom,n).filter(Um)},jm=function(e,t){return Rc(t).exists(Br)||zm(!0,e,t).isSome()},Hm=function(e,t){return T.from(t.getNode(!0)).map(ht.fromDom).exists(Br)||zm(!1,e,t).isSome()},Vm=h(zm,!1),qm=h(zm,!0),$m=function(e){return us.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()},Wm=function(e,t){t=U(Om(ht.fromDom(t.container()),e),Dr);return Z(t).getOr(e)},Km=function(e,t){return $m(t)?vm(t):vm(t)||nl(Wm(e,t).dom,t).exists(vm)},Xm=function(e,t){return $m(t)?hm(t):hm(t)||tl(Wm(e,t).dom,t).exists(hm)},Ym=function(e){return Rc(e).bind(function(e){return sr(e,Et)}).exists(function(e){return e=Ln(e,"white-space"),L(["pre","pre-wrap"],e)})},Gm=function(e,t){return nl(e.dom,t).isNone()||tl(e.dom,t).isNone()||Lm(e,t)||Im(e,t)||Hm(e,t)||jm(e,t)},Jm=function(e,t){return!Ym(t)&&(Lm(e,t)||Mm(e,t)||Hm(e,t)||Km(e,t))},Qm=function(e,t){return!Ym(t)&&(Im(e,t)||Fm(e,t)||jm(e,t)||Xm(e,t))},Zm=function(e,t){return Jm(e,t)||Qm(e,(e=(n=t).container(),t=n.offset(),yn(e)&&t<e.data.length?us(e,t+1):n));var n},eg=function(e,t){return vl(e.charAt(t))},tg=function(e){e=e.container();return yn(e)&&ze(e.data,jr)},ng=function(e){var n,t=e.data,r=(n=t.split(""),M(n,function(e,t){return vl(e)&&0<t&&t<n.length-1&&bl(n[t-1])&&bl(n[t+1])?" ":e}).join(""));return r!==t&&(e.data=r,!0)},rg=function(a,e){return T.some(e).filter(tg).bind(function(e){var t,n,r,o,i=e.container();return(t=a,r=(n=i).data,o=us(n,0),(!eg(r,0)||Zm(t,o)?ng(i):(n.data=" "+r.slice(1),!0))||(o=a,r=(n=i).data,i=us(n,r.length-1),!(!eg(r,r.length-1)||Zm(o,i))&&(n.data=r.slice(0,-1)+" ",!0)))?T.some(e):T.none()})},og=function(t){var e=ht.fromDom(t.getBody());t.selection.isCollapsed()&&rg(e,us.fromRangeStart(t.selection.getRng())).each(function(e){t.selection.setRng(e.toRange())})},ig=function(e,t,n){var r,o,i,a,u,s;0!==n&&(o=ht.fromDom(e),i=ur(o,Dr).getOr(o),r=e.data.slice(t,t+n),o=t+n>=e.data.length&&Qm(i,us(e,e.data.length)),i=0===t&&Jm(i,us(e,0)),e.replaceData(t,n,(u=i,s=o,j(a=r,function(e,t){return yl(t)||vl(t)?e.previousCharIsSpace||""===e.str&&u||e.str.length===a.length-1&&s?{previousCharIsSpace:!1,str:e.str+jr}:{previousCharIsSpace:!0,str:e.str+" "}:{previousCharIsSpace:!1,str:e.str+t}},{previousCharIsSpace:!1,str:""}).str)))},ag=function(e,t){var n=e.data.slice(t),n=n.length-Ve(n).length;return ig(e,t,n)},ug=function(e,t){var n=e.data.slice(0,t),n=n.length-qe(n).length;return ig(e,t-n,n)},sg=function(e,t,n,r){void 0===r&&(r=!0);var o=qe(e.data).length,i=r?e:t,e=r?t:e;return r?i.appendData(e.data):i.insertData(0,e.data),Zt(ht.fromDom(e)),n&&ag(i,o),i},cg=function(e,t){return r=e,o=(n=t).container(),e=n.offset(),!1===us.isTextPosition(n)&&o===r.parentNode&&e>us.before(r).offset()?us(t.container(),t.offset()-1):t;var n,r,o},lg=function(e){return fo(e.previousSibling)?T.some((t=e.previousSibling,yn(t)?us(t,t.data.length):us.after(t))):e.previousSibling?ol(e.previousSibling):T.none();var t},fg=function(e){return fo(e.nextSibling)?T.some((t=e.nextSibling,yn(t)?us(t,0):us.before(t))):e.nextSibling?rl(e.nextSibling):T.none();var t},dg=function(r,o){return lg(o).orThunk(function(){return fg(o)}).orThunk(function(){return e=r,t=o,n=us.before(t.previousSibling||t.parentNode),nl(e,n).fold(function(){return tl(e,us.after(t))},T.some);var e,t,n})},mg=function(n,r){return fg(r).orThunk(function(){return lg(r)}).orThunk(function(){return t=r,tl(e=n,us.after(t)).fold(function(){return nl(e,us.before(t))},T.some);var e,t})},gg=function(e,t,n){return(e?mg:dg)(t,n).map(h(cg,n))},pg=function(t,n,e){e.fold(function(){t.focus()},function(e){t.selection.setRng(e.toRange(),n)})},hg=function(e,t){return t&&ge(e.schema.getBlockElements(),St(t))},vg=function(e){if(xo(e)){var t=ht.fromHtml('<br data-mce-bogus="1">');return Qt(e),Gt(e,t),T.some(us.before(t.dom))}return T.none()},yg=function(e,t,o){var n,r,i,a=Bt(e).filter(kt),u=Pt(e).filter(kt);return Zt(e),n=u,r=t,i=function(e,t,n){var r=e.dom,e=t.dom,t=r.data.length;return sg(r,e,o),n.container()===e?us(r,t):n},((e=a).isSome()&&n.isSome()&&r.isSome()?T.some(i(e.getOrDie(),n.getOrDie(),r.getOrDie())):T.none()).orThunk(function(){return o&&(a.each(function(e){return ug(e.dom,e.dom.length)}),u.each(function(e){return ag(e.dom,0)})),t})},bg=function(t,n,e,r){void 0===r&&(r=!0);var o,i=gg(n,t.getBody(),e.dom),a=ur(e,h(hg,t),(o=t.getBody(),function(e){return e.dom===o})),u=yg(e,i,(e=e,ge(t.schema.getTextInlineElements(),St(e))));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):a.bind(vg).fold(function(){r&&pg(t,n,u)},function(e){r&&pg(t,n,T.some(e))})},Cg=function(e,t){return{start:e,end:t}},wg=Ke([{removeTable:["element"]},{emptyCells:["cells"]},{deleteCellSelection:["rng","cell"]}]),xg=function(e,t){return dr(ht.fromDom(e),"td,th",t)},Sg=function(e,t){return lr(e,"table",t)},Ng=function(e){return!Ct(e.start,e.end)},Eg=function(e,t){return Sg(e.start,t).bind(function(n){return Sg(e.end,t).bind(function(e){return t=Ct(n,e),e=n,t?T.some(e):T.none();var t})})},kg=function(e){return vu(e,"td,th")},_g=function(n,e){var t=xg(e.startContainer,n),r=xg(e.endContainer,n);return e.collapsed?T.none():Bu(t,r,Cg).fold(function(){return t.fold(function(){return r.bind(function(t){return Sg(t,n).bind(function(e){return Z(kg(e)).map(function(e){return Cg(e,t)})})})},function(t){return Sg(t,n).bind(function(e){return te(kg(e)).map(function(e){return Cg(t,e)})})})},function(e){return Ag(n,e)?T.none():Sg((t=e).start,n).bind(function(e){return te(kg(e)).map(function(e){return Cg(t.start,e)})});var t})},Ag=function(e,t){return Eg(t,e).isSome()},Rg=function(e,t,n){return e.filter(function(e){return Ng(e)&&Ag(n,e)}).orThunk(function(){return _g(n,t)}).bind(function(e){return Eg(t=e,n).map(function(e){return{rng:t,table:e,cells:kg(e)}});var t})},Tg=function(e,t){return q(e,function(e){return Ct(e,t)})},Dg=function(e,r,o){return e.filter(function(e){return n=o,!Ng(t=e)&&Eg(t,n).exists(function(e){e=e.dom.rows;return 1===e.length&&1===e[0].cells.length})&&uf(e.start,r);var t,n}).map(function(e){return e.start})},Og=function(n){return Bu(Tg((r=n).cells,r.rng.start),Tg(r.cells,r.rng.end),function(e,t){return r.cells.slice(e,t+1)}).map(function(e){var t=n.cells;return e.length===t.length?wg.removeTable(n.table):wg.emptyCells(e)});var r},Bg=function(e,t){var n,r,o,i=(n=e,function(e){return Ct(n,e)}),a=(o=i,e=xg((r=t).startContainer,o),o=xg(r.endContainer,o),Bu(e,o,Cg));return Dg(a,t,i).map(function(e){return wg.deleteCellSelection(t,e)}).orThunk(function(){return Rg(a,t,i).bind(Og)})},Pg=function(e){var t;return(8===Nt(t=e)||"#comment"===St(t)?Bt:zt)(e).bind(Pg).orThunk(function(){return T.some(e)})},Lg=function(e,t){return X(t,Am),e.selection.setCursorLocation(t[0].dom,0),!0},Ig=function(e,t,n){t.deleteContents();var r,t=Pg(n).getOr(n),o=ht.fromDom(e.dom.getParent(t.dom,e.dom.isBlock));return xo(o)&&(Am(o),e.selection.setCursorLocation(o.dom,0)),Ct(n,o)||(e=Ot(o).is(n)?[]:Ot(r=o).map(Mt).map(function(e){return U(e,function(e){return!Ct(r,e)})}).getOr([]),X(e.concat(Mt(n)),function(e){Ct(e,o)||xt(e,o)||Zt(e)})),!0},Mg=function(e,t){return bg(e,!1,t),!0},Fg=function(n,e,r,t){return zg(e,t).fold(function(){return t=n,Bg(e,r).map(function(e){return e.fold(h(Mg,t),h(Lg,t),h(Ig,t))});var t},function(e){return jg(n,e)}).getOr(!1)},Ug=function(e,t){return H(Om(t,e),Fr)},zg=function(e,t){return H(Om(t,e),function(e){return"caption"===St(e)})},jg=function(e,t){return Am(t),e.selection.setCursorLocation(t.dom,0),T.some(!0)},Hg=function(a,u,s,c,l){return Qc(s,a.getBody(),l).bind(function(e){return r=s,o=l,i=e,rl((n=c).dom).bind(function(t){return ol(n.dom).map(function(e){return r?o.isEqual(t)&&i.isEqual(e):o.isEqual(e)&&i.isEqual(t)})}).getOr(!0)?jg(a,c):(t=c,zg(u,ht.fromDom(e.getNode())).map(function(e){return!1===Ct(e,t)}));var t,n,r,o,i}).or(T.some(!0))},Vg=function(r,o,i,e){var a=us.fromRangeStart(r.selection.getRng());return Ug(i,e).bind(function(e){return xo(e)?jg(r,e):(t=i,n=e,e=a,Qc(o,r.getBody(),e).bind(function(e){return Ug(t,ht.fromDom(e.getNode())).map(function(e){return!1===Ct(e,n)})}));var t,n}).getOr(!1)},qg=function(e,t){return(e?Sm:Nm)(t)},$g=function(i,a,r){var u=ht.fromDom(i.getBody());return zg(u,r).fold(function(){return Vg(i,a,u,r)||(e=i,t=a,n=us.fromRangeStart(e.selection.getRng()),qg(t,n)||Jc(t,e.getBody(),n).exists(function(e){return qg(t,e)}));var e,t,n},function(e){return t=i,n=a,r=u,o=e,e=us.fromRangeStart(t.selection.getRng()),(xo(o)?jg(t,o):Hg(t,r,n,o,e)).getOr(!1);var t,n,r,o})},Wg=function(e,t){var n,r=ht.fromDom(e.selection.getStart(!0)),o=rf(e);return e.selection.isCollapsed()&&0===o.length?$g(e,t,r):(n=e,o=r,t=ht.fromDom(n.getBody()),e=n.selection.getRng(),0!==(r=rf(n)).length?Lg(n,r):Fg(n,t,e,o))},Kg=function(i){var a=us.fromRangeStart(i),u=us.fromRangeEnd(i),s=i.commonAncestorContainer;return Jc(!1,s,u).map(function(e){return!wc(a,u,s)&&wc(a,e,s)?(t=a.container(),n=a.offset(),r=e.container(),o=e.offset(),(e=document.createRange()).setStart(t,n),e.setEnd(r,o),e):i;var t,n,r,o}).getOr(i)},Xg=function(e){return e.collapsed?e:Kg(e)},Yg=function(e,t){return e.getBlockElements()[t.name]&&((e=t).firstChild&&e.firstChild===e.lastChild)&&("br"===(t=t.firstChild).name||t.value===jr)},Gg=function(e,t){var n,r=t.firstChild,o=t.lastChild;return r&&"meta"===r.name&&(r=r.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),n=o,e=(t=e).getNonEmptyElements(),n&&(n.isEmpty(e)||Yg(t,n))&&(o=o.prev),!(!r||r!==o)&&("ul"===r.name||"ol"===r.name)},Jg=function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&((e=e.firstChild).data===jr||xn(e))},Qg=function(e){return 0<e.length&&(!(t=e[e.length-1]).firstChild||Jg(t))?e.slice(0,-1):e;var t},Zg=function(e,t){e=e.getParent(t,e.isBlock);return e&&"LI"===e.nodeName?e:null},ep=function(e,t){e=us.after(e),e=Wc(t).prev(e);return e?e.toRange():null},tp=function(t,e,n){var r=t.parentNode;return gt.each(e,function(e){r.insertBefore(e,t)}),function(e,t){e=us.before(e),e=Wc(t).next(e);return e?e.toRange():null}(t,n)},np=function(e,r,o,t){var n,i,a,u,s,c=function(e,t,n){t=t.serialize(n),n=e.createFragment(t);return t=(e=n).firstChild,n=e.lastChild,t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e}(r,e,t),l=Zg(r,o.startContainer),t=Qg((e=c.firstChild,gt.grep(e.childNodes,function(e){return"LI"===e.nodeName}))),c=r.getRoot(),e=function(e){var t=us.fromRangeStart(o),n=Wc(r.getRoot()),t=1===e?n.prev(t):n.next(t);return!t||Zg(r,t.getNode())!==l};return e(1)?tp(l,t,c):e(2)?(i=l,a=t,u=c,r.insertAfter(a.reverse(),i),ep(a[0],u)):(i=t,a=c,u=n=l,t=(c=t=o).cloneRange(),c=c.cloneRange(),t.setStartBefore(u),c.setEndAfter(u),c=[t.cloneContents(),c.cloneContents()],(s=n.parentNode).insertBefore(c[0],n),gt.each(i,function(e){s.insertBefore(e,n)}),s.insertBefore(c[1],n),s.removeChild(n),ep(i[i.length-1],a))},rp=n,op=function(n,e){var t,r=n.dom,o=n.selection;if(e){o.scrollIntoView(e);var i=function(e){for(var t=n.getBody();e&&e!==t;e=e.parentNode)if("false"===r.getContentEditable(e))return e;return null}(e);if(i)return r.remove(e),void o.select(i);var a=r.createRng(),i=e.previousSibling;i&&3===i.nodeType?(a.setStart(i,i.nodeValue.length),ct.ie||(u=e.nextSibling)&&3===u.nodeType&&(i.appendData(u.data),u.parentNode.removeChild(u))):(a.setStartBefore(e),a.setEndBefore(e));var u=r.getParent(e,r.isBlock);r.remove(e),u&&r.isEmpty(u)&&(n.$(u).empty(),a.setStart(u,0),a.setEnd(u,0),rp(u)||u.getAttribute("data-mce-fragment")||!(t=function(e){e=us.fromRangeStart(e);if(e=Wc(n.getBody()).next(e))return e.toRange()}(a))?r.add(u,r.create("br",{"data-mce-bogus":"1"})):(a=t,r.remove(u))),o.setRng(a)}},ip=function(e){var t=e.dom,n=Xg(e.selection.getRng());e.selection.setRng(n);var r,o,i=t.getParent(n.startContainer,rp);r=t,o=n,null!==(t=i)&&(t===r.getParent(o.endContainer,rp)&&uf(ht.fromDom(t),o))?Ig(e,n,ht.fromDom(i)):e.getDoc().execCommand("Delete",!1,null)},ap=function(e,t,n){var r,o,i,a=e.selection,u=e.dom;/^ | $/.test(t)&&(t=function(e,t,n){e=ht.fromDom(e.getRoot());return n=Jm(e,us.fromRangeStart(t))?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," "),n=Qm(e,us.fromRangeEnd(t))?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," ")}(u,a.getRng(),t));var s=e.parser,c=n.merge,l=sm({validate:e.getParam("validate")},e.schema),f='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>',d={content:t,format:"html",selection:!0,paste:n.paste};if((d=e.fire("BeforeSetContent",d)).isDefaultPrevented())e.fire("SetContent",{content:d.content,format:"html",selection:!0,paste:n.paste});else{-1===(t=d.content).indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,f);var m,g,p=(m=a.getRng()).startContainer||(m.parentElement?m.parentElement():null),h=e.getBody();p===h&&a.isCollapsed()&&u.isBlock(h.firstChild)&&(g=e,(p=h.firstChild)&&!g.schema.getShortEndedElements()[p.nodeName])&&u.isEmpty(h.firstChild)&&((m=u.createRng()).setStart(h.firstChild,0),m.setEnd(h.firstChild,0),a.setRng(m)),a.isCollapsed()||ip(e);var v,y,b,C,w,x,h={context:(v=a.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0},S=s.parse(t,h);if(!0===n.paste&&Gg(e.schema,S)&&!!Zg(u,v))return m=np(l,u,a.getRng(),S),a.setRng(m),void e.fire("SetContent",d);if(!function(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}(S),"mce_marker"===(i=S.lastChild).attr("id"))for(i=(o=i).prev;i;i=i.walk(!0))if(3===i.type||!u.isBlock(i.name)){e.schema.isValidChild(i.parent.name,"span")&&i.parent.insert(o,i,"br"===i.name);break}if(e._selectionOverrides.showBlockCaretContainer(v),h.invalid){for(e.selection.setContent(f),v=a.getNode(),r=e.getBody(),9===v.nodeType?v=i=r:i=v;i!==r;)i=(v=i).parentNode;t=v===r?r.innerHTML:u.getOuterHTML(v),t=l.serialize(s.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return l.serialize(S)}))),v===r?u.setHTML(r,t):u.setOuterHTML(v,t)}else t=l.serialize(S),h=e,y=t,"all"===(f=v).getAttribute("data-mce-bogus")?f.parentNode.insertBefore(h.dom.createFragment(y),f):(s=f.firstChild,t=f.lastChild,!s||s===t&&"BR"===s.nodeName?h.dom.setHTML(f,y):h.selection.setContent(y));y=c,w=(c=e).schema.getTextInlineElements(),x=c.dom,y&&(b=c.getBody(),C=im(x),gt.each(x.select("*[data-mce-fragment]"),function(e){if(V(w[e.nodeName.toLowerCase()])&&gm(x,e))for(var t=e.parentNode;V(t)&&t!==b;t=t.parentNode){if(pm(x,e,t))break;if(C.compare(t,e)){x.remove(e,!0);break}}})),op(e,u.get("mce_marker")),c=e.getBody(),gt.each(c.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")}),c=u,a=a.getStart(),T.from(c.getParent(a,"td,th")).map(ht.fromDom).each(Rm),e.fire("SetContent",d),e.addVisual()}},up=function(e,t){t(e),e.firstChild&&up(e.firstChild,t),e.next&&up(e.next,t)},sp=function(e,t,n){n=function(e,n,t){var r,o,i={},a={},u=[];for(r in t.firstChild&&up(t.firstChild,function(t){X(e,function(e){e.name===t.name&&(i[e.name]?i[e.name].nodes.push(t):i[e.name]={filter:e,nodes:[t]})}),X(n,function(e){"string"==typeof t.attr(e.name)&&(a[e.name]?a[e.name].nodes.push(t):a[e.name]={filter:e,nodes:[t]})})}),i)i.hasOwnProperty(r)&&u.push(i[r]);for(o in a)a.hasOwnProperty(o)&&u.push(a[o]);return u}(e,t,n);X(n,function(t){X(t.filter.callbacks,function(e){e(t.nodes,t.filter.name,{})})})},cp=function(e){return e instanceof Xd},lp=function(e,t){var n;e.dom.setHTML(e.getBody(),t),Md(n=e)&&rl(n.getBody()).each(function(e){var t=e.getNode(),e=hn(t)?rl(t).getOr(e):e;n.selection.setRng(e.toRange())})},fp=function(a,u,s){return s.format=s.format||"html",s.set=!0,s.content=cp(u)?"":u,s.no_events||a.fire("BeforeSetContent",s),cp(u)||(u=s.content),T.from(a.getBody()).fold(x(u),function(e){return cp(u)?function(e,t,n,r){sp(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var o=sm({validate:e.validate},e.schema).serialize(n);return r.content=Ur(ht.fromDom(t))?o:gt.trim(o),lp(e,r.content),r.no_events||e.fire("SetContent",r),n}(a,e,u,s):(t=a,n=e,o=s,0===(r=u).length||/^\s+$/.test(r)?(i='<br data-mce-bogus="1">',"TABLE"===n.nodeName?r="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(r="<li>"+i+"</li>"),r=(e=Bs(t))&&t.schema.isValidChild(n.nodeName.toLowerCase(),e.toLowerCase())?(r=i,t.dom.createHTML(e,Ps(t),r)):r||'<br data-mce-bogus="1">',lp(t,r),t.fire("SetContent",o)):("raw"!==o.format&&(r=sm({validate:t.validate},t.schema).serialize(t.parser.parse(r,{isRootContent:!0,insert:!0}))),o.content=Ur(ht.fromDom(n))?r:gt.trim(r),lp(t,o.content),o.no_events||t.fire("SetContent",o)),o.content);var t,n,r,o,i})},dp=function(e,t){return r=t,((e=(n=e).dom).parentNode?cr(ht.fromDom(e.parentNode),function(e){return!Ct(n,e)&&r(e)}):T.none()).isSome();var n,r},mp=function(e){return m(e)?e:E},gp=function(e,t,n){var r=t(e),o=mp(n);return r.orThunk(function(){return o(e)?T.none():function(e,t,n){for(var r=e.dom,o=mp(n);r.parentNode;){var r=r.parentNode,i=ht.fromDom(r),a=t(i);if(a.isSome())return a;if(o(i))break}return T.none()}(e,t,o)})},pp=_l,hp=function(e,t,n){var r=e.formatter.get(n);if(r)for(var o=0;o<r.length;o++)if(!1===r[o].inherit&&e.dom.is(t,r[o].selector))return!0;return!1},vp=function(t,e,n,r){var o=t.dom.getRoot();return e!==o&&(e=t.dom.getParent(e,function(e){return!!hp(t,e,n)||(e.parentNode===o||!!Cp(t,e,n,r,!0))}),Cp(t,e,n,r))},yp=function(e,t,n){return!!pp(t,n.inline)||(!!pp(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0))},bp=function(e,t,n,r,o,i){var a,u,s,c=n[r];if(n.onmatch)return n.onmatch(t,n,r);if(c)if("undefined"==typeof c.length){for(a in c)if(c.hasOwnProperty(a)){if(u="attributes"===r?e.getAttrib(t,a):Rl(e,t,a),o&&!u&&!n.exact)return;if((!o||n.exact)&&!pp(u,Al(e,kl(c[a],i),a)))return}}else for(s=0;s<c.length;s++)if("attributes"===r?e.getAttrib(t,c[s]):Rl(e,t,c[s]))return n;return n},Cp=function(e,t,n,r,o){var i,a,u,s,c=e.formatter.get(n),l=e.dom;if(c&&t)for(a=0;a<c.length;a++)if(i=c[a],yp(e.dom,t,i)&&bp(l,t,i,"attributes",o,r)&&bp(l,t,i,"styles",o,r)){if(s=i.classes)for(u=0;u<s.length;u++)if(!e.dom.hasClass(t,kl(s[u],r)))return;return i}},wp=function(e,t,n,r){if(r)return vp(e,r,t,n);if(r=e.selection.getNode(),vp(e,r,t,n))return!0;var o=e.selection.getStart();return!(o===r||!vp(e,o,t,n))},xp=function(n,r){var t=function(e){return Ct(e,ht.fromDom(n.getBody()))};return T.from(n.selection.getStart(!0)).bind(function(e){return gp(ht.fromDom(e),function(t){return function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return T.none()}(r,function(e){return e=e,Cp(n,t.dom,e)?T.some(e):T.none()})},t)}).getOrNull()},Sp=function(r,o,e){return j(e,function(e,t){var n=I(r.formatter.get(t),function(t){var n=function(e){return 1<e.length&&"%"===e.charAt(0)};return I(["styles","attributes"],function(e){return me(t,e).exists(function(e){e=b(e)?e:de(e);return I(e,n)})})});return r.formatter.matchNode(o,t,{},n)?e.concat([t]):e},[])},Np=Hr,Ep="_mce_caret",kp=function(e){return 0<function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==Np||1<e.childNodes.length)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t}(e).length},_p=function(e){if(e){var t=new kr(e,e);for(e=t.current();e;e=t.next())if(yn(e))return e}return null},Ap=function(e){var t=ht.fromTag("span");return Tn(t,{id:Ep,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Gt(t,ht.fromText(Np)),t},Rp=function(e,t,n){void 0===n&&(n=!0);var r,o,i,a,u,s=e.dom,c=e.selection;kp(t)?bg(e,!1,ht.fromDom(t),n):(r=c.getRng(),o=s.getParent(t,s.isBlock),i=r.startContainer,a=r.startOffset,u=r.endContainer,e=r.endOffset,n=function(e){e=_p(e);return e&&e.nodeValue.charAt(0)===Np&&e.deleteData(0,1),e}(t),s.remove(t,!0),i===n&&0<a&&r.setStart(n,a-1),u===n&&0<e&&r.setEnd(n,e-1),o&&s.isEmpty(o)&&Am(ht.fromDom(o)),c.setRng(r))},Tp=function(e,t,n){void 0===n&&(n=!0);var r=e.dom,o=e.selection;if(t)Rp(e,t,n);else if(!(t=ul(e.getBody(),o.getStart())))for(;t=r.get(Ep);)Rp(e,t,!1)},Dp=function(e,t){return e.appendChild(t),t},Op=function(e,t){t=z(e,function(e,t){return Dp(e,t.cloneNode(!1))},t);return Dp(t,t.ownerDocument.createTextNode(Np))},Bp=function(e,t,n,r){var o,i,a,u,s,c=e.dom,l=e.selection,f=[],d=l.getRng(),m=d.startContainer,g=d.startOffset,p=m;for(3===m.nodeType&&(g!==m.nodeValue.length&&(o=!0),p=p.parentNode);p;){if(Cp(e,p,t,n,r)){i=p;break}p.nextSibling&&(o=!0),f.push(p),p=p.parentNode}i&&(o?(s=l.getBookmark(),d.collapse(!0),u=Jl(e,d,e.formatter.get(t),!0),u=If(u),e.formatter.remove(t,n,u,r),l.moveToBookmark(s)):(a=ul(e.getBody(),i),g=Ap(!1).dom,m=g,d=null!==a?a:i,(u=(s=(u=e).dom).getParent(d,h(Sl,u)))&&s.isEmpty(u)?d.parentNode.replaceChild(m,d):(_m(ht.fromDom(d)),s.isEmpty(d)?d.parentNode.replaceChild(m,d):s.insertAfter(m,d)),d=function(t,e,n,r,o,i){var a=t.formatter,u=t.dom,s=U(re(a.get()),function(e){return e!==r&&!ze(e,"removeformat")}),s=Sp(t,n,s);if(0<U(s,function(e){return!Ol(t,e,r)}).length){n=n.cloneNode(!1);return u.add(e,n),a.remove(r,o,n,i),u.remove(n),T.some(n)}return T.none()}(e,g,i,t,n,r),g=Op(f.concat(d.toArray()),g),Rp(e,a,!1),l.setCursorLocation(g,1),c.isEmpty(i)&&c.remove(i)))},Pp=function(o){o.on("mouseup keydown",function(e){var t,n,r;t=o,n=e.keyCode,r=t.selection,e=t.getBody(),Tp(t,null,!1),8!==n&&46!==n||!r.isCollapsed()||r.getStart().innerHTML!==Np||Tp(t,ul(e,r.getStart())),37!==n&&39!==n||Tp(t,ul(e,r.getStart()))})},Lp=function(e,t){return e.schema.getTextInlineElements().hasOwnProperty(St(t))&&!al(t.dom)&&!pn(t.dom)},Ip={},Mp=be,Fp=ve;fm=function(e){var t,n=e.selection.getRng(),r=gn(["pre"]);n.collapsed||(t=e.selection.getSelectedBlocks(),Fp(Mp(Mp(t,r),function(e){return r(e.previousSibling)&&-1!==Ce(t,e.previousSibling)}),function(e){var t;t=e.previousSibling,Ha(e=e).remove(),Ha(t).append("<br><br>").append(e.childNodes)}))},Ip[lm="pre"]||(Ip[lm]=[]),Ip[lm].push(fm);var Up=gt.each,zp=function(e){return mn(e)&&!hl(e)&&!al(e)&&!pn(e)},jp=function(e,t){for(var n=e;n;n=n[t]){if(yn(n)&&0!==n.nodeValue.length)return e;if(mn(n)&&!hl(n))return n}return e},Hp=function(e,t,n){var r,o,i=im(e);if(t&&n&&(t=jp(t,"previousSibling"),n=jp(n,"nextSibling"),i.compare(t,n))){for(r=t.nextSibling;r&&r!==n;)r=(o=r).nextSibling,t.appendChild(o);return e.remove(n),gt.each(gt.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n},Vp=function(e,t,n,r){r&&!1!==t.merge_siblings&&(r=Hp(e,xl(r),r),Hp(e,r,xl(r,!0)))},qp=function(e,t,n){Up(e.childNodes,function(e){zp(e)&&(t(e)&&n(e),e.hasChildNodes()&&qp(e,t,n))})},$p=function(t,n){return function(e){return!(!e||!Rl(t,e,n))}},Wp=function(n,r,o){return function(e){var t;n.setStyle(e,r,o),""===e.getAttribute("style")&&e.removeAttribute("style"),t=n,"SPAN"===(e=e).nodeName&&0===t.getAttribs(e).length&&t.remove(e,!0)}},Kp=Ke([{keep:[]},{rename:["name"]},{removed:[]}]),Xp=/^(src|href|style)$/,Yp=gt.each,Gp=_l,Jp=function(e,t,n){return e.isChildOf(t,n)&&t!==n&&!e.isBlock(n)},Qp=function(e,t,n){var r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];return mn(r)&&(t=r.childNodes.length-1,!n&&o&&o--,r=r.childNodes[t<o?t:o]),yn(r)&&n&&o>=r.nodeValue.length&&(r=new kr(r,e.getBody()).next()||r),r=yn(r)&&!n&&0===o?new kr(r,e.getBody()).prev()||r:r},Zp=function(e,t){var n=t?"firstChild":"lastChild";if(/^(TR|TH|TD)$/.test(e.nodeName)&&e[n]){t=e[n];return"TR"===e.nodeName&&t[n]||t}return e},eh=function(e,t,n,r){r=e.create(n,r);return t.parentNode.insertBefore(r,t),r.appendChild(t),r},th=function(e,t,n,r,o){t=ht.fromDom(t),r=ht.fromDom(e.create(r,o)),o=(n?It:Lt)(t);return Jt(r,o),n?(Kt(t,r),Yt(r,t)):(Xt(t,r),Gt(r,t)),r.dom},nh=function(e,t,n,r){return!(t=xl(t,n,r))||"BR"===t.nodeName||e.isBlock(t)},rh=function(e,r,o,t,i){var n,a,u,s,c=e.dom;if(a=c,!(Gp(u=t,(s=r).inline)||Gp(u,s.block)||(s.selector?mn(u)&&a.is(u,s.selector):void 0)||(s=t,r.links&&"A"===s.nodeName)))return Kp.keep();var l,f,d,m,g=t;if(r.inline&&"all"===r.remove&&b(r.preserve_attributes)){var p=U(c.getAttribs(g),function(e){return L(r.preserve_attributes,e.name.toLowerCase())});if(c.removeAllAttribs(g),X(p,function(e){return c.setAttrib(g,e.name,e.value)}),0<p.length)return Kp.rename("span")}if("all"!==r.remove){Yp(r.styles,function(e,t){e=Al(c,kl(e,o),t+""),C(t)&&(t=e,i=null),!r.remove_similar&&i&&!Gp(Rl(c,i,t),e)||c.setStyle(g,t,""),n=!0}),n&&""===c.getAttrib(g,"style")&&(g.removeAttribute("style"),g.removeAttribute("data-mce-style")),Yp(r.attributes,function(e,t){var n;if(e=kl(e,o),C(t)&&(t=e,i=null),r.remove_similar||!i||Gp(c.getAttrib(i,t),e))if("class"===t&&(e=c.getAttrib(g,t))&&(n="",X(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(n+=(n?" ":"")+e)}),n))c.setAttrib(g,t,n);else{if(Xp.test(t)&&g.removeAttribute("data-mce-"+t),"style"===t&&gn(["li"])(g)&&"none"===c.getStyle(g,"list-style-type"))return g.removeAttribute(t),void c.setStyle(g,"list-style-type","none");"class"===t&&g.removeAttribute("className"),g.removeAttribute(t)}}),Yp(r.classes,function(e){e=kl(e,o),i&&!c.hasClass(i,e)||c.removeClass(g,e)});for(var h=c.getAttribs(g),v=0;v<h.length;v++){var y=h[v].nodeName;if(0!==y.indexOf("_")&&0!==y.indexOf("data-"))return Kp.keep()}}return"none"!==r.remove?(l=e,t=r,e=(p=g).parentNode,d=l.dom,m=Bs(l),t.block&&(m?e===d.getRoot()&&(t.list_block&&Gp(p,t.list_block)||X(ne(p.childNodes),function(e){Nl(l,m,e.nodeName.toLowerCase())?f?f.appendChild(e):(f=eh(d,e,m),d.setAttribs(f,l.settings.forced_root_block_attrs)):f=0})):d.isBlock(p)&&!d.isBlock(e)&&(nh(d,p,!1)||nh(d,p.firstChild,!0,!0)||p.insertBefore(d.create("br"),p.firstChild),nh(d,p,!0)||nh(d,p.lastChild,!1,!0)||p.appendChild(d.create("br")))),t.selector&&t.inline&&!Gp(t.inline,p)||d.remove(p,!0),Kp.removed()):Kp.keep()},oh=function(t,e,n,r,o){return rh(t,e,n,r,o).fold(E,function(e){return t.dom.rename(r,e),!0},k)},ih=function(e,t,n,r,o,i,a,u){var s,c,l=e.dom;if(n){for(var f=n.parentNode,d=r.parentNode;d&&d!==f;d=d.parentNode){for(var m=l.clone(d,!1),g=0;g<t.length&&null!==(m=function(t,e,n,r){return rh(t,e,n,r,r).fold(x(r),function(e){return t.dom.createFragment().appendChild(r),t.dom.rename(r,e)},x(null))}(e,t[g],u,m));g++);m&&(s&&m.appendChild(s),c=c||m,s=m)}!i||a.mixed&&l.isBlock(n)||(r=l.split(n,r)),s&&(o.parentNode.insertBefore(s,o),c.appendChild(o),a.inline&&Vp(l,a,0,s))}return r},ah=function(u,s,c,e,l){var t,f=u.formatter.get(s),d=f[0],a=!0,m=u.dom,n=u.selection,o=function(e){var n,r,o,i,a,t=(r=s,o=c,i=l,X(Dl((n=u).dom,e.parentNode).reverse(),function(e){var t;a||"_start"===e.id||"_end"===e.id||(t=Cp(n,e,r,o,i))&&!1!==t.split&&(a=e)}),a);return ih(u,f,t,e,e,!0,d,c)},g=function(e){var t,n,r=e.parentNode;yn(e)&&Il(m,r)&&oh(u,d,c,r,r),mn(e)&&m.getContentEditable(e)&&(t=a,a="true"===m.getContentEditable(e),n=!0);var o=ne(e.childNodes);if(a&&!n)for(var i=0;i<f.length&&!oh(u,f[i],c,e,e);i++);if(d.deep&&o.length){for(i=0;i<o.length;i++)g(o[i]);n&&(a=t)}},i=function(e){var t,n=m.get(e?"_start":"_end"),r=n[e?"firstChild":"lastChild"];return hl(t=r)&&mn(t)&&("_start"===t.id||"_end"===t.id)&&(r=r[e?"firstChild":"lastChild"]),yn(r)&&0===r.data.length&&(r=e?n.previousSibling||n.nextSibling:n.nextSibling||n.previousSibling),m.remove(n,!0),r},r=function(e){var t=Jl(u,e,f,e.collapsed);if(d.split){if(t=If(t),(r=Qp(u,t,!0))!==(e=Qp(u,t))){if(r=Zp(r,!0),e=Zp(e,!1),Jp(m,r,e)){var n=T.from(r.firstChild).getOr(r);return o(th(m,n,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void i(!0)}if(Jp(m,e,r)){n=T.from(e.lastChild).getOr(e);return o(th(m,n,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void i(!1)}var r=eh(m,r,"span",{id:"_start","data-mce-type":"bookmark"}),e=eh(m,e,"span",{id:"_end","data-mce-type":"bookmark"}),n=m.createRng();n.setStartAfter(r),n.setEndBefore(e),Zl(m,n,function(e){X(e,function(e){hl(e)||hl(e.parentNode)||o(e)})}),o(r),o(e),r=i(!0),e=i()}else r=e=o(r);t.startContainer=r.parentNode||r,t.startOffset=m.nodeIndex(r),t.endContainer=e.parentNode||e,t.endOffset=m.nodeIndex(e)+1}Zl(m,t,function(e){X(e,function(t){g(t);X(["underline","line-through","overline"],function(e){mn(t)&&u.dom.getStyle(t,"text-decoration")===e&&t.parentNode&&Tl(m,t.parentNode)===e&&oh(u,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:e}},null,t)})})})};if(e)Cl(e)?((t=m.createRng()).setStartBefore(e),t.setEndAfter(e),r(t)):r(e);else if("false"!==m.getContentEditable(n.getNode()))n.isCollapsed()&&d.inline&&!rf(u).length?Bp(u,s,c,l):(ff(n,!0,function(){lf(u,r)}),d.inline&&wp(u,s,c,n.getStart())&&wl(m,n,n.getRng()),u.nodeChanged());else{e=n.getNode();for(var p=0;p<f.length&&(!f[p].ceFalseOverride||!oh(u,f[p],c,e,e));p++);}},uh=gt.each,sh=function(i,e,a,u){uh(e,function(t){var r,e,n,o;uh(i.dom.select(t.inline,u),function(e){zp(e)&&oh(i,t,a,e,t.exact?e:null)}),r=i.dom,n=u,(e=t).clear_child_styles&&(o=e.links?"*:not(a)":"*",Up(r.select(o,n),function(n){zp(n)&&Up(e.styles,function(e,t){r.setStyle(n,t,"")})}))})},ch=gt.each,lh=pe,fh=function(y,b,C,r){var e,t,n,w=y.formatter.get(b),x=w[0],o=!r&&y.selection.isCollapsed(),i=y.dom,a=y.selection,S=function(n,e){var t;e=e||x,n&&(e.onformat&&e.onformat(n,e,C,r),ch(e.styles,function(e,t){i.setStyle(n,t,kl(e,C))}),!e.styles||(t=i.getAttrib(n,"style"))&&i.setAttrib(n,"data-mce-style",t),ch(e.attributes,function(e,t){i.setAttrib(n,t,kl(e,C))}),ch(e.classes,function(e){e=kl(e,C),i.hasClass(n,e)||i.addClass(n,e)}))},d=function(e,t){var n=!1;return!!Pl(x)&&(ch(e,function(e){if(!("collapsed"in e&&e.collapsed!==o))return i.is(t,e.selector)&&!al(t)?(S(t,e),!(n=!0)):void 0}),n)},u=function(h,e,t,s){var v=[],c=!0,l=x.inline||x.block,f=h.create(l);S(f),Zl(h,e,function(e){var a,u=function(e){var t=!1,n=c,r=e.nodeName.toLowerCase(),o=e.parentNode.nodeName.toLowerCase();if(mn(e)&&h.getContentEditable(e)&&(n=c,c="true"===h.getContentEditable(e),t=!0),xn(e)&&!function(e,t,n,r){if(e.getParam("format_empty_lines",!1,"boolean")&&Ll(t)){t=Ne(Ne({},e.schema.getTextBlockElements()),{td:{},th:{},li:{},dt:{},dd:{},figcaption:{},caption:{},details:{},summary:{}}),e=dp(ht.fromDom(n),function(e){return al(e.dom)});return pe(t,r)&&xo(ht.fromDom(n.parentNode),!1)&&!e}return!1}(y,x,e,o))return a=null,void(Bl(x)&&h.remove(e));if(x.wrapper&&Cp(y,e,b,C))a=null;else{if(c&&!t&&Bl(x)&&!x.wrapper&&Sl(y,r)&&Nl(y,o,l)){var i=h.rename(e,l);return S(i),v.push(i),void(a=null)}if(Pl(x)){i=d(w,e);if(yn(e)&&Il(h,e.parentNode)&&d(w,e.parentNode),!lh(x,"inline")||i)return void(a=null)}!c||t||!Nl(y,l,r)||!Nl(y,o,l)||!s&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||al(e)||lh(x,"inline")&&h.isBlock(e)?(a=null,ch(gt.grep(e.childNodes),u),t&&(c=n),a=null):(a||(a=h.clone(f,!1),e.parentNode.insertBefore(a,e),v.push(a)),a.appendChild(e))}};ch(e,u)}),!0===x.links&&ch(v,function(e){var t=function(e){"A"===e.nodeName&&S(e,x),ch(gt.grep(e.childNodes),t)};t(e)}),ch(v,function(e){var n,r,t,o,i,a,u,s,c,l,f,d,m,g=function(e){var n=!1;return ch(e.childNodes,function(e){if((t=e)&&1===t.nodeType&&!hl(t)&&!al(t)&&!pn(t))return n=e,!1;var t}),n},p=(n=0,ch(e.childNodes,function(e){var t;V(t=e)&&yn(t)&&0===t.length||hl(e)||n++}),n);!(1<v.length)&&h.isBlock(e)||0!==p?(Ll(x)||x.wrapper)&&(x.exact||1!==p||((m=g(f=e))&&!hl(m)&&yp(h,m,x)&&(d=h.clone(m,!1),S(d),h.replace(d,f,!0),h.remove(m,!0)),e=d||f),sh(y,w,C,e),u=x,s=b,c=C,Cp(a=y,(l=e).parentNode,s,c)&&oh(a,u,c,l)||u.merge_with_parents&&a.dom.getParent(l.parentNode,function(e){if(Cp(a,e,s,c))return oh(a,u,c,l),!0}),t=h,o=C,i=e,(p=x).styles&&p.styles.backgroundColor&&qp(i,$p(t,"fontSize"),Wp(t,"backgroundColor",kl(p.styles.backgroundColor,o))),r=h,t=e,p=function(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=Tl(r,e.parentNode),r.getStyle(e,"color")&&t?r.setStyle(e,"text-decoration",t):r.getStyle(e,"text-decoration")===t&&r.setStyle(e,"text-decoration",null))},(o=x).styles&&(o.styles.color||o.styles.textDecoration)&&(gt.walk(t,p,"childNodes"),p(t)),o=h,p=e,"sub"!==(t=x).inline&&"sup"!==t.inline||(qp(p,$p(o,"fontSize"),Wp(o,"fontSize","")),o.remove(o.select("sup"===t.inline?"sub":"sup",p),!0)),Vp(h,x,0,e)):h.remove(e,!0)})};if("false"!==i.getContentEditable(a.getNode()))x&&(r?Cl(r)?d(w,r)||((t=i.createRng()).setStartBefore(r),t.setEndAfter(r),u(i,Jl(y,t,w),0,!0)):u(i,r,0,!0):o&&Ll(x)&&!rf(y).length?function(e,t,n){var r,o=e.selection,i=o.getRng(),a=i.startOffset,u=i.startContainer.nodeValue,s=ul(e.getBody(),o.getStart());s&&(r=_p(s));var c,l,f=/[^\s\u00a0\u00ad\u200b\ufeff]/;u&&0<a&&a<u.length&&f.test(u.charAt(a))&&f.test(u.charAt(a-1))?(l=o.getBookmark(),i.collapse(!0),c=Jl(e,i,e.formatter.get(t)),c=If(c),e.formatter.apply(t,n,c),o.moveToBookmark(l)):(s&&r.nodeValue===Np||(c=e.getDoc(),l=Ap(!0).dom,r=(s=c.importNode(l,!0)).firstChild,i.insertNode(s),a=1),e.formatter.apply(t,n,s),o.setCursorLocation(r,a))}(y,b,C):(e=a.getNode(),t=w[0],y.settings.forced_root_block||!t.defaultBlock||i.getParent(e,i.isBlock)||fh(y,t.defaultBlock),a.setRng(Xg(a.getRng())),ff(a,!0,function(e){lf(y,function(e,t){e=t?e:Jl(y,e,w);u(i,e)})}),wl(i,a,a.getRng()),y.nodeChanged()),n=y,Fp(Ip[b],function(e){e(n)}));else{r=a.getNode();for(var s=0,c=w.length;s<c;s++){var l=w[s];if(l.ceFalseOverride&&Pl(l)&&i.is(r,l.selector))return void S(r,l)}}},dh=function(r,e,t,n){var o=re(t.get()),i={},a={},u=U(Dl(r.dom,e),function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")});ie(n,function(e,n){gt.each(u,function(t){return r.formatter.matchNode(t,n,{},e.similar)?(-1===o.indexOf(n)&&(X(e.callbacks,function(e){e(!0,{node:t,format:n,parents:u})}),i[n]=e.callbacks),a[n]=e.callbacks,!1):!hp(r,t,n)&&void 0})});e=mh(t.get(),a,e,u);t.set(Ne(Ne({},i),e))},mh=function(e,n,r,o){return le(e,function(e,t){return!!ge(n,t)||(X(e,function(e){e(!1,{node:r,format:t,parents:o})}),!1)}).t},gh=function(e,o,i,a,t){var n,r,u,s,c,l;return null===o.get()&&(r=e,u=tu({}),(n=o).set({}),r.on("NodeChange",function(e){dh(r,e.element,u,n.get())})),e=i,s=a,c=t,l=(t=o).get(),X(e.split(","),function(e){l[e]||(l[e]={similar:c,callbacks:[]}),l[e].callbacks.push(s)}),t.set(l),{unbind:function(){return t=i,n=a,r=(e=o).get(),X(t.split(","),function(e){r[e].callbacks=U(r[e].callbacks,function(e){return e!==n}),0===r[e].callbacks.length&&delete r[e]}),void e.set(r);var e,t,n,r}}},ph=function(e,t){var n=(t||document).createDocumentFragment();return X(e,function(e){n.appendChild(e.dom)}),ht.fromDom(n)},hh=function(e,t,n){return{element:e,width:t,rows:n}},vh=function(e,t){return{element:e,cells:t}},yh=function(e,t){t=parseInt(Dn(e,t),10);return isNaN(t)?1:t},bh=function(e){return j(e,function(e,t){return t.cells.length>e?t.cells.length:e},0)},Ch=function(e,t){for(var n=e.rows,r=0;r<n.length;r++)for(var o=n[r].cells,i=0;i<o.length;i++)if(Ct(o[i],t))return T.some({x:i,y:r});return T.none()},wh=function(e,t,n,r,o){for(var i=[],a=e.rows,u=n;u<=o;u++){var s=a[u].cells,s=t<r?s.slice(t,r+1):s.slice(r,t+1);i.push(vh(a[u].element,s))}return i},xh=function(e){var o=hh(Ru(e),0,[]);return X(vu(e,"tr"),function(n,r){X(vu(n,"td,th"),function(e,t){!function(e,t,n,r,o){for(var i=yh(o,"rowspan"),a=yh(o,"colspan"),u=e.rows,s=n;s<n+i;s++){u[s]||(u[s]=vh(Tu(r),[]));for(var c=t;c<t+a;c++)u[s].cells[c]=s===n&&c===t?o:Ru(o)}}(o,function(e,t,n){for(;function(e,t,n){e=e.rows;return!!(e[n]?e[n].cells:[])[t]}(e,t,n);)t++;return t}(o,t,r),r,n,e)})}),hh(o.element,bh(o.rows),o.rows)},Sh=function(e){return n=M((t=e).rows,function(e){var t=M(e.cells,function(e){e=Tu(e);return Bn(e,"colspan"),Bn(e,"rowspan"),e}),e=Ru(e.element);return Jt(e,t),e}),e=Ru(t.element),t=ht.fromTag("tbody"),Jt(t,n),Gt(e,t),e;var t,n},Nh=function(a,e,t){return Ch(a,e).bind(function(i){return Ch(a,t).map(function(e){return t=a,r=e,o=(n=i).x,e=n.y,n=r.x,r=r.y,e=e<r?wh(t,o,e,n,r):wh(t,o,r,n,e),hh(t.element,bh(e),e);var t,n,r,o})})},Eh=function(t,n){return H(t,function(e){return"li"===St(e)&&uf(e,n)}).fold(x([]),function(e){return H(t,function(e){return"ul"===St(e)||"ol"===St(e)}).map(function(e){var t=ht.fromTag(St(e)),e=fe(Fn(e),function(e,t){return je(t,"list-style")});return Pn(t,e),[ht.fromTag("li"),t]}).getOr([])})},kh=function(e,t){var n,r=ht.fromDom(t.commonAncestorContainer),o=Om(r,e),e=U(o,function(e){return Or(e)||Tr(e)}),t=Eh(o,t),r=e.concat(t.length?t:Ir(n=r)?Ot(n).filter(Lr).fold(x([]),function(e){return[n,e]}):Lr(n)?[n]:[]);return M(r,Ru)},_h=function(){return ph([])},Ah=function(e,t){return function(e,t){e=j(t,function(e,t){return Gt(t,e),t},e);return 0<t.length?ph([e]):e}(ht.fromDom(t.cloneContents()),kh(e,t))},Rh=function(e,r){return t=r[0],lr(t,"table",h(Ct,e)).bind(function(e){var t=r[0],n=r[r.length-1],e=xh(e);return Nh(e,t,n).map(function(e){return ph([Sh(e)])})}).getOrThunk(_h);var t},Th=function(e,t){var n=nf(t,e);return 0<n.length?Rh(e,n):(e=e,0<(t=t).length&&t[0].collapsed?_h():Ah(e,t[0]))},Dh=function(e,t){return 0<=t&&t<e.length&&yl(e.charAt(t))},Oh=function(e,t){e=qr(e.innerText);return t?e.replace(/^[ \f\n\r\t\v]+/,""):e},Bh=function(e,t,n){if((n=void 0===n?{}:n).get=!0,n.format=t,n.selection=!0,(n=e.fire("BeforeGetContent",n)).isDefaultPrevented())return e.fire("GetContent",n),n.content;if("text"===n.format)return u=e,T.from(u.selection.getRng()).map(function(e){var t=T.from(u.dom.getParent(e.commonAncestorContainer,u.dom.isBlock)),n=u.getBody(),r=t.map(function(e){return e.nodeName}).getOr("div").toLowerCase(),o=ct.browser.isIE()&&"pre"!==r,i=u.dom.add(n,r,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},e.cloneContents()),r=Oh(i,o),e=qr(i.textContent);if(u.dom.remove(i),Dh(e,0)||Dh(e,e.length-1)){n=t.getOr(n),n=Oh(n,o),o=n.indexOf(r);return-1===o?r:(Dh(n,o-1)?" ":"")+r+(Dh(n,o+r.length)?" ":"")}return r}).getOr("");n.getInner=!0;var r,o,i,a,u,o=(o=n,i=(r=e).selection.getRng(),a=r.dom.create("body"),t=r.selection.getSel(),t=qd(r,ef(t)),(i=o.contextual?Th(ht.fromDom(r.getBody()),t).dom:i.cloneContents())&&a.appendChild(i),r.selection.serializer.serialize(a,o));return"tree"===n.format?o:(n.content=e.selection.isCollapsed()?"":o,e.fire("GetContent",n),n.content)},Ph=function(e){return mn(e)?e.outerHTML:yn(e)?zo.encodeRaw(e.data,!1):bn(e)?"\x3c!--"+e.data+"--\x3e":""},Lh=function(e,t,n){t=function(e){var t,n=document.createElement("div"),r=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)r.appendChild(t);return r}(t);e.hasChildNodes()&&n<e.childNodes.length?(n=e.childNodes[n]).parentNode.insertBefore(t,n):e.appendChild(t)},Ih=function(e,n){var r=0;X(e,function(e){var t;0===e[0]?r++:1===e[0]?(Lh(n,e[1],r),r++):2===e[0]&&(t=r,(e=n).hasChildNodes()&&t<e.childNodes.length&&(t=e.childNodes[t]).parentNode.removeChild(t))})},Mh=function(e,t){var m,g,p,h,c,v,l,n=M(ne(t.childNodes),Ph);return Ih((g=e,n=(m=n).length+g.length+2,p=new Array(n),h=new Array(n),c=function(e,t,n,r,o){var i=l(e,t,n,r);if(null===i||i.start===t&&i.diag===t-r||i.end===e&&i.diag===e-n)for(var a=e,u=n;a<t||u<r;)a<t&&u<r&&m[a]===g[u]?(o.push([0,m[a]]),++a,++u):r-n<t-e?(o.push([2,m[a]]),++a):(o.push([1,g[u]]),++u);else{c(e,i.start,n,i.start-i.diag,o);for(var s=i.start;s<i.end;++s)o.push([0,m[s]]);c(i.end,t,i.end-i.diag,r,o)}},v=function(e,t,n,r){for(var o=e;o-t<r&&o<n&&m[o]===g[o-t];)++o;return{start:e,end:o,diag:t}},l=function(e,t,n,r){var o=t-e,i=r-n;if(0==o||0==i)return null;var a,u,s,c,l,f=o-i,o=i+o,d=(o%2==0?o:1+o)/2;for(p[1+d]=e,h[1+d]=t+1,a=0;a<=d;++a){for(u=-a;u<=a;u+=2){for(s=u+d,u===-a||u!==a&&p[s-1]<p[s+1]?p[s]=p[s+1]:p[s]=p[s-1]+1,l=(c=p[s])-e+n-u;c<t&&l<r&&m[c]===g[l];)p[s]=++c,++l;if(f%2!=0&&f-a<=u&&u<=f+a&&h[s-f]<=p[s])return v(h[s-f],u+e-n,t,r)}for(u=f-a;u<=f+a;u+=2){for(s=u+d-f,u===f-a||u!==f+a&&h[s+1]<=h[s-1]?h[s]=h[s+1]-1:h[s]=h[s-1],l=(c=h[s]-1)-e+n-u;e<=c&&n<=l&&m[c]===g[l];)h[s]=c--,l--;if(f%2==0&&-a<=u&&u<=a&&h[s]<=p[s+f])return v(h[s],u+e-n,t,r)}}},n=[],c(0,m.length,0,g.length,n),n),t),t},Fh=tu(T.none()),Uh=function(t){var e=(n=t.getBody(),U(M(ne(n.childNodes),Ph),function(e){return 0<e.length})),n=$(e,function(e){e=tm(t.serializer,e);return 0<e.length?[e]:[]}),e=n.join("");return-1!==e.indexOf("</iframe>")?{type:"fragmented",fragments:n,content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},zh=function(e,t,n){"fragmented"===t.type?Mh(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)},jh=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},Hh=function(e){var t=ht.fromTag("body",Fh.get().getOrThunk(function(){var e=document.implementation.createHTMLDocument("undo");return Fh.set(T.some(e)),e}));return _u(t,jh(e)),X(vu(t,"*[data-mce-bogus]"),en),t.dom.innerHTML},Vh=function(e,t){return!(!e||!t)&&(n=t,jh(e)===jh(n)||(t=t,Hh(e)===Hh(t)));var n},qh=function(e){return 0===e.get()},$h=function(e,t,n){qh(n)&&(e.typing=t)},Wh=function(e,t){e.typing&&($h(e,!1,t),e.add())},Kh=function(s){return{undoManager:{beforeChange:function(e,t){var n;n=s,t=t,qh(e)&&t.set(T.some(Rs(n.selection)))},addUndoLevel:function(e,t,n,r,o,i){return function(e,t,n,r,o,i,a){var u=Uh(e);if(i=gt.extend(i=i||{},u),!1===qh(r)||e.removed)return null;r=t.data[n.get()];if(e.fire("BeforeAddUndo",{level:i,lastLevel:r,originalEvent:a}).isDefaultPrevented())return null;if(r&&Vh(r,i))return null;t.data[n.get()]&&o.get().each(function(e){t.data[n.get()].beforeBookmark=e});o=e.getParam("custom_undo_redo_levels",0,"number");if(o&&t.data.length>o){for(var s=0;s<t.data.length-1;s++)t.data[s]=t.data[s+1];t.data.length--,n.set(t.data.length)}i.bookmark=Rs(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(i),n.set(t.data.length-1);a={level:i,lastLevel:r,originalEvent:a};return 0<n.get()?(e.setDirty(!0),e.fire("AddUndo",a),e.fire("change",a)):e.fire("AddUndo",a),i}(s,e,t,n,r,o,i)},undo:function(e,t,n){return r=s,t=t,n=n,(e=e).typing&&(e.add(),e.typing=!1,$h(e,!1,t)),0<n.get()&&(n.set(n.get()-1),o=e.data[n.get()],zh(r,o,!0),r.setDirty(!0),r.fire("Undo",{level:o})),o;var r,o},redo:function(e,t){return n=s,t=t,(e=e).get()<t.length-1&&(e.set(e.get()+1),r=t[e.get()],zh(n,r,!1),n.setDirty(!0),n.fire("Redo",{level:r})),r;var n,r},clear:function(e,t){return n=s,t=t,(e=e).data=[],t.set(0),e.typing=!1,void n.fire("ClearUndos");var n},reset:function(e){(e=e).clear(),e.add()},hasUndo:function(e,t){return n=s,e=e,0<t.get()||e.typing&&e.data[0]&&!Vh(Uh(n),e.data[0]);var n},hasRedo:function(e,t){return e=e,t.get()<e.data.length-1&&!e.typing},transact:function(e,t,n){return n=n,Wh(e=e,t),e.beforeChange(),e.ignore(n),e.add()},ignore:function(e,t){try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},extra:function(e,t,n,r){var o,i;o=s,i=t,t=n,n=r,(r=e).transact(t)&&(e=r.data[i.get()].bookmark,t=r.data[i.get()-1],zh(o,t,!0),r.transact(n)&&(r.data[i.get()-1].beforeBookmark=e))}},formatter:{match:function(e,t,n){return wp(s,e,t,n)},matchAll:function(e,t){return o=e,i=t,a=[],u={},t=(r=s).selection.getStart(),r.dom.getParent(t,function(e){for(var t=0;t<o.length;t++){var n=o[t];!u[n]&&Cp(r,e,n,i)&&(u[n]=!0,a.push(n))}},r.dom.getRoot()),a;var r,o,i,a,u},matchNode:function(e,t,n,r){return Cp(s,e,t,n,r)},canApply:function(e){return function(e,t){var n,r,o,i,a=e.formatter.get(t),u=e.dom;if(a)for(e=e.selection.getStart(),n=Dl(u,e),o=a.length-1;0<=o;o--){if(!(i=a[o].selector)||a[o].defaultBlock)return!0;for(r=n.length-1;0<=r;r--)if(u.is(n[r],i))return!0}return!1}(s,e)},closest:function(e){return xp(s,e)},apply:function(e,t,n){return fh(s,e,t,n)},remove:function(e,t,n,r){return ah(s,e,t,n,r)},toggle:function(e,t,n){var r,o;r=e,o=t,e=n,n=(t=s).formatter.get(r),(!wp(t,r,o,e)||"toggle"in n[0]&&!n[0].toggle?fh:ah)(t,r,o,e)},formatChanged:function(e,t,n,r){return gh(s,e,t,n,r)}},editor:{getContent:function(e,t){return n=s,r=e,o=t,T.from(n.getBody()).fold(x("tree"===r.format?new Xd("body",11):""),function(e){return rm(n,r,o,e)});var n,r,o},setContent:function(e,t){return fp(s,e,t)},insertContent:function(e,t){return ap(s,e,t)},addVisual:function(e){return t=e,o=(r=s).dom,e=V(t)?t:r.getBody(),d(r.hasVisual)&&(r.hasVisual=r.getParam("visual",!0,"boolean")),X(o.select("table,a",e),function(e){switch(e.nodeName){case"TABLE":var t=r.getParam("visual_table_class","mce-item-table","string"),n=o.getAttrib(e,"border");n&&"0"!==n||!r.hasVisual?o.removeClass(e,t):o.addClass(e,t);break;case"A":o.getAttrib(e,"href")||(n=o.getAttrib(e,"name")||e.id,t=r.getParam("visual_anchor_class","mce-item-anchor","string"),n&&r.hasVisual?o.addClass(e,t):o.removeClass(e,t))}}),void r.fire("VisualAid",{element:t,hasVisual:r.hasVisual});var r,t,o}},selection:{getContent:function(e,t){return Bh(s,e,t)}},raw:{getModel:function(){return T.none()}}}},Xh=function(e){return ge(e.plugins,"rtc")},Yh=function(e){var s=e;return me(e.plugins,"rtc").bind(function(e){return T.from(e.setup)}).fold(function(){return s.rtcInstance=Kh(e),T.none()},function(e){return T.some(e().then(function(e){var o,t,i,a,n,r,u;return s.rtcInstance=(o=function(e){return w(e)?e:{}},t=y("Unimplemented feature for rtc"),i=e.undoManager,a=e.formatter,n=e.editor,r=e.selection,u=e.raw,{undoManager:{beforeChange:ee,addUndoLevel:t,undo:function(){return i.undo()},redo:function(){return i.redo()},clear:function(){return i.clear()},reset:function(){return i.reset()},hasUndo:function(){return i.hasUndo()},hasRedo:function(){return i.hasRedo()},transact:function(e,t,n){return i.transact(n)},ignore:function(e,t){return i.ignore(t)},extra:function(e,t,n,r){return i.extra(n,r)}},formatter:{match:function(e,t,n){return a.match(e,o(t))},matchAll:t,matchNode:t,canApply:function(e){return a.canApply(e)},closest:function(e){return a.closest(e)},apply:function(e,t,n){return a.apply(e,o(t))},remove:function(e,t,n,r){return a.remove(e,o(t))},toggle:function(e,t,n){return a.toggle(e,o(t))},formatChanged:function(e,t,n,r){return a.formatChanged(t,n,r)}},editor:{getContent:function(e,t){return n.getContent(e)},setContent:function(e,t){return n.setContent(e,t)},insertContent:function(e,t){return n.insertContent(e)},addVisual:ee},selection:{getContent:function(e,t){return r.getContent(t)}},raw:{getModel:function(){return T.some(u.getRawModel())}}}),e.rtc.isRemote},function(e){var t,n;return s.rtcInstance=(t=x(null),n=x(""),{undoManager:{beforeChange:ee,addUndoLevel:t,undo:t,redo:t,clear:ee,reset:ee,hasUndo:E,hasRedo:E,transact:t,ignore:ee,extra:ee},formatter:{match:E,matchAll:x([]),matchNode:E,canApply:E,closest:n,apply:ee,remove:ee,toggle:ee,formatChanged:x({unbind:ee})},editor:{getContent:n,setContent:n,insertContent:ee,addVisual:ee},selection:{getContent:n},raw:{getModel:x(T.none())}}),mr.reject(e)}))})},Gh=function(e){return e.rtcInstance||Kh(e)},Jh=function(e){e=e.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},Qh=function(e,t){var n=(t=void 0===t?{}:t).format||"html";return n=n,t=t,Jh(e).selection.getContent(n,t)},Zh=function(e){return 0===e.dom.length?(Zt(e),T.none()):T.some(e)},ev=function(e,t,a,u){e.bind(function(i){return(u?ug:ag)(i.dom,u?i.dom.length:0),t.filter(kt).map(function(e){var t,n,r,o;n=e,r=a,o=u,e=(t=i).dom,t=n.dom,n=(o?e:t).length,o?(sg(e,t,!1,!o),r.setStart(t,n)):(sg(t,e,!1,!o),r.setEnd(t,n))})}).orThunk(function(){var e;return(e=u,t.filter(function(e){return bf.isBookmarkNode(e.dom)}).bind(e?Pt:Bt).or(t).filter(kt)).map(function(e){var n,r;r=u,Ot(n=e).each(function(e){var t=n.dom;r&&Jm(e,us(t,0))?ag(t,0):!r&&Qm(e,us(t,t.length))&&ug(t,t.length)})})})},tv=function(e,t,n){var r,t=(r=t,Ne(Ne({format:"html"},n=void 0===n?{}:n),{set:!0,selection:!0,content:r}));t.no_events||!(t=e.fire("BeforeSetContent",t)).isDefaultPrevented()?(n.content=function(e,t){if("raw"===t.format)return t.content;var n=e.selection.getRng(),n=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),n=n?{context:n.nodeName.toLowerCase()}:{},t=e.parser.parse(t.content,Ne(Ne({isRootContent:!0,forced_root_block:!1},n),t));return sm({validate:e.validate},e.schema).serialize(t)}(e,t),function(e,t){var n=T.from(t.firstChild).map(ht.fromDom),r=T.from(t.lastChild).map(ht.fromDom);e.deleteContents(),e.insertNode(t);var o=n.bind(Bt).filter(kt).bind(Zh),t=r.bind(Pt).filter(kt).bind(Zh);ev(o,n,e,!0),ev(t,r,e,!1),e.collapse(!1)}(r=e.selection.getRng(),r.createContextualFragment(n.content)),e.selection.setRng(r),sd(e,r),t.no_events||e.fire("SetContent",t)):e.fire("SetContent",t)},nv=function(e,t,n){var r;e&&e.hasOwnProperty(t)&&(0===(r=U(e[t],function(e){return e!==n})).length?delete e[t]:e[t]=r)};var rv,ov,iv=function(e){return!!e.select},av=function(e){return!(!e||!e.ownerDocument)&&xt(ht.fromDom(e.ownerDocument),ht.fromDom(e))},uv=function(a,u,e,s){var c,l,i,n,f,d,r=function(e,t){return f||(f={},d={},n.on("NodeChange",function(e){var n=e.element,r=i.getParents(n,null,i.getRoot()),o={};gt.each(f,function(e,n){gt.each(r,function(t){if(i.is(t,n))return d[n]||(gt.each(e,function(e){e(!0,{node:t,selector:n,parents:r})}),d[n]=e),o[n]=e,!1})}),gt.each(d,function(e,t){o[t]||(delete d[t],gt.each(e,function(e){e(!1,{node:n,selector:t,parents:r})}))})})),f[e]||(f[e]=[]),f[e].push(t),{unbind:function(){nv(f,e,t),nv(d,e,t)}}},t=function(e,t){return tv(s,e,t)},o=function(e){var t=g();t.collapse(!!e),p(t)},m=function(){return u.getSelection?u.getSelection():u.document.selection},g=function(){var e,t,n=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(r){return-1}},r=u.document;if(s.bookmark!==undefined&&!1===Md(s)){var o=Nd(s);if(o.isSome())return o.map(function(e){return qd(s,[e])[0]}).getOr(r.createRange())}try{(e=m())&&!dn(e.anchorNode)&&(t=0<e.rangeCount?e.getRangeAt(0):(e.createRange?e:r).createRange(),t=qd(s,[t])[0])}catch(i){}return(t=t||(r.createRange?r.createRange():r.body.createTextRange())).setStart&&9===t.startContainer.nodeType&&t.collapsed&&(r=a.getRoot(),t.setStart(r,0),t.setEnd(r,0)),c&&l&&(0===n(t.START_TO_START,t,c)&&0===n(t.END_TO_END,t,c)?t=l:l=c=null),t},p=function(e,t){var n;if((r=e)&&(!!iv(r)||av(r.startContainer)&&av(r.endContainer))){var r=iv(e)?e:null;if(r){l=null;try{r.select()}catch(o){}}else{r=m();if(e=s.fire("SetSelectionRange",{range:e,forward:t}).range,r){l=e;try{r.removeAllRanges(),r.addRange(e)}catch(o){}!1===t&&r.extend&&(r.collapse(e.endContainer,e.endOffset),r.extend(e.startContainer,e.startOffset)),c=0<r.rangeCount?r.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!r.setBaseAndExtent||ct.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(n=e.startContainer.childNodes[e.startOffset])&&"IMG"===n.tagName&&(r.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),r.anchorNode===e.startContainer&&r.focusNode===e.endContainer||r.setBaseAndExtent(n,0,n,1)),s.fire("AfterSetSelectionRange",{range:e,forward:t})}}},h=function(){var e=m(),t=null==e?void 0:e.anchorNode,n=null==e?void 0:e.focusNode;if(!e||!t||!n||dn(t)||dn(n))return!0;var r=a.createRng();r.setStart(t,e.anchorOffset),r.collapse(!0);t=a.createRng();return t.setStart(n,e.focusOffset),t.collapse(!0),r.compareBoundaryPoints(r.START_TO_START,t)<=0},v={bookmarkManager:null,controlSelection:null,dom:i=a,win:u,serializer:e,editor:n=s,collapse:o,setCursorLocation:function(e,t){var n=a.createRng();V(e)&&V(t)?(n.setStart(e,t),n.setEnd(e,t),p(n),o(!1)):(sf(a,n,s.getBody(),!0),p(n))},getContent:function(e){return Qh(s,e)},setContent:t,getBookmark:function(e,t){return y.getBookmark(e,t)},moveToBookmark:function(e){return y.moveToBookmark(e)},select:function(e,t){var r,o;return r=a,o=t,T.from(e).map(function(e){var t=r.nodeIndex(e),n=r.createRng();return n.setStart(e.parentNode,t),n.setEnd(e.parentNode,t+1),o&&(sf(r,n,e,!0),sf(r,n,e,!1)),n}).each(p),e},isCollapsed:function(){var e=g(),t=m();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:h,setNode:function(e){return t(a.getOuterHTML(e)),e},getNode:function(){return function(e,t){if(!t)return e;var n=t.startContainer,r=t.endContainer,o=t.startOffset,i=t.endOffset,e=t.commonAncestorContainer;return!t.collapsed&&(n===r&&i-o<2&&n.hasChildNodes()&&(e=n.childNodes[o]),3===n.nodeType&&3===r.nodeType&&(n=n.length===o?Vd(n.nextSibling,!0):n.parentNode,r=0===i?Vd(r.previousSibling,!1):r.parentNode,n&&n===r))?n:e&&3===e.nodeType?e.parentNode:e}(s.getBody(),g())},getSel:m,setRng:p,getRng:g,getStart:function(e){return jd(s.getBody(),g(),e)},getEnd:function(e){return Hd(s.getBody(),g(),e)},getSelectedBlocks:function(e,t){return function(e,t,n,r){var o=[],i=e.getRoot();if(n=e.getParent(n||jd(i,t,t.collapsed),e.isBlock),r=e.getParent(r||Hd(i,t,t.collapsed),e.isBlock),n&&n!==i&&o.push(n),n&&r&&n!==r)for(var a,u=new kr(n,i);(a=u.next())&&a!==r;)e.isBlock(a)&&o.push(a);return r&&n!==r&&r!==i&&o.push(r),o}(a,g(),e,t)},normalize:function(){var e=g(),t=m();if(1<ef(t).length||!cf(s))return e;t=Pf(a,e);return t.each(function(e){p(e,h())}),t.getOr(e)},selectorChanged:function(e,t){return r(e,t),v},selectorChangedWithUnbind:r,getScrollContainer:function(){for(var e,t=a.getRoot();t&&"BODY"!==t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e,t){(s.inline?id:ud)(s,e,t)},placeCaretAt:function(e,t){return p(_f(e,t,s.getDoc()))},getBoundingClientRect:function(){var e=g();return e.collapsed?us.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){u=c=l=null,b.destroy()}},y=bf(v),b=Ef(v,s);return v.bookmarkManager=y,v.controlSelection=b,v},sv=function(e,a,u){e.addNodeFilter("font",function(e){X(e,function(e){var t,n=a.parse(e.attr("style")),r=e.attr("color"),o=e.attr("face"),i=e.attr("size");r&&(n.color=r),o&&(n["font-family"]=o),i&&(n["font-size"]=u[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",a.serialize(n)),t=e,X(["color","face","size"],function(e){t.attr(e,null)})})})},cv=function(e,t){var n,r=Qo();t.convert_fonts_to_spans&&sv(e,r,gt.explode(t.font_size_legacy_values)),n=r,e.addNodeFilter("strike",function(e){X(e,function(e){var t=n.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",n.serialize(t))})})},lv=function(e){var t,n=decodeURIComponent(e).split(","),e=/data:([^;]+)/.exec(n[0]);return{type:t=e?e[1]:t,data:n[1]}},fv=function(e,t){var n;try{n=atob(t)}catch(LS){return T.none()}for(var r=new Uint8Array(n.length),o=0;o<r.length;o++)r[o]=n.charCodeAt(o);return T.some(new Blob([r],{type:e}))},dv=function(e){return 0===e.indexOf("blob:")?(i=e,new mr(function(e,t){var n=function(){t("Cannot convert "+i+" to Blob. Resource might not exist or is inaccessible.")};try{var r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType="blob",r.onload=function(){200===r.status?e(r.response):n()},r.onerror=n,r.send()}catch(o){n()}})):0===e.indexOf("data:")?(r=e,new mr(function(e){var t=lv(r),n=t.type,t=t.data;fv(n,t).fold(function(){return e(new Blob([]))},e)})):null;var i,r},mv=0,gv=function(e){return(e||"blobid")+mv++},pv=function(r,o,i,t){var e,n,a,u;0!==o.src.indexOf("blob:")?(e=(n=lv(o.src)).data,n=n.type,(u=r.getByData(a=e,n))?i({image:o,blobInfo:u}):dv(o.src).then(function(e){u=r.create(gv(),e,a),r.add(u),i({image:o,blobInfo:u})},function(e){t(e)})):(u=r.getByUri(o.src))?i({image:o,blobInfo:u}):dv(o.src).then(function(t){var n;n=t,new mr(function(e){var t=new FileReader;t.onloadend=function(){e(t.result)},t.readAsDataURL(n)}).then(function(e){a=lv(e).data,u=r.create(gv(),t,a),r.add(u),i({image:o,blobInfo:u})})},function(e){t(e)})},hv=function(r,o){var i={};return{findAll:function(e,n){n=n||k;e=U((e=e)?ne(e.getElementsByTagName("img")):[],function(e){var t=e.src;return ct.fileApi&&(!e.hasAttribute("data-mce-bogus")&&(!e.hasAttribute("data-mce-placeholder")&&(t&&t!==ct.transparentSrc&&(0===t.indexOf("blob:")?!r.isUploaded(t)&&n(e):0===t.indexOf("data:")&&n(e)))))}),e=M(e,function(n){if(i[n.src]!==undefined)return new mr(function(t){i[n.src].then(function(e){return"string"==typeof e?e:void t({image:n,blobInfo:e.blobInfo})})});var e=new mr(function(e,t){pv(o,n,e,t)}).then(function(e){return delete i[e.image.src],e})["catch"](function(e){return delete i[n.src],e});return i[n.src]=e});return mr.all(e)}}},vv=function(e,t,n,r){(e.padd_empty_with_br||t.insert)&&n[r.name]?r.empty().append(new Xd("br",1)).shortEnded=!0:r.empty().append(new Xd("#text",3)).value=jr},yv=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},bv=function(t,e,n,r){return r.isEmpty(e,n,function(e){return function(e,t){t=e.getElementRule(t.name);return t&&t.paddEmpty}(t,e)})},Cv=function(e,r){var o=r.blob_cache,t=function(t){var e,n=t.attr("src");(e=t).attr("src")===ct.transparentSrc||e.attr("data-mce-placeholder")||t.attr("data-mce-bogus")||function(e){e=/data:([^;]+);base64,([a-z0-9\+\/=]+)/i.exec(e);return e?T.some({type:e[1],data:decodeURIComponent(e[2])}):T.none()}(n).filter(function(){return function(e,t){if(t.images_dataimg_filter){var n=new Image;return n.src=e.attr("src"),ie(e.attributes.map,function(e,t){n.setAttribute(t,e)}),t.images_dataimg_filter(n)}return!0}(t,r)}).bind(function(e){var t=e.type,n=e.data;return T.from(o.getByData(n,t)).orThunk(function(){return fv(t,n).map(function(e){e=o.create(gv(),e,n);return o.add(e),e})})}).each(function(e){t.attr("src",e.blobUri())})};o&&e.addAttributeFilter("src",function(e){return X(e,t)})},wv=function(e,p){var h=e.schema;p.remove_trailing_brs&&e.addNodeFilter("br",function(e,t,n){var r,o,i,a,u,s,c,l,f=e.length,d=gt.extend({},h.getBlockElements()),m=h.getNonEmptyElements(),g=h.getWhiteSpaceElements();for(d.body=1,r=0;r<f;r++)if(i=(o=e[r]).parent,d[o.parent.name]&&o===i.lastChild){for(u=o.prev;u;){if("span"!==(s=u.name)||"bookmark"!==u.attr("data-mce-type")){"br"===s&&(o=null);break}u=u.prev}o&&(o.remove(),bv(h,m,g,i)&&(c=h.getElementRule(i.name))&&(c.removeEmpty?i.remove():c.paddEmpty&&vv(p,n,d,i)))}else{for(a=o;i&&i.firstChild===a&&i.lastChild===a&&!d[(a=i).name];)i=i.parent;a===i&&!0!==p.padd_empty_with_br&&((l=new Xd("#text",3)).value=jr,o.replace(l))}}),e.addAttributeFilter("href",function(e){var t=e.length;if(!p.allow_unsafe_link_target)for(;t--;){var n=e[t];"a"===n.name&&"_blank"===n.attr("target")&&n.attr("rel",function(e){e=e?gt.trim(e):"";return/\b(noopener)\b/g.test(e)?e:e.split(" ").filter(function(e){return 0<e.length}).concat(["noopener"]).sort().join(" ")}(n.attr("rel")))}}),p.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(e){for(var t,n,r,o,i=e.length;i--;)if("a"===(o=e[i]).name&&o.firstChild&&!o.attr("href"))for(r=o.parent,t=o.lastChild;n=t.prev,r.insert(t,o),t=n;);}),p.fix_list_elements&&e.addNodeFilter("ul,ol",function(e){for(var t,n,r=e.length;r--;)"ul"!==(n=(t=e[r]).parent).name&&"ol"!==n.name||(t.prev&&"li"===t.prev.name?t.prev.append(t):((n=new Xd("li",1)).attr("style","list-style-type: none"),t.wrap(n)))}),p.validate&&h.getValidClasses()&&e.addAttributeFilter("class",function(e){for(var t,n,r,o,i,a,u,s=e.length,c=h.getValidClasses();s--;){for(n=(t=e[s]).attr("class").split(" "),i="",r=0;r<n.length;r++)o=n[r],u=!1,(a=c["*"])&&a[o]&&(u=!0),a=c[t.name],(u=!u&&a&&a[o]?!0:u)&&(i&&(i+=" "),i+=o);i.length||(i=null),t.attr("class",i)}}),Cv(e,p)},xv=gt.makeMap,Sv=gt.each,Nv=gt.explode,Ev=gt.extend,kv=function(A,R){void 0===R&&(R=Go());var T={},D=[],O={},B={};(A=A||{}).validate=!("validate"in A)||A.validate,A.root_name=A.root_name||"body";var e,t,P=function(e){var t,n,r=e.name;r in T&&((n=O[r])?n.push(e):O[r]=[e]),t=D.length;for(;t--;)(r=D[t].name)in e.attributes.map&&((n=B[r])?n.push(e):B[r]=[e]);return e},n={schema:R,addAttributeFilter:function(e,n){Sv(Nv(e),function(e){for(var t=0;t<D.length;t++)if(D[t].name===e)return void D[t].callbacks.push(n);D.push({name:e,callbacks:[n]})})},getAttributeFilters:function(){return[].concat(D)},addNodeFilter:function(e,n){Sv(Nv(e),function(e){var t=T[e];t||(T[e]=t=[]),t.push(n)})},getNodeFilters:function(){var e,t=[];for(e in T)T.hasOwnProperty(e)&&t.push({name:e,callbacks:T[e]});return t},filterNode:P,parse:function(e,i){var t,n,r,o,a,u,s,c,l=[];i=i||{},O={},B={};var f,d=Ev(xv("script,style,head,html,body,title,meta,param"),R.getBlockElements()),m=R.getNonEmptyElements(),g=R.children,p=A.validate,h=("forced_root_block"in i?i:A).forced_root_block,v=!1===(f=h)?"":!0===f?"p":f,y=R.getWhiteSpaceElements(),b=/^[ \t\r\n]+/,C=/[ \t\r\n]+$/,w=/[ \t\r\n]+/g,x=/^[ \t\r\n]+$/,S=y.hasOwnProperty(i.context)||y.hasOwnProperty(A.root_name),N=function(e,t){var n=new Xd(e,t);return e in T&&((t=O[e])?t.push(n):O[e]=[n]),n},E=function(e){for(var t,n=R.getBlockElements(),r=e.prev;r&&3===r.type;){if(0<(t=r.value.replace(C,"")).length)return void(r.value=t);if(t=r.next){if(3===t.type&&t.value.length){r=r.prev;continue}if(!n[t.name]&&"script"!==t.name&&"style"!==t.name){r=r.prev;continue}}t=r.prev,r.remove(),r=t}},k=em({validate:p,allow_html_data_urls:A.allow_html_data_urls,allow_svg_data_urls:A.allow_svg_data_urls,allow_script_urls:A.allow_script_urls,allow_conditional_comments:A.allow_conditional_comments,preserve_cdata:A.preserve_cdata,self_closing_elements:function(e){var t,n={};for(t in e)"li"!==t&&"p"!==t&&(n[t]=e[t]);return n}(R.getSelfClosingElements()),cdata:function(e){c.append(N("#cdata",4)).value=e},text:function(e,t){var n,r;S||(e=e.replace(w," "),n=c.lastChild,r=d,n&&(r[n.name]||"br"===n.name)&&(e=e.replace(b,""))),0!==e.length&&((n=N("#text",3)).raw=!!t,c.append(n).value=e)},comment:function(e){c.append(N("#comment",8)).value=e},pi:function(e,t){c.append(N(e,7)).value=t,E(c)},doctype:function(e){c.append(N("#doctype",10)).value=e,E(c)},start:function(e,t,n){var r,o,i,a=p?R.getElementRule(e):{};if(a){for((r=N(a.outputName||e,1)).attributes=t,r.shortEnded=n,c.append(r),(a=g[c.name])&&g[r.name]&&!a[r.name]&&l.push(r),o=D.length;o--;)(i=D[o].name)in t.map&&((u=B[i])?u.push(r):B[i]=[r]);d[e]&&E(r),n||(c=r),!S&&y[e]&&(S=!0)}},end:function(e){var t,n,r,o=p?R.getElementRule(e):{};if(o){if(d[e]&&!S){if((t=c.firstChild)&&3===t.type)if(0<(n=t.value.replace(b,"")).length)t.value=n,t=t.next;else for(r=t.next,t.remove(),t=r;t&&3===t.type;)n=t.value,r=t.next,0!==n.length&&!x.test(n)||(t.remove(),t=r),t=r;if((t=c.lastChild)&&3===t.type)if(0<(n=t.value.replace(C,"")).length)t.value=n,t=t.prev;else for(r=t.prev,t.remove(),t=r;t&&3===t.type;)n=t.value,r=t.prev,0!==n.length&&!x.test(n)||(t.remove(),t=r),t=r}if(S&&y[e]&&(S=!1),o.removeEmpty&&bv(R,m,y,c))return e=c.parent,d[c.name]?c.empty().remove():c.unwrap(),void(c=e);o.paddEmpty&&(yv(o=c,"#text")&&o.firstChild.value===jr||bv(R,m,y,c))&&vv(A,i,d,c),c=c.parent}}},R),_=c=new Xd(i.context||A.root_name,11);if(k.parse(e,i.format),p&&l.length&&(i.context?i.invalid=!0:function(e){for(var t,n,r,o,i,a,u,s,c,l,f=xv("tr,td,th,tbody,thead,tfoot,table"),d=R.getNonEmptyElements(),m=R.getWhiteSpaceElements(),g=R.getTextBlockElements(),p=R.getSpecialElements(),h=0;h<e.length;h++)if((t=e[h]).parent&&!t.fixed)if(g[t.name]&&"li"===t.parent.name){for(c=t.next;c&&g[c.name];)c.name="li",c.fixed=!0,t.parent.insert(c,t.parent),c=c.next;t.unwrap(t)}else{for(r=[t],n=t.parent;n&&!R.isValidChild(n.name,t.name)&&!f[n.name];n=n.parent)r.push(n);if(n&&1<r.length){for(r.reverse(),o=i=P(r[0].clone()),s=0;s<r.length-1;s++){for(R.isValidChild(i.name,r[s].name)?(a=P(r[s].clone()),i.append(a)):a=i,u=r[s].firstChild;u&&u!==r[s+1];)l=u.next,a.append(u),u=l;i=a}bv(R,d,m,o)?n.insert(t,r[0],!0):(n.insert(o,r[0],!0),n.insert(t,o)),n=r[0],(bv(R,d,m,n)||yv(n,"br"))&&n.empty().remove()}else t.parent&&("li"!==t.name?R.isValidChild(t.parent.name,"div")&&R.isValidChild("div",t.name)?t.wrap(P(new Xd("div",1))):p[t.name]?t.empty().remove():t.unwrap():!(c=t.prev)||"ul"!==c.name&&"ol"!==c.name?!(c=t.next)||"ul"!==c.name&&"ol"!==c.name?t.wrap(P(new Xd("ul",1))):c.insert(t,c.firstChild,!0):c.append(t))}}(l)),v&&("body"===_.name||i.isRootContent)&&function(){var e,t,n=_.firstChild,r=function(e){e&&((n=e.firstChild)&&3===n.type&&(n.value=n.value.replace(b,"")),(n=e.lastChild)&&3===n.type&&(n.value=n.value.replace(C,"")))};if(R.isValidChild(_.name,v.toLowerCase())){for(;n;)e=n.next,3===n.type||1===n.type&&"p"!==n.name&&!d[n.name]&&!n.attr("data-mce-type")?(t||((t=N(v,1)).attr(A.forced_root_block_attrs),_.insert(t,n)),t.append(n)):(r(t),t=null),n=e;r(t)}}(),!i.invalid){for(s in O)if(O.hasOwnProperty(s)){for(u=T[s],o=(t=O[s]).length;o--;)t[o].parent||t.splice(o,1);for(n=0,r=u.length;n<r;n++)u[n](t,s,i)}for(n=0,r=D.length;n<r;n++)if((u=D[n]).name in B){for(o=(t=B[u.name]).length;o--;)t[o].parent||t.splice(o,1);for(o=0,a=u.callbacks.length;o<a;o++)u.callbacks[o](t,u.name,i)}}return _}};return wv(n,A),e=n,(t=A).inline_styles&&cv(e,t),n},_v=function(e,t,n){return o=n,(r=e)&&r.hasEventListeners("PreProcess")&&!o.no_events?function(e,t,n){var r,o,i=e.dom;t=t.cloneNode(!0);var a=document.implementation;return a.createHTMLDocument&&(r=a.createHTMLDocument(""),gt.each("BODY"===t.nodeName?t.childNodes:[t],function(e){r.body.appendChild(r.importNode(e,!0))}),t="BODY"!==t.nodeName?r.body.firstChild:r.body,o=i.doc,i.doc=r),e=e,n=Ne(Ne({},n),{node:t}),e.fire("PreProcess",n),o&&(i.doc=o),t}(e,t,n):t;var r,o},Av=function(e,t,n){-1===gt.inArray(t,n)&&(e.addAttributeFilter(n,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),t.push(n))},Rv=function(e,t,n,r,o){r=r,r=sm(t,n).serialize(r);return e=e,r=r,(o=o).no_events||!e?r:(e=e,r=Ne(Ne({},o),{content:r}),e.fire("PostProcess",r)).content},Tv=function(n,r){var e=["data-mce-selected"],o=r&&r.dom?r.dom:Ya.DOM,i=r&&r.schema?r.schema:Go(n);n.entity_encoding=n.entity_encoding||"named",n.remove_trailing_brs=!("remove_trailing_brs"in n)||n.remove_trailing_brs;var t,s,c,a=kv(n,i);s=n,c=o,(t=a).addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,r=e.length;r--;)(n=e[r]).attr("tabindex",n.attr("data-mce-tabindex")),n.attr(t,null)}),t.addAttributeFilter("src,href,style",function(e,t){for(var n,r,o=e.length,i="data-mce-"+t,a=s.url_converter,u=s.url_converter_scope;o--;)(r=(n=e[o]).attr(i))!==undefined?(n.attr(t,0<r.length?r:null),n.attr(i,null)):(r=n.attr(t),"style"===t?r=c.serializeStyle(c.parseStyle(r),n.name):a&&(r=a.call(u,r,t,n.name)),n.attr(t,0<r.length?r:null))}),t.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)(t=e[r]).attr("class")&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",0<n.length?n:null))}),t.addAttributeFilter("data-mce-type",function(e,t,n){for(var r,o=e.length;o--;)"bookmark"!==(r=e[o]).attr("data-mce-type")||n.cleanup||(T.from(r.firstChild).exists(function(e){return!Vr(e.value)})?r.unwrap():r.remove())}),t.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=zo.decode(t.value))}),t.addNodeFilter("script,style",function(e,t){for(var n,r,o,i=e.length,a=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};i--;)r=(n=e[i]).firstChild?n.firstChild.value:"","script"===t?((o=n.attr("type"))&&n.attr("type","mce-no/type"===o?null:o.replace(/^mce\-/,"")),"xhtml"===s.element_format&&0<r.length&&(n.firstChild.value="// <![CDATA[\n"+a(r)+"\n// ]]>")):"xhtml"===s.element_format&&0<r.length&&(n.firstChild.value="\x3c!--\n"+a(r)+"\n--\x3e")}),t.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)t=e[n],s.preserve_cdata&&0===t.value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=c.decode(t.value.replace(/^\[CDATA\[|\]\]$/g,""))):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),t.addNodeFilter("xml:namespace,input",function(e,t){for(var n,r=e.length;r--;)7===(n=e[r]).type?n.remove():1===n.type&&("input"!==t||n.attr("type")||n.attr("type","text"))}),t.addAttributeFilter("data-mce-type",function(e){X(e,function(e){"format-caret"===e.attr("data-mce-type")&&(e.isEmpty(t.schema.getNonEmptyElements())?e.remove():e.unwrap())})}),t.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)});return{schema:i,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:function(e,t){t=Ne({format:"html"},t=void 0===t?{}:t),e=_v(r,e,t),e=function(e,t,n){e=qr(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||Ur(ht.fromDom(t))?e:gt.trim(e)}(o,e,t),e=function(e,t,n){n=n.selection?Ne({forced_root_block:!1},n):n,e=e.parse(t,n);return t=function(e){return e&&"br"===e.name},n=(n=e).lastChild,!t(n)||t(t=n.prev)&&(n.remove(),t.remove()),e}(a,e,t);return"tree"===t.format?e:Rv(r,n,i,e,t)},addRules:function(e){i.addValidElements(e)},setRules:function(e){i.setValidElements(e)},addTempAttr:h(Av,a,e),getTempAttrs:x(e),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters}},Dv=function(e,t){t=Tv(e,t);return{schema:t.schema,addNodeFilter:t.addNodeFilter,addAttributeFilter:t.addAttributeFilter,serialize:t.serialize,addRules:t.addRules,setRules:t.setRules,addTempAttr:t.addTempAttr,getTempAttrs:t.getTempAttrs,getNodeFilters:t.getNodeFilters,getAttributeFilters:t.getAttributeFilters}},Ov=function(e,t){var n=(t=void 0===t?{}:t).format||"html";return Gh(e).editor.getContent(t,n)},Bv=function(e,t,n){return Gh(e).editor.setContent(t,n=void 0===n?{}:n)},Pv=Ya.DOM,Lv=function(e){return T.from(e).each(function(e){return e.destroy()})},Iv=function(e){var t,n,r,o;e.removed||(t=e._selectionOverrides,n=e.editorUpload,r=e.getBody(),o=e.getElement(),r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&o&&Pv.remove(o.nextSibling),e.fire("remove"),e.editorManager.remove(e),!e.inline&&r&&Pv.setStyle(e.id,"display",e.orgDisplay),e.fire("detach"),Pv.remove(e.getContainer()),Lv(t),Lv(n),e.destroy())},Mv=function(e,t){var n=e.selection,r=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Lv(n),Lv(r)),(r=(n=e).formElement)&&(r._mceOldSubmit&&(r.submit=r._mceOldSubmit,r._mceOldSubmit=null),Pv.unbind(r,"submit reset",n.formEventDelegate)),(n=e).contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null,n.selection&&(n.selection=n.selection.win=n.selection.dom=n.selection.dom.doc=null),e.destroyed=!0):e.remove())},Fv=Object.prototype.hasOwnProperty,Uv=(rv=function(e,t){return w(e)&&w(t)?Uv(e,t):t},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Can't merge zero objects");for(var n={},r=0;r<e.length;r++){var o,i=e[r];for(o in i)Fv.call(i,o)&&(n[o]=rv(n[o],i[o]))}return n}),e=ut().deviceType,zv=e.isTouch(),jv=e.isPhone(),Hv=e.isTablet(),Vv=["lists","autolink","autosave"],qv={table_grid:!1,object_resizing:!1,resize:!1},$v=function(e){e=b(e)?e.join(" "):e,e=M(W(e)?e.split(" "):[],He);return U(e,function(e){return 0<e.length})},Wv=function(n,e){var t=le(e,function(e,t){return L(n,t)});return e=t.t,t=t.f,{sections:x(e),settings:x(t)}},Kv=function(e,t){return e.sections().hasOwnProperty(t)},Xv=function(e,t){return me(e,"toolbar_mode").orThunk(function(){return me(e,"toolbar_drawer").map(function(e){return!1===e?"wrap":e})}).getOr(t)},Yv=function(e,t,n,r){return e&&(a=i="mobile",u=(o=t).sections(),Kv(o,i)&&u[i].theme===a)?U(r,h(L,Vv)):e&&Kv(t,"mobile")?r:n;var o,i,a,u},Gv=function(e,t,n,r){var o,i=$v(n.forced_plugins),a=$v(r.plugins),n=Kv(o=t,n="mobile")?o.sections()[n]:{},n=n.plugins?$v(n.plugins):a,n=Yv(e,t,a,n),n=(n=n,[].concat($v(i)).concat($v(n)));if(ct.browser.isIE()&&L(n,"rtc"))throw new Error("RTC plugin is not supported on IE 11.");return gt.extend(r,{plugins:n.join(" ")})},Jv=function(e,t,n,r,o){t=e?{mobile:function(e,t){e={resize:!1,toolbar_mode:Xv(e,"scrolling"),toolbar_sticky:!1};return Ne(Ne(Ne({},qv),e),t?{menubar:!1}:{})}(o.mobile||{},t)}:{},o=Wv(["mobile"],Uv(t,o)),n=gt.extend(n,r,o.settings(),(n=o,e&&Kv(n,"mobile")?function(e,t,n){void 0===n&&(n={});e=e.sections(),t=e.hasOwnProperty(t)?e[t]:{};return gt.extend({},n,t)}(o,"mobile"):{}),{validate:!0,external_plugins:function(e,t){t=t.external_plugins||{};return e&&e.external_plugins?gt.extend({},e.external_plugins,t):t}(r,o.settings())});return Gv(e,o,r,n)},Qv=function(e,t,n,r,o){e=function(e,t,n,r,o){o={id:t,theme:"silver",toolbar_mode:Xv(e,"floating"),plugins:"",document_base_url:n,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:!0,indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:o.convertURL,url_converter_scope:o};return Ne(Ne({},o),r?qv:{})}(o,t,n,zv,e);return Jv(jv||Hv,jv,e,r,o)},Zv=function(e,t,n){return T.from(t.settings[n]).filter(e)},ey=function(e,t,n,r){var o,i,a,u=t in e.settings?e.settings[t]:n;return"hash"===r?(a={},"string"==typeof(i=u)?X(0<i.indexOf("=")?i.split(/[;,](?![^=;,]*(?:[;,]|$))/):i.split(","),function(e){e=e.split("=");1<e.length?a[gt.trim(e[0])]=gt.trim(e[1]):a[gt.trim(e[0])]=gt.trim(e[0])}):a=i,a):"string"===r?Zv(W,e,t).getOr(n):"number"===r?Zv(C,e,t).getOr(n):"boolean"===r?Zv(f,e,t).getOr(n):"object"===r?Zv(w,e,t).getOr(n):"array"===r?Zv(b,e,t).getOr(n):"string[]"===r?Zv((o=W,function(e){return b(e)&&Y(e,o)}),e,t).getOr(n):"function"===r?Zv(m,e,t).getOr(n):u},ty=(ov={},{add:function(e,t){ov[e]=t},get:function(e){return ov[e]||{icons:{}}},has:function(e){return ge(ov,e)}}),_=function(e,t){return t.dom[e]},We=function(e,t){return parseInt(Ln(t,e),10)},ny=h(_,"clientWidth"),ry=h(_,"clientHeight"),oy=h(We,"margin-top"),iy=h(We,"margin-left"),ay=function(e,t,n){var r,o=ht.fromDom(e.getBody()),i=e.inline?o:ht.fromDom(Tt(o).dom.documentElement),r=(r=e.inline,o=t,e=n,n=(t=i).dom.getBoundingClientRect(),{x:o-(r?n.left+t.dom.clientLeft+iy(t):0),y:e-(r?n.top+t.dom.clientTop+oy(t):0)});return n=r.x,t=r.y,i=ny(r=i),r=ry(r),0<=n&&0<=t&&n<=i&&t<=r},uy=function(e){e=e.inline?e.getBody():e.getContentAreaContainer();return T.from(e).map(ht.fromDom).map(tn).getOr(!1)},sy=function(t){var n,r=[],o=function(){var e=t.theme;return e&&e.getNotificationManagerImpl?e.getNotificationManagerImpl():{open:e=function(){throw new Error("Theme did not provide a NotificationManager implementation.")},close:e,reposition:e,getArgs:e}},i=function(){return T.from(r[0])},a=function(){0<r.length&&o().reposition(r)},u=function(t){q(r,function(e){return e===t}).each(function(e){r.splice(e,1)})},s=function(n,e){if(void 0===e&&(e=!0),!t.removed&&uy(t))return e&&t.fire("BeforeOpenNotification",{notification:n}),H(r,function(e){return t=o().getArgs(e),e=n,!(t.type!==e.type||t.text!==e.text||t.progressBar||t.timeout||e.progressBar||e.timeout);var t}).getOrThunk(function(){t.editorManager.setActive(t);var e=o().open(n,function(){u(e),a(),i().fold(function(){return t.focus()},function(e){return ht.fromDom(e.getEl()).dom.focus()})});return r.push(e),a(),t.fire("OpenNotification",{notification:Ne({},e)}),e})};return(n=t).on("SkinLoaded",function(){var e=n.getParam("service_message");e&&s({text:e,type:"warning",timeout:0},!1)}),n.on("ResizeEditor ResizeWindow NodeChange",function(){Sr.requestAnimationFrame(a)}),n.on("remove",function(){X(r.slice(),function(e){o().close(e)})}),{open:s,close:function(){i().each(function(e){o().close(e),u(e),a()})},getNotifications:function(){return r}}},cy=au.PluginManager,ly=au.ThemeManager;var fy,dy=function(n){var r=[],o=function(){var e=n.theme;return e&&e.getWindowManagerImpl?e.getWindowManagerImpl():{open:e=function(){throw new Error("Theme did not provide a WindowManager implementation.")},openUrl:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}},i=function(n,r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r?r.apply(n,e):undefined}},t=function(e){r.push(e),n.fire("OpenWindow",{dialog:e})},a=function(t){n.fire("CloseWindow",{dialog:t}),0===(r=U(r,function(e){return e!==t})).length&&n.focus()},u=function(e){n.editorManager.setActive(n),Sd(n);e=e();return t(e),e};return n.on("remove",function(){X(r,function(e){o().close(e)})}),{open:function(e,t){return u(function(){return o().open(e,t,a)})},openUrl:function(e){return u(function(){return o().openUrl(e,a)})},alert:function(e,t,n){var r=o();r.alert(e,i(n||r,t))},confirm:function(e,t,n){var r=o();r.confirm(e,i(n||r,t))},close:function(){T.from(r[r.length-1]).each(function(e){o().close(e),a(e)})}}},my=function(e,t){e.notificationManager.open({type:"error",text:t})},gy=function(e,t){e._skinLoaded?my(e,t):e.on("SkinLoaded",function(){my(e,t)})},py=function(e,t,n){xf(e,t,{message:n}),console.error(n)},hy=function(e,t,n){return n?"Failed to load "+e+": "+n+" from url "+t:"Failed to load "+e+" url: "+t},vy=function(e,t,n){py(e,"PluginLoadError",hy("plugin",t,n))},yy=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=window.console;r&&(r.error||r.log).apply(r,Ee([e],t))},by=function(e){return Cy(e,(e=(t=e).getParam("content_css"),W(e)?M(e.split(","),He):b(e)?e:!1===e||t.inline?[]:["default"]));var t},Cy=function(t,e){var n=t.editorManager.baseURL+"/skins/content",r="content"+t.editorManager.suffix+".css",o=!0===t.inline;return M(e,function(e){return/^[a-z0-9\-]+$/i.test(e)&&!o?n+"/"+e+"/"+r:t.documentBaseURI.toAbsolute(e)})},wy=function(e){e.contentCSS=e.contentCSS.concat(by(e),Cy(e,zs(e)))},xy=function(){var n={},r=function(e,t){return{status:e,resultUri:t}},t=function(e){return e in n};return{hasBlobUri:t,getResultUri:function(e){e=n[e];return e?e.resultUri:null},isPending:function(e){return!!t(e)&&1===n[e].status},isUploaded:function(e){return!!t(e)&&2===n[e].status},markPending:function(e){n[e]=r(1,null)},markUploaded:function(e,t){n[e]=r(2,t)},removeFailed:function(e){delete n[e]},destroy:function(){n={}}}},Sy=0,Ny=function(e){return e+Sy+++(e=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+e()+e()+e())},Ey=function(u,a){var r={},n=function(e,n,r,t){var o=new XMLHttpRequest;o.open("POST",a.url),o.withCredentials=a.credentials,o.upload.onprogress=function(e){t(e.loaded/e.total*100)},o.onerror=function(){r("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=function(){var e,t;o.status<200||300<=o.status?r("HTTP Error: "+o.status):(t=JSON.parse(o.responseText))&&"string"==typeof t.location?n((e=a.basePath,t=t.location,e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t)):r("Invalid JSON: "+o.responseText)};var i=new FormData;i.append("file",e.blob(),e.filename()),o.send(i)},s=function(e,t){return{url:t,blobInfo:e,status:!0}},c=function(e,t,n){return{url:"",blobInfo:e,status:!1,error:{message:t,options:n}}},l=function(e,t){gt.each(r[e],function(e){e(t)}),delete r[e]},o=function(i,t,a){return u.markPending(i.blobUri()),new mr(function(n){var r;try{var o=function(){r&&(r.close(),0)};t(i,function(e){o(),u.markUploaded(i.blobUri(),e),l(i.blobUri(),s(i,e)),n(s(i,e))},function(e,t){t=t||{};o(),u.removeFailed(i.blobUri()),l(i.blobUri(),c(i,e,t)),n(c(i,e,t))},function(t){t<0||100<t||T.from(r).orThunk(function(){return T.from(a).map(S)}).each(function(e){(r=e).progressBar.value(t)})})}catch(e){n(c(i,e.message,{}))}})},i=function(e,n){return e=gt.grep(e,function(e){return!u.isUploaded(e.blobUri())}),mr.all(gt.map(e,function(e){return u.isPending(e.blobUri())?(t=e.blobUri(),new mr(function(e){r[t]=r[t]||[],r[t].push(e)})):o(e,a.handler,n);var t}))};return!1===m(a.handler)&&(a.handler=n),{upload:function(e,t){return a.url||a.handler!==n?i(e,t):new mr(function(e){e([])})}}},ky=function(e){return function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}},_y=function(e,t){return Ey(t,{url:e.getParam("images_upload_url","","string"),basePath:e.getParam("images_upload_base_path","","string"),credentials:e.getParam("images_upload_credentials",!1,"boolean"),handler:e.getParam("images_upload_handler",null,"function")})},Ay=function(a){var n,i,e,t,r,o,u=(n=[],i=function(e){if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var t=e.id||Ny("blobid"),n=e.name||t,r=e.blob;return{id:x(t),name:x(n),filename:x(e.filename||n+"."+({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[r.type.toLowerCase()]||"dat")),blob:x(r),base64:x(e.base64),blobUri:x(e.blobUri||URL.createObjectURL(r)),uri:x(e.uri)}},{create:function(e,t,n,r,o){if(W(e))return i({id:e,name:r,filename:o,blob:t,base64:n});if(w(e))return i(e);throw new Error("Unknown input type")},add:function(e){t(e.id())||n.push(e)},get:t=function(t){return e(function(e){return e.id()===t})},getByUri:function(t){return e(function(e){return e.blobUri()===t})},getByData:function(t,n){return e(function(e){return e.base64()===t&&e.blob().type===n})},findFirst:e=function(e){return H(n,e).getOrUndefined()},removeByUri:function(t){n=U(n,function(e){return e.blobUri()!==t||void URL.revokeObjectURL(e.blobUri())})},destroy:function(){X(n,function(e){URL.revokeObjectURL(e.blobUri())}),n=[]}}),s=xy(),c=[],l=function(n){var r=tu(null);n.on("change AddUndo",function(e){r.set(Ne({},e.level))});return{fireIfChanged:function(){var t=n.undoManager.data;te(t).filter(function(e){return!Vh(r.get(),e)}).each(function(e){n.setDirty(!0),n.fire("change",{level:e,lastLevel:Q(t,t.length-2).getOrNull()})})}}}(a),f=function(t){return function(e){return a.selection?t(e):[]}},d=function(e,t,n){for(var r=0;-1!==(r=e.indexOf(t,r))&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1),-1!==r;);return e},m=function(e,t,n){var r='src="'+n+'"'+(n===ct.transparentSrc?' data-mce-placeholder="1"':"");return e=d(e,'src="'+t+'"',r),e=d(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},g=function(t,n){X(a.undoManager.data,function(e){"fragmented"===e.type?e.fragments=M(e.fragments,function(e){return m(e,t,n)}):e.content=m(e.content,t,n)})},p=function(e,t){var n=a.convertURL(t,"src");g(e.src,t),a.$(e).attr({src:a.getParam("images_reuse_filename",!1,"boolean")?t+(-1===t.indexOf("?")?"?":"&")+(new Date).getTime():t,"data-mce-src":n})},h=function(t){return r=r||_y(a,s),b().then(f(function(i){var e=M(i,function(e){return e.blobInfo});return r.upload(e,ky(a)).then(f(function(e){var o=[],e=M(e,function(e,t){var n=i[t].blobInfo,r=i[t].image;return e.status&&a.getParam("images_replace_blob_uris",!0,"boolean")?(u.removeByUri(r.src),p(r,e.url)):e.error&&(e.error.options.remove&&(g(r.getAttribute("src"),ct.transparentSrc),o.push(r)),t=e.error.message,gy(a,iu.translate(["Failed to upload image: {0}",t]))),{element:r,status:e.status,uploadUri:e.url,blobInfo:n}});return 0<e.length&&l.fireIfChanged(),0<o.length&&(Xh(a)?console.error("Removing images on failed uploads is currently unsupported for RTC"):a.undoManager.transact(function(){X(o,function(e){a.dom.remove(e),u.removeByUri(e.src)})})),t&&t(e),e}))}))},v=function(e){if(Ls(a))return h(e)},y=function(t){return!1!==Y(c,function(e){return e(t)})&&(0!==t.getAttribute("src").indexOf("data:")||a.getParam("images_dataimg_filter",k,"function")(t))},b=function(){return(o=o||hv(s,u)).findAll(a.getBody(),y).then(f(function(e){return e=U(e,function(e){return"string"!=typeof e||void gy(a,e)}),X(e,function(e){g(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),e}))},C=function(e){return e.replace(/src="(blob:[^"]+)"/g,function(e,n){var t=s.getResultUri(n);if(t)return'src="'+t+'"';t=(t=u.getByUri(n))||j(a.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null);return t?'src="data:'+t.blob().type+";base64,"+t.base64()+'"':e})};return a.on("SetContent",function(){(Ls(a)?v:b)()}),a.on("RawSaveContent",function(e){e.content=C(e.content)}),a.on("GetContent",function(e){e.source_view||"raw"===e.format||"tree"===e.format||(e.content=C(e.content))}),a.on("PostRender",function(){a.parser.addNodeFilter("img",function(e){X(e,function(e){var t=e.attr("src");u.getByUri(t)||(t=s.getResultUri(t))&&e.attr("src",t)})})}),{blobCache:u,addFilter:function(e){c.push(e)},uploadImages:h,uploadImagesAuto:v,scanForImages:b,destroy:function(){u.destroy(),s.destroy(),o=r=null}}},Ry=function(e){var r,t,n={},o=function(e,t){e&&("string"!=typeof e?gt.each(e,function(e,t){o(t,e)}):(b(t)||(t=[t]),gt.each(t,function(e){"undefined"==typeof e.deep&&(e.deep=!e.selector),"undefined"==typeof e.split&&(e.split=!e.selector||e.inline),"undefined"==typeof e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),n[e]=t))};return o((r=e.dom,t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{"float":"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{"float":"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all",preserve_attributes:["class","style"]},{inline:"s",remove:"all",preserve_attributes:["class","style"]}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",defaultBlock:"p",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(e,t,n){return mn(e)&&e.hasAttribute("href")},onformat:function(n,e,t){gt.each(t,function(e,t){r.setAttrib(n,t,e)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]},gt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),function(e){t[e]={block:e,remove:"all"}}),t)),o(e.getParam("formats")),{get:function(e){return e?n[e]:n},has:function(e){return ge(n,e)},register:o,unregister:function(e){return e&&n[e]&&delete n[e],n}}},Ty=gt.each,Dy=Ya.DOM,Oy=function(e,t){var n,r,s=t&&t.schema||Go({}),c=function(e){r="string"==typeof e?{name:e,classes:[],attrs:{}}:e;var t,n=Dy.create(r.name);return t=n,(e=r).classes.length&&Dy.addClass(t,e.classes.join(" ")),Dy.setAttribs(t,e.attrs),n},l=function(t,e,n){var r,o,i=0<e.length&&e[0],a=i&&i.name,u=function(e,t){e="string"!=typeof e?e.nodeName.toLowerCase():e,e=s.getElementRule(e),e=e&&e.parentsRequired;return!(!e||!e.length)&&(t&&-1!==gt.inArray(e,t)?t:e[0])}(t,a);if(u)a===u?(o=e[0],e=e.slice(1)):o=u;else if(i)o=e[0],e=e.slice(1);else if(!n)return t;return o&&(r=c(o)).appendChild(t),n&&(r||(r=Dy.create("div")).appendChild(t),gt.each(n,function(e){e=c(e);r.insertBefore(e,t)})),l(r,e,o&&o.siblings)};return e&&e.length?(r=e[0],n=c(r),(t=Dy.create("div")).appendChild(l(n,e.slice(1),r.siblings)),t):""},By=function(e){var t,i={classes:[],attrs:{}};return"*"!==(e=i.selector=gt.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,t,n,r,o){switch(t){case"#":i.attrs.id=n;break;case".":i.classes.push(n);break;case":":-1!==gt.inArray("checked disabled enabled read-only required".split(" "),n)&&(i.attrs[n]=n)}return"["!==r||(o=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/))&&(i.attrs[o[1]]=o[2]),""})),i.name=t||"div",i},Py=function(n,e){var r,o="",t=function(e){e=e.getParam("preview_styles","font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");return W(e)?e:""}(n);if(""===t)return"";var i=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof e){if(!(e=n.formatter.get(e)))return;e=e[0]}if("preview"in e){var a=me(e,"preview");if(a.is(!1))return"";t=a.getOr(t)}var u=e.block||e.inline||"span",a=(a=e.selector)&&"string"==typeof a?(a=(a=a.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),gt.map(a.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var t=gt.map(e.split(/(?:~\+|~|\+)/),By),e=t.pop();return t.length&&(e.siblings=t),e}).reverse()):[],a=a.length?(a[0].name||(a[0].name=u),u=e.selector,Oy(a,n)):Oy([u],n),s=Dy.select(u,a)[0]||a.firstChild;return Ty(e.styles,function(e,t){e=i(e);e&&Dy.setStyle(s,t,e)}),Ty(e.attributes,function(e,t){e=i(e);e&&Dy.setAttrib(s,t,e)}),Ty(e.classes,function(e){e=i(e);Dy.hasClass(s,e)||Dy.addClass(s,e)}),n.fire("PreviewFormats"),Dy.setStyles(a,{position:"absolute",left:-65535}),n.getBody().appendChild(a),r=Dy.getStyle(n.getBody(),"fontSize",!0),r=/px$/.test(r)?parseInt(r,10):0,Ty(t.split(" "),function(e){var t=Dy.getStyle(s,e,!0);if(!("background-color"===e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=Dy.getStyle(n.getBody(),e,!0),"#ffffff"===Dy.toHex(t).toLowerCase())||"color"===e&&"#000000"===Dy.toHex(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===r)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*r+"px"}"border"===e&&t&&(o+="padding:0 2px;"),o+=e+":"+t+";"}}),n.fire("AfterPreviewFormats"),Dy.remove(a),o},Ly=function(o){var e=Ry(o),i=tu(null);return function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])}(o),Pp(o),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:function(e,t,n){e=e,t=t,n=n,Jh(o).formatter.apply(e,t,n)},remove:function(e,t,n,r){e=e,t=t,n=n,r=r,Jh(o).formatter.remove(e,t,n,r)},toggle:function(e,t,n){e=e,t=t,n=n,Jh(o).formatter.toggle(e,t,n)},match:function(e,t,n){return e=e,t=t,n=n,Jh(o).formatter.match(e,t,n)},closest:function(e){return e=e,Jh(o).formatter.closest(e)},matchAll:function(e,t){return e=e,t=t,Jh(o).formatter.matchAll(e,t)},matchNode:function(e,t,n,r){return e=e,t=t,n=n,r=r,Jh(o).formatter.matchNode(e,t,n,r)},canApply:function(e){return e=e,Jh(o).formatter.canApply(e)},formatChanged:function(e,t,n){return r=i,e=e,t=t,void 0===(n=n)&&(n=!1),Jh(o).formatter.formatChanged(r,e,t,n);var r},getCssText:h(Py,o)}},Iy=function(n,r,o){var i=tu(!1),a=function(e){$h(r,!1,o),r.add({},e)};n.on("init",function(){r.add()}),n.on("BeforeExecCommand",function(e){e=e.command.toLowerCase();"undo"!==e&&"redo"!==e&&"mcerepaint"!==e&&(Wh(r,o),r.beforeChange())}),n.on("ExecCommand",function(e){var t=e.command.toLowerCase();"undo"!==t&&"redo"!==t&&"mcerepaint"!==t&&a(e)}),n.on("ObjectResizeStart cut",function(){r.beforeChange()}),n.on("SaveContent ObjectResized blur",a),n.on("dragend",a),n.on("keyup",function(e){var t=e.keyCode;e.isDefaultPrevented()||((33<=t&&t<=36||37<=t&&t<=40||45===t||e.ctrlKey)&&(a(),n.nodeChanged()),46!==t&&8!==t||n.nodeChanged(),i.get()&&r.typing&&!1===Vh(Uh(n),r.data[0])&&(!1===n.isDirty()&&(n.setDirty(!0),n.fire("change",{level:r.data[0],lastLevel:null})),n.fire("TypingUndo"),i.set(!1),n.nodeChanged()))}),n.on("keydown",function(e){var t,n=e.keyCode;e.isDefaultPrevented()||(33<=n&&n<=36||37<=n&&n<=40||45===n?r.typing&&a(e):(t=e.ctrlKey&&!e.altKey||e.metaKey,!(n<16||20<n)||224===n||91===n||r.typing||t||(r.beforeChange(),$h(r,!0,o),r.add({},e),i.set(!0))))}),n.on("mousedown",function(e){r.typing&&a(e)});n.on("input",function(e){var t;e.inputType&&("insertReplacementText"===e.inputType||"insertText"===(t=e).inputType&&null===t.data||("insertFromPaste"===(t=e).inputType||"insertFromDrop"===t.inputType))&&a(e)}),n.on("AddUndo Undo Redo ClearUndos",function(e){e.isDefaultPrevented()||n.nodeChanged()})},My=function(a){var e,u=tu(T.none()),s=tu(0),c=tu(0),l={data:[],typing:!1,beforeChange:function(){var e,t;e=s,t=u,Jh(a).undoManager.beforeChange(e,t)},add:function(e,t){return n=l,r=c,o=s,i=u,e=e,t=t,Jh(a).undoManager.addUndoLevel(n,r,o,i,e,t);var n,r,o,i},undo:function(){return e=l,t=s,n=c,Jh(a).undoManager.undo(e,t,n);var e,t,n},redo:function(){return e=c,t=l.data,Jh(a).undoManager.redo(e,t);var e,t},clear:function(){var e,t;e=l,t=c,Jh(a).undoManager.clear(e,t)},reset:function(){var e;e=l,Jh(a).undoManager.reset(e)},hasUndo:function(){return e=l,t=c,Jh(a).undoManager.hasUndo(e,t);var e,t},hasRedo:function(){return e=l,t=c,Jh(a).undoManager.hasRedo(e,t);var e,t},transact:function(e){return t=l,n=s,e=e,Jh(a).undoManager.transact(t,n,e);var t,n},ignore:function(e){var t;t=s,e=e,Jh(a).undoManager.ignore(t,e)},extra:function(e,t){var n,r;n=l,r=c,e=e,t=t,Jh(a).undoManager.extra(n,r,e,t)}};return Xh(a)||Iy(a,l,s),(e=a).addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),l},Fy=[9,27,Sf.HOME,Sf.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Sf.DOWN,Sf.UP,Sf.LEFT,Sf.RIGHT].concat(ct.browser.isFirefox()?[224]:[]),Uy="data-mce-placeholder",zy=function(e){return"keydown"===e.type||"keyup"===e.type},jy=function(e){e=e.keyCode;return e===Sf.BACKSPACE||e===Sf.DELETE},Hy=function(r){var o=r.dom,i=Bs(r),a=r.getParam("placeholder",Ts.getAttrib(r.getElement(),"placeholder"),"string"),u=function(e,t){var n;!function(e){if(zy(e)){var t=e.keyCode;return!jy(e)&&(Sf.metaKeyPressed(e)||e.altKey||112<=t&&t<=123||L(Fy,t))}return!1}(e)&&(n=r.getBody(),e=!(zy(e=e)&&!(jy(e)||"keyup"===e.type&&229===e.keyCode))&&function(e,t,n){if(xo(ht.fromDom(t),!1)){var r=""===n,o=t.firstElementChild;return!o||!e.getStyle(t.firstElementChild,"padding-left")&&!e.getStyle(t.firstElementChild,"padding-right")&&(r?!e.isBlock(o):n===o.nodeName.toLowerCase())}return!1}(o,n,i),""!==o.getAttrib(n,Uy)===e&&!t||(o.setAttrib(n,Uy,e?a:null),o.setAttrib(n,"aria-placeholder",e?a:null),r.fire("PlaceholderToggle",{state:e}),r.on(e?"keydown":"keyup",u),r.off(e?"keyup":"keydown",u)))};a&&r.on("init",function(e){u(e,!0),r.on("change SetContent ExecCommand",u),r.on("paste",function(e){return Sr.setEditorTimeout(r,function(){return u(e)})})})},Vy=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,qy=function(e,t){return yt(ht.fromDom(t),e.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string"))},$y=function(e){return"rtl"===Ya.DOM.getStyle(e,"direction",!0)||(e=e.textContent,Vy.test(e))},Wy=function(e,t,n){e=e,t=t,e=U(Ya.DOM.getParents(n.container(),"*",t),e);return T.from(e[e.length-1])},Ky=function(e,t){if(!t)return t;var n=t.container(),r=t.offset();return e?Xr(n)?yn(n.nextSibling)?us(n.nextSibling,0):us.after(n):Jr(t)?us(n,r+1):t:Xr(n)?yn(n.previousSibling)?us(n.previousSibling,n.previousSibling.data.length):us.before(n):Qr(t)?us(n,r-1):t},Xy=h(Ky,!0),Yy=h(Ky,!1),Gy=function(e,t){return xt(e,t)?sr(t,function(e){return Pr(e)||Ir(e)},(n=e,function(e){return Ct(n,ht.fromDom(e.dom.parentNode))})):T.none();var n},Jy=function(e){var t;e.dom.isEmpty(e.getBody())&&(e.setContent(""),e=(e=(t=e).getBody()).firstChild&&t.dom.isBlock(e.firstChild)?e.firstChild:e,t.selection.setCursorLocation(e,0))},Qy=function(e,t){return{from:e,to:t}},Zy=function(e,t){var n=ht.fromDom(e),e=ht.fromDom(t.container());return Gy(n,e).map(function(e){return{block:e,position:t}})},eb=function(o,i,e){var t=Zy(o,us.fromRangeStart(e)),e=t.bind(function(e){return Jc(i,o,e.position).bind(function(e){return Zy(o,e).map(function(e){return t=o,n=i,xn((r=e).position.getNode())&&!1===xo(r.block)?el(!1,r.block.dom).bind(function(e){return e.isEqual(r.position)?Jc(n,t,e).bind(function(e){return Zy(t,e)}):T.some(r)}).getOr(r):r;var t,n,r})})});return Bu(t,e,Qy).filter(function(e){return!1===Ct(e.from.block,e.to.block)&&Ot((n=e).from.block).bind(function(t){return Ot(n.to.block).filter(function(e){return Ct(t,e)})}).isSome()&&(!1===En((e=e).from.block.dom)&&!1===En(e.to.block.dom));var n})},tb=function(e){var t,e=(t=Mt(e),q(t,Dr).fold(function(){return t},function(e){return t.slice(0,e)}));return X(e,Zt),e},nb=function(e,t){e=Om(t,e);return H(e.reverse(),function(e){return xo(e)}).each(Zt)},rb=function(e,t,n,r){if(xo(n))return Am(n),rl(n.dom);0===U(Lt(r),function(e){return!xo(e)}).length&&xo(t)&&Kt(r,ht.fromTag("br"));n=nl(n.dom,us.before(r.dom));return X(tb(t),function(e){Kt(r,e)}),nb(e,t),n},ob=function(e,t,n){if(xo(n))return Zt(n),xo(t)&&Am(t),rl(t.dom);var r=ol(n.dom);return X(tb(t),function(e){Gt(n,e)}),nb(e,t),r},ib=function(e,t){return xt(t,e)?function(e,t){e=Om(t,e);return T.from(e[e.length-1])}(t,e):T.none()},ab=function(e,t){el(e,t.dom).map(function(e){return e.getNode()}).map(ht.fromDom).filter(Br).each(Zt)},ub=function(e,t,n){return ab(!0,t),ab(!1,n),ib(t,n).fold(h(ob,e,t,n),h(rb,e,t,n))},sb=function(e,t,n,r){return t?ub(e,r,n):ub(e,n,r)},cb=function(t,n){var e,r,o,i=ht.fromDom(t.getBody()),o=(e=i.dom,r=n,((o=t.selection.getRng()).collapsed?eb(e,r,o):T.none()).bind(function(e){return sb(i,n,e.from.block,e.to.block)}));return o.each(function(e){t.selection.setRng(e.toRange())}),o.isSome()},lb=function(e,t){t=ht.fromDom(t),e=h(Ct,e);return ur(t,Fr,e).isSome()},fb=function(e,t){var n=nl(e.dom,us.fromRangeStart(t)).isNone(),r=tl(e.dom,us.fromRangeEnd(t)).isNone();return!(lb(e=e,(t=t).startContainer)||lb(e,t.endContainer))&&n&&r},db=function(e){var n,r,o,t=ht.fromDom(e.getBody()),i=e.selection.getRng();return fb(t,i)?((i=e).setContent(""),i.selection.setCursorLocation(),!0):(n=t,r=e.selection,o=r.getRng(),Bu(Gy(n,ht.fromDom(o.startContainer)),Gy(n,ht.fromDom(o.endContainer)),function(e,t){return!1===Ct(e,t)&&(o.deleteContents(),sb(n,!0,e,t).each(function(e){r.setRng(e.toRange())}),!0)}).getOr(!1))},mb=function(e,t){return!e.selection.isCollapsed()&&db(e)},gb=Nn,pb=En,hb=function(e,t,n,r,o){return T.from(t._selectionOverrides.showCaret(e,n,r,o))},vb=function(e,t){return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?T.none():T.some(((t=(e=t).ownerDocument.createRange()).selectNode(e),t))},yb=function(e,t,n){var r=kc(1,e.getBody(),t),t=us.fromRangeStart(r),r=t.getNode();if(cc(r))return hb(1,e,r,!t.isAtEnd(),!1);r=t.getNode(!0);if(cc(r))return hb(1,e,r,!1,!1);t=e.dom.getParent(t.getNode(),function(e){return pb(e)||gb(e)});return cc(t)?hb(1,e,t,!1,n):T.none()},bb=function(e,t,n){return t.collapsed?yb(e,t,n).getOr(t):t},Cb=function(e){return Em(e)||wm(e)},wb=function(e){return km(e)||xm(e)},xb=function(n,r,e,t,o,i){return hb(t,n,i.getNode(!o),o,!0).each(function(e){var t;r.collapsed?(t=r.cloneRange(),o?t.setEnd(e.startContainer,e.startOffset):t.setStart(e.endContainer,e.endOffset),t.deleteContents()):r.deleteContents(),n.selection.setRng(e)}),i=n.dom,yn(e=e)&&0===e.data.length&&i.remove(e),!0},Sb=function(e,t){var n=e.selection.getRng();if(!yn(n.commonAncestorContainer))return!1;var r=t?ss.Forwards:ss.Backwards,o=Wc(e.getBody()),i=h(Tc,t?o.next:o.prev),a=t?Cb:wb,u=Ac(r,e.getBody(),n),o=Ky(t,i(u));if(!o||!Dc(u,o))return!1;if(a(o))return xb(e,n,u.getNode(),r,t,o);i=i(o);return!!(i&&a(i)&&Dc(o,i))&&xb(e,n,u.getNode(),r,t,i)},Nb=Ke([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Eb=function(e,t,n,r){var o=r.getNode(!1===t);return Gy(ht.fromDom(e),ht.fromDom(n.getNode())).map(function(e){return xo(e)?Nb.remove(e.dom):Nb.moveToElement(o)}).orThunk(function(){return T.some(Nb.moveToElement(o))})},kb=function(u,s,c){return Jc(s,u,c).bind(function(e){return a=e.getNode(),Fr(ht.fromDom(a))||Ir(ht.fromDom(a))?T.none():(t=u,o=e,i=function(e){return Or(ht.fromDom(e))&&!wc(r,o,t)},_c(!(n=s),r=c).fold(function(){return _c(n,o).fold(E,i)},i)?T.none():s&&En(e.getNode())||!1===s&&En(e.getNode(!0))?Eb(u,s,c,e):s&&km(c)||!1===s&&Em(c)?T.some(Nb.moveToPosition(e)):T.none());var t,n,r,o,i,a})},_b=function(r,e,o){return function(e,t){t=t.getNode(!1===e),e=e?"after":"before";return mn(t)&&t.getAttribute("data-mce-caret")===e}(e,o)?(t=e,n=o.getNode(!1===e),(t&&En(n.nextSibling)?T.some(Nb.moveToElement(n.nextSibling)):!1===t&&En(n.previousSibling)?T.some(Nb.moveToElement(n.previousSibling)):T.none()).fold(function(){return kb(r,e,o)},T.some)):kb(r,e,o).bind(function(e){return t=r,n=o,e.fold(function(e){return T.some(Nb.remove(e))},function(e){return T.some(Nb.moveToElement(e))},function(e){return wc(n,e,t)?T.none():T.some(Nb.moveToPosition(e))});var t,n});var t,n},Ab=function(e,t){return T.from(Cf(e.getBody(),t))},Rb=function(a,u){var e=a.selection.getNode();return Ab(a,e).filter(En).fold(function(){return e=a.getBody(),t=u,n=a.selection.getRng(),r=kc(t?1:-1,e,n),n=us.fromRangeStart(r),r=ht.fromDom(e),(!1===t&&km(n)?T.some(Nb.remove(n.getNode(!0))):t&&Em(n)?T.some(Nb.remove(n.getNode())):!1===t&&Em(n)&&Hm(r,n)?Vm(r,n).map(function(e){return Nb.remove(e.getNode())}):t&&km(n)&&jm(r,n)?qm(r,n).map(function(e){return Nb.remove(e.getNode())}):_b(e,t,n)).exists(function(e){return e.fold(function(e){return o._selectionOverrides.hideFakeCaret(),bg(o,i,ht.fromDom(e)),!0},(r=i=u,function(e){e=r?us.before(e):us.after(e);return n.selection.setRng(e.toRange()),!0}),(t=n=o=a,function(e){return t.selection.setRng(e.toRange()),!0}));var t,n,r,o,i});var e,t,n,r},k)},Tb=function(t,n){var e=t.selection.getNode();return!!En(e)&&Ab(t,e.parentNode).filter(En).fold(function(){var e;return e=ht.fromDom(t.getBody()),X(vu(e,".mce-offscreen-selection"),Zt),bg(t,n,ht.fromDom(t.selection.getNode())),Jy(t),!0},k)},Db=function(e){var t=e.dom,n=e.selection,r=Cf(e.getBody(),n.getNode());return Nn(r)&&t.isBlock(r)&&t.isEmpty(r)&&(e=t.create("br",{"data-mce-bogus":"1"}),t.setHTML(r,""),r.appendChild(e),n.setRng(us.before(e).toRange())),!0},Ob=function(e,t){return(e.selection.isCollapsed()?Rb:Tb)(e,t)},Bb=function(e,t){return!!e.selection.isCollapsed()&&(n=e,r=t,t=us.fromRangeStart(n.selection.getRng()),Jc(r,n.getBody(),t).filter(function(e){return(r?bm:Cm)(e)}).bind(function(e){return T.from(xc(r?0:-1,e))}).exists(function(e){return n.selection.select(e),!0}));var n,r},Pb=yn,Lb=function(e){return Pb(e)&&e.data[0]===Hr},Ib=function(e){return Pb(e)&&e.data[e.data.length-1]===Hr},Mb=function(e){return e.ownerDocument.createTextNode(Hr)},Fb=function(e,t){return(e?function(e){if(Pb(e.previousSibling))return Ib(e.previousSibling)||e.previousSibling.appendData(Hr),e.previousSibling;if(Pb(e))return Lb(e)||e.insertData(0,Hr),e;var t=Mb(e);return e.parentNode.insertBefore(t,e),t}:function(e){if(Pb(e.nextSibling))return Lb(e.nextSibling)||e.nextSibling.insertData(0,Hr),e.nextSibling;if(Pb(e))return Ib(e)||e.appendData(Hr),e;var t=Mb(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t})(t)},Ub=h(Fb,!0),zb=h(Fb,!1),jb=function(e,t){return yn(e.container())?Fb(t,e.container()):Fb(t,e.getNode())},Hb=function(e,t){t=t.get();return t&&e.container()===t&&Xr(t)},Vb=function(t,e){return e.fold(function(e){tc(t.get());e=Ub(e);return t.set(e),T.some(us(e,e.length-1))},function(e){return rl(e).map(function(e){if(Hb(e,t))return us(t.get(),1);tc(t.get());e=jb(e,!0);return t.set(e),us(e,1)})},function(e){return ol(e).map(function(e){if(Hb(e,t))return us(t.get(),t.get().length-1);tc(t.get());e=jb(e,!1);return t.set(e),us(e,e.length-1)})},function(e){tc(t.get());e=zb(e);return t.set(e),T.some(us(e,1))})},qb=function(e,t){for(var n=0;n<e.length;n++){var r=e[n].apply(null,t);if(r.isSome())return r}return T.none()},$b=Ke([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Wb=function(e,t){t=Cc(t,e);return t||e},Kb=function(e,t,n){var r=Xy(n),o=Wb(t,r.container());return Wy(e,o,r).fold(function(){return tl(o,r).bind(h(Wy,e,o)).map(function(e){return $b.before(e)})},T.none)},Xb=function(e,t){return null===ul(e,t)},Yb=function(e,t,n){return Wy(e,t,n).filter(h(Xb,t))},Gb=function(e,t,n){var r=Yy(n);return Yb(e,t,r).bind(function(e){return nl(e,r).isNone()?T.some($b.start(e)):T.none()})},Jb=function(e,t,n){var r=Xy(n);return Yb(e,t,r).bind(function(e){return tl(e,r).isNone()?T.some($b.end(e)):T.none()})},Qb=function(e,t,n){var r=Yy(n),o=Wb(t,r.container());return Wy(e,o,r).fold(function(){return nl(o,r).bind(h(Wy,e,o)).map(function(e){return $b.after(e)})},T.none)},Zb=function(e){return!1===$y(t0(e))},e0=function(e,t,n){return qb([Kb,Gb,Jb,Qb],[e,t,n]).filter(Zb)},t0=function(e){return e.fold(g,g,g,g)},n0=function(e){return e.fold(x("before"),x("start"),x("end"),x("after"))},r0=function(e){return e.fold($b.before,$b.before,$b.after,$b.after)},o0=function(e){return e.fold($b.start,$b.start,$b.end,$b.end)},i0=function(n,e,r,t,o,i){return Bu(Wy(e,r,t),Wy(e,r,o),function(e,t){return e!==t&&function(e,t,n){t=Cc(t,e),e=Cc(n,e);return t&&t===e}(r,e,t)?$b.after(n?e:t):i}).getOr(i)},a0=function(e,n){return e.fold(k,function(e){return t=n,!(n0(e=e)===n0(t)&&t0(e)===t0(t));var t})},u0=function(e,t){return e?t.fold(v(T.some,$b.start),T.none,v(T.some,$b.after),T.none):t.fold(T.none,v(T.some,$b.before),T.none,v(T.some,$b.end))},s0=function(e,a,u,s){var t=Ky(e,s),c=e0(a,u,t);return e0(a,u,t).bind(h(u0,e)).orThunk(function(){return n=a,r=u,o=c,i=Ky(t=e,s),Jc(t,r,i).map(h(Ky,t)).fold(function(){return o.map(r0)},function(e){return e0(n,r,e).map(h(i0,t,n,r,i,e)).filter(h(a0,o))}).filter(Zb);var t,n,r,o,i})},c0=(h(s0,!1),h(s0,!0),function(e,t,n){var r=e?1:-1;return t.setRng(us(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0}),l0=function(e,t){var n=t.selection.getRng(),n=e?us.fromRangeEnd(n):us.fromRangeStart(n);return!!m(t.selection.getSel().modify)&&(e&&Jr(n)?c0(!0,t.selection,n):!(e||!Qr(n))&&c0(!1,t.selection,n))};(o=fy=fy||{})[o.Br=0]="Br",o[o.Block=1]="Block",o[o.Wrap=2]="Wrap",o[o.Eol=3]="Eol";var f0,d0=function(e,t){return e===ss.Backwards?G(t):t},n=function(e,t,n,r){for(var o,i,a=Wc(n),u=r,s=[];u&&(i=a,c=u,o=t===ss.Forwards?i.next(c):i.prev(c));){if(xn(o.getNode(!1)))return t===ss.Forwards?{positions:d0(t,s).concat([o]),breakType:fy.Br,breakAt:T.some(o)}:{positions:d0(t,s),breakType:fy.Br,breakAt:T.some(o)};if(o.isVisible()){if(e(u,o)){var c=(i=u,xn((c=o).getNode(t===ss.Forwards))?fy.Br:!1===wc(i,c)?fy.Block:fy.Wrap);return{positions:d0(t,s),breakType:c,breakAt:T.some(o)}}s.push(o),u=o}else u=o}return{positions:d0(t,s),breakType:fy.Eol,breakAt:T.none()}},e=function(n,r,o,e){return r(o,e).breakAt.map(function(e){var t=r(o,e).positions;return n===ss.Backwards?t.concat(e):[e].concat(t)}).getOr([])},m0=function(e,o){return j(e,function(e,r){return e.fold(function(){return T.some(r)},function(n){return Bu(Z(n.getClientRects()),Z(r.getClientRects()),function(e,t){e=Math.abs(o-e.left);return Math.abs(o-t.left)<=e?r:n}).or(e)})},T.none())},g0=function(t,e){return Z(e.getClientRects()).bind(function(e){return m0(t,e.left)})},p0=h(n,us.isAbove,-1),h0=h(n,us.isBelow,1),v0=h(e,-1,p0),y0=h(e,1,h0),b0=function(t){var e=function(e){return M(e,function(e){return(e=Lu(e)).node=t,e})};if(mn(t))return e(t.getClientRects());if(yn(t)){var n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}},C0=function(e){return $(e,b0)};(_=f0=f0||{})[_.Up=-1]="Up",_[_.Down=1]="Down";var We=function(o,i,a,e,u,t){var s=0,c=[],n=function(e){var t,n,r=C0([e]);for(-1===o&&(r=r.reverse()),t=0;t<r.length;t++)if(n=r[t],!a(n,l)){if(0<c.length&&i(n,Se(c))&&s++,n.line=s,u(n))return!0;c.push(n)}},l=Se(t.getClientRects());if(!l)return c;t=t.getNode();return n(t),function(e,t,n,r){for(;r=bc(r,e,go,t);)if(n(r))return}(o,e,n,t),c},w0=h(We,f0.Up,Fu,Uu),x0=h(We,f0.Down,Uu,Fu),S0=function(t){return function(e){return e.line>t}},N0=function(t){return function(e){return e.line===t}},E0=En,k0=bc,_0=function(e,t){return Math.abs(e.left-t)},A0=function(e,t){return Math.abs(e.right-t)},R0=function(e,t){return e>=t.left&&e<=t.right},T0=function(e,t){return e>=t.top&&e<=t.bottom},D0=function(e,o){return we(e,function(e,t){var n=Math.min(_0(e,o),A0(e,o)),r=Math.min(_0(t,o),A0(t,o));return R0(o,t)||!R0(o,e)&&(r===n&&E0(t.node)||r<n)?t:e})},O0=function(e,t,n,r,o){var i=k0(r,e,go,t,!o);do{if(!i||n(i))return}while(i=k0(i,e,go,t))},B0=function(e,t,n){var r=C0(U(ne(e.getElementsByTagName("*")),lc)),r=U(r,h(T0,n));if(n=D0(r,t)){r=!hn(n.node)&&!kn(n.node);if((n=D0(function(e,n,t){void 0===t&&(t=!0);var r=[],o=function(t,e){e=U(C0([e]),function(e){return!t(e,n)});return r=r.concat(e),0===e.length};return r.push(n),O0(f0.Up,e,h(o,Fu),n.node,t),O0(f0.Down,e,h(o,Uu),n.node,t),r}(e,n,r),t))&&lc(n.node))return t=t,{node:(n=n).node,before:_0(n,t)<A0(n,t)}}return null},P0=function(e,t){e.selection.setRng(t),sd(e,e.selection.getRng())},L0=function(e,t,n){return T.some(bb(e,t,n))},I0=function(e,t,n,r,o,i){var a=t===ss.Forwards,u=Wc(e.getBody()),u=h(Tc,a?u.next:u.prev),o=a?r:o;if(!n.collapsed){var s=ju(n);if(i(s))return hb(t,e,s,t===ss.Backwards,!1)}i=Ac(t,e.getBody(),n);if(o(i))return vb(e,i.getNode(!a));s=Ky(a,u(i)),i=Kr(n.startContainer);if(!s)return i?T.some(n):T.none();if(o(s))return hb(t,e,s.getNode(!a),a,!1);u=u(s);return u&&o(u)&&Dc(s,u)?hb(t,e,u.getNode(!a),a,!1):i?L0(e,s.toRange(),!1):T.none()},M0=function(t,e,n,r,o,i){var a=Ac(e,t.getBody(),n),u=Se(a.getClientRects()),s=e===f0.Down;if(!u)return T.none();var c=(s?x0:w0)(t.getBody(),S0(1),a),l=U(c,N0(1)),f=u.left,c=D0(l,f);if(c&&i(c.node)){u=Math.abs(f-c.left),i=Math.abs(f-c.right);return hb(e,t,c.node,u<i,!1)}if(n=r(a)?a.getNode():o(a)?a.getNode(!0):ju(n)){n=function(e,t,n,r){var o,i,a,u,t=Wc(t),s=[],c=0,l=function(e){return Se(e.getClientRects())},f=1===e?(o=t.next,i=Uu,a=Fu,us.after(r)):(o=t.prev,i=Fu,a=Uu,us.before(r)),d=l(f);do{if(f.isVisible()&&!a(u=l(f),d)){if(0<s.length&&i(u,Se(s))&&c++,(u=Lu(u)).position=f,u.line=c,n(u))return s;s.push(u)}}while(f=o(f));return s}(e,t.getBody(),S0(1),n),f=D0(U(n,N0(1)),f);if(f)return L0(t,f.position.toRange(),!1);if(f=Se(U(n,N0(0))))return L0(t,f.position.toRange(),!1)}return 0===l.length?F0(t,s).filter(s?o:r).map(function(e){return bb(t,e.toRange(),!1)}):T.none()},F0=function(e,t){var n=e.selection.getRng(),e=e.getBody();if(t){var r=us.fromRangeEnd(n),o=h0(e,r);return te(o.positions)}r=us.fromRangeStart(n),o=p0(e,r);return Z(o.positions)},U0=function(t,e,n){return F0(t,e).filter(n).exists(function(e){return t.selection.setRng(e.toRange()),!0})},z0=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},j0=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},H0=function(t,e,n){return Vb(e,n).map(function(e){return z0(t,e),n})},V0=function(e,t){var n,r;e.selection.isCollapsed()&&!0!==e.composing&&t.get()&&(n=us.fromRangeStart(e.selection.getRng()),us.isTextPosition(n)&&!1===(Jr(r=n)||Qr(r))&&(z0(e,ec(t.get(),n)),t.set(null)))},q0=function(e,t,n){return!!qs(e)&&(o=t,i=n,t=(r=e).getBody(),n=us.fromRangeStart(r.selection.getRng()),e=h(qy,r),s0(i,e,t,n).bind(function(e){return H0(r,o,e)}).isSome());var r,o,i},o=function(e,t,n){return!!qs(t)&&l0(e,t)},$0=function(t){var i=tu(null),a=h(qy,t);return t.on("NodeChange",function(e){var n,r,o;!qs(t)||ct.browser.isIE()&&e.initial||(function(e,t,n){t=M(vu(ht.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),function(e){return e.dom}),t=U(t,e),e=U(n,e);X(J(t,e),h(j0,!1)),X(J(e,t),h(j0,!0))}(a,t.dom,e.parents),V0(t,i),n=a,r=t,o=i,e=e.parents,r.selection.isCollapsed()&&(e=U(e,n),X(e,function(e){var t=us.fromRangeStart(r.selection.getRng());e0(n,r.getBody(),t).bind(function(e){return H0(r,o,e)})})))}),i},W0=h(o,!0),K0=h(o,!1),X0=function(t,n,r){if(qs(t)){var e=F0(t,n).getOrThunk(function(){var e=t.selection.getRng();return n?us.fromRangeEnd(e):us.fromRangeStart(e)});return e0(h(qy,t),t.getBody(),e).exists(function(e){e=r0(e);return Vb(r,e).exists(function(e){return z0(t,e),!0})})}return!1},Y0=function(t,n){return function(e){return Vb(n,e).exists(function(e){return z0(t,e),!0})}},G0=function(r,o,i,a){var u=r.getBody(),s=h(qy,r);r.undoManager.ignore(function(){var e,t,n;r.selection.setRng((e=i,t=a,(n=document.createRange()).setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n)),r.execCommand("Delete"),e0(s,u,us.fromRangeStart(r.selection.getRng())).map(o0).map(Y0(r,o))}),r.nodeChanged()},J0=function(n,r,o,i){var a=function(e,t){t=Cc(t,e);return t||e}(n.getBody(),i.container()),u=h(qy,n),s=e0(u,a,i);return s.bind(function(e){return o?e.fold(x(T.some(o0(e))),T.none,x(T.some(r0(e))),T.none):e.fold(T.none,x(T.some(r0(e))),T.none,x(T.some(o0(e))))}).map(Y0(n,r)).getOrThunk(function(){var t=Qc(o,a,i),e=t.bind(function(e){return e0(u,a,e)});return Bu(s,e,function(){return Wy(u,a,i).exists(function(e){return!!Bu(rl(r=e),ol(r),function(e,t){var e=Ky(!0,e),n=Ky(!1,t);return tl(r,e).forall(function(e){return e.isEqual(n)})}).getOr(!0)&&(bg(n,o,ht.fromDom(e)),!0);var r})}).orThunk(function(){return e.bind(function(e){return t.map(function(e){return o?G0(n,r,i,e):G0(n,r,e,i),!0})})}).getOr(!1)})},Q0=function(e,t,n){if(e.selection.isCollapsed()&&qs(e)){var r=us.fromRangeStart(e.selection.getRng());return J0(e,t,n,r)}return!1},Z0=function(e){return 1===Mt(e).length},eC=function(e,t,n,r){var o=h(Lp,t),o=M(U(r,o),function(e){return e.dom});0===o.length?bg(t,e,n):(e=n.dom,n=o,o=Ap(!1),n=Op(n,o.dom),Kt(ht.fromDom(e),o),Zt(ht.fromDom(e)),n=us(n,0),t.selection.setRng(n.toRange()))},tC=function(n,r){var t,e=ht.fromDom(n.getBody()),o=ht.fromDom(n.selection.getStart()),u=U((t=Om(o,e),q(t,Dr).fold(x(t),function(e){return t.slice(0,e)})),Z0);return te(u).exists(function(e){var o,i,a,t=us.fromRangeStart(n.selection.getRng());return o=r,i=t,a=e.dom,!(!Bu(rl(a),ol(a),function(e,t){var n=Ky(!0,e),r=Ky(!1,t),t=Ky(!1,i);return o?tl(a,t).exists(function(e){return e.isEqual(r)&&i.isEqual(n)}):nl(a,t).exists(function(e){return e.isEqual(n)&&i.isEqual(r)})}).getOr(!0)||al((t=e).dom)&&kp(t.dom))&&(eC(r,n,e,u),!0)})},nC=function(e,t){return!!e.selection.isCollapsed()&&tC(e,t)},rC=function(e,t,n){return e._selectionOverrides.hideFakeCaret(),bg(e,t,ht.fromDom(n)),!0},oC=function(e,t){return e.selection.isCollapsed()?(n=e,o=(r=t)?wm:xm,i=r?ss.Forwards:ss.Backwards,a=Ac(i,n.getBody(),n.selection.getRng()),o(a)?rC(n,r,a.getNode(!r)):T.from(Ky(r,a)).filter(function(e){return o(e)&&Dc(a,e)}).exists(function(e){return rC(n,r,e.getNode(!r))})):(i=t,e=(t=e).selection.getNode(),!!kn(e)&&rC(t,i,e));var n,r,o,i,a},iC=function(e){e=parseInt(e,10);return isNaN(e)?0:e},aC=function(e,t){return(e||"table"===St(t)?"margin":"padding")+("rtl"===Ln(t,"direction")?"-right":"-left")},uC=function(e){var n,t=cC(e);return!e.mode.isReadOnly()&&(1<t.length||(n=e,Y(t,function(e){var t=aC(Us(n),e),t=Mn(e,t).map(iC).getOr(0);return"false"!==n.dom.getContentEditable(e.dom)&&0<t})))},sC=function(e){return Lr(e)||Ir(e)},cC=function(e){return U(M(e.selection.getSelectedBlocks(),ht.fromDom),function(e){return!sC(e)&&!Ot(e).map(sC).getOr(!1)&&sr(e,function(e){return Nn(e.dom)||En(e.dom)}).exists(function(e){return Nn(e.dom)})})},lC=function(e,u){var s=e.dom,t=e.selection,n=e.formatter,r=e.getParam("indentation","40px","string"),c=/[a-z%]+$/i.exec(r)[0],l=parseInt(r,10),f=Us(e),r=Bs(e);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||""!==r||s.getParent(t.getNode(),s.isBlock)||n.apply("div"),X(cC(e),function(e){var t,n,r,o,i,a;t=s,n=u,r=f,o=l,i=c,e=e.dom,r=aC(r,ht.fromDom(e)),"outdent"===n?(a=Math.max(0,iC(e.style[r])-o),t.setStyle(e,r,a?a+i:"")):(a=iC(e.style[r])+o+i,t.setStyle(e,r,a))})},fC=function(e,t){if(e.selection.isCollapsed()&&uC(e)){var n=e.dom,r=e.selection.getRng(),o=us.fromRangeStart(r),n=n.getParent(r.startContainer,n.isBlock);if(null!==n&&Lm(ht.fromDom(n),o))return lC(e,"outdent"),!0}return!1},dC=function(e,t){e.getDoc().execCommand(t,!1,null)},mC=function(n,r){n.addCommand("delete",function(){var e,t;t=r,fC(e=n)||Ob(e,!1)||Sb(e,!1)||Q0(e,t,!1)||cb(e,!1)||Wg(e)||Bb(e,!1)||oC(e,!1)||mb(e)||nC(e,!1)||(dC(e,"Delete"),Jy(e))}),n.addCommand("forwardDelete",function(){var e,t;t=r,Ob(e=n,!0)||Sb(e,!0)||Q0(e,t,!0)||cb(e,!0)||Wg(e)||Bb(e,!0)||oC(e,!0)||mb(e)||nC(e,!0)||dC(e,"ForwardDelete")})},gC=function(e){return e.touches===undefined||1!==e.touches.length?T.none():T.some(e.touches[0])},pC=function(o){var i=tu(T.none()),a=tu(!1),n=su(function(e){o.fire("longpress",Ne(Ne({},e),{type:"longpress"})),a.set(!0)},400);o.on("touchstart",function(t){gC(t).each(function(e){n.cancel();e={x:e.clientX,y:e.clientY,target:t.target};n.throttle(t),a.set(!1),i.set(T.some(e))})},!0),o.on("touchmove",function(e){n.cancel(),gC(e).each(function(r){i.get().each(function(e){var t,n;t=r,n=e,e=Math.abs(t.clientX-n.x),n=Math.abs(t.clientY-n.y),(5<e||5<n)&&(i.set(T.none()),a.set(!1),o.fire("longpresscancel"))})})},!0),o.on("touchend touchcancel",function(t){n.cancel(),"touchcancel"!==t.type&&i.get().filter(function(e){return e.target.isEqualNode(t.target)}).each(function(){a.get()?t.preventDefault():o.fire("tap",Ne(Ne({},t),{type:"tap"}))})},!0)},hC=function(e,t){return e.hasOwnProperty(t.nodeName)},vC=function(e){var t,n,r,o=e.dom,i=e.selection,a=e.schema,u=a.getBlockElements(),s=i.getStart(),c=e.getBody(),l=Bs(e);if(s&&mn(s)&&l){var f=c.nodeName.toLowerCase();if(a.isValidChild(f,l.toLowerCase())&&(d=u,y=c,!I(Dm(ht.fromDom(s),ht.fromDom(y)),function(e){return hC(d,e.dom)}))){for(var d,m,g,p=i.getRng(),h=p.startContainer,v=p.startOffset,a=p.endContainer,f=p.endOffset,y=Md(e),s=c.firstChild;s;)m=u,yn(g=s)||mn(g)&&!hC(m,g)&&!hl(g)?!function(e,t){if(yn(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||hC(e,t.nextSibling)))return!0}return!1}(u,s)?(t||(t=o.create(l,Ps(e)),s.parentNode.insertBefore(t,s),r=!0),s=(n=s).nextSibling,t.appendChild(n)):(s=(n=s).nextSibling,o.remove(n)):(t=null,s=s.nextSibling);r&&y&&(p.setStart(h,v),p.setEnd(a,f),i.setRng(p),e.nodeChanged())}}},yC=function(e,t){t.hasAttribute("data-mce-caret")&&(no(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},bC=function(e,t){var n=fr(ht.fromDom(e.getBody()),"*[data-mce-caret]").fold(x(null),function(e){return e.dom});if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void yC(e,n)):void(Gr(n)&&(yC(e,n),e.undoManager.add()))},CC=En,wC=function(e,t,n){var r=Wc(e.getBody()),o=h(Tc,1===t?r.next:r.prev);!n.collapsed||""===Bs(e)||(r=e.dom.getParent(n.startContainer,"PRE"))&&(o(us.fromRangeStart(n))||(n=function(e){e=e.dom.create(Bs(e));return(!ct.ie||11<=ct.ie)&&(e.innerHTML='<br data-mce-bogus="1">'),e}(e),1===t?e.$(r).after(n):e.$(r).before(n),e.selection.select(n,!0),e.selection.collapse()))},xC=function(e,t){var n=t?ss.Forwards:ss.Backwards,r=e.selection.getRng();return I0(e,n,r,Em,km,CC).orThunk(function(){return wC(e,n,r),T.none()})},SC=function(e,t){var n=t?1:-1,r=e.selection.getRng();return M0(e,n,r,function(e){return Em(e)||Sm(e)},function(e){return km(e)||Nm(e)},CC).orThunk(function(){return wC(e,n,r),T.none()})},NC=function(t,e){return xC(t,e).exists(function(e){return P0(t,e),!0})},EC=function(t,e){return SC(t,e).exists(function(e){return P0(t,e),!0})},kC=function(e,t){return U0(e,t,t?km:Em)},_C=function(e){return L(["figcaption"],St(e))},AC=function(e){var t=document.createRange();return t.setStartBefore(e.dom),t.setEndBefore(e.dom),t},RC=function(e,t,n){(n?Gt:Yt)(e,t)},TC=function(e,t,n,r){return""===t?(o=e,i=r,a=ht.fromTag("br"),RC(o,a,i),AC(a)):(a=e,e=r,r=t,t=n,n=ht.fromTag(r),r=ht.fromTag("br"),Tn(n,t),Gt(n,r),RC(a,n,e),AC(r));var o,i,a},DC=function(e,t,n){return t?(t=e.dom,h0(t,n).breakAt.isNone()):(e=e.dom,p0(e,n).breakAt.isNone())},OC=function(t,n){var r=ht.fromDom(t.getBody()),o=us.fromRangeStart(t.selection.getRng()),i=Bs(t),a=Ps(t);return function(e,t){t=h(Ct,t);return sr(ht.fromDom(e.container()),Dr,t).filter(_C)}(o,r).exists(function(){if(DC(r,n,o)){var e=TC(r,i,a,n);return t.selection.setRng(e),!0}return!1})},BC=function(e,t){return!!e.selection.isCollapsed()&&OC(e,t)},PC=function(e,r){return $(M(e,function(e){return Ne({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:ee},e)}),function(e){return t=e,(n=r).keyCode===t.keyCode&&n.shiftKey===t.shiftKey&&n.altKey===t.altKey&&n.ctrlKey===t.ctrlKey&&n.metaKey===t.metaKey?[e]:[];var t,n})},LC=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){return e.apply(null,t)}},IC=function(e,t){return H(PC(e,t),function(e){return e.action()})},MC=function(t,e){var n=e?ss.Forwards:ss.Backwards,e=t.selection.getRng();return I0(t,n,e,wm,xm,kn).exists(function(e){return P0(t,e),!0})},FC=function(t,e){var n=e?1:-1,e=t.selection.getRng();return M0(t,n,e,wm,xm,kn).exists(function(e){return P0(t,e),!0})},UC=function(e,t){return U0(e,t,t?xm:wm)},zC=function(r,e){return $(e,function(e){var t,n,n=(t=Lu(e.getBoundingClientRect()),n=-1,{left:t.left-n,top:t.top-n,right:t.right+2*n,bottom:t.bottom+2*n,width:t.width+n,height:t.height+n});return[{x:n.left,y:r(n),cell:e},{x:n.right,y:r(n),cell:e}]})},n=function(e,t,n,r,o){var i,a,n=vu(ht.fromDom(n),"td,th,caption").map(function(e){return e.dom}),n=U(zC(e,n),function(e){return t(e,o)});return i=r,a=o,j(n,function(e,r){return e.fold(function(){return T.some(r)},function(e){var t=Math.sqrt(Math.abs(e.x-i)+Math.abs(e.y-a)),n=Math.sqrt(Math.abs(r.x-i)+Math.abs(r.y-a));return T.some(n<t?r:e)})},T.none()).map(function(e){return e.cell})},jC=h(n,function(e){return e.bottom},function(e,t){return e.y<t}),HC=h(n,function(e){return e.top},function(e,t){return e.y>t}),VC=function(t,n){return Z(n.getClientRects()).bind(function(e){return jC(t,e.left,e.top)}).bind(function(e){return g0(ol(t=e).map(function(e){return p0(t,e).positions.concat(e)}).getOr([]),n);var t})},qC=function(t,n){return te(n.getClientRects()).bind(function(e){return HC(t,e.left,e.top)}).bind(function(e){return g0(rl(t=e).map(function(e){return[e].concat(h0(t,e).positions)}).getOr([]),n);var t})},e=function(e,t,n){var r,o,i,a=e(t,n);return(i=a).breakType===fy.Wrap&&0===i.positions.length||!xn(n.getNode())&&((n=a).breakType===fy.Br&&1===n.positions.length)?(r=e,o=t,!a.breakAt.exists(function(e){return r(o,e).breakAt.isSome()})):a.breakAt.isNone()},$C=h(e,p0),WC=h(e,h0),KC=function(t,e,n,r){var o,i,a,u=t.selection.getRng(),s=e?1:-1;return!(!sc()||(o=e,i=n,a=us.fromRangeStart(u),!el(!o,i).exists(function(e){return e.isEqual(a)})))&&(hb(s,t,n,!e,!1).each(function(e){P0(t,e)}),!0)},XC=function(e,t){e=t.getNode(e);return mn(e)&&"TABLE"===e.nodeName?T.some(e):T.none()},YC=function(u,s,c){var e=XC(!!s,c),t=!1===s;e.fold(function(){return P0(u,c.toRange())},function(a){return el(t,u.getBody()).filter(function(e){return e.isEqual(c)}).fold(function(){return P0(u,c.toRange())},function(e){var n,r,o,t,i;n=s,o=a,t=c,(i=Bs(r=u))?r.undoManager.transact(function(){var e=ht.fromTag(i);Tn(e,Ps(r)),Gt(e,ht.fromTag("br")),(n?Xt:Kt)(ht.fromDom(o),e);var t=r.dom.createRng();t.setStart(e.dom,0),t.setEnd(e.dom,0),P0(r,t)}):P0(r,t.toRange())})})},GC=function(e,t,n,r){var o,i,a,u,s,c,l=e.selection.getRng(),f=us.fromRangeStart(l),l=e.getBody();if(!t&&$C(r,f)){var d=(u=l,VC(s=n,c=f).orThunk(function(){return Z(c.getClientRects()).bind(function(e){return m0(v0(u,us.before(s)),e.left)})}).getOr(us.before(s)));return YC(e,t,d),!0}if(t&&WC(r,f)){d=(o=l,qC(i=n,a=f).orThunk(function(){return Z(a.getClientRects()).bind(function(e){return m0(y0(o,us.after(i)),e.left)})}).getOr(us.after(i)));return YC(e,t,d),!0}return!1},JC=function(n,r,o){return T.from(n.dom.getParent(n.selection.getNode(),"td,th")).bind(function(t){return T.from(n.dom.getParent(t,"table")).map(function(e){return o(n,r,e,t)})}).getOr(!1)},QC=function(e,t){return JC(e,t,KC)},ZC=function(e,t){return JC(e,t,GC)},e1=function(o,i){o.on("keydown",function(e){var t,n,r;!1===e.isDefaultPrevented()&&(t=o,n=i,r=e,e=ut().os,IC([{keyCode:Sf.RIGHT,action:LC(NC,t,!0)},{keyCode:Sf.LEFT,action:LC(NC,t,!1)},{keyCode:Sf.UP,action:LC(EC,t,!1)},{keyCode:Sf.DOWN,action:LC(EC,t,!0)},{keyCode:Sf.RIGHT,action:LC(QC,t,!0)},{keyCode:Sf.LEFT,action:LC(QC,t,!1)},{keyCode:Sf.UP,action:LC(ZC,t,!1)},{keyCode:Sf.DOWN,action:LC(ZC,t,!0)},{keyCode:Sf.RIGHT,action:LC(MC,t,!0)},{keyCode:Sf.LEFT,action:LC(MC,t,!1)},{keyCode:Sf.UP,action:LC(FC,t,!1)},{keyCode:Sf.DOWN,action:LC(FC,t,!0)},{keyCode:Sf.RIGHT,action:LC(q0,t,n,!0)},{keyCode:Sf.LEFT,action:LC(q0,t,n,!1)},{keyCode:Sf.RIGHT,ctrlKey:!e.isOSX(),altKey:e.isOSX(),action:LC(W0,t,n)},{keyCode:Sf.LEFT,ctrlKey:!e.isOSX(),altKey:e.isOSX(),action:LC(K0,t,n)},{keyCode:Sf.UP,action:LC(BC,t,!1)},{keyCode:Sf.DOWN,action:LC(BC,t,!0)}],r).each(function(e){r.preventDefault()}))})},t1=function(o,i){o.on("keydown",function(e){var t,n,r;!1===e.isDefaultPrevented()&&(t=o,n=i,r=e,IC([{keyCode:Sf.BACKSPACE,action:LC(fC,t,!1)},{keyCode:Sf.BACKSPACE,action:LC(Ob,t,!1)},{keyCode:Sf.DELETE,action:LC(Ob,t,!0)},{keyCode:Sf.BACKSPACE,action:LC(Sb,t,!1)},{keyCode:Sf.DELETE,action:LC(Sb,t,!0)},{keyCode:Sf.BACKSPACE,action:LC(Q0,t,n,!1)},{keyCode:Sf.DELETE,action:LC(Q0,t,n,!0)},{keyCode:Sf.BACKSPACE,action:LC(Wg,t,!1)},{keyCode:Sf.DELETE,action:LC(Wg,t,!0)},{keyCode:Sf.BACKSPACE,action:LC(Bb,t,!1)},{keyCode:Sf.DELETE,action:LC(Bb,t,!0)},{keyCode:Sf.BACKSPACE,action:LC(oC,t,!1)},{keyCode:Sf.DELETE,action:LC(oC,t,!0)},{keyCode:Sf.BACKSPACE,action:LC(mb,t,!1)},{keyCode:Sf.DELETE,action:LC(mb,t,!0)},{keyCode:Sf.BACKSPACE,action:LC(cb,t,!1)},{keyCode:Sf.DELETE,action:LC(cb,t,!0)},{keyCode:Sf.BACKSPACE,action:LC(nC,t,!1)},{keyCode:Sf.DELETE,action:LC(nC,t,!0)}],r).each(function(e){r.preventDefault()}))}),o.on("keyup",function(e){var t;!1===e.isDefaultPrevented()&&(t=o,e=e,IC([{keyCode:Sf.BACKSPACE,action:LC(Db,t)},{keyCode:Sf.DELETE,action:LC(Db,t)}],e))})},n1=function(e,t){var n,r,o=t,i=e.dom,a=e.schema.getMoveCaretBeforeOnEnterElements();if(t){!/^(LI|DT|DD)$/.test(t.nodeName)||(r=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}(t.firstChild))&&/^(UL|OL|DL)$/.test(r.nodeName)&&t.insertBefore(i.doc.createTextNode(jr),t.firstChild);var u=i.createRng();if(t.normalize(),t.hasChildNodes()){for(var s=new kr(t,t);n=s.current();){if(yn(n)){u.setStart(n,0),u.setEnd(n,0);break}if(a[n.nodeName.toLowerCase()]){u.setStartBefore(n),u.setEndBefore(n);break}o=n,n=s.next()}n||(u.setStart(o,0),u.setEnd(o,0))}else xn(t)?t.nextSibling&&i.isBlock(t.nextSibling)?(u.setStartBefore(t),u.setEndBefore(t)):(u.setStartAfter(t),u.setEndAfter(t)):(u.setStart(t,0),u.setEnd(t,0));e.selection.setRng(u),sd(e,u)}},r1=function(e){return T.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},o1=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},i1=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},a1=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},u1=function(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&!mn(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},s1=function(e,t,n,r,o){var i,a,u=e.dom,s=e.selection.getRng();n!==e.getBody()&&(i=(o=i1(i=n)&&i1(i.parentNode)?"LI":o)?t(o):u.create("BR"),u1(n,r,!0)&&u1(n,r,!1)?o1(n,"LI")?(a=a1(n),u.insertAfter(i,a),(null===(t=n.parentNode)||void 0===t?void 0:t.firstChild)===n?u.remove(a):u.remove(n)):u.replace(i,n):(u1(n,r,!0)?o1(n,"LI")?(u.insertAfter(i,a1(n)),i.appendChild(u.doc.createTextNode(" ")),i.appendChild(n)):n.parentNode.insertBefore(i,n):u1(n,r,!1)?u.insertAfter(i,a1(n)):(n=a1(n),(a=s.cloneRange()).setStartAfter(r),a.setEndAfter(n),s=a.extractContents(),"LI"===o&&(a="LI",(o=s).firstChild&&o.firstChild.nodeName===a)?(i=s.firstChild,u.insertAfter(s,n)):(u.insertAfter(s,n),u.insertAfter(i,n))),u.remove(r)),n1(e,i))},c1=function(e){e.innerHTML='<br data-mce-bogus="1">'},l1=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},f1=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},d1=function(e,t,n){return!1===yn(t)?n:e?1===n&&t.data.charAt(n-1)===Hr?0:n:n===t.data.length-1&&t.data.charAt(n)===Hr?t.data.length:n},m1=function(e,t){for(var n,r=e.getRoot(),o=t;o!==r&&"false"!==e.getContentEditable(o);)"true"===e.getContentEditable(o)&&(n=o),o=o.parentNode;return o!==r?n:r},g1=function(e,t){var n=Bs(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&function(e,n,t){var r=e.dom;T.from(t.style).map(r.parseStyle).each(function(e){var t=Fn(ht.fromDom(n)),e=Ne(Ne({},t),e);r.setStyles(n,e)});var o=T.from(t["class"]).map(function(e){return e.split(/\s+/)}),e=T.from(n.className).map(function(e){return U(e.split(/\s+/),function(e){return""!==e})});Bu(o,e,function(t,e){e=U(e,function(e){return!L(t,e)}),e=Ee(t,e);r.setAttrib(n,"class",e.join(" "))});var i=["style","class"],t=fe(t,function(e,t){return!L(i,t)});r.setAttribs(n,t)}(e,t,Ps(e))},p1=function(a,e){var u,i,t,s,c=a.dom,l=a.schema,f=l.getNonEmptyElements(),n=a.selection.getRng(),r=function(e){var t,n=u,r=l.getTextInlineElements(),o=e||"TABLE"===h||"HR"===h?c.create(e||y):g.cloneNode(!1),i=o;if(!1===a.getParam("keep_styles",!0))c.setAttrib(o,"style",null),c.setAttrib(o,"class",null);else for(;r[n.nodeName]&&(al(n)||hl(n)||(t=n.cloneNode(!1),c.setAttrib(t,"id",""),o.hasChildNodes()?(t.appendChild(o.firstChild),o.appendChild(t)):o.appendChild(i=t))),(n=n.parentNode)&&n!==b;);return g1(a,o),c1(i),o},o=function(e){var t,n,r=d1(e,u,i);if(yn(u)&&(e?0<r:r<u.nodeValue.length))return!1;if(u.parentNode===g&&s&&!e)return!0;if(e&&mn(u)&&u===g.firstChild)return!0;if(l1(u,"TABLE")||l1(u,"HR"))return s&&!e||!s&&e;var o=new kr(u,g);for(yn(u)&&(e&&0===r?o.prev():e||r!==u.nodeValue.length||o.next());t=o.current();){if(mn(t)){if(!t.getAttribute("data-mce-bogus")&&(n=t.nodeName.toLowerCase(),f[n]&&"br"!==n))return!1}else if(yn(t)&&!ho(t.nodeValue))return!1;e?o.prev():o.next()}return!0},d=function(){t=/^(H[1-6]|PRE|FIGURE)$/.test(h)&&"HGROUP"!==v?r(y):r(),a.getParam("end_container_on_empty_block",!1)&&f1(c,p)&&c.isEmpty(g)?t=c.split(p,g):c.insertAfter(t,g),n1(a,t)};Pf(c,n).each(function(e){n.setStart(e.startContainer,e.startOffset),n.setEnd(e.endContainer,e.endOffset)}),u=n.startContainer,i=n.startOffset,y=Bs(a);var m=!(!e||!e.shiftKey),e=!(!e||!e.ctrlKey);mn(u)&&u.hasChildNodes()&&(s=i>u.childNodes.length-1,u=u.childNodes[Math.min(i,u.childNodes.length-1)]||u,i=s&&yn(u)?u.nodeValue.length:0);var g,p,h,v,y,b=m1(c,u);b&&((y&&!m||!y&&m)&&(u=function(e,t,n,r,o){var i,a,u,s,c,l=t||"P",f=e.dom,t=m1(f,r),d=f.getParent(r,f.isBlock);if(!d||!f1(f,d)){if(c=((d=d||t)===e.getBody()||(c=d)&&/^(TD|TH|CAPTION)$/.test(c.nodeName)?d:d.parentNode).nodeName.toLowerCase(),!d.hasChildNodes())return i=f.create(l),g1(e,i),d.appendChild(i),n.setStart(i,0),n.setEnd(i,0),i;for(u=r;u.parentNode!==d;)u=u.parentNode;for(;u&&!f.isBlock(u);)u=(a=u).previousSibling;if(a&&e.schema.isValidChild(c,l.toLowerCase())){for(i=f.create(l),g1(e,i),a.parentNode.insertBefore(i,a),u=a;u&&!f.isBlock(u);)s=u.nextSibling,i.appendChild(u),u=s;n.setStart(r,o),n.setEnd(r,o)}}return r}(a,y,n,u,i)),p=(g=c.getParent(u,c.isBlock))?c.getParent(g.parentNode,c.isBlock):null,h=g?g.nodeName.toUpperCase():"","LI"!==(v=p?p.nodeName.toUpperCase():"")||e||(p=(g=p).parentNode,h=v),/^(LI|DT|DD)$/.test(h)&&c.isEmpty(g)?s1(a,r,p,g,y):y&&g===a.getBody()||(y=y||"P",Kr(g)?(t=no(g),c.isEmpty(g)&&c1(g),g1(a,t),n1(a,t)):o()?d():o(!0)?(t=g.parentNode.insertBefore(r(),g),n1(a,l1(g,"HR")?t:g)):((o=(e=n).cloneRange()).setStart(e.startContainer,d1(!0,e.startContainer,e.startOffset)),o.setEnd(e.endContainer,d1(!1,e.endContainer,e.endOffset)),(o=o.cloneRange()).setEndAfter(g),o=o.extractContents(),X(hu(ht.fromDom(o),kt),function(e){e=e.dom;e.nodeValue=qr(e.nodeValue)}),function(e){for(;yn(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;);}(o),t=o.firstChild,c.insertAfter(o,g),function(e,t,n){var r,o,i,a=n,u=[];if(a){for(;a=a.firstChild;){if(e.isBlock(a))return;mn(a)&&!t[a.nodeName.toLowerCase()]&&u.push(a)}for(r=u.length;r--;)!(a=u[r]).hasChildNodes()||a.firstChild===a.lastChild&&""===a.firstChild.nodeValue?e.remove(a):(o=e,(i=a)&&"A"===i.nodeName&&o.isEmpty(i)&&e.remove(a))}}(c,f,t),function(e,t){t.normalize();var n=t.lastChild;n&&!/^(left|right)$/gi.test(e.getStyle(n,"float",!0))||e.add(t,"br")}(c,g),c.isEmpty(g)&&c1(g),t.normalize(),c.isEmpty(t)?(c.remove(t),d()):(g1(a,t),n1(a,t))),c.setAttrib(t,"id",""),a.fire("NewBlock",{newBlock:t})))},h1=function(e,t,n){var r=e.dom.createRng();n?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),e.selection.setRng(r),sd(e,r)},v1=function(e,t){var n,r,o=e.selection,i=e.dom,a=o.getRng();Pf(i,a).each(function(e){a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)});var u=a.startOffset,s=a.startContainer;1===s.nodeType&&s.hasChildNodes()&&(l=u>s.childNodes.length-1,s=s.childNodes[Math.min(u,s.childNodes.length-1)]||s,u=l&&3===s.nodeType?s.nodeValue.length:0);var c=i.getParent(s,i.isBlock),o=c?i.getParent(c.parentNode,i.isBlock):null,l=o?o.nodeName.toUpperCase():"",t=!(!t||!t.ctrlKey);"LI"!==l||t||(c=o),s&&3===s.nodeType&&u>=s.nodeValue.length&&!function(e,t,n){for(var r,o=new kr(t,n),i=e.getNonEmptyElements();r=o.next();)if(i[r.nodeName.toLowerCase()]||0<r.length)return!0}(e.schema,s,c)&&(n=i.create("br"),a.insertNode(n),a.setStartAfter(n),a.setEndAfter(n),r=!0),n=i.create("br"),ls(i,a,n),h1(e,n,r),e.undoManager.add()},y1=function(e,t){var n=ht.fromTag("br");Kt(ht.fromDom(t),n),e.undoManager.add()},b1=function(e,t){C1(e.getBody(),t)||Xt(ht.fromDom(t),ht.fromTag("br"));var n=ht.fromTag("br");Xt(ht.fromDom(t),n),h1(e,n.dom,!1),e.undoManager.add()},C1=function(e,t){return n=us.after(t),!!xn(n.getNode())||tl(e,us.after(t)).map(function(e){return xn(e.getNode())}).getOr(!1);var n},w1=function(e){return e&&"A"===e.nodeName&&"href"in e},x1=function(e){return e.fold(E,w1,w1,E)},S1=function(e,t){t.fold(ee,h(y1,e),h(b1,e),ee)},N1=function(e,t){var n,r,o,o=(r=h(qy,n=e),o=us.fromRangeStart(n.selection.getRng()),e0(r,n.getBody(),o).filter(x1));o.isSome()?o.each(h(S1,e)):v1(e,t)},E1=function(e,t){return r1(e).filter(function(e){return 0<t.length&&yt(ht.fromDom(e),t)}).isSome()},k1=Ke([{br:[]},{block:[]},{none:[]}]),_1=function(e,t){return E1(e,e.getParam("no_newline_selector",""))},A1=function(n){return function(e,t){return""===Bs(e)===n}},R1=function(n){return function(e,t){return r1(e).filter(function(e){return Ir(ht.fromDom(e))}).isSome()===n}},T1=function(n,r){return function(e,t){return r1(e).fold(x(""),function(e){return e.nodeName.toUpperCase()})===n.toUpperCase()===r}},D1=function(e){return T1("pre",e)},O1=function(n){return function(e,t){return e.getParam("br_in_pre",!0)===n}},B1=function(e,t){return E1(e,e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption"))},P1=function(e,t){return t},L1=function(e){var t=Bs(e),n=function(e,t){for(var n,r=e.getRoot(),o=t;o!==r&&"false"!==e.getContentEditable(o);)"true"===e.getContentEditable(o)&&(n=o),o=o.parentNode;return o!==r?n:r}(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},I1=function(e,t){return function(n,r){return j(e,function(e,t){return e&&t(n,r)},!0)?T.some(t):T.none()}},M1=function(e,t){return qb([I1([_1],k1.none()),I1([T1("summary",!0)],k1.br()),I1([D1(!0),O1(!1),P1],k1.br()),I1([D1(!0),O1(!1)],k1.block()),I1([D1(!0),O1(!0),P1],k1.block()),I1([D1(!0),O1(!0)],k1.br()),I1([R1(!0),P1],k1.br()),I1([R1(!0)],k1.block()),I1([A1(!0),P1,L1],k1.block()),I1([A1(!0)],k1.br()),I1([B1],k1.br()),I1([A1(!1),P1],k1.br()),I1([L1],k1.block())],[e,!(!t||!t.shiftKey)]).getOr(k1.none())},F1=function(e,t){M1(e,t).fold(function(){N1(e,t)},function(){p1(e,t)},ee)},U1=function(r){r.on("keydown",function(e){var t,n;e.keyCode===Sf.ENTER&&(t=r,(n=e).isDefaultPrevented()||(n.preventDefault(),(e=t.undoManager).typing&&(e.typing=!1,e.add()),t.undoManager.transact(function(){!1===t.selection.isCollapsed()&&t.execCommand("Delete"),F1(t,n)})))})},z1=function(o,i){o.on("keydown",function(e){var t,n,r;!1===e.isDefaultPrevented()&&(t=o,n=i,r=e,IC([{keyCode:Sf.END,action:LC(kC,t,!0)},{keyCode:Sf.HOME,action:LC(kC,t,!1)},{keyCode:Sf.END,action:LC(UC,t,!0)},{keyCode:Sf.HOME,action:LC(UC,t,!1)},{keyCode:Sf.END,action:LC(X0,t,!0,n)},{keyCode:Sf.HOME,action:LC(X0,t,!1,n)}],r).each(function(e){r.preventDefault()}))})},j1=ut().browser,H1=function(t){var e,n;e=t,n=uu(function(){e.composing||og(e)},0),j1.isIE()&&(e.on("keypress",function(e){n.throttle()}),e.on("remove",function(e){n.cancel()})),t.on("input",function(e){!1===e.isComposing&&og(t)})},V1=ut(),q1=function(e){return e.stopImmediatePropagation()},$1=function(e){return e.keyCode===Sf.PAGE_UP||e.keyCode===Sf.PAGE_DOWN},W1=function(e,t,n){n&&!e.get()?t.on("NodeChange",q1,!0):!n&&e.get()&&t.off("NodeChange",q1),e.set(n)},K1=function(o,i){var a;V1.os.isOSX()||(a=tu(!1),o.on("keydown",function(e){$1(e)&&W1(a,o,!0)}),o.on("keyup",function(e){var t,n,r;!1===e.isDefaultPrevented()&&(t=o,n=i,r=e,IC([{keyCode:Sf.PAGE_UP,action:LC(X0,t,!1,n)},{keyCode:Sf.PAGE_DOWN,action:LC(X0,t,!0,n)}],r)),$1(e)&&a.get()&&(W1(a,o,!1),o.nodeChanged())}))},_=function(n,r){var e=r.container(),t=r.offset();return yn(e)?(e.insertData(t,n),T.some(us(e,t+n.length))):Rc(r).map(function(e){var t=ht.fromText(n);return(r.isAtEnd()?Xt:Kt)(e,t),us(t.dom,n.length)})},X1=h(_,jr),Y1=h(_," "),G1=function(n,r){return function(e){return t=n,(!Ym(e=e)&&(Gm(t,e)||Km(t,e)||Xm(t,e))?X1:Y1)(r);var t}},J1=function(e){var t,n,r=us.fromRangeStart(e.selection.getRng()),o=ht.fromDom(e.getBody());if(e.selection.isCollapsed()){var i=h(qy,e),a=us.fromRangeStart(e.selection.getRng());return e0(i,e.getBody(),a).bind((n=o,function(e){return e.fold(function(e){return nl(n.dom,us.before(e))},function(e){return rl(e)},function(e){return ol(e)},function(e){return tl(n.dom,us.after(e))})})).bind(G1(o,r)).exists((t=e,function(e){return t.selection.setRng(e.toRange()),t.nodeChanged(),!0}))}return!1},Q1=function(n){n.on("keydown",function(e){var t;!1===e.isDefaultPrevented()&&(t=e,IC([{keyCode:Sf.SPACEBAR,action:LC(J1,n)}],t).each(function(e){t.preventDefault()}))})},Z1=function(e){var t=$0(e);return e.on("keyup compositionstart",h(bC,e)),e1(e,t),t1(e,t),U1(e),Q1(e),H1(e),z1(e,t),K1(e,t),t},ew=(tw.prototype.nodeChanged=function(e){var t,n,r=this.editor.selection;this.editor.initialized&&r&&!this.editor.getParam("disable_nodechange")&&!this.editor.mode.isReadOnly()&&(n=this.editor.getBody(),(r=r.getStart(!0)||n).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(r,n)||(r=n),t=[],this.editor.dom.getParent(r,function(e){return e===n||void t.push(e)}),(e=e||{}).element=r,e.parents=t,this.editor.fire("NodeChange",e))},tw.prototype.isSameElementPath=function(e){var t,n=this.editor.$(e).parentsUntil(this.editor.getBody()).add(e);if(n.length===this.lastPath.length){for(t=n.length;0<=t&&n[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=n,!0}return this.lastPath=n,!1},tw);function tw(n){var r;this.lastPath=[],this.editor=n;var t=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",function(e){var t=n.selection.getRng(),t={startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset};"nodechange"!==e.type&&Af(t,r)||n.fire("SelectionChange"),r=t}),n.on("contextmenu",function(){n.fire("SelectionChange")}),n.on("SelectionChange",function(){var e=n.selection.getStart(!0);!e||!ct.range&&n.selection.isCollapsed()||cf(n)&&!t.isSameElementPath(e)&&n.dom.isChildOf(e,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",function(e){!e.isDefaultPrevented()&&cf(n)&&("IMG"===n.selection.getNode().nodeName?Sr.setEditorTimeout(n,function(){n.nodeChanged()}):n.nodeChanged())})}var nw=function(e){var t;(t=e).on("click",function(e){t.dom.getParent(e.target,"details")&&e.preventDefault()}),(e=e).parser.addNodeFilter("details",function(e){X(e,function(e){e.attr("data-mce-open",e.attr("open")),e.attr("open","open")})}),e.serializer.addNodeFilter("details",function(e){X(e,function(e){var t=e.attr("data-mce-open");e.attr("open",W(t)?t:null),e.attr("data-mce-open",null)})})},rw=function(e){return mn(e)&&Pr(ht.fromDom(e))},ow=function(i){i.on("click",function(e){var t,n,r,o;3<=e.detail&&(r=(t=i).selection.getRng(),o=us.fromRangeStart(r),e=us.fromRangeEnd(r),us.isElementPosition(o)&&(n=o.container(),rw(n)&&rl(n).each(function(e){return r.setStart(e.container(),e.offset())})),us.isElementPosition(e)&&(n=o.container(),rw(n)&&ol(n).each(function(e){return r.setEnd(e.container(),e.offset())})),t.selection.setRng(Xg(r)))})},iw=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,e=n.documentElement,n=n.defaultView;return{top:t.top+n.pageYOffset-e.clientTop,left:t.left+n.pageXOffset-e.clientLeft}},aw=function(e,t){return n=(o=e).inline?iw(o.getBody()):{left:0,top:0},o=(r=e).getBody(),o=r.inline?{left:o.scrollLeft,top:o.scrollTop}:{left:0,top:0},{pageX:(t=function(e,t){if(t.target.ownerDocument===e.getDoc())return{left:t.pageX,top:t.pageY};var n,r,o=iw(e.getContentAreaContainer()),i=(r=(n=e).getBody(),i=n.getDoc().documentElement,e={left:r.scrollLeft,top:r.scrollTop},i={left:r.scrollLeft||i.scrollLeft,top:r.scrollTop||i.scrollTop},n.inline?e:i);return{left:t.pageX-o.left+i.left,top:t.pageY-o.top+i.top}}(e,t)).left-n.left+o.left,pageY:t.top-n.top+o.top};var n,r,o},uw=En,sw=Nn,cw=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},lw=function(i,a){return function(e){var t,n,r,o;0===e.button&&(t=H(a.dom.getParents(e.target),function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(e){for(var t=0;t<n.length;t++)if(n[t](e))return!0;return!1}}(uw,sw)).getOr(null),r=a.getBody(),uw(o=t)&&o!==r&&(n=a.dom.getPos(t),o=a.getBody(),r=a.getDoc().documentElement,i.set({element:t,dragging:!1,screenX:e.screenX,screenY:e.screenY,maxX:(a.inline?o.scrollWidth:r.offsetWidth)-2,maxY:(a.inline?o.scrollHeight:r.offsetHeight)-2,relX:e.pageX-n.x,relY:e.pageY-n.y,width:t.offsetWidth,height:t.offsetHeight,ghost:function(e,t,n,r){var o=e.dom,e=t.cloneNode(!0);o.setStyles(e,{width:n,height:r}),o.setAttrib(e,"data-mce-selected",null);t=o.create("div",{"class":"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(t,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),o.setStyles(e,{margin:0,boxSizing:"border-box"}),t.appendChild(e),t}(a,t,t.offsetWidth,t.offsetHeight)})))}},fw=function(e,c){var l=Sr.throttle(function(e,t){c._selectionOverrides.hideFakeCaret(),c.selection.placeCaretAt(e,t)},0);return c.on("remove",l.stop),function(s){return e.on(function(e){var t,n,r,o,i,a,u=Math.max(Math.abs(s.screenX-e.screenX),Math.abs(s.screenY-e.screenY));if(!e.dragging&&10<u){if(c.fire("dragstart",{target:e.element}).isDefaultPrevented())return;e.dragging=!0,c.focus()}e.dragging&&(i=e,n={pageX:(a=aw(c,s)).pageX-i.relX,pageY:a.pageY+5},r=e.ghost,o=c.getBody(),r.parentNode!==o&&o.appendChild(r),t=e.ghost,u=n,i=e.width,a=e.height,o=e.maxX,r=e.maxY,e=n=0,t.style.left=u.pageX+"px",t.style.top=u.pageY+"px",u.pageX+i>o&&(n=u.pageX+i-o),u.pageY+a>r&&(e=u.pageY+a-r),t.style.width=i-n+"px",t.style.height=a-e+"px",l(s.clientX,s.clientY))})}},dw=function(e,a){return function(i){e.on(function(e){var t,n,r,o;e.dragging&&(r=function(e){e=e.getSel().getRangeAt(0).startContainer;return 3===e.nodeType?e.parentNode:e}((n=a).selection),o=e.element,r===o||n.dom.isChildOf(r,o)||uw(r)||(t=function(e){e=e.cloneNode(!0);return e.removeAttribute("data-mce-selected"),e}(e.element),a.fire("drop",{clientX:i.clientX,clientY:i.clientY}).isDefaultPrevented()||a.undoManager.transact(function(){cw(e.element),a.insertContent(a.dom.getOuterHTML(t)),a._selectionOverrides.hideFakeCaret()})))}),mw(e)}},mw=function(e){e.on(function(e){cw(e.ghost)}),e.clear()},gw=function(e){var t,n,r,o=(t=tu(T.none()),{clear:function(){return t.set(T.none())},set:function(e){return t.set(T.some(e))},isSet:function(){return t.get().isSome()},on:function(e){return t.get().each(e)}}),i=Ya.DOM,a=document,u=lw(o,e),s=fw(o,e),c=dw(o,e),l=(n=o,function(){n.on(function(e){e.dragging&&r.fire("dragend")}),mw(n)});(r=e).on("mousedown",u),e.on("mousemove",s),e.on("mouseup",c),i.bind(a,"mousemove",s),i.bind(a,"mouseup",l),e.on("remove",function(){i.unbind(a,"mousemove",s),i.unbind(a,"mouseup",l)})},pw=function(e){var n,i,a,u,t;gw(e),(n=e).on("drop",function(e){var t="undefined"!=typeof e.clientX?n.getDoc().elementFromPoint(e.clientX,e.clientY):null;!uw(t)&&"false"!==n.dom.getContentEditableParent(t)||e.preventDefault()}),e.getParam("block_unsupported_drop",!0,"boolean")&&(a=function(e){var t;e.isDefaultPrevented()||(t=e.dataTransfer)&&(L(t.types,"Files")||0<t.files.length)&&(e.preventDefault(),"drop"===e.type&&gy(i,"Dropped file type is not supported"))},u=function(e){Rd(i,e.target)&&a(e)},t=function(){var t=Ya.DOM,n=i.dom,r=document,o=i.inline?i.getBody():i.getDoc(),e=["drop","dragover"];X(e,function(e){t.bind(r,e,u),n.bind(o,e,a)}),i.on("remove",function(){X(e,function(e){t.unbind(r,e,u),n.unbind(o,e,a)})})},(i=e).on("init",function(){Sr.setEditorTimeout(i,t,0)}))},hw=Nn,vw=En,yw=function(e,t){return Cf(e.getBody(),t)},bw=function(a){var i,u=a.selection,s=a.dom,c=s.isBlock,l=a.getBody(),f=uc(a,l,c,function(){return Md(a)}),d="sel-"+s.uniqueId(),o="data-mce-selected",m=function(e){return e!==l&&(vw(e)||kn(e))&&s.isChildOf(e,l)},g=function(e){e&&u.setRng(e)},p=u.getRng,h=function(e,t,n,r){return void 0===r&&(r=!0),a.fire("ShowCaret",{target:t,direction:e,before:n}).isDefaultPrevented()?null:(r&&u.scrollIntoView(t,-1===e),f.show(n,t))},e=function(){a.on("mouseup",function(e){var t=p();t.collapsed&&ay(a,e.clientX,e.clientY)&&yb(a,t,!1).each(g)}),a.on("click",function(e){var t=yw(a,e.target);t&&(vw(t)&&(e.preventDefault(),a.focus()),hw(t)&&s.isChildOf(t,u.getNode())&&w())}),a.on("blur NewBlock",w),a.on("ResizeWindow FullscreenStateChanged",f.reposition);var r=function(e){var t=Wc(e);if(!e.firstChild)return!1;e=us.before(e.firstChild),e=t.next(e);return e&&!(Em(e=e)||km(e)||wm(e)||xm(e))},o=function(e,t){var n=s.getParent(e,c),t=s.getParent(t,c);return!(!n||e===t||!s.isChildOf(n,t)||!1!==vw(yw(a,n)))||n&&(t=t,!(s.getParent(n,c)===s.getParent(t,c)))&&r(n)};a.on("tap",function(e){var t=e.target,n=yw(a,t);vw(n)?(e.preventDefault(),vb(a,n).each(C)):m(t)&&vb(a,t).each(C)},!0),a.on("mousedown",function(e){var t,n=e.target;n!==l&&"HTML"!==n.nodeName&&!s.isChildOf(n,l)||!1===ay(a,e.clientX,e.clientY)||((t=yw(a,n))?vw(t)?(e.preventDefault(),vb(a,t).each(C)):(w(),hw(t)&&e.shiftKey||wf(e.clientX,e.clientY,u.getRng())||(x(),u.placeCaretAt(e.clientX,e.clientY))):m(n)?vb(a,n).each(C):!1===lc(n)&&(w(),x(),(t=B0(l,e.clientX,e.clientY))&&(o(n,t.node)||(e.preventDefault(),t=h(1,t.node,t.before,!1),a.getBody().focus(),g(t)))))}),a.on("keypress",function(e){Sf.modifierPressed(e)||vw(u.getNode())&&e.preventDefault()}),a.on("GetSelectionRange",function(e){var t=e.range;i&&(i.parentNode?((t=t.cloneRange()).selectNode(i),e.range=t):i=null)}),a.on("SetSelectionRange",function(e){e.range=y(e.range);var t=C(e.range,e.forward);t&&(e.range=t)});var t,e,n;a.on("AfterSetSelectionRange",function(e){var t=e.range,e=t.startContainer.parentNode;v(t)||"mcepastebin"===e.id||x(),s.hasClass(e,"mce-offscreen-selection")||w()}),a.on("copy",function(e){var t,n=e.clipboardData;e.isDefaultPrevented()||!e.clipboardData||ct.ie||(t=(t=s.get(d))&&t.getElementsByTagName("*")[0])&&(e.preventDefault(),n.clearData(),n.setData("text/html",t.outerHTML),n.setData("text/plain",t.outerText||t.innerText))}),pw(a),e=uu(function(){var e;t.removed||!t.getBody().contains(document.activeElement)||(e=t.selection.getRng()).collapsed&&(e=bb(t,e,!1),t.selection.setRng(e))},0),(t=a).on("focus",function(){e.throttle()}),t.on("blur",function(){e.cancel()}),(n=a).on("init",function(){n.on("focusin",function(e){var t=e.target;kn(t)&&(e=Cf(n.getBody(),t),t=En(e)?e:t,n.selection.getNode()!==t&&vb(n,t).each(function(e){return n.selection.setRng(e)}))})})},t=function(e){return Yr(e)||eo(e)||to(e)},v=function(e){return t(e.startContainer)||t(e.endContainer)},y=function(e){var t=a.schema.getShortEndedElements(),n=s.createRng(),r=e.startContainer,o=e.startOffset,i=e.endContainer,e=e.endOffset;return ge(t,r.nodeName.toLowerCase())?0===o?n.setStartBefore(r):n.setStartAfter(r):n.setStart(r,o),ge(t,i.nodeName.toLowerCase())?0===e?n.setEndBefore(i):n.setEndAfter(i):n.setEnd(i,e),n},b=function(e){var t=e.cloneNode(!0),n=a.fire("ObjectSelected",{target:e,targetClone:t});if(n.isDefaultPrevented())return null;var t=function(e,t,n){var r=a.$,o=fr(ht.fromDom(a.getBody()),"#"+d).fold(function(){return r([])},function(e){return r([e.dom])});0===o.length&&(o=r('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",d)).appendTo(a.getBody());var i=s.createRng();t===n&&ct.ie?(o.empty().append('<p style="font-size: 0" data-mce-bogus="all">\xa0</p>').append(t),i.setStartAfter(o[0].firstChild.firstChild),i.setEndAfter(t)):(o.empty().append(jr).append(t).append(jr),i.setStart(o[0].firstChild,1),i.setEnd(o[0].lastChild,0)),o.css({top:s.getPos(e,a.getBody()).y}),o[0].focus();o=u.getSel();return o.removeAllRanges(),o.addRange(i),i}(e,n.targetClone,t),r=ht.fromDom(e);return X(vu(ht.fromDom(a.getBody()),"*[data-mce-selected]"),function(e){Ct(r,e)||Bn(e,o)}),s.getAttrib(e,o)||e.setAttribute(o,"1"),i=e,x(),t},C=function(e,t){if(!e)return null;if(e.collapsed){if(!v(e)){var n=t?1:-1,r=Ac(n,l,e),o=r.getNode(!t);if(lc(o))return h(n,o,!!t&&!r.isAtEnd(),!1);o=r.getNode(t);if(lc(o))return h(n,o,!t&&!r.isAtEnd(),!1)}return null}o=e.startContainer,t=e.startOffset,r=e.endOffset;if(3===o.nodeType&&0===t&&vw(o.parentNode)&&(o=o.parentNode,t=s.nodeIndex(o),o=o.parentNode),1!==o.nodeType)return null;if(r===t+1&&o===e.endContainer){t=o.childNodes[t];if(m(t))return b(t)}return null},w=function(){i&&i.removeAttribute(o),fr(ht.fromDom(a.getBody()),"#"+d).each(Zt),i=null},x=function(){f.hide()};return ct.ceFalse&&!Xh(a)&&e(),{showCaret:h,showBlockCaretContainer:function(e){e.hasAttribute("data-mce-caret")&&(no(e),g(p()),u.scrollIntoView(e))},hideFakeCaret:x,destroy:function(){f.destroy(),i=null}}},Cw=function(i){var o=gt.each,a=Sf.BACKSPACE,u=Sf.DELETE,s=i.dom,c=i.selection,e=i.parser,t=ct.gecko,n=ct.ie,l=ct.webkit,r="data:text/mce-internal,",f=n?"Text":"URL",d=function(e,t){try{i.getDoc().execCommand(e,!1,t)}catch(n){}},m=function(e){return e.isDefaultPrevented()},g=function(){var o=function(e){var t=s.create("body"),e=e.cloneContents();return t.appendChild(e),c.serializer.serialize(t,{format:"html"})};i.on("keydown",function(e){var t,n,r=e.keyCode;m(e)||r!==u&&r!==a||(n=i.selection.isCollapsed(),t=i.getBody(),n&&!s.isEmpty(t)||!n&&(r=i.selection.getRng(),n=o(r),(r=s.createRng()).selectNode(i.getBody()),n!==o(r))||(e.preventDefault(),i.setContent(""),t.firstChild&&s.isBlock(t.firstChild)?i.selection.setCursorLocation(t.firstChild,0):i.selection.setCursorLocation(t,0),i.nodeChanged()))})},p=function(){i.shortcuts.add("meta+a",null,"SelectAll")},h=function(){Range.prototype.getClientRects||i.on("mousedown",function(e){var t;m(e)||"HTML"!==e.target.nodeName||((t=i.getBody()).blur(),Sr.setEditorTimeout(i,function(){t.focus()}))})},v=function(){i.on("click",function(e){var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&"false"!==s.getContentEditableParent(t)&&(e.preventDefault(),i.selection.select(t),i.nodeChanged()),"A"===t.nodeName&&s.hasClass(t,"mce-item-anchor")&&(e.preventDefault(),c.select(t))})},y=function(){i.on("keydown",function(e){if(!m(e)&&e.keyCode===a&&c.isCollapsed()&&0===c.getRng().startOffset){var t=c.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})},b=function(){i.getParam("readonly")||i.on("BeforeExecCommand mousedown",function(){d("StyleWithCSS",!1),d("enableInlineTableEditing",!1),js(i)||d("enableObjectResizing",!1)})},C=function(){i.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||o(s.select("a"),function(e){var t=e.parentNode,n=s.getRoot();if(t.lastChild===e){for(;t&&!s.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}s.add(t,"br",{"data-mce-bogus":1})}})})},w=function(){i.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},x=function(){i.inline||i.on("keydown",function(){document.activeElement===document.body&&i.getWin().focus()})},S=function(){i.inline||(i.contentStyles.push("body {min-height: 150px}"),i.on("click",function(e){"HTML"===e.target.nodeName&&(11<ct.ie?i.getBody().focus():(e=i.selection.getRng(),i.getBody().focus(),i.selection.setRng(e),i.selection.normalize(),i.nodeChanged()))}))},N=function(){ct.mac&&i.on("keydown",function(e){!Sf.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),i.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))})},E=function(){i.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),i.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},k=function(){i.on("init",function(){i.dom.bind(i.getBody(),"submit",function(e){e.preventDefault()})})},_=function(){i.on("dragstart",function(e){var t;(t=e).dataTransfer&&(i.selection.isCollapsed()&&"IMG"===t.target.tagName&&c.select(t.target),0<(e=i.selection.getContent()).length&&(e=r+escape(i.id)+","+escape(e),t.dataTransfer.setData(f,e)))}),i.on("drop",function(e){var t,n;m(e)||(n=(t=e).dataTransfer&&(n=t.dataTransfer.getData(f))&&0<=n.indexOf(r)?(n=n.substr(r.length).split(","),{id:unescape(n[0]),html:unescape(n[1])}):null)&&n.id!==i.id&&(e.preventDefault(),e=_f(e.x,e.y,i.getDoc()),c.setRng(e),e=n.html,n=!0,i.queryCommandSupported("mceInsertClipboardContent")?i.execCommand("mceInsertClipboardContent",!1,{content:e,internal:n}):i.execCommand("mceInsertContent",!1,e))})},A=ee,n=function(){var n,r;i.on("keydown",function(e){if(!m(e)&&e.keyCode===Sf.BACKSPACE){var t,n=(t=c.getRng()).startContainer,e=t.startOffset,r=s.getRoot(),o=n;if(t.collapsed&&0===e){for(;o&&o.parentNode&&o.parentNode.firstChild===o&&o.parentNode!==r;)o=o.parentNode;"BLOCKQUOTE"===o.tagName&&(i.formatter.toggle("blockquote",null,o),(t=s.createRng()).setStart(n,0),t.setEnd(n,0),c.setRng(t))}}}),g(),ct.windowsPhone||i.on("keyup focusin mouseup",function(e){Sf.modifierPressed(e)||c.normalize()},!0),l&&(i.inline||s.bind(i.getDoc(),"mousedown mouseup",function(e){var t;e.target===i.getDoc().documentElement&&(t=c.getRng(),i.getBody().focus(),"mousedown"===e.type?Yr(t.startContainer)||c.placeCaretAt(e.clientX,e.clientY):c.setRng(t))}),v(),Bs(i)&&i.on("init",function(){d("DefaultParagraphSeparator",Bs(i))}),k(),y(),e.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}),ct.iOS?(x(),S(),E()):p()),11<=ct.ie&&(S(),y()),ct.ie&&(p(),d("AutoUrlDetect",!1),_()),t&&(i.on("keydown",function(e){if(!m(e)&&e.keyCode===a&&i.getBody().getElementsByTagName("hr").length&&c.isCollapsed()&&0===c.getRng().startOffset){var t=c.getNode(),n=t.previousSibling;if("HR"===t.nodeName)return s.remove(t),void e.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(s.remove(n),e.preventDefault())}}),h(),n=function(){var e=s.getAttribs(c.getStart().cloneNode(!1));return function(){var t=c.getStart();t!==i.getBody()&&(s.setAttrib(t,"style",null),o(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}},r=function(){return!c.isCollapsed()&&s.getParent(c.getStart(),s.isBlock)!==s.getParent(c.getEnd(),s.isBlock)},i.on("keypress",function(e){var t;if(!m(e)&&(8===e.keyCode||46===e.keyCode)&&r())return t=n(),i.getDoc().execCommand("delete",!1,null),t(),e.preventDefault(),!1}),s.bind(i.getDoc(),"cut",function(e){var t;!m(e)&&r()&&(t=n(),Sr.setEditorTimeout(i,function(){t()}))}),b(),C(),w(),N(),y())};return Xh(i)?(l&&(v(),k(),p(),ct.iOS&&(x(),S(),E())),t&&(h(),b(),w(),N())):n(),{refreshContentEditable:A,isHidden:function(){if(!t||i.removed)return!1;var e=i.selection.getSel();return!e||!e.rangeCount||0===e.rangeCount}}},ww=Ya.DOM,xw=function(e){return fe(e,function(e){return!1===d(e)})},Sw=function(e){var t=e.settings,n=e.editorUpload.blobCache;return xw({allow_conditional_comments:t.allow_conditional_comments,allow_html_data_urls:t.allow_html_data_urls,allow_svg_data_urls:t.allow_svg_data_urls,allow_html_in_named_anchor:t.allow_html_in_named_anchor,allow_script_urls:t.allow_script_urls,allow_unsafe_link_target:t.allow_unsafe_link_target,convert_fonts_to_spans:t.convert_fonts_to_spans,fix_list_elements:t.fix_list_elements,font_size_legacy_values:t.font_size_legacy_values,forced_root_block:t.forced_root_block,forced_root_block_attrs:t.forced_root_block_attrs,padd_empty_with_br:t.padd_empty_with_br,preserve_cdata:t.preserve_cdata,remove_trailing_brs:t.remove_trailing_brs,inline_styles:t.inline_styles,root_name:(e=e).inline?e.getElement().nodeName.toLowerCase():undefined,validate:!0,blob_cache:n,images_dataimg_filter:t.images_dataimg_filter})},Nw=function(o){var e=o.dom.getRoot();o.inline||cf(o)&&o.selection.getStart(!0)!==e||rl(e).each(function(e){var t,n=e.getNode(),r=hn(n)?rl(n).getOr(e):e;ct.browser.isIE()?(t=o,n=r.toRange(),e=ht.fromDom(t.getBody()),e=(bd(t)?T.from(n):T.none()).map(Cd).filter(yd(e)),t.bookmark=e.isSome()?e:t.bookmark):o.selection.setRng(r.toRange())})},Ew=function(e){var t;e.bindPendingEventDelegates(),e.initialized=!0,e.fire("Init"),e.focus(!0),Nw(e),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),(t=e).settings.auto_focus&&Sr.setEditorTimeout(t,function(){var e=!0===t.settings.auto_focus?t:t.editorManager.get(t.settings.auto_focus);e.destroyed||e.focus()},100)},kw=function(e){return(e.inline?e.ui:e.dom).styleSheetLoader},_w=function(e,t){var n,r,o,i,a=kw(e),u=zs(e),s=function(){a.unloadAll(t),e.inline||e.ui.styleSheetLoader.unloadAll(u)},c=function(){e.removed?s():(e.on("remove",s),Ew(e))};mr.all((n=e,r=t,o=u,i=[new mr(function(e,t){return kw(n).loadAll(r,e,t)})],n.inline?i:i.concat([new mr(function(e,t){return n.ui.styleSheetLoader.loadAll(o,e,t)})]))).then(c)["catch"](c)},Aw=function(t){var e=t.settings,n=t.getDoc(),r=t.getBody();e.browser_spellcheck||e.gecko_spellcheck||(n.body.spellcheck=!1,ww.setAttrib(r,"spellcheck","false")),t.quirks=Cw(t),t.fire("PostRender");var o,i,a=t.getParam("directionality",iu.isRtl()?"rtl":undefined);a!==undefined&&(r.dir=a),e.protect&&t.on("BeforeSetContent",function(t){gt.each(e.protect,function(e){t.content=t.content.replace(e,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})}),t.on("SetContent",function(){t.addVisual(t.getBody())}),Xh(t)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),t.on("compositionstart compositionend",function(e){t.composing="compositionstart"===e.type}),0<t.contentStyles.length&&(o="",gt.each(t.contentStyles,function(e){o+=e+"\r\n"}),t.dom.addStyle(o)),_w(t,t.contentCSS),e.content_style&&(n=t,r=e.content_style,a=ht.fromDom(n.getBody()),a=qt(Vt(a)),i=ht.fromTag("style"),Rn(i,"type","text/css"),Gt(i,ht.fromText(r)),Gt(a,i),n.on("remove",function(){Zt(i)}))},Rw=function(t,e){var n=t.settings,r=t.getElement(),o=t.getDoc();n.inline||(t.getElement().style.visibility=t.orgVisibility),e||t.inline||(o.open(),o.write(t.iframeHTML),o.close()),t.inline&&(ww.addClass(r,"mce-content-body"),t.contentDocument=o=document,t.contentWindow=window,t.bodyElement=r,t.contentAreaContainer=r);var u,r=t.getBody();r.disabled=!0,t.readonly=!!n.readonly,t.readonly||(t.inline&&"static"===ww.getStyle(r,"position",!0)&&(r.style.position="relative"),r.contentEditable=t.getParam("content_editable_state",!0)),r.disabled=!1,t.editorUpload=Ay(t),t.schema=Go(n),t.dom=Ya(o,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,hex_colors:n.force_hex_style_colors,update_styles:!0,root_element:t.inline?t.getBody():null,collect:function(){return t.inline},schema:t.schema,contentCssCors:t.getParam("content_css_cors",!1,"boolean"),referrerPolicy:Ms(t),onSetAttrib:function(e){t.fire("SetAttrib",e)}}),t.parser=((n=kv(Sw(u=t),u.schema)).addAttributeFilter("src,href,style,tabindex",function(e,t){for(var n,r,o=e.length,i=u.dom,a="data-mce-"+t;o--;)(r=(n=e[o]).attr(t))&&!n.attr(a)&&0!==r.indexOf("data:")&&0!==r.indexOf("blob:")&&("style"===t?((r=i.serializeStyle(i.parseStyle(r),n.name)).length||(r=null),n.attr(a,r),n.attr(t,r)):"tabindex"===t?(n.attr(a,r),n.attr(t,null)):n.attr(a,u.convertURL(r,t,n.name)))}),n.addNodeFilter("script",function(e){for(var t=e.length;t--;){var n=e[t],r=n.attr("type")||"no/type";0!==r.indexOf("mce-")&&n.attr("type","mce-"+r)}}),u.settings.preserve_cdata&&n.addNodeFilter("#cdata",function(e){for(var t=e.length;t--;){var n=e[t];n.type=8,n.name="#comment",n.value="[CDATA["+u.dom.encode(n.value)+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t=e.length,n=u.schema.getNonEmptyElements();t--;){var r=e[t];r.isEmpty(n)&&0===r.getAll("br").length&&(r.append(new Xd("br",1)).shortEnded=!0)}}),n),t.serializer=Dv((n=t.settings,Ne(Ne({},Sw(t)),xw({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope,element_format:n.element_format,entities:n.entities,entity_encoding:n.entity_encoding,indent:n.indent,indent_after:n.indent_after,indent_before:n.indent_before,block_elements:n.block_elements,boolean_attributes:n.boolean_attributes,custom_elements:n.custom_elements,extended_valid_elements:n.extended_valid_elements,invalid_elements:n.invalid_elements,invalid_styles:n.invalid_styles,move_caret_before_on_enter_elements:n.move_caret_before_on_enter_elements,non_empty_elements:n.non_empty_elements,schema:n.schema,self_closing_elements:n.self_closing_elements,short_ended_elements:n.short_ended_elements,special:n.special,text_block_elements:n.text_block_elements,text_inline_elements:n.text_inline_elements,valid_children:n.valid_children,valid_classes:n.valid_classes,valid_elements:n.valid_elements,valid_styles:n.valid_styles,verify_html:n.verify_html,whitespace_elements:n.whitespace_elements}))),t),t.selection=uv(t.dom,t.getWin(),t.serializer,t),t.annotator=yf(t),t.formatter=Ly(t),t.undoManager=My(t),t._nodeChangeDispatcher=new ew(t),t._selectionOverrides=bw(t),pC(t),nw(t),Xh(t)||ow(t);n=Xh(n=t)?tu(null):Z1(n);mC(t,n),Bs(n=t)&&n.on("NodeChange",h(vC,n)),Hy(t),t.fire("PreInit"),Yh(t).fold(function(){Aw(t)},function(e){t.setProgressState(!0),e.then(function(e){t.setProgressState(!1),Aw(t)},function(e){t.notificationManager.open({type:"error",text:String(e)}),Aw(t)})})},Tw=Ya.DOM,Dw=function(e){var t=e.getParam("doctype","<!DOCTYPE html>")+"<html><head>";e.getParam("document_base_url","")!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var n=Ds(e,"body_id","tinymce"),r=Ds(e,"body_class","");return Os(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+Os(e)+'" />'),t+='</head><body id="'+n+'" class="mce-content-body '+r+'" data-id="'+e.id+'"><br></body></html>'},Ow=function(e,t){var n,r,o,i=e.editorManager.translate("Rich Text Area. Press ALT-0 for help."),a=(n=e.id,r=i,t.height,o=e.getParam("iframe_attrs",{}),i=ht.fromTag("iframe"),Tn(i,o),Tn(i,{id:n+"_ifr",frameBorder:"0",allowTransparency:"true",title:r}),mu(i,"tox-edit-area__iframe"),i.dom);a.onload=function(){a.onload=null,e.fire("load")};i=function(e,t){if(document.domain!==window.location.hostname&&ct.browser.isIE()){var n=Ny("mce");e[n]=function(){Rw(e)};n='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()";return Tw.setAttrib(t,"src",n),!0}return!1}(e,a);return e.contentAreaContainer=t.iframeContainer,e.iframeElement=a,e.iframeHTML=Dw(e),Tw.add(t.iframeContainer,a),i},Bw=Ya.DOM,Pw=function(t,n,e){var r=cy.get(e),o=cy.urls[e]||t.documentBaseUrl.replace(/\/$/,"");if(e=gt.trim(e),r&&-1===gt.inArray(n,e)&&(gt.each(cy.dependencies(e),function(e){Pw(t,n,e)}),!t.plugins[e]))try{var i=new r(t,o,t.$);(t.plugins[e]=i).init&&(i.init(t,o),n.push(e))}catch(LS){!function(e,t,n){t=iu.translate(["Failed to initialize plugin: {0}",t]);xf(e,"PluginLoadError",{message:t}),yy(t,n),gy(e,t)}(t,e,LS)}},Lw=function(e){return e.replace(/^\-/,"")},Iw=function(e){return{editorContainer:e,iframeContainer:e,api:{}}},Mw=function(e){var t=e.getElement();return e.inline?Iw(null):(e=t,t=Bw.create("div"),Bw.insertAfter(t,e),Iw(t))},Fw=function(e){var t,n,r=e.getElement();return e.orgDisplay=r.style.display,W(Vs(e))?e.theme.renderUI():m(Vs(e))?(n=(t=e).getElement(),(r=Vs(t)(t,n)).editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||t.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||t.id+"_iframecontainer"),r.height=r.iframeHeight||n.offsetHeight,r):Mw(e)},Uw=function(e){var n,r,t,o,i;e.fire("ScriptsLoaded"),n=e,t=gt.trim(Is(n)),r=n.ui.registry.getAll().icons,t=Ne(Ne({},ty.get("default").icons),ty.get(t).icons),ie(t,function(e,t){ge(r,t)||n.ui.registry.addIcon(t,e)}),s=Vs(c=e),W(s)?(c.settings.theme=Lw(s),t=ly.get(s),c.theme=new t(c,ly.urls[s]),c.theme.init&&c.theme.init(c,ly.urls[s]||c.documentBaseUrl.replace(/\/$/,""),c.$)):c.theme={},o=e,i=[],gt.each($s(o).split(/[ ,]/),function(e){Pw(o,i,Lw(e))});var a,u,s=Fw(e);a=e,u=T.from(s.api).getOr({}),c={show:T.from(u.show).getOr(ee),hide:T.from(u.hide).getOr(ee),disable:T.from(u.disable).getOr(ee),isDisabled:T.from(u.isDisabled).getOr(E),enable:function(){a.mode.isReadOnly()||T.from(u.enable).map(N)}},a.ui=Ne(Ne({},a.ui),c);var c={editorContainer:s.editorContainer,iframeContainer:s.iframeContainer};return e.editorContainer=c.editorContainer||null,wy(e),e.inline?Rw(e):(c=Ow(s=e,e=c),e.editorContainer&&(Tw.get(e.editorContainer).style.display=s.orgDisplay,s.hidden=Tw.isHidden(e.editorContainer)),s.getElement().style.display="none",Tw.setAttrib(s.id,"aria-hidden","true"),void(c||Rw(s)))},zw=Ya.DOM,jw=function(e){return"-"===e.charAt(0)},Hw=function(e,t){var n,r=Fs(t),o=t.getParam("language_url","","string");!1===iu.hasCode(r)&&"en"!==r&&(n=""!==o?o:t.editorManager.baseURL+"/langs/"+r+".js",e.add(n,ee,undefined,function(){py(t,"LanguageLoadError",hy("language",n,r))}))},Vw=function(t,e,n){return T.from(e).filter(function(e){return 0<e.length&&!ty.has(e)}).map(function(e){return{url:t.editorManager.baseURL+"/icons/"+e+"/icons"+n+".js",name:T.some(e)}})},qw=function(e,o,t){var n=Vw(o,"default",t),t=T.from(o.getParam("icons_url","","string")).filter(function(e){return 0<e.length}).map(function(e){return{url:e,name:T.none()}}).orThunk(function(){return Vw(o,Is(o),"")});X(function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t}([n,t]),function(r){e.add(r.url,ee,undefined,function(){var e,t,n;e=o,t=r.url,n=r.name.getOrUndefined(),py(e,"IconsLoadError",hy("icons",t,n))})})},$w=function(e,t){var n,r,o,i,a,u,s=Za.ScriptLoader;n=s,o=t,i=function(){var r,o;Hw(s,e),qw(s,e,t),r=e,o=t,gt.each(r.getParam("external_plugins"),function(e,t){cy.load(t,e,ee,undefined,function(){vy(r,e,t)}),r.settings.plugins+=" "+t}),gt.each($s(r).split(/[ ,]/),function(e){var t,n;(e=gt.trim(e))&&!cy.urls[e]&&(jw(e)?(e=e.substr(1,e.length),t=cy.dependencies(e),gt.each(t,function(e){var t=cy.createUrl({prefix:"plugins/",resource:e,suffix:"/plugin"+o+".js"},e);cy.load(t.resource,t,ee,undefined,function(){vy(r,t.prefix+t.resource+t.suffix,t.resource)})})):cy.load(e,n={prefix:"plugins/",resource:e,suffix:"/plugin"+o+".js"},ee,undefined,function(){vy(r,n.prefix+n.resource+n.suffix,e)}))}),s.loadQueue(function(){e.removed||Uw(e)},e,function(){e.removed||Uw(e)})},u=Vs(r=e),W(u)?(jw(u)||ly.urls.hasOwnProperty(u)||((a=r.getParam("theme_url"))?ly.load(u,r.documentBaseURI.toAbsolute(a)):ly.load(u,"themes/"+u+"/theme"+o+".js")),n.loadQueue(function(){ly.waitFor(u,i)})):i()},Ww=function(t){var e=t.id;iu.setCode(Fs(t));var n,r,o,i,a=function(){zw.unbind(window,"ready",a),t.render()};ui.Event.domLoaded?t.getElement()&&ct.contentEditable&&(n=ht.fromDom(t.getElement()),r=j(n.dom.attributes,function(e,t){return e[t.name]=t.value,e},{}),t.on("remove",function(){F(n.dom.attributes,function(e){return Bn(n,e.name),0}),Tn(n,r)}),t.ui.styleSheetLoader=(o=t,Er.forElement(n,{contentCssCors:o.getParam("content_css_cors"),referrerPolicy:Ms(o)})),t.getParam("inline")?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden"),(i=t.getElement().form||zw.getParent(e,"form"))&&(t.formElement=i,t.getParam("hidden_input")&&!vn(t.getElement())&&(zw.insertAfter(zw.create("input",{type:"hidden",name:e}),e),t.hasHiddenInput=!0),t.formEventDelegate=function(e){t.fire(e.type,e)},zw.bind(i,"submit reset",t.formEventDelegate),t.on("reset",function(){t.resetContent()}),!t.getParam("submit_patch")||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=function(){return t.editorManager.triggerSave(),t.setDirty(!1),i._mceOldSubmit(i)})),t.windowManager=dy(t),t.notificationManager=sy(t),"xml"===t.getParam("encoding")&&t.on("GetContent",function(e){e.save&&(e.content=zw.encode(e.content))}),t.getParam("add_form_submit_trigger")&&t.on("submit",function(){t.initialized&&t.save()}),t.getParam("add_unload_trigger")&&(t._beforeUnload=function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),$w(t,t.suffix)):zw.bind(window,"ready",a)},Kw=function(e,t){return t=t,Jh(e).editor.addVisual(t)},Xw={"font-size":"size","font-family":"face"},Yw=function(n,t,e){return gp(ht.fromDom(e),function(e){return Mn(t=e,n).orThunk(function(){return"font"===St(t)?me(Xw,n).bind(function(e){return On(t,e)}):T.none()});var t},function(e){return Ct(ht.fromDom(t),e)})},We=function(n){return function(t,e){return T.from(e).map(ht.fromDom).filter(Et).bind(function(e){return Yw(n,t,e.dom).or((e=e.dom,T.from(Ya.DOM.getStyle(e,n,!0))))}).getOr("")}},Gw=We("font-size"),Jw=v(function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},We("font-family")),Qw=function(e){return rl(e.getBody()).map(function(e){e=e.container();return yn(e)?e.parentNode:e})},Zw=function(e,t){return n=e,T.from(n.selection.getRng()).bind(function(e){var t=n.getBody();return e.startContainer===t&&0===e.startOffset?T.none():T.from(n.selection.getStart(!0))}).orThunk(h(Qw,e)).map(ht.fromDom).filter(Et).map(t);var n},ex=function(e,t){if(/^[0-9.]+$/.test(t)){var n=parseInt(t,10);if(1<=n&&n<=7){var r=gt.explode(e.getParam("font_size_style_values","xx-small,x-small,small,medium,large,x-large,xx-large")),e=gt.explode(e.getParam("font_size_classes",""));return e?e[n-1]||t:r[n-1]||t}return t}return t},tx=function(e,t){t=ex(e,t);e.formatter.toggle("fontname",{value:function(e){e=e.split(/\s*,\s*/);return M(e,function(e){return-1===e.indexOf(" ")||je(e,'"')||je(e,"'")?e:"'"+e+"'"}).join(",")}(t)}),e.nodeChanged()},nx=function(e,t){var n,n="string"!=typeof(t=t)?(n=gt.extend({paste:t.paste,data:{paste:t.paste}},t),{content:t.content,details:n}):{content:t,details:{}};t=n.content,n=n.details,Gh(e).editor.insertContent(t,n)},rx=gt.each,ox=gt.map,ix=gt.inArray,ax=(ux.prototype.execCommand=function(t,n,r,e){var o,i=!1,a=this;if(!a.editor.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||e&&e.skip_focus?(o=a.editor,Nd(o).each(function(e){return o.selection.setRng(e)})):a.editor.focus(),(e=a.editor.fire("BeforeExecCommand",{command:t,ui:n,value:r})).isDefaultPrevented())return!1;var u=t.toLowerCase();if(e=a.commands.exec[u])return e(u,n,r),a.editor.fire("ExecCommand",{command:t,ui:n,value:r}),!0;if(rx(this.editor.plugins,function(e){if(e.execCommand&&e.execCommand(t,n,r))return a.editor.fire("ExecCommand",{command:t,ui:n,value:r}),!(i=!0)}),i)return i;if(a.editor.theme&&a.editor.theme.execCommand&&a.editor.theme.execCommand(t,n,r))return a.editor.fire("ExecCommand",{command:t,ui:n,value:r}),!0;try{i=a.editor.getDoc().execCommand(t,n,r)}catch(s){}return!!i&&(a.editor.fire("ExecCommand",{command:t,ui:n,value:r}),!0)}},ux.prototype.queryCommandState=function(e){var t;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(e=e.toLowerCase(),t=this.commands.state[e])return t(e);try{return this.editor.getDoc().queryCommandState(e)}catch(n){}return!1}},ux.prototype.queryCommandValue=function(e){var t;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(e=e.toLowerCase(),t=this.commands.value[e])return t(e);try{return this.editor.getDoc().queryCommandValue(e)}catch(n){}}},ux.prototype.addCommands=function(e,n){void 0===n&&(n="exec");var r=this;rx(e,function(t,e){rx(e.toLowerCase().split(","),function(e){r.commands[n][e]=t})})},ux.prototype.addCommand=function(e,o,i){var a=this;e=e.toLowerCase(),this.commands.exec[e]=function(e,t,n,r){return o.call(i||a.editor,t,n,r)}},ux.prototype.queryCommandSupported=function(e){if(e=e.toLowerCase(),this.commands.exec[e])return!0;try{return this.editor.getDoc().queryCommandSupported(e)}catch(t){}return!1},ux.prototype.addQueryStateHandler=function(e,t,n){var r=this;e=e.toLowerCase(),this.commands.state[e]=function(){return t.call(n||r.editor)}},ux.prototype.addQueryValueHandler=function(e,t,n){var r=this;e=e.toLowerCase(),this.commands.value[e]=function(){return t.call(n||r.editor)}},ux.prototype.hasCustomCommand=function(e){return e=e.toLowerCase(),!!this.commands.exec[e]},ux.prototype.execNativeCommand=function(e,t,n){return t===undefined&&(t=!1),n===undefined&&(n=null),this.editor.getDoc().execCommand(e,t,n)},ux.prototype.isFormatMatch=function(e){return this.editor.formatter.match(e)},ux.prototype.toggleFormat=function(e,t){this.editor.formatter.toggle(e,t?{value:t}:undefined),this.editor.nodeChanged()},ux.prototype.storeSelection=function(e){this.selectionBookmark=this.editor.selection.getBookmark(e)},ux.prototype.restoreSelection=function(){this.editor.selection.moveToBookmark(this.selectionBookmark)},ux.prototype.setupCommands=function(o){var i=this;this.addCommands({"mceResetDesignMode,mceBeginUndoLevel":ee,"mceEndUndoLevel,mceAddUndoLevel":function(){o.undoManager.add()},"Cut,Copy,Paste":function(e){var t,n=o.getDoc();try{i.execNativeCommand(e)}catch(r){t=!0}!(t="paste"===e&&!n.queryCommandEnabled(e)?!0:t)&&n.queryCommandSupported(e)||(e=o.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."),ct.mac&&(e=e.replace(/Ctrl\+/g,"\u2318+")),o.notificationManager.open({text:e,type:"error"}))},unlink:function(){var e;o.selection.isCollapsed()?(e=o.dom.getParent(o.selection.getStart(),"a"))&&o.dom.remove(e,!0):o.formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"===t&&(t="justify"),rx("left,center,right,justify".split(","),function(e){t!==e&&o.formatter.remove("align"+e)}),"none"!==t&&i.toggleFormat("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){i.execNativeCommand(e);var t=o.dom.getParent(o.selection.getNode(),"ol,ul");t&&(e=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(e.nodeName)&&(i.storeSelection(),o.dom.split(e,t),i.restoreSelection()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){i.toggleFormat(e)},"ForeColor,HiliteColor":function(e,t,n){i.toggleFormat(e,n)},FontName:function(e,t,n){tx(o,n)},FontSize:function(e,t,n){var r;(r=o).formatter.toggle("fontsize",{value:ex(r,n)}),r.nodeChanged()},LineHeight:function(e,t,n){var r;(r=o).formatter.toggle("lineheight",{value:String(n)}),r.nodeChanged()},RemoveFormat:function(e){o.formatter.remove(e)},mceBlockQuote:function(){i.toggleFormat("blockquote")},FormatBlock:function(e,t,n){return i.toggleFormat(n||"p")},mceCleanup:function(){var e=o.selection.getBookmark();o.setContent(o.getContent()),o.selection.moveToBookmark(e)},mceRemoveNode:function(e,t,n){n=n||o.selection.getNode();n!==o.getBody()&&(i.storeSelection(),o.dom.remove(n,!0),i.restoreSelection())},mceSelectNodeDepth:function(e,t,n){var r=0;o.dom.getParent(o.selection.getNode(),function(e){if(1===e.nodeType&&r++===n)return o.selection.select(e),!1},o.getBody())},mceSelectNode:function(e,t,n){o.selection.select(n)},mceInsertContent:function(e,t,n){nx(o,n)},mceInsertRawHTML:function(e,t,n){o.selection.setContent("tiny_mce_marker");var r=o.getContent();o.setContent(r.replace(/tiny_mce_marker/g,function(){return n}))},mceInsertNewLine:function(e,t,n){F1(o,n)},mceToggleFormat:function(e,t,n){i.toggleFormat(n)},mceSetContent:function(e,t,n){o.setContent(n)},"Indent,Outdent":function(e){lC(o,e)},mceRepaint:ee,InsertHorizontalRule:function(){o.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){o.hasVisual=!o.hasVisual,o.addVisual()},mceReplaceContent:function(e,t,n){o.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,o.selection.getContent({format:"text"})))},mceInsertLink:function(e,t,n){"string"==typeof n&&(n={href:n});var r=o.dom.getParent(o.selection.getNode(),"a");n.href=n.href.replace(/ /g,"%20"),r&&n.href||o.formatter.remove("link"),n.href&&o.formatter.apply("link",n,r)},selectAll:function(){var e,t=o.dom.getParent(o.selection.getStart(),Nn);t&&((e=o.dom.createRng()).selectNodeContents(t),o.selection.setRng(e))},mceNewDocument:function(){o.setContent("")},InsertLineBreak:function(e,t,n){return N1(o,n),!0}});var e=function(t){return function(){var e=o.selection,e=e.isCollapsed()?[o.dom.getParent(e.getNode(),o.dom.isBlock)]:e.getSelectedBlocks(),e=ox(e,function(e){return!!o.formatter.matchNode(e,t)});return-1!==ix(e,!0)}};i.addCommands({JustifyLeft:e("alignleft"),JustifyCenter:e("aligncenter"),JustifyRight:e("alignright"),JustifyFull:e("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return i.isFormatMatch(e)},mceBlockQuote:function(){return i.isFormatMatch("blockquote")},Outdent:function(){return uC(o)},"InsertUnorderedList,InsertOrderedList":function(e){var t=o.dom.getParent(o.selection.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),i.addCommands({Undo:function(){o.undoManager.undo()},Redo:function(){o.undoManager.redo()}}),i.addQueryValueHandler("FontName",function(){return Zw(t=o,function(e){return Jw(t.getBody(),e.dom)}).getOr("");var t},this),i.addQueryValueHandler("FontSize",function(){return Zw(t=o,function(e){return Gw(t.getBody(),e.dom)}).getOr("");var t},this),i.addQueryValueHandler("LineHeight",function(){return Zw(t=o,function(n){var e=ht.fromDom(t.getBody());return gp(n,function(e){return Mn(e,"line-height")},h(Ct,e)).getOrThunk(function(){var e=parseFloat(Ln(n,"line-height")),t=parseFloat(Ln(n,"font-size"));return String(e/t)})}).getOr("");var t},this)},ux);function ux(e){this.commands={state:{},exec:{},value:{}},this.editor=e,this.setupCommands(e)}var sx="data-mce-contenteditable",cx=function(e,t,n){var r,o;pu(e,t)&&!1===n?(o=t,lu(r=e)?r.dom.classList.remove(o):du(r,o),gu(r)):n&&mu(e,t)},lx=function(e,t,n){try{e.getDoc().execCommand(t,!1,String(n))}catch(r){}},fx=function(e,t){e.dom.contentEditable=t?"true":"false"},dx=function(e,t){var n=ht.fromDom(e.getBody());cx(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),T.from(e.selection.getNode()).each(function(e){e.removeAttribute("data-mce-selected")}),e.readonly=!0,fx(n,!1),X(vu(n,'*[contenteditable="true"]'),function(e){Rn(e,sx,"true"),fx(e,!1)})):(e.readonly=!1,fx(n,!0),X(vu(n,"*["+sx+'="true"]'),function(e){Bn(e,sx),fx(e,!0)}),lx(e,"StyleWithCSS",!1),lx(e,"enableInlineTableEditing",!1),lx(e,"enableObjectResizing",!1),(Md(n=e)||Id(n))&&e.focus(),e.selection.setRng(e.selection.getRng()),e.nodeChanged())},mx=function(e){return e.readonly},gx=function(t){t.parser.addAttributeFilter("contenteditable",function(e){mx(t)&&X(e,function(e){e.attr(sx,e.attr("contenteditable")),e.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(sx,function(e){mx(t)&&X(e,function(e){e.attr("contenteditable",e.attr(sx))})}),t.serializer.addTempAttr(sx)},px=function(r,o){var e,t;"click"!==o.type||Sf.metaKeyPressed(o)||(e=ht.fromDom(o.target),t=r,dr(e,"a",function(e){return Ct(e,ht.fromDom(t.getBody()))}).bind(function(e){return On(e,"href")}).each(function(e){var t,n;o.preventDefault(),/^#/.test(e)?(t=r.dom.select(e+',[name="'+(je(t=e,n="#")?(n=n.length,t.substring(n)):t)+'"]')).length&&r.selection.scrollIntoView(t[0],!0):window.open(e,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}))},hx=gt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," "),vx=(yx.isNative=function(e){return!!hx[e.toLowerCase()]},yx.prototype.fire=function(e,t){var n=e.toLowerCase(),r=t||{};r.type=n,r.target||(r.target=this.scope),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=k},r.stopPropagation=function(){r.isPropagationStopped=k},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=k},r.isDefaultPrevented=E,r.isPropagationStopped=E,r.isImmediatePropagationStopped=E),this.settings.beforeFire&&this.settings.beforeFire(r);var o=this.bindings[n];if(o)for(var i=0,a=o.length;i<a;i++){var u=o[i];if(u.once&&this.off(n,u.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(!1===u.func.call(this.scope,r))return r.preventDefault(),r}return r},yx.prototype.on=function(e,t,n,r){if(t=!1===t?E:t){var o={func:t};r&&gt.extend(o,r);for(var i=e.toLowerCase().split(" "),a=i.length;a--;){var u=i[a],s=this.bindings[u];s||(s=this.bindings[u]=[],this.toggleEvent(u,!0)),n?s.unshift(o):s.push(o)}}return this},yx.prototype.off=function(e,t){var n=this;if(e)for(var r=e.toLowerCase().split(" "),o=r.length;o--;){var i=r[o],a=this.bindings[i];if(!i)return ie(this.bindings,function(e,t){n.toggleEvent(t,!1),delete n.bindings[t]}),this;if(a){if(t)for(var u=a.length;u--;)a[u].func===t&&(a=a.slice(0,u).concat(a.slice(u+1)),this.bindings[i]=a);else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[i])}}else ie(this.bindings,function(e,t){n.toggleEvent(t,!1)}),this.bindings={};return this},yx.prototype.once=function(e,t,n){return this.on(e,t,n,{once:!0})},yx.prototype.has=function(e){return e=e.toLowerCase(),!(!this.bindings[e]||0===this.bindings[e].length)},yx);function yx(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||E}var bx,Cx=function(n){return n._eventDispatcher||(n._eventDispatcher=new vx({scope:n,toggleEvent:function(e,t){vx.isNative(e)&&n.toggleNativeEvent&&n.toggleNativeEvent(e,t)}})),n._eventDispatcher},o={fire:function(e,t,n){if(this.removed&&"remove"!==e&&"detach"!==e)return t;var r=Cx(this).fire(e,t);if(!1!==n&&this.parent)for(var o=this.parent();o&&!r.isPropagationStopped();)o.fire(e,r,!1),o=o.parent();return r},on:function(e,t,n){return Cx(this).on(e,t,n)},off:function(e,t){return Cx(this).off(e,t)},once:function(e,t){return Cx(this).once(e,t)},hasEventListeners:function(e){return Cx(this).has(e)}},wx=Ya.DOM,xx=function(e,t){if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t))return e.getDoc().documentElement;t=Hs(e);return t?(e.eventRoot||(e.eventRoot=wx.select(t)[0]),e.eventRoot):e.getBody()},Sx=function(e,t,n){var r;(r=e).hidden||mx(r)?mx(e)&&px(e,n):e.fire(t,n)},Nx=function(i,a){var e,t;i.delegates||(i.delegates={}),i.delegates[a]||i.removed||(t=xx(i,a),Hs(i)?(bx||(bx={},i.editorManager.on("removeEditor",function(){i.editorManager.activeEditor||bx&&(ie(bx,function(e,t){i.dom.unbind(xx(i,t))}),bx=null)})),bx[a]||(bx[a]=e=function(e){for(var t=e.target,n=i.editorManager.get(),r=n.length;r--;){var o=n[r].getBody();o!==t&&!wx.isChildOf(t,o)||Sx(n[r],a,e)}},wx.bind(t,a,e))):(wx.bind(t,a,e=function(e){Sx(i,a,e)}),i.delegates[a]=e))},Ex=Ne(Ne({},o),{bindPendingEventDelegates:function(){var t=this;gt.each(t._pendingNativeEvents,function(e){Nx(t,e)})},toggleNativeEvent:function(e,t){var n=this;"focus"!==e&&"blur"!==e&&(t?n.initialized?Nx(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(xx(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var n=this,e=n.getBody(),t=n.dom;n.delegates&&(ie(n.delegates,function(e,t){n.dom.unbind(xx(n,t),t,e)}),delete n.delegates),!n.inline&&e&&t&&(e.onload=null,t.unbind(n.getWin()),t.unbind(n.getDoc())),t&&(t.unbind(e),t.unbind(n.getContainer()))}}),kx=["design","readonly"],_x=function(e,t,n,r){var o=n[t.get()],n=n[r];try{n.activate()}catch(LS){return void console.error("problem while activating editor mode "+r+":",LS)}o.deactivate(),o.editorReadOnly!==n.editorReadOnly&&dx(e,n.editorReadOnly),t.set(r),e.fire("SwitchMode",{mode:r})},Ax=function(e,t,n){if(L(kx,t))throw new Error("Cannot override default mode "+t);return Ne(Ne({},e),((e={})[t]=Ne(Ne({},n),{deactivate:function(){try{n.deactivate()}catch(LS){console.error("problem while deactivating editor mode "+t+":",LS)}}}),e))},Rx=function(t){var e,n,r=tu("design"),o=tu({design:{activate:ee,deactivate:ee,editorReadOnly:!1},readonly:{activate:ee,deactivate:ee,editorReadOnly:!0}});return(e=t).serializer?gx(e):e.on("PreInit",function(){gx(e)}),(n=t).on("ShowCaret",function(e){mx(n)&&e.preventDefault()}),n.on("ObjectSelected",function(e){mx(n)&&e.preventDefault()}),{isReadOnly:function(){return mx(t)},set:function(e){return function(e,t,n,r){if(r!==n.get()){if(!ge(t,r))throw new Error("Editor mode '"+r+"' is invalid");e.initialized?_x(e,n,t,r):e.on("init",function(){return _x(e,n,t,r)})}}(t,o.get(),r,e)},get:function(){return r.get()},register:function(e,t){o.set(Ax(o.get(),e,t))}}},Tx=gt.each,Dx=gt.explode,Ox={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Bx=gt.makeMap("alt,ctrl,shift,meta,access"),Px=function(e){var t,n={};Tx(Dx(e.toLowerCase(),"+"),function(e){e in Bx?n[e]=!0:/^[0-9]{2,}$/.test(e)?n.keyCode=parseInt(e,10):(n.charCode=e.charCodeAt(0),n.keyCode=Ox[e]||e.toUpperCase().charCodeAt(0))});var r=[n.keyCode];for(t in Bx)n[t]?r.push(t):n[t]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,ct.mac?n.ctrl=!0:n.shift=!0),n.meta&&(ct.mac?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n},Lx=(Ix.prototype.add=function(e,t,n,r){var o=this,i=o.normalizeCommandFunc(n);return Tx(Dx(gt.trim(e)),function(e){e=o.createShortcut(e,t,i,r);o.shortcuts[e.id]=e}),!0},Ix.prototype.remove=function(e){e=this.createShortcut(e);return!!this.shortcuts[e.id]&&(delete this.shortcuts[e.id],!0)},Ix.prototype.normalizeCommandFunc=function(e){var t=this,n=e;return"string"==typeof n?function(){t.editor.execCommand(n,!1,null)}:gt.isArray(n)?function(){t.editor.execCommand(n[0],n[1],n[2])}:n},Ix.prototype.createShortcut=function(e,t,n,r){e=gt.map(Dx(e,">"),Px);return e[e.length-1]=gt.extend(e[e.length-1],{func:n,scope:r||this.editor}),gt.extend(e[0],{desc:this.editor.translate(t),subpatterns:e.slice(1)})},Ix.prototype.hasModifier=function(e){return e.altKey||e.ctrlKey||e.metaKey},Ix.prototype.isFunctionKey=function(e){return"keydown"===e.type&&112<=e.keyCode&&e.keyCode<=123},Ix.prototype.matchShortcut=function(e,t){return!!t&&(t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&(t.alt===e.altKey&&t.shift===e.shiftKey&&(!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0))))},Ix.prototype.executeShortcutAction=function(e){return e.func?e.func.call(e.scope):null},Ix);function Ix(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;var n=this;e.on("keyup keypress keydown",function(t){!n.hasModifier(t)&&!n.isFunctionKey(t)||t.isDefaultPrevented()||(Tx(n.shortcuts,function(e){if(n.matchShortcut(t,e))return n.pendingPatterns=e.subpatterns.slice(0),"keydown"===t.type&&n.executeShortcutAction(e),!0}),n.matchShortcut(t,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===t.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}var Mx=function(){var e,t,n,r,o,i,a,u,u=(t={},n={},r={},o={},i={},a={},{addButton:(u=function(n,r){return function(e,t){return n[e.toLowerCase()]=Ne(Ne({},t),{type:r})}})(e={},"button"),addGroupToolbarButton:u(e,"grouptoolbarbutton"),addToggleButton:u(e,"togglebutton"),addMenuButton:u(e,"menubutton"),addSplitButton:u(e,"splitbutton"),addMenuItem:u(t,"menuitem"),addNestedMenuItem:u(t,"nestedmenuitem"),addToggleMenuItem:u(t,"togglemenuitem"),addAutocompleter:u(n,"autocompleter"),addContextMenu:u(o,"contextmenu"),addContextToolbar:u(i,"contexttoolbar"),addContextForm:u(i,"contextform"),addSidebar:u(a,"sidebar"),addIcon:function(e,t){return r[e.toLowerCase()]=t},getAll:function(){return{buttons:e,menuItems:t,icons:r,popups:n,contextMenus:o,contextToolbars:i,sidebars:a}}});return{addAutocompleter:u.addAutocompleter,addButton:u.addButton,addContextForm:u.addContextForm,addContextMenu:u.addContextMenu,addContextToolbar:u.addContextToolbar,addIcon:u.addIcon,addMenuButton:u.addMenuButton,addMenuItem:u.addMenuItem,addNestedMenuItem:u.addNestedMenuItem,addSidebar:u.addSidebar,addSplitButton:u.addSplitButton,addToggleButton:u.addToggleButton,addGroupToolbarButton:u.addGroupToolbarButton,addToggleMenuItem:u.addToggleMenuItem,getAll:u.getAll}},Fx=gt.each,Ux=gt.trim,zx="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),jx={ftp:21,http:80,https:443,mailto:25},Hx=(Vx.parseDataUri=function(e){var t,n=decodeURIComponent(e).split(","),e=/data:([^;]+)/.exec(n[0]);return{type:t=e?e[1]:t,data:n[1]}},Vx.getDocumentBaseUrl=function(e){e=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname;return/^[^:]+:\/\/\/?[^\/]+\//.test(e)&&(e=e.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e)||(e+="/")),e},Vx.prototype.setPath=function(e){e=/^(.*?)\/?(\w+)?$/.exec(e);this.path=e[0],this.directory=e[1],this.file=e[2],this.source="",this.getURI()},Vx.prototype.toRelative=function(e){if("./"===e)return e;var t=new Vx(e,{base_uri:this});if("mce_host"!==t.host&&this.host!==t.host&&t.host||this.port!==t.port||this.protocol!==t.protocol&&""!==t.protocol)return t.getURI();var n=this.getURI(),e=t.getURI();return n===e||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===e||(n=this.toRelPath(this.path,t.path),t.query&&(n+="?"+t.query),t.anchor&&(n+="#"+t.anchor)),n},Vx.prototype.toAbsolute=function(e,t){e=new Vx(e,{base_uri:this});return e.getURI(t&&this.isSameOrigin(e))},Vx.prototype.isSameOrigin=function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=jx[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},Vx.prototype.toRelPath=function(e,t){var n,r,o=0,i="",a=e.substring(0,e.lastIndexOf("/")).split("/"),u=t.split("/");if(a.length>=u.length)for(n=0,r=a.length;n<r;n++)if(n>=u.length||a[n]!==u[n]){o=n+1;break}if(a.length<u.length)for(n=0,r=u.length;n<r;n++)if(n>=a.length||a[n]!==u[n]){o=n+1;break}if(1===o)return t;for(n=0,r=a.length-(o-1);n<r;n++)i+="../";for(n=o-1,r=u.length;n<r;n++)i+=n!==o-1?"/"+u[n]:u[n];return i},Vx.prototype.toAbsPath=function(e,t){var n,r=0,o=[],i=/\/$/.test(t)?"/":"",e=e.split("/"),a=t.split("/");for(Fx(e,function(e){e&&o.push(e)}),e=o,n=a.length-1,o=[];0<=n;n--)0!==a[n].length&&"."!==a[n]&&(".."!==a[n]?0<r?r--:o.push(a[n]):r++);return 0!==(e=(n=e.length-r)<=0?G(o).join("/"):e.slice(0,n).join("/")+"/"+G(o).join("/")).indexOf("/")&&(e="/"+e),i&&e.lastIndexOf("/")!==e.length-1&&(e+=i),e},Vx.prototype.getURI=function(e){var t;return void 0===e&&(e=!1),this.source&&!e||(t="",e||(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source},Vx);function Vx(e,t){e=Ux(e),this.settings=t||{};var n,r,o,i=this.settings.base_uri,a=this;/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)?a.source=e:(n=0===e.indexOf("//"),0!==e.indexOf("/")||n||(e=(i&&i.protocol||"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(r=this.settings.base_uri?this.settings.base_uri.path:new Vx(document.location.href).directory,e=this.settings.base_uri&&""==this.settings.base_uri.protocol?"//mce_host"+a.toAbsPath(r,e):(t=/([^#?]*)([#?]?.*)/.exec(e),(i&&i.protocol||"http")+"://mce_host"+a.toAbsPath(r,t[1])+t[2])),e=e.replace(/@@/g,"(mce_at)"),o=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),Fx(zx,function(e,t){t=(t=o[t])&&t.replace(/\(mce_at\)/g,"@@");a[e]=t}),i&&(a.protocol||(a.protocol=i.protocol),a.userInfo||(a.userInfo=i.userInfo),a.port||"mce_host"!==a.host||(a.port=i.port),a.host&&"mce_host"!==a.host||(a.host=i.host),a.source=""),n&&(a.protocol=""))}var qx=Ya.DOM,$x=gt.extend,Wx=gt.each,Kx=gt.resolve,Xx=ct.ie,Yx=(Gx.prototype.render=function(){Ww(this)},Gx.prototype.focus=function(e){Ud(this,e)},Gx.prototype.hasFocus=function(){return Md(this)},Gx.prototype.execCallback=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,o=this.settings[e];if(o)return this.callbackLookup&&(r=this.callbackLookup[e])&&(o=r.func,r=r.scope),"string"==typeof o&&(r=(r=o.replace(/\.\w+$/,""))?Kx(r):0,o=Kx(o),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[e]={func:o,scope:r}),o.apply(r||this,t)},Gx.prototype.translate=function(e){return iu.translate(e)},Gx.prototype.getParam=function(e,t,n){return ey(this,e,t,n)},Gx.prototype.hasPlugin=function(e,t){return!!L($s(this).split(/[ ,]/),e)&&(!t||cy.get(e)!==undefined)},Gx.prototype.nodeChanged=function(e){this._nodeChangeDispatcher.nodeChanged(e)},Gx.prototype.addCommand=function(e,t,n){this.editorCommands.addCommand(e,t,n)},Gx.prototype.addQueryStateHandler=function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},Gx.prototype.addQueryValueHandler=function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},Gx.prototype.addShortcut=function(e,t,n,r){this.shortcuts.add(e,t,n,r)},Gx.prototype.execCommand=function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},Gx.prototype.queryCommandState=function(e){return this.editorCommands.queryCommandState(e)},Gx.prototype.queryCommandValue=function(e){return this.editorCommands.queryCommandValue(e)},Gx.prototype.queryCommandSupported=function(e){return this.editorCommands.queryCommandSupported(e)},Gx.prototype.show=function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(qx.show(this.getContainer()),qx.hide(this.id)),this.load(),this.fire("show"))},Gx.prototype.hide=function(){var e=this,t=e.getDoc();e.hidden||(Xx&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(qx.hide(e.getContainer()),qx.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},Gx.prototype.isHidden=function(){return!!this.hidden},Gx.prototype.setProgressState=function(e,t){this.fire("ProgressState",{state:e,time:t})},Gx.prototype.load=function(e){var t=this.getElement();if(this.removed)return"";if(t){(e=e||{}).load=!0;var n=vn(t)?t.value:t.innerHTML,n=this.setContent(n,e);return e.element=t,e.no_events||this.fire("LoadContent",e),e.element=t=null,n}},Gx.prototype.save=function(e){var t,n,r=this,o=r.getElement();if(o&&r.initialized&&!r.removed)return(e=e||{}).save=!0,e.element=o,e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),"raw"===e.format&&r.fire("RawSaveContent",e),t=e.content,vn(o)?o.value=t:(!e.is_removing&&r.inline||(o.innerHTML=t),(n=qx.getParent(r.id,"form"))&&Wx(n.elements,function(e){if(e.name===r.id)return e.value=t,!1})),e.element=o=null,!1!==e.set_dirty&&r.setDirty(!1),t},Gx.prototype.setContent=function(e,t){return Bv(this,e,t)},Gx.prototype.getContent=function(e){return Ov(this,e)},Gx.prototype.insertContent=function(e,t){t&&(e=$x({content:e},t)),this.execCommand("mceInsertContent",!1,e)},Gx.prototype.resetContent=function(e){e===undefined?Bv(this,this.startContent,{format:"raw"}):Bv(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()},Gx.prototype.isDirty=function(){return!this.isNotDirty},Gx.prototype.setDirty=function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},Gx.prototype.getContainer=function(){return this.container||(this.container=qx.get(this.editorContainer||this.id+"_parent")),this.container},Gx.prototype.getContentAreaContainer=function(){return this.contentAreaContainer},Gx.prototype.getElement=function(){return this.targetElm||(this.targetElm=qx.get(this.id)),this.targetElm},Gx.prototype.getWin=function(){var e;return this.contentWindow||(e=this.iframeElement)&&(this.contentWindow=e.contentWindow),this.contentWindow},Gx.prototype.getDoc=function(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument},Gx.prototype.getBody=function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},Gx.prototype.convertURL=function(e,t,n){var r=this.settings;return r.urlconverter_callback?this.execCallback("urlconverter_callback",e,n,!0,t):!r.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:r.relative_urls?this.documentBaseURI.toRelative(e):e=this.documentBaseURI.toAbsolute(e,r.remove_script_host)},Gx.prototype.addVisual=function(e){Kw(this,e)},Gx.prototype.remove=function(){Iv(this)},Gx.prototype.destroy=function(e){Mv(this,e)},Gx.prototype.uploadImages=function(e){return this.editorUpload.uploadImages(e)},Gx.prototype._scanForImages=function(){return this.editorUpload.scanForImages()},Gx.prototype.addButton=function(){throw new Error("editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead")},Gx.prototype.addSidebar=function(){throw new Error("editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead")},Gx.prototype.addMenuItem=function(){throw new Error("editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead")},Gx.prototype.addContextToolbar=function(){throw new Error("editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead")},Gx);function Gx(e,t,n){var r=this;this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,$x(this,Ex),this.settings=Qv(this,e,this.documentBaseUrl,n.defaultSettings,t),this.settings.suffix&&(n.suffix=this.settings.suffix),this.suffix=n.suffix,this.settings.base_url&&n._setBaseUrl(this.settings.base_url),this.baseUri=n.baseURI,this.settings.referrer_policy&&(Za.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy),Ya.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy)),au.languageLoad=this.settings.language_load,au.baseURL=n.baseURL,this.id=e,this.setDirty(!1),this.documentBaseURI=new Hx(this.settings.document_base_url,{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=!!this.settings.inline,this.shortcuts=new Lx(this),this.editorCommands=new ax(this),this.settings.cache_suffix&&(ct.cacheSuffix=this.settings.cache_suffix.replace(/^[\?\&]+/,"")),this.ui={registry:Mx(),styleSheetLoader:undefined,show:ee,hide:ee,enable:ee,disable:ee,isDisabled:E};e=Rx(this);this.mode=e,this.setMode=e.set,n.fire("SetupEditor",{editor:this}),this.execCallback("setup",this),this.$=Ha.overrideDefaults(function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}})}var Jx,Qx=Ya.DOM,Zx=gt.explode,eS=gt.each,tS=gt.extend,nS=0,rS=!1,oS=[],iS=[],aS=function(t){var n=t.type;eS(lS.get(),function(e){switch(n){case"scroll":e.fire("ScrollWindow",t);break;case"resize":e.fire("ResizeWindow",t)}})},uS=function(e){e!==rS&&(e?Ha(window).on("resize scroll",aS):Ha(window).off("resize scroll",aS),rS=e)},sS=function(t){var e=iS;delete oS[t.id];for(var n=0;n<oS.length;n++)if(oS[n]===t){oS.splice(n,1);break}return iS=U(iS,function(e){return t!==e}),lS.activeEditor===t&&(lS.activeEditor=0<iS.length?iS[0]:null),lS.focusedEditor===t&&(lS.focusedEditor=null),e.length!==iS.length},cS="CSS1Compat"!==document.compatMode,lS=Ne(Ne({},o),{baseURI:null,baseURL:null,defaultSettings:{},documentBaseURL:null,suffix:null,$:Ha,majorVersion:"5",minorVersion:"8.1",releaseDate:"2021-05-20",editors:oS,i18n:iu,activeEditor:null,focusedEditor:null,settings:{},setup:function(){var e,t="",n=Hx.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"));var r=window.tinymce||window.tinyMCEPreInit;if(r)e=r.base||r.baseURL,t=r.suffix;else{for(var o,i=document.getElementsByTagName("script"),a=0;a<i.length;a++)if(""!==(o=i[a].src||"")){var u=o.substring(o.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){-1!==u.indexOf(".min")&&(t=".min"),e=o.substring(0,o.lastIndexOf("/"));break}}!e&&document.currentScript&&(-1!==(o=document.currentScript.src).indexOf(".min")&&(t=".min"),e=o.substring(0,o.lastIndexOf("/")))}this.baseURL=new Hx(n).toAbsolute(e),this.documentBaseURL=n,this.baseURI=new Hx(this.baseURL),this.suffix=t,(n=this).on("AddEditor",h(Td,n)),n.on("RemoveEditor",h(Dd,n))},overrideDefaults:function(e){var t=e.base_url;t&&this._setBaseUrl(t);t=e.suffix;e.suffix&&(this.suffix=t);e=(this.defaultSettings=e).plugin_base_urls;e!==undefined&&ie(e,function(e,t){au.PluginManager.urls[t]=e})},init:function(a){var n,u=this,s=gt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=function(e){var t=e.id;return t||(t=me(e,"name").filter(function(e){return!Qx.get(e)}).getOrThunk(Qx.uniqueId),e.setAttribute("id",t)),t},l=function(e,t){return t.constructor===RegExp?t.test(e.className):Qx.hasClass(e,t)},f=function(e){n=e},e=function(){var r,o=0,i=[],n=function(e,t,n){t=new Yx(e,t,u);i.push(t),t.on("init",function(){++o===r.length&&f(i)}),t.targetElm=t.targetElm||n,t.render()};Qx.unbind(window,"ready",e),function(e){e=a[e];if(e)e.apply(u,[])}("onpageload"),r=Ha.unique(function(t){var n=[];if(ct.browser.isIE()&&ct.browser.version.major<11)return yy("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(cS)return yy("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[];if(t.types)return eS(t.types,function(e){n=n.concat(Qx.select(e.selector))}),n;if(t.selector)return Qx.select(t.selector);if(t.target)return[t.target];switch(t.mode){case"exact":var e=t.elements||"";0<e.length&&eS(Zx(e),function(t){var e=Qx.get(t);e?n.push(e):eS(document.forms,function(e){eS(e.elements,function(e){e.name===t&&(t="mce_editor_"+nS++,Qx.setAttrib(e,"id",t),n.push(e))})})});break;case"textareas":case"specific_textareas":eS(Qx.select("textarea"),function(e){t.editor_deselector&&l(e,t.editor_deselector)||t.editor_selector&&!l(e,t.editor_selector)||n.push(e)})}return n}(a)),a.types?eS(a.types,function(t){gt.each(r,function(e){return!Qx.is(e,t.selector)||(n(c(e),tS({},a,t),e),!1)})}):(gt.each(r,function(e){(e=u.get(e.id))&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(sS(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null)}),0===(r=gt.grep(r,function(e){return!u.get(e.id)})).length?f([]):eS(r,function(e){var t;t=e,a.inline&&t.tagName.toLowerCase()in s?yy("Could not initialize inline editor on invalid inline target element",e):n(c(e),a,e)}))};return u.settings=a,Qx.bind(window,"ready",e),new mr(function(t){n?t(n):f=function(e){t(e)}})},get:function(t){return 0===arguments.length?iS.slice(0):W(t)?H(iS,function(e){return e.id===t}).getOr(null):C(t)&&iS[t]||null},add:function(e){var n=this;return oS[e.id]===e||(null===n.get(e.id)&&("length"!==e.id&&(oS[e.id]=e),oS.push(e),iS.push(e)),uS(!0),n.activeEditor=e,n.fire("AddEditor",{editor:e}),Jx||(Jx=function(e){var t=n.fire("BeforeUnload");if(t.returnValue)return e.preventDefault(),e.returnValue=t.returnValue,t.returnValue},window.addEventListener("beforeunload",Jx))),e},createEditor:function(e,t){return this.add(new Yx(e,t,this))},remove:function(e){var t,n,r=this;if(e){if(!W(e))return l(r.get((n=e).id))?null:(sS(n)&&r.fire("RemoveEditor",{editor:n}),0===iS.length&&window.removeEventListener("beforeunload",Jx),n.remove(),uS(0<iS.length),n);eS(Qx.select(e),function(e){(n=r.get(e.id))&&r.remove(n)})}else for(t=iS.length-1;0<=t;t--)r.remove(iS[t])},execCommand:function(e,t,n){var r=this.get(n);switch(e){case"mceAddEditor":return this.get(n)||new Yx(n,this.settings,this).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?(r.isHidden()?r.show():r.hide(),!0):(this.execCommand("mceAddEditor",!1,n),!0)}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,n)},triggerSave:function(){eS(iS,function(e){e.save()})},addI18n:function(e,t){iu.add(e,t)},translate:function(e){return iu.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl:function(e){this.baseURL=new Hx(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Hx(this.baseURL)}});lS.setup();var fS,dS,mS,gS,pS=Math.min,hS=Math.max,vS=Math.round,yS=function(e,t,n){var r=t.x,o=t.y,i=e.w,a=e.h,e=t.w,t=t.h,n=(n||"").split("");return"b"===n[0]&&(o+=t),"r"===n[1]&&(r+=e),"c"===n[0]&&(o+=vS(t/2)),"c"===n[1]&&(r+=vS(e/2)),"b"===n[3]&&(o-=a),"r"===n[4]&&(r-=i),"c"===n[3]&&(o-=vS(a/2)),"c"===n[4]&&(r-=vS(i/2)),bS(r,o,i,a)},bS=function(e,t,n,r){return{x:e,y:t,w:n,h:r}},n={inflate:function(e,t,n){return bS(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},relativePosition:yS,findBestRelativePosition:function(e,t,n,r){for(var o,i=0;i<r.length;i++)if((o=yS(e,t,r[i])).x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return r[i];return null},intersect:function(e,t){var n=hS(e.x,t.x),r=hS(e.y,t.y),o=pS(e.x+e.w,t.x+t.w),t=pS(e.y+e.h,t.y+t.h);return o-n<0||t-r<0?null:bS(n,r,o-n,t-r)},clamp:function(e,t,n){var r=e.x,o=e.y,i=e.x+e.w,a=e.y+e.h,u=t.x+t.w,s=t.y+t.h,e=hS(0,t.x-r),t=hS(0,t.y-o),u=hS(0,i-u),s=hS(0,a-s);return r+=e,o+=t,n&&(i+=e,a+=t,r-=u,o-=s),bS(r,o,(i-=u)-r,(a-=s)-o)},create:bS,fromClientRect:function(e){return bS(e.left,e.top,e.width,e.height)}},e=(fS={},dS={},{load:function(r,o){var i='Script at URL "'+o+'" failed to load',a='Script at URL "'+o+"\" did not call `tinymce.Resource.add('"+r+"', data)` within 1 second";if(fS[r]!==undefined)return fS[r];var e=new mr(function(e,t){var n=function(e,t,n){void 0===n&&(n=1e3);var r=!1,o=null,i=function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r||(r=!0,null!==o&&(clearTimeout(o),o=null),n.apply(null,e))}},e=i(e),a=i(t);return{start:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r||null!==o||(o=setTimeout(function(){return a.apply(null,e)},n))},resolve:e,reject:a}}(e,t);dS[r]=n.resolve,Za.ScriptLoader.loadScript(o,function(){return n.start(a)},function(){return n.reject(i)})});return fS[r]=e},add:function(e,t){dS[e]!==undefined&&(dS[e](t),delete dS[e]),fS[e]=mr.resolve(t)}}),CS=gt.each,wS=gt.extend,Ke=function(){};Ke.extend=mS=function(n){var o=this.prototype,r=function(){var e,t,n;if(!gS&&(this.init&&this.init.apply(this,arguments),t=this.Mixins))for(e=t.length;e--;)(n=t[e]).init&&n.init.apply(this,arguments)},t=function(){return this};gS=!0;var i=new this;return gS=!1,n.Mixins&&(CS(n.Mixins,function(e){for(var t in e)"init"!==t&&(n[t]=e[t])}),o.Mixins&&(n.Mixins=o.Mixins.concat(n.Mixins))),n.Methods&&CS(n.Methods.split(","),function(e){n[e]=t}),n.Properties&&CS(n.Properties.split(","),function(e){var t="_"+e;n[e]=function(e){return e!==undefined?(this[t]=e,this):this[t]}}),n.Statics&&CS(n.Statics,function(e,t){r[t]=e}),n.Defaults&&o.Defaults&&(n.Defaults=wS({},o.Defaults,n.Defaults)),ie(n,function(e,t){var n,r;"function"==typeof e&&o[t]?i[t]=(n=t,r=e,function(){var e=this._super;this._super=o[n];var t=r.apply(this,arguments);return this._super=e,t}):i[t]=e}),r.prototype=i,(r.constructor=r).extend=mS,r};var xS=Math.min,SS=Math.max,NS=Math.round,ES={serialize:function(e){e=JSON.stringify(e);return W(e)?e.replace(/[\u0080-\uFFFF]/g,function(e){e=e.charCodeAt(0).toString(16);return"\\u"+"0000".substring(e.length)+e}):e},parse:function(e){try{return JSON.parse(e)}catch(t){}}},_={callbacks:{},count:0,send:function(t){var n=this,r=Ya.DOM,o=(t.count!==undefined?t:n).count,i="tinymce_jsonp_"+o;n.callbacks[o]=function(e){r.remove(i),delete n.callbacks[o],t.callback(e)},r.add(r.doc.body,"script",{id:i,src:t.url,type:"text/javascript"}),n.count++}},kS=Ne(Ne({},o),{send:function(e){var t,n=0,r=function(){!e["async"]||4===t.readyState||1e4<n++?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,1e4<n?"TIMED_OUT":"GENERAL",t,e),t=null):Sr.setTimeout(r,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e["async"]=!1!==e["async"],e.data=e.data||"",kS.fire("beforeInitialize",{settings:e}),(t=new XMLHttpRequest).overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e["async"]),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&gt.each(e.requestheaders,function(e){t.setRequestHeader(e.key,e.value)}),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=kS.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e["async"])return r();Sr.setTimeout(r,10)}}),_S=gt.extend,We=(AS.sendRPC=function(e){return(new AS).send(e)},AS.prototype.send=function(e){var n=e.error,r=e.success,o=_S(this.settings,e);o.success=function(e,t){(e=void 0===(e=ES.parse(e))?{error:"JSON Parse error."}:e).error?n.call(o.error_scope||o.scope,e.error,t):r.call(o.success_scope||o.scope,e.result)},o.error=function(e,t){n&&n.call(o.error_scope||o.scope,e,t)},o.data=ES.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params}),o.content_type="application/json",kS.send(o)},AS);function AS(e){this.settings=_S({},e),this.count=0}var RS,TS,DS;try{var OS,BS="__storage_test__";(OS=window.localStorage).setItem(BS,BS),OS.removeItem(BS)}catch(LS){RS={},TS=[],DS={getItem:function(e){e=RS[e];return e||null},setItem:function(e,t){TS.push(e),RS[e]=String(t)},key:function(e){return TS[e]},removeItem:function(t){TS=TS.filter(function(e){return e===t}),delete RS[t]},clear:function(){TS=[],RS={}},length:0},Object.defineProperty(DS,"length",{get:function(){return TS.length},configurable:!1,enumerable:!1}),OS=DS}var PS,e={geom:{Rect:n},util:{Promise:mr,Delay:Sr,Tools:gt,VK:Sf,URI:Hx,Class:Ke,EventDispatcher:vx,Observable:o,I18n:iu,XHR:kS,JSON:ES,JSONRequest:We,JSONP:_,LocalStorage:OS,Color:function(e){var n={},u=0,s=0,c=0,t=function(e){var t;return"object"==typeof e?"r"in e?(u=e.r,s=e.g,c=e.b):"v"in e&&function(e,t,n){if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,n=parseInt(n,10)/100,t=SS(0,xS(t,1)),n=SS(0,xS(n,1)),0!==t){var e=e/60,r=n*t,o=r*(1-Math.abs(e%2-1)),t=n-r;switch(Math.floor(e)){case 0:u=r,s=o,c=0;break;case 1:u=o,s=r,c=0;break;case 2:u=0,s=r,c=o;break;case 3:u=0,s=o,c=r;break;case 4:u=o,s=0,c=r;break;case 5:u=r,s=0,c=o;break;default:u=s=c=0}u=NS(255*(u+t)),s=NS(255*(s+t)),c=NS(255*(c+t))}else u=s=c=NS(255*n)}(e.h,e.s,e.v):(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(u=parseInt(t[1],10),s=parseInt(t[2],10),c=parseInt(t[3],10)):(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(u=parseInt(t[1],16),s=parseInt(t[2],16),c=parseInt(t[3],16)):(t=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(u=parseInt(t[1]+t[1],16),s=parseInt(t[2]+t[2],16),c=parseInt(t[3]+t[3],16)),u=u<0?0:255<u?255:u,s=s<0?0:255<s?255:s,c=c<0?0:255<c?255:c,n};return e&&t(e),n.toRgb=function(){return{r:u,g:s,b:c}},n.toHsv=function(){return e=u,t=s,n=c,o=0,i=xS(e/=255,xS(t/=255,n/=255)),a=SS(e,SS(t,n)),i===a?{h:0,s:0,v:100*(o=i)}:(r=(a-i)/a,{h:NS(60*((e===i?3:n===i?1:5)-(e===i?t-n:n===i?e-t:n-e)/((o=a)-i))),s:NS(100*r),v:NS(100*o)});var e,t,n,r,o,i,a},n.toHex=function(){var e=function(e){return 1<(e=parseInt(e,10).toString(16)).length?e:"0"+e};return"#"+e(u)+e(s)+e(c)},n.parse=t,n},ImageUploader:function(n){var e=xy(),r=_y(n,e);return{upload:function(e,t){return r.upload(e,(t=void 0===t?!0:t)?ky(n):undefined)}}}},dom:{EventUtils:ui,Sizzle:ra,DomQuery:Ha,TreeWalker:kr,TextSeeker:Ou,DOMUtils:Ya,ScriptLoader:Za,RangeUtils:st,Serializer:Dv,StyleSheetLoader:Nr,ControlSelection:Ef,BookmarkManager:bf,Selection:uv,Event:ui.Event},html:{Styles:Qo,Entities:zo,Node:Xd,Schema:Go,SaxParser:em,DomParser:kv,Writer:um,Serializer:sm},Env:ct,AddOnManager:au,Annotator:yf,Formatter:Ly,UndoManager:My,EditorCommands:ax,WindowManager:dy,NotificationManager:sy,EditorObservable:Ex,Shortcuts:Lx,Editor:Yx,FocusManager:Ed,EditorManager:lS,DOM:Ya.DOM,ScriptLoader:Za.ScriptLoader,PluginManager:cy,ThemeManager:ly,IconManager:ty,Resource:e,trim:gt.trim,isArray:gt.isArray,is:gt.is,toArray:gt.toArray,makeMap:gt.makeMap,each:gt.each,map:gt.map,grep:gt.grep,inArray:gt.inArray,extend:gt.extend,create:gt.create,walk:gt.walk,createNS:gt.createNS,resolve:gt.resolve,explode:gt.explode,_addCacheSuffix:gt._addCacheSuffix,isOpera:ct.opera,isWebKit:ct.webkit,isIE:ct.ie,isGecko:ct.gecko,isMac:ct.mac},e=gt.extend(lS,e);PS=e,window.tinymce=PS,window.tinyMCE=PS,function(e){if("object"==typeof module)try{module.exports=e}catch(t){}}(e)}();